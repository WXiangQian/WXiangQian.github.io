<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç›˜ç‚¹2021å¹´PHPå¼€å‘å·¥ç¨‹å¸ˆé‡åˆ°çš„é¢è¯•é¢˜</title>
      <link href="2021/06/04/php/%E7%9B%98%E7%82%B92021%E5%B9%B4PHP%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%81%87%E5%88%B0%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
      <url>2021/06/04/php/%E7%9B%98%E7%82%B92021%E5%B9%B4PHP%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%81%87%E5%88%B0%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¥½é•¿æ—¶é—´æ²¡æœ‰å†™æŠ€æœ¯å®æˆ˜æ–‡ç« äº†ï¼Œæ˜¯å› ä¸ºæœ€è¿‘åœ¨å‡†å¤‡é¢è¯•ï¼Œåˆ†äº«ä¸€ä¸‹åœ¨2021å¹´æ‰¾å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæ²¡æœ‰å…·ä½“åˆ°å…¬å¸åï¼Œåªæœ‰ä¸ªåˆ«å…¬å¸æ‹¿åˆ°äº†offerã€‚æœ‰äº›é—®é¢˜æ¨¡ç³Šçš„æƒ³ä¸èµ·æ¥äº†ï¼Œæš‚æ—¶èƒ½æƒ³åˆ°çš„å°±è¿™äº›ã€‚</p></blockquote><p>é¢è¯•å²—ä½åŸºæœ¬éƒ½ä¸ºï¼š3-5å¹´å·¥ä½œç»éªŒï¼Œçº¯æŠ€æœ¯é—®é¢˜ã€‚</p><h2 id="æŸæˆ¿äº§ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨"><a href="#æŸæˆ¿äº§ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨" class="headerlink" title="æŸæˆ¿äº§ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨"></a>æŸæˆ¿äº§ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨</h2><h3 id="ä¸€é¢-ç”µé¢"><a href="#ä¸€é¢-ç”µé¢" class="headerlink" title="ä¸€é¢(ç”µé¢)"></a>ä¸€é¢(ç”µé¢)</h3><p>ä¸»è¦å›´ç»•mysqlç´¢å¼•ã€redisã€é¡¹ç›®äº®ç‚¹å»é—®çš„</p><h3 id="äºŒé¢-çº¿ä¸‹"><a href="#äºŒé¢-çº¿ä¸‹" class="headerlink" title="äºŒé¢(çº¿ä¸‹)"></a>äºŒé¢(çº¿ä¸‹)</h3><p>è€ƒå¯Ÿmysql explainçš„å…·ä½“æ¯ä¸€åˆ—<br>mysqlä½¿ç”¨çš„ä»€ä¹ˆç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘ç´¢å¼•ï¼ŸB+å’ŒBæ•°å’ŒäºŒå‰æ ‘çš„åŒºåˆ«<br>ä»€ä¹ˆå«ç´¢å¼•è¦†ç›–<br>ä»€ä¹ˆæƒ…å†µä¸‹å›è¡¨<br>äº‹åŠ¡çš„ACIDç‰¹æ€§<br>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«<br>redisä¸»ä»åŒæ­¥æ€ä¹ˆåšçš„<br>æ€ä¹ˆæ‰¾å‡ºå•å‘é“¾è¡¨ä¸­ï¼Œä½äºä¸­é—´çš„å…ƒç´ <br>å•é“¾è¡¨ä¸­ï¼Œå¦‚ä½•æ£€æŸ¥æ˜¯å¦æœ‰ç¯çš„æƒ…å†µï¼Ÿæ¯”å¦‚ï¼š1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;3<br>ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œé‡Œé¢æ˜¯ä»1åˆ°1000000çš„æ•´æ•°ï¼Œå™¨é‡åˆä¸€ä¸ªæ•°å­—å‡ºç°äº†ä¸¤æ¬¡ï¼Œå¦‚ä½•å¿«è¯»æ‰¾å‡ºé‚£ä¸ªé‡å¤çš„æ•°å­—ï¼Ÿ</p><h3 id="ä¸‰é¢-ç”µé¢"><a href="#ä¸‰é¢-ç”µé¢" class="headerlink" title="ä¸‰é¢(ç”µé¢)"></a>ä¸‰é¢(ç”µé¢)</h3><p>redisä¸»ä»åŒæ­¥æ€ä¹ˆåšçš„<br>redis clusterå“¨å…µæ¨¡å¼çš„äº†è§£<br>redisé˜Ÿåˆ—ä»€ä¹ˆæ—¶å€™ä¼šè·³è¡¨<br>mysql  hashç´¢å¼•ä¸b+çš„åŒºåˆ«<br>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€mvccçš„å®ç°åŸç†<br>hashè¡¨åº•å±‚ç»“æ„æ˜¯ä»€ä¹ˆ</p><h2 id="æŸPå›¾ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨"><a href="#æŸPå›¾ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨" class="headerlink" title="æŸPå›¾ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨"></a>æŸPå›¾ä¸Šå¸‚å…¬å¸å¹¿å‘Šéƒ¨é—¨</h2><h3 id="ä¸€é¢"><a href="#ä¸€é¢" class="headerlink" title="ä¸€é¢"></a>ä¸€é¢</h3><p>OSIä¸ƒå±‚æ¨¡å‹<br>array_cloumå‡½æ•°çš„è€ƒå¯Ÿ<br>mysql explainçš„ä¼˜åŒ–<br>nginxæ€ä¹ˆä¸phpçš„é€šä¿¡çš„<br>php-fpmä¸»è¿›ç¨‹kill -9æ‰ã€å­è¿›ç¨‹æ˜¯å¦èƒ½æ­£å¸¸ä½¿ç”¨<br>innodbå’Œmyisamæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>mysqlä¸»ä»çš„ç”Ÿå‘½å‘¨æœŸ<br>redisçš„äº”ä¸­ç±»å‹å®æˆ˜åœºæ™¯<br>mysqlç´¢å¼•å¤±æ•ˆçš„æ¡ä»¶<br>php7çš„æ–°ç‰¹æ€§</p><h3 id="äºŒé¢"><a href="#äºŒé¢" class="headerlink" title="äºŒé¢"></a>äºŒé¢</h3><p>è¿›ç¨‹ã€çº¿ç¨‹å’Œåç¨‹çš„åŒºåˆ«<br>ä¸€ä¸ªåŸŸåè§£æçš„ç”Ÿå‘½å‘¨æœŸ<br>ç§’æ€çš„è®¾è®¡ä¸å®ç°<br>select poll epoll åŒºåˆ«<br>åˆ†é”€çš„è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯æ€ä¹ˆå¤„ç†<br>ä¸»ä»åŒæ­¥æ˜¯æ€ä¹ˆä¿è¯æ•°æ®æ€§ä¸€è‡´çš„<br>å®ç°ä¸€ä¸ªå•é“¾è¡¨çš„åè½¬1-&gt;2-&gt;3-&gt;4-&gt;5</p><h2 id="æŸä¸Šå¸‚åœ¨çº¿æ•™è‚²å…¬å¸"><a href="#æŸä¸Šå¸‚åœ¨çº¿æ•™è‚²å…¬å¸" class="headerlink" title="æŸä¸Šå¸‚åœ¨çº¿æ•™è‚²å…¬å¸"></a>æŸä¸Šå¸‚åœ¨çº¿æ•™è‚²å…¬å¸</h2><h3 id="ä¸€é¢-ç”µé¢-1"><a href="#ä¸€é¢-ç”µé¢-1" class="headerlink" title="ä¸€é¢(ç”µé¢)"></a>ä¸€é¢(ç”µé¢)</h3><p>PHPçš„foreachå’Œforä¸¤ä¸ªå¾ªç¯ï¼Œå“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Œä¸ºä»€ä¹ˆ<br>mysql èšåˆç´¢å¼•ä»€ä¹ˆæ—¶å€™ä½¿ç”¨åˆ°<br>mysqlç´¢å¼•å¤±æ•ˆçš„æ¡ä»¶<br>rediså’Œmemacheçš„åŒºåˆ«<br>laravelä¸­åŒäº‹ç‰©æ€ä¹ˆå®ç°çš„<br>rediså»¶æ—¶é˜Ÿåˆ—<br>gitä¸¤ä¸ªåˆ†æ”¯åˆå¹¶è®©ä»–çš„çº¿åœ¨ä¸€æ¡ä¸Š<br>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€mvccçš„å®ç°åŸç†</p><h2 id="æŸCè½®æˆ¿äº§è¡Œä¸š"><a href="#æŸCè½®æˆ¿äº§è¡Œä¸š" class="headerlink" title="æŸCè½®æˆ¿äº§è¡Œä¸š"></a>æŸCè½®æˆ¿äº§è¡Œä¸š</h2><h3 id="ä¸€é¢-ç”µé¢-2"><a href="#ä¸€é¢-ç”µé¢-2" class="headerlink" title="ä¸€é¢(ç”µé¢)"></a>ä¸€é¢(ç”µé¢)</h3><p>ç§’æ€çš„è®¾è®¡ä¸å®ç°<br>ä»‹ç»è‡ªå·±é¡¹ç›®çš„äº®ç‚¹<br>Explainçš„ä¼˜åŒ–</p><h3 id="äºŒé¢-çº¿ä¸‹-1"><a href="#äºŒé¢-çº¿ä¸‹-1" class="headerlink" title="äºŒé¢(çº¿ä¸‹)"></a>äºŒé¢(çº¿ä¸‹)</h3><p>åˆ†å¸ƒå¼é”ã€ä¼šä¸ä¼šå‡ºç°æ­»é”ï¼Œæ€ä¹ˆé¿å…<br>ä¼˜æƒ åˆ¸ã€è†¨èƒ€åˆ¸åŠŸèƒ½è¡¨è®¾è®¡ä¸å®ç°é€»è¾‘<br>ç ä»·ä»¥åŠåŠ©åŠ›çš„åŠŸèƒ½è®¾è®¡ä¸å®ç°<br>åƒä¸‡çº§æ•°æ®è¡¨çš„ä¼˜åŒ–ä¸åˆ†è¡¨<br>ç»Ÿè®¡å‡ºTCPç«¯å£çŠ¶æ€æ˜¯ESTABçš„æ•°é‡<br>502æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Œè§£å†³æ–¹æ¡ˆ<br>Explainçš„ä¼˜åŒ–<br>å¦‚æœç”¨æˆ·è¡¨å·²è¾¾åˆ°1000wçš„è§„åˆ™ï¼Œä¸”æ—¥å‡å¢é•¿5wï¼Œå¦‚ä½•ä¼˜åŒ–è¯¥è¡¨<br>jwtä¸oauth2åŒºåˆ«</p><h3 id="ä¸‰é¢-ç”µé¢-1"><a href="#ä¸‰é¢-ç”µé¢-1" class="headerlink" title="ä¸‰é¢(ç”µé¢)"></a>ä¸‰é¢(ç”µé¢)</h3><p>èŠä¸€ä¸‹è‡ªå·±é¡¹ç›®æœ‰äº®ç‚¹çš„case<br>è®²è®²mysqlä¼˜åŒ–æ–¹é¢ï¼ˆä»å»ºè¡¨åˆ°å„ç§åœºæ™¯ï¼Œæ€ä¹ˆè§£å†³çš„ï¼‰<br>redisäº”ç§æ•°æ®ç±»å‹éƒ½æ˜¯åšä»€ä¹ˆçš„ï¼Œå¯¹æ¯”ä»–ä»¬çš„åŒºåˆ«ï¼Œä½¿ç”¨åœºæ™¯<br>åˆ†å¸ƒå¼é”<br>æ•°æ®åº“åˆ†è¡¨æœ‰å“ªç§æ–¹å¼<br>æ°´å¹³åˆ†è¡¨æœ‰å“ªå‡ ç§ç»´åº¦åˆ†è¡¨ï¼Œæ¯ä¸€ä¸ªçš„ä¼˜ç‚¹å’Œç¼ºç‚¹<br>å¦‚ä½•å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹æ˜¯å¦ä¸€æ ·</p><h2 id="æŸä¿å§†è¡Œä¸š"><a href="#æŸä¿å§†è¡Œä¸š" class="headerlink" title="æŸä¿å§†è¡Œä¸š"></a>æŸä¿å§†è¡Œä¸š</h2><h3 id="ä¸€é¢-1"><a href="#ä¸€é¢-1" class="headerlink" title="ä¸€é¢"></a>ä¸€é¢</h3><p>è®¾è®¡ä¸€ä¸ªç™»å½•ç³»ç»Ÿ(ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ã€å°è£…çš„ç±»)<br>502æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Œè§£å†³æ–¹æ¡ˆ<br>ä¸€ä¸ª500wè¡Œçš„æ–‡ä»¶ï¼Œæ¯è¡Œæ˜¯ä¸€ä¸ªurlï¼Œè¯»å–urlå†…å®¹æ‰¾åˆ°æ‰€æœ‰aæ ‡ç­¾é‡Œé¢çš„hrefå†…å®¹ï¼Œå¹¶å­˜åˆ°åº“é‡Œã€‚å†™ä¸€ä¸‹æ•´ä¸ªæµç¨‹<br>çŸ­é“¾æ¥çš„å®ç°æ–¹æ³•ä¸è®¾è®¡<br>æ—¥å¸¸ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ä»¥åŠåœºæ™¯<br>Explainçš„ä¼˜åŒ–<br>https sslçš„å·¥ä½œæµç¨‹</p><h3 id="äºŒé¢-1"><a href="#äºŒé¢-1" class="headerlink" title="äºŒé¢"></a>äºŒé¢</h3><p>traitç±»çš„ä½œç”¨ä»¥åŠæ˜¯å¹²ä»€ä¹ˆçš„<br>å•å…ƒæµ‹è¯•<br>å¤§å¤šæ•°èŠçš„éƒ½æ˜¯ä¸šåŠ¡åœºæ™¯<br>å¦‚ä½•å¼€å‘çš„composeråŒ…ï¼Œæµç¨‹è¯´ä¸€ä¸‹<br>Explainçš„ä¼˜åŒ–</p><h2 id="å‚è€ƒç­”æ¡ˆ"><a href="#å‚è€ƒç­”æ¡ˆ" class="headerlink" title="å‚è€ƒç­”æ¡ˆ"></a>å‚è€ƒç­”æ¡ˆ</h2><p>å¤§éƒ¨åˆ†é—®é¢˜å¯ä»¥è‡ªè¡Œç™¾åº¦å»å­¦ä¹ ï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾ç­”æ¡ˆäº†<br><a href="https://wxiangqian.blog.csdn.net/">ä¸ªäººçš„åšå®¢æ–‡ç« </a><br><a href="https://www.kancloud.cn/martist/phper-will-get-bat-tmd-offer-in-2021">PHPeré¢è¯•2021</a><br><a href="https://www.kancloud.cn/@martist">martistçš„çœ‹äº‘åœ°å€</a></p><blockquote><p>martistæ˜¯æˆ‘å·¥ä½œä¸­çš„é¢†å¯¼ï¼Œç”Ÿæ´»ä¸­çš„å“¥å“¥ï¼Œç»™äºˆäº†æˆ‘å¾ˆå¤šå¸®åŠ©ä¸é¼“åŠ±ï¼Œmartistç›®å‰åœ¨ç™¾åº¦å·¥ä½œï¼Œæœ‰éœ€è¦å†…æ¨çš„å¯ä»¥csdnç§ä¿¡æˆ‘ï¼Œå¸®ä½ ä»¬ç‰µçº¿</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹centosé…ç½®ç½‘å¡ipåœ°å€ã€ç½‘å…³ã€DNSä¿¡æ¯</title>
      <link href="2021/05/26/linux/Linux%E4%B8%8Bcentos%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1ip%E5%9C%B0%E5%9D%80%E3%80%81%E7%BD%91%E5%85%B3%E3%80%81DNS%E4%BF%A1%E6%81%AF/"/>
      <url>2021/05/26/linux/Linux%E4%B8%8Bcentos%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1ip%E5%9C%B0%E5%9D%80%E3%80%81%E7%BD%91%E5%85%B3%E3%80%81DNS%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="æŸ¥çœ‹ç½‘å¡ä¿¡æ¯"><a href="#æŸ¥çœ‹ç½‘å¡ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç½‘å¡ä¿¡æ¯"></a>æŸ¥çœ‹ç½‘å¡ä¿¡æ¯</h3><pre><code>ifconfig</code></pre><p><img src="https://img-blog.csdnimg.cn/20210413143030577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><blockquote><p>ipåœ°å€ä¸ºï¼š192.168.18.200ï¼Œç½‘å…³ä¸ºï¼š255.255.255.0</p></blockquote><h3 id="ä¿®æ”¹ç½‘å¡ä¿¡æ¯"><a href="#ä¿®æ”¹ç½‘å¡ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹ç½‘å¡ä¿¡æ¯"></a>ä¿®æ”¹ç½‘å¡ä¿¡æ¯</h3><p>åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•ä¸‹</p><pre><code>cd  /etc/sysconfig/network-scripts/</code></pre><p><code>ls</code>å¯»æ‰¾è‡ªå·±çš„ç½‘å¡ä¿¡æ¯ï¼Œå› <code>ifconfig</code>çœ‹åˆ°çš„æ˜¯enp5s0ï¼Œåˆ™å»<code>vi</code>æ‰“å¼€å»ä¿®æ”¹</p><pre><code>vi ifcfg-enp5s0</code></pre><p><img src="https://img-blog.csdnimg.cn/20210413140145434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="è¯¦è§£enp5s0çš„å†…å®¹"><a href="#è¯¦è§£enp5s0çš„å†…å®¹" class="headerlink" title="è¯¦è§£enp5s0çš„å†…å®¹"></a>è¯¦è§£enp5s0çš„å†…å®¹</h3><p><img src="https://img-blog.csdnimg.cn/20210413140453984.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><pre><code>DEVICE=enp5s0 #æè¿°ç½‘å¡å¯¹åº”çš„è®¾å¤‡åˆ«åï¼Œä¾‹å¦‚ifcfg-enp5s0çš„æ–‡ä»¶ä¸­å®ƒä¸ºenp5s0BOOTPROTO=static #è®¾ç½®ç½‘å¡è·å¾—ipåœ°å€çš„æ–¹å¼ï¼Œå¯èƒ½çš„é€‰é¡¹ä¸ºstaticï¼Œdhcpæˆ–bootpï¼Œåˆ†åˆ«å¯¹åº”é™æ€æŒ‡å®šçš„ ipåœ°å€ï¼Œé€šè¿‡dhcpåè®®è·å¾—çš„ipåœ°å€ï¼Œé€šè¿‡bootpåè®®è·å¾—çš„ipåœ°å€IPADDR=192.168.18.200 #å¦‚æœè®¾ç½®ç½‘å¡è·å¾— ipåœ°å€çš„æ–¹å¼ä¸ºé™æ€æŒ‡å®šï¼Œæ­¤å­—æ®µå°±æŒ‡å®šäº†ç½‘å¡å¯¹åº”çš„ipåœ°å€NETMASK=255.255.255.0 #ç½‘å¡å¯¹åº”çš„ç½‘ç»œæ©ç GATEWAY=192.168.18.1#ç½‘å¡å¯¹åº”çš„ç½‘ç»œåœ°å€IPV6INIT=yesIPV6_AUTOCONF=yesONBOOT=yes #ç³»ç»Ÿå¯åŠ¨æ—¶æ˜¯å¦è®¾ç½®æ­¤ç½‘ç»œæ¥å£ï¼Œè®¾ç½®ä¸ºyesæ—¶ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶æ¿€æ´»æ­¤è®¾å¤‡</code></pre><h3 id="é‡å¯ç½‘ç»œæœåŠ¡"><a href="#é‡å¯ç½‘ç»œæœåŠ¡" class="headerlink" title="é‡å¯ç½‘ç»œæœåŠ¡"></a>é‡å¯ç½‘ç»œæœåŠ¡</h3><p>ä½¿ç”¨service network restartå‘½ä»¤ï¼Œé‡å¯ç½‘ç»œæœåŠ¡ã€‚</p><pre><code>service network restart</code></pre><h3 id="ä¿®æ”¹DNSé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹DNSé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹DNSé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹DNSé…ç½®æ–‡ä»¶</h3><pre><code>vi /etc/resolv.conf</code></pre><p>æ·»åŠ ä»¥ä¸‹ä¿¡æ¯</p><pre><code>nameserver 114.114.114.114</code></pre><blockquote><p> 114.114.114.114æ˜¯å›½å†…ç§»åŠ¨ã€ç”µä¿¡å’Œè”é€šé€šç”¨çš„DNSï¼Œæ‰‹æœºå’Œç”µè„‘ç«¯éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¹²å‡€æ— å¹¿å‘Šï¼Œè§£ææˆåŠŸç‡ç›¸å¯¹æ¥è¯´æ›´é«˜ï¼Œå›½å†…ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒå¤šï¼Œè€Œä¸”é€Ÿåº¦ç›¸å¯¹å¿«ã€ç¨³å®šï¼Œæ˜¯å›½å†…ç”¨æˆ·ä¸Šç½‘å¸¸ç”¨çš„DNS.</p></blockquote><p>ä¿®æ”¹åå¯å³æ—¶ç”Ÿæ•ˆ</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ä½¿ç”¨hhxsv5/laravel-sçš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—</title>
      <link href="2021/01/05/laravel/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8hhxsv5-laravel-s%E7%9A%84%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/"/>
      <url>2021/01/05/laravel/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8hhxsv5-laravel-s%E7%9A%84%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…<code>hhxsv5/laravel-s</code>ï¼Œå¯ä»¥è·³è½¬å»å®‰è£…<br><a href="https://wxiangqian.blog.csdn.net/article/details/110532521">laravelä¸‹å®‰è£…laravelsä»¥åŠwebsocketçš„ä½¿ç”¨</a></p><blockquote><p>æ­¤ç‰¹æ€§ä¾èµ–Swooleçš„AsyncTaskï¼Œå¿…é¡»å…ˆè®¾ç½®config/laravels.phpçš„<code>swoole.task_worker_num</code>ã€‚å¼‚æ­¥ä»»åŠ¡çš„å¤„ç†èƒ½åŠ›å—Taskè¿›ç¨‹æ•°å½±å“ï¼Œéœ€åˆç†è®¾ç½®<a href="https://wiki.swoole.com/#/server/setting?id=task_worker_num">task_worker_num</a>ã€‚</p></blockquote><h3 id="åˆ›å»ºä»»åŠ¡ç±»"><a href="#åˆ›å»ºä»»åŠ¡ç±»" class="headerlink" title="åˆ›å»ºä»»åŠ¡ç±»"></a>åˆ›å»ºä»»åŠ¡ç±»</h3><pre><code>&lt;?php/** * Created by PhpStorm. * User: wxiangqian */namespace App\Tasks;use Hhxsv5\LaravelS\Swoole\Task\Task;use Illuminate\Support\Facades\Log;class TestTask extends Task{    private $data;    private $result;    public function __construct($data)    {        $this-&gt;data = $data;    }    // å¤„ç†ä»»åŠ¡çš„é€»è¾‘ï¼Œè¿è¡Œåœ¨Taskè¿›ç¨‹ä¸­ï¼Œä¸èƒ½æŠ•é€’ä»»åŠ¡    public function handle()    {        Log::info(__CLASS__ . ':handle start', [$this-&gt;data]);        sleep(2);// æ¨¡æ‹Ÿä¸€äº›æ…¢é€Ÿçš„äº‹ä»¶å¤„ç†        // æ­¤å¤„æŠ›å‡ºçš„å¼‚å¸¸ä¼šè¢«ä¸Šå±‚æ•è·å¹¶è®°å½•åˆ°Swooleæ—¥å¿—ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨try/catch        $this-&gt;result = 'the result of ' . $this-&gt;data;    }    // å¯é€‰çš„ï¼Œå®Œæˆäº‹ä»¶ï¼Œä»»åŠ¡å¤„ç†å®Œåçš„é€»è¾‘ï¼Œè¿è¡Œåœ¨Workerè¿›ç¨‹ä¸­ï¼Œå¯ä»¥æŠ•é€’ä»»åŠ¡    public function finish()    {        \Log::info(__CLASS__ . ':finish start', [$this-&gt;result]);        Task::deliver(new TestTask2('task2')); // æŠ•é€’å…¶ä»–ä»»åŠ¡    }}</code></pre><h3 id="æŠ•é€’ä»»åŠ¡"><a href="#æŠ•é€’ä»»åŠ¡" class="headerlink" title="æŠ•é€’ä»»åŠ¡"></a>æŠ•é€’ä»»åŠ¡</h3><pre class=" language-lang-php"><code class="language-lang-php">// å®ä¾‹åŒ–TestTaskå¹¶é€šè¿‡deliveræŠ•é€’ï¼Œæ­¤æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼ŒæŠ•é€’åç«‹å³è¿”å›ï¼Œç”±Taskè¿›ç¨‹ç»§ç»­å¤„ç†TestTaskä¸­çš„handleé€»è¾‘use Hhxsv5\LaravelS\Swoole\Task\Task;$task = new TestTask('task data');// $task->delay(3); // å»¶è¿Ÿ3ç§’æŠ•é€’ä»»åŠ¡// $task->setTries(3); // å‡ºç°å¼‚å¸¸æ—¶ï¼Œç´¯è®¡å°è¯•3æ¬¡$ret = Task::deliver($task);var_dump($ret);// åˆ¤æ–­æ˜¯å¦æŠ•é€’æˆåŠŸ</code></pre><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><p>æŠ¥é”™ï¼šClass swoole does not exist</p><ul><li>åœ¨LaravelSä¸­ï¼ŒSwooleæ˜¯ä»¥cliæ¨¡å¼å¯åŠ¨çš„Http Serverï¼Œæ›¿ä»£äº†FPMã€‚</li><li>æŠ•é€’ä»»åŠ¡ã€è§¦å‘å¼‚æ­¥äº‹ä»¶éƒ½ä¼šè°ƒç”¨app(â€˜swooleâ€™)ï¼Œä»Laravelå®¹å™¨ä¸­è·å–Swoole\http\serverå®ä¾‹ã€‚åªæœ‰åœ¨LaravelSå¯åŠ¨æ—¶ï¼Œæ‰ä¼šæ³¨å…¥è¿™ä¸ªå®ä¾‹åˆ°å®¹å™¨ä¸­ã€‚</li><li>æ‰€ä»¥ï¼Œä¸€æ—¦è„±ç¦»LaravelSï¼Œç”±äºè·¨è¿›ç¨‹ï¼Œä»¥ä¸‹æƒ…å†µï¼Œä½ å°†æ— æ³•æˆåŠŸè°ƒç”¨app(â€˜swooleâ€™)ï¼š<ul><li>ä»¥å„ç§å‘½ä»¤è¡Œæ–¹å¼è¿è¡Œçš„ä»£ç ï¼Œä¾‹å¦‚Artisanå‘½ä»¤è¡Œã€PHPè„šæœ¬å‘½ä»¤è¡Œï¼›</li><li>è¿è¡Œåœ¨FPM/Apache PHP Moduleä¸‹çš„ä»£ç ï¼ŒæŸ¥çœ‹SAPI Log::info(â€˜PHP SAPIâ€™, [php_sapi_name()]);ã€‚</li></ul></li></ul><blockquote><p>ps: åº”é€šè¿‡websocketè¿æ¥çš„å½¢å¼å»æŠ•é€’ä»»åŠ¡</p></blockquote><p>websocketçš„ä½¿ç”¨è·³è½¬ä¸Šç¯‡æ–‡ç« ï¼š<a href="https://wxiangqian.blog.csdn.net/article/details/110532521">laravelä¸‹å®‰è£…laravelsä»¥åŠwebsocketçš„ä½¿ç”¨</a><br>ä¿®æ”¹onMessageä¸­çš„ä»£ç å³å¯æµ‹è¯•</p><pre class=" language-lang-php"><code class="language-lang-php">public function onMessage(Server $server, Frame $frame){     $task = new TestTask('task data');      // $task->delay(3); // å»¶è¿Ÿ3ç§’æŠ•é€’ä»»åŠ¡      // $task->setTries(3); // å‡ºç°å¼‚å¸¸      $ret = Task::deliver($task);      $server->push($frame->fd, $ret);}</code></pre><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>å¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åŠ©å¤§å®¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ã€‚ğŸ‘</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel/telescopeæœ›è¿œé•œåœ¨laravel6ä¸‹å®‰è£…ä»¥åŠä½¿ç”¨</title>
      <link href="2020/12/17/laravel/laravel-telescope%E6%9C%9B%E8%BF%9C%E9%95%9C%E5%9C%A8laravel6%E4%B8%8B%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
      <url>2020/12/17/laravel/laravel-telescope%E6%9C%9B%E8%BF%9C%E9%95%9C%E5%9C%A8laravel6%E4%B8%8B%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><blockquote><p><a href="https://github.com/laravel/telescope">Telescope</a> æ˜¯ä¸€ä¸ªéå¸¸ä¼˜é›…çš„è°ƒè¯•åŠ©æ‰‹ï¼Œæä¾›äº†éå¸¸ä¸°å¯Œçš„ Debug åŠŸèƒ½ï¼Œç»™å¼€å‘åŠè°ƒè¯•å¸¦æ¥äº†æå¤§çš„æ–¹ä¾¿ï¼Œå¦‚æœä½ ä¸€ç›´ä½¿ç”¨ Clockwork æˆ–è€… Laravel Debugbar è¿›è¡Œé¡¹ç›®çš„è°ƒè¯•ï¼Œé‚£ä¹ˆç°åœ¨åˆå¤šäº†ä¸€ä¸ªæ–°çš„é€‰æ‹©ã€‚ä¸è¿‡ç›®å‰çœ‹æ¥æ‰©å±•åŒ…åº”è¯¥åªæ”¯æŒ Laravel 5.7 åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬åœ¨ä¸€ä¸ª 5.7 çš„é¡¹ç›®ä¸­å¿«é€Ÿå®‰è£…æµ‹è¯•ä¸€ä¸‹ã€‚</p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ç›®å‰æ‰©å±•åŒ…è¦æ±‚ Laravel çš„ç‰ˆæœ¬å¤§äº ~<code>5.7.7</code>æ‰€ä»¥å¯ä»¥ä½¿ç”¨ composer update æ›´æ–°æ›´æ–°ä¸€ä¸‹ä½ çš„ç‰ˆæœ¬ï¼Œæˆ‘å½“å‰ä½¿ç”¨çš„ Laravel æ˜¯ <code>6.18.10</code>ã€‚</p><pre><code>composer require laravel/telescope</code></pre><blockquote><p>ps: å¦‚æœä½ ä½¿ç”¨çš„laravelç‰ˆæœ¬æ˜¯8ä»¥ä¸‹ï¼Œåˆ™ä¼šæç¤ºæ¡†æ¶ç‰ˆæœ¬è¿‡ä½<br><img src="https://img-blog.csdnimg.cn/20201210143053648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="å®‰è£…"></p></blockquote><p>å»ºè®®å»<a href="https://packagist.org/packages/laravel/telescope">packagist.org</a>å»å¯»æ‰¾é€‚åˆè‡ªå·±ç‰ˆæœ¬çš„åŒ…ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘é€‰ç”¨çš„æ˜¯<code>v3.5.1</code></p><pre><code> composer require laravel/telescope:v3.5.1</code></pre><h2 id="æ‰§è¡Œæ‰©å±•åŒ…çš„å®‰è£…å‘½ä»¤"><a href="#æ‰§è¡Œæ‰©å±•åŒ…çš„å®‰è£…å‘½ä»¤" class="headerlink" title="æ‰§è¡Œæ‰©å±•åŒ…çš„å®‰è£…å‘½ä»¤"></a>æ‰§è¡Œæ‰©å±•åŒ…çš„å®‰è£…å‘½ä»¤</h2><pre><code>php artisan telescope:install</code></pre><pre><code>php artisan migrate</code></pre><p><img src="https://img-blog.csdnimg.cn/20201210143449374.png" alt="æ‰§è¡Œæ‰©å±•åŒ…çš„å®‰è£…å‘½ä»¤"><br>è¿™æ—¶å€™å¯ä»¥çœ‹åˆ°æ–°å¢äº†3ä¸ªæ•°æ®åº“<br><img src="https://img-blog.csdnimg.cn/20201210143543766.png" alt="mysqlè¡¨"></p><h2 id="è®¿é—®"><a href="#è®¿é—®" class="headerlink" title="è®¿é—®"></a>è®¿é—®</h2><p>ç›´æ¥è®¿é—® <code>åŸŸå/telescope</code>å°±å¯ä»¥çœ‹åˆ° Telescope çš„ç•Œé¢äº†ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20201210143750366.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="Telescopeç•Œé¢"><br>å› é¡¹ç›®åœ¨æœ¬åœ°ç¯å¢ƒè·‘ï¼Œ <code>APP_ENV=local</code>ï¼Œç”¨æˆ·å¯ä»¥éšä¾¿è®¿é—®è¿™ä¸ªç•Œé¢</p><h2 id="æ¸…ç†æ•°æ®"><a href="#æ¸…ç†æ•°æ®" class="headerlink" title="æ¸…ç†æ•°æ®"></a>æ¸…ç†æ•°æ®</h2><p>å¦‚æœæ²¡æœ‰æ¸…ç†çš„è¯ï¼Œtelescope_entries  è¡¨ä¼šè¿…é€Ÿç´¯ç§¯è®°å½•ã€‚è¦ç¼“è§£è¿™ä¸€ç°çŠ¶ï¼Œéœ€è¦é€šè¿‡è°ƒåº¦ä»»åŠ¡æ¯å¤©è¿è¡Œ Artisan å‘½ä»¤ telescope:prune æ¥æ¸…ç†è€æ•°æ®ï¼š</p><pre><code>$schedule-&gt;command('telescope:prune')-&gt;daily();</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ 24 å°æ—¶ä¹‹å‰çš„æ•°æ®éƒ½ä¼šè¢«æ¸…ç†ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œä¸Šè¿°å‘½ä»¤çš„æ—¶å€™ä½¿ç”¨ hours é€‰é¡¹æ¥å†³å®šè¦ä¿å­˜å¤šé•¿æ—¶é—´ä»¥å†…çš„ Telescope æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªå‘½ä»¤å°†ä¼šåˆ é™¤æ‰€æœ‰ 48 å°æ—¶ä»¥å‰åˆ›å»ºçš„æ•°æ®ï¼š</p><pre><code>$schedule-&gt;command('telescope:prune --hours=48')-&gt;daily();</code></pre><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>æ›´å¤šæŠ€å·§å¯ä»¥æŸ¥çœ‹<a href="https://laravel.com/docs/6.x/telescope">å®˜æ–¹æ–‡æ¡£</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravelä¸‹å®‰è£…laravelsä»¥åŠwebsocketçš„ä½¿ç”¨</title>
      <link href="2020/12/10/laravel/laravel%E4%B8%8B%E5%AE%89%E8%A3%85laravels%E4%BB%A5%E5%8F%8Awebsocket%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>2020/12/10/laravel/laravel%E4%B8%8B%E5%AE%89%E8%A3%85laravels%E4%BB%A5%E5%8F%8Awebsocket%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>laravelä¸‹å®‰è£…laravelsä»¥åŠwebsocketçš„ä½¿ç”¨</p><blockquote><p>ğŸš€ LaravelS æ˜¯ Swoole å’Œ Laravel/Lumen ä¹‹é—´å¼€ç®±å³ç”¨çš„é€‚é…å™¨ã€‚</p></blockquote><h2 id="ç¯å¢ƒè¦æ±‚"><a href="#ç¯å¢ƒè¦æ±‚" class="headerlink" title="ç¯å¢ƒè¦æ±‚"></a>ç¯å¢ƒè¦æ±‚</h2><div class="table-container"><table><thead><tr><th>ä¾èµ–</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><a href="https://secure.php.net/manual/zh/install.php">PHP</a></td><td><code>&gt;= 5.5.9</code> <code>æ¨èPHP7+</code></td></tr><tr><td><a href="https://www.swoole.com/">Swoole</a></td><td><code>&gt;= 1.7.19</code> <code>ä»2.0.12å¼€å§‹ä¸å†æ”¯æŒPHP5</code> <code>æ¨è4.2.3+</code></td></tr><tr><td><a href="https://laravel.com/">Laravel</a>/<a href="https://lumen.laravel.com/">Lumen</a></td><td><code>&gt;= 5.1</code> <code>æ¨è5.6+</code></td></tr></tbody></table></div><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>1.é€šè¿‡<a href="https://getcomposer.org/">Composer</a>å®‰è£…(<a href="https://packagist.org/packages/hhxsv5/laravel-s">packagist</a>)ã€‚æœ‰å¯èƒ½æ‰¾ä¸åˆ°<code>3.0</code>ç‰ˆæœ¬ï¼Œè§£å†³æ–¹æ¡ˆç§»æ­¥<a href="https://github.com/hhxsv5/laravel-s/issues/81">#81</a>ã€‚</p><pre class=" language-lang-bash"><code class="language-lang-bash">composer require "hhxsv5/laravel-s:~3.7.0" -vvv# ç¡®ä¿ä½ çš„composer.lockæ–‡ä»¶æ˜¯åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­</code></pre><p>2.æ³¨å†ŒService Providerï¼ˆä»¥ä¸‹ä¸¤æ­¥äºŒé€‰ä¸€ï¼‰ã€‚</p><ul><li><p><code>Laravel</code>: ä¿®æ”¹æ–‡ä»¶<code>config/app.php</code>ï¼Œ<code>Laravel 5.5+æ”¯æŒåŒ…è‡ªåŠ¨å‘ç°ï¼Œä½ åº”è¯¥è·³è¿‡è¿™æ­¥</code></p><pre class=" language-lang-php"><code class="language-lang-php">  'providers' => [      //...      Hhxsv5\LaravelS\Illuminate\LaravelSServiceProvider::class,  ],</code></pre></li><li><p><code>Lumen</code>: ä¿®æ”¹æ–‡ä»¶<code>bootstrap/app.php</code></p><pre class=" language-lang-php"><code class="language-lang-php">  $app->register(Hhxsv5\LaravelS\Illuminate\LaravelSServiceProvider::class);</code></pre></li></ul><p>3.å‘å¸ƒé…ç½®å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><blockquote><p><em>æ¯æ¬¡å‡çº§LaravelSåï¼Œéœ€é‡æ–°publishï¼›ç‚¹å‡»<a href="https://github.com/hhxsv5/laravel-s/releases">Release</a>å»äº†è§£å„ä¸ªç‰ˆæœ¬çš„å˜æ›´è®°å½•ã€‚</em></p><pre class=" language-lang-bash"><code class="language-lang-bash">php artisan laravels publish# é…ç½®æ–‡ä»¶ï¼šconfig/laravels.php# äºŒè¿›åˆ¶æ–‡ä»¶ï¼šbin/laravels bin/fswatch bin/inotify</code></pre></blockquote><p>4.ä¿®æ”¹é…ç½®<code>config/laravels.php</code>ï¼šç›‘å¬çš„IPã€ç«¯å£ç­‰ï¼Œè¯·å‚è€ƒ<a href="https://github.com/hhxsv5/laravel-s/blob/master/Settings-CN.md">é…ç½®é¡¹</a>ã€‚</p><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><blockquote><p><code>åœ¨è¿è¡Œä¹‹å‰ï¼Œè¯·å…ˆä»”ç»†é˜…è¯»ï¼š</code><a href="https://github.com/hhxsv5/laravel-s/blob/master/README-CN.md#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">æ³¨æ„äº‹é¡¹</a>(è¿™éå¸¸é‡è¦)ã€‚</p></blockquote><ul><li>æ“ä½œå‘½ä»¤ï¼š<code>php bin/laravels {start|stop|restart|reload|info|help}</code>ã€‚</li></ul><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>start</td><td>å¯åŠ¨LaravelSï¼Œå±•ç¤ºå·²å¯åŠ¨çš„è¿›ç¨‹åˆ—è¡¨ â€œ<em>ps -ef|grep laravels</em>â€œ</td></tr><tr><td>stop</td><td>åœæ­¢LaravelSï¼Œå¹¶è§¦å‘è‡ªå®šä¹‰è¿›ç¨‹çš„<code>onStop</code>æ–¹æ³•</td></tr><tr><td>restart</td><td>é‡å¯LaravelSï¼šå…ˆå¹³æ»‘<code>Stop</code>ï¼Œç„¶åå†<code>Start</code>ï¼›åœ¨<code>Start</code>å®Œæˆä¹‹å‰ï¼ŒæœåŠ¡æ˜¯<code>ä¸å¯ç”¨çš„</code></td></tr><tr><td>reload</td><td>å¹³æ»‘é‡å¯æ‰€æœ‰Task/Worker/Timerè¿›ç¨‹(è¿™äº›è¿›ç¨‹å†…åŒ…å«äº†ä½ çš„ä¸šåŠ¡ä»£ç )ï¼Œå¹¶è§¦å‘è‡ªå®šä¹‰è¿›ç¨‹çš„<code>onReload</code>æ–¹æ³•ï¼Œä¸ä¼šé‡å¯Master/Mangerè¿›ç¨‹ï¼›ä¿®æ”¹<code>config/laravels.php</code>åï¼Œä½ <code>åªæœ‰</code>è°ƒç”¨<code>restart</code>æ¥å®Œæˆé‡å¯</td></tr><tr><td>info</td><td>æ˜¾ç¤ºç»„ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯</td></tr><tr><td>help</td><td>æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</td></tr></tbody></table></div><ul><li>å¯åŠ¨é€‰é¡¹ï¼Œé’ˆå¯¹<code>start</code>å’Œ<code>restart</code>å‘½ä»¤ã€‚</li></ul><div class="table-container"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-d|â€”daemonize</td><td>ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œæ­¤é€‰é¡¹å°†è¦†ç›–<code>laravels.php</code>ä¸­<code>swoole.daemonize</code>è®¾ç½®</td></tr><tr><td>-e|â€”env</td><td>æŒ‡å®šè¿è¡Œçš„ç¯å¢ƒï¼Œå¦‚<code>--env=testing</code>å°†ä¼šä¼˜å…ˆä½¿ç”¨é…ç½®æ–‡ä»¶<code>.env.testing</code>ï¼Œè¿™ä¸ªç‰¹æ€§è¦æ±‚<code>Laravel 5.2+</code></td></tr><tr><td>-i|â€”ignore</td><td>å¿½ç•¥æ£€æŸ¥Masterè¿›ç¨‹çš„PIDæ–‡ä»¶</td></tr><tr><td>-x|â€”x-version</td><td>è®°å½•å½“å‰å·¥ç¨‹çš„ç‰ˆæœ¬å·(åˆ†æ”¯)ï¼Œä¿å­˜åœ¨<code>$_ENV</code>/<code>$_SERVER</code>ä¸­ï¼Œè®¿é—®æ–¹å¼ï¼š<code>$_ENV['X_VERSION']</code> <code>$_SERVER['X_VERSION']</code> <code>$request-&gt;server-&gt;get('X_VERSION')</code></td></tr></tbody></table></div><ul><li><code>è¿è¡Œæ—¶</code>æ–‡ä»¶ï¼š<code>start</code>æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ<code>php artisan laravels config</code>å¹¶ç”Ÿæˆè¿™äº›æ–‡ä»¶ï¼Œå¼€å‘è€…ä¸€èˆ¬ä¸éœ€è¦å…³æ³¨å®ƒä»¬ï¼Œå»ºè®®å°†å®ƒä»¬åŠ åˆ°<code>.gitignore</code>ä¸­ã€‚</li></ul><div class="table-container"><table><thead><tr><th>æ–‡ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>storage/laravels.conf</td><td>LaravelSçš„<code>è¿è¡Œæ—¶</code>é…ç½®æ–‡ä»¶</td></tr><tr><td>storage/laravels.pid</td><td>Masterè¿›ç¨‹çš„PIDæ–‡ä»¶</td></tr><tr><td>storage/laravels-timer-process.pid</td><td>å®šæ—¶å™¨Timerè¿›ç¨‹çš„PIDæ–‡ä»¶</td></tr><tr><td>storage/laravels-custom-processes.pid</td><td>æ‰€æœ‰è‡ªå®šä¹‰è¿›ç¨‹çš„PIDæ–‡ä»¶</td></tr></tbody></table></div><h2 id="ä¸Nginxé…åˆä½¿ç”¨ï¼ˆæ¨èï¼‰"><a href="#ä¸Nginxé…åˆä½¿ç”¨ï¼ˆæ¨èï¼‰" class="headerlink" title="ä¸Nginxé…åˆä½¿ç”¨ï¼ˆæ¨èï¼‰"></a>ä¸Nginxé…åˆä½¿ç”¨ï¼ˆæ¨èï¼‰</h2><pre class=" language-lang-nginx"><code class="language-lang-nginx">gzip on;gzip_min_length 1024;gzip_comp_level 2;gzip_types text/plain text/css text/javascript application/json application/javascript application/x-javascript application/xml application/x-httpd-php image/jpeg image/gif image/png font/ttf font/otf image/svg+xml;gzip_vary on;gzip_disable "msie6";upstream swoole {    # é€šè¿‡ IP:Port è¿æ¥    server 127.0.0.1:5200 weight=5 max_fails=3 fail_timeout=30s;    # é€šè¿‡ UnixSocket Stream è¿æ¥ï¼Œå°è¯€çªï¼šå°†socketæ–‡ä»¶æ”¾åœ¨/dev/shmç›®å½•ä¸‹ï¼Œå¯è·å¾—æ›´å¥½çš„æ€§èƒ½    #server unix:/yourpath/laravel-s-test/storage/laravels.sock weight=5 max_fails=3 fail_timeout=30s;    #server 192.168.1.1:5200 weight=3 max_fails=3 fail_timeout=30s;    #server 192.168.1.2:5200 backup;    keepalive 16;}server {    listen 80;    # åˆ«å¿˜äº†ç»‘Host    server_name laravels.com;    root /yourpath/laravel-s-test/public;    access_log /yourpath/log/nginx/$server_name.access.log  main;    autoindex off;    index index.html index.htm;    # Nginxå¤„ç†é™æ€èµ„æº(å»ºè®®å¼€å¯gzip)ï¼ŒLaravelSå¤„ç†åŠ¨æ€èµ„æºã€‚    location / {        try_files $uri @laravels;    }    # å½“è¯·æ±‚PHPæ–‡ä»¶æ—¶ç›´æ¥å“åº”404ï¼Œé˜²æ­¢æš´éœ²public/*.php    #location ~* \.php$ {    #    return 404;    #}    location @laravels {        # proxy_connect_timeout 60s;        # proxy_send_timeout 60s;        # proxy_read_timeout 120s;        proxy_http_version 1.1;        proxy_set_header Connection "";        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Real-PORT $remote_port;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header Host $http_host;        proxy_set_header Scheme $scheme;        proxy_set_header Server-Protocol $server_protocol;        proxy_set_header Server-Name $server_name;        proxy_set_header Server-Addr $server_addr;        proxy_set_header Server-Port $server_port;        # â€œswooleâ€æ˜¯æŒ‡upstream        proxy_pass http://swoole;    }}</code></pre><h2 id="å¯ç”¨WebSocketæœåŠ¡å™¨"><a href="#å¯ç”¨WebSocketæœåŠ¡å™¨" class="headerlink" title="å¯ç”¨WebSocketæœåŠ¡å™¨"></a>å¯ç”¨WebSocketæœåŠ¡å™¨</h2><blockquote><p>WebSocketæœåŠ¡å™¨ç›‘å¬çš„IPå’Œç«¯å£ä¸HttpæœåŠ¡å™¨ç›¸åŒã€‚</p></blockquote><p>1.åˆ›å»ºWebSocket Handlerç±»ï¼Œå¹¶å®ç°æ¥å£<code>WebSocketHandlerInterface</code>ã€‚startæ—¶ä¼šè‡ªåŠ¨å®ä¾‹åŒ–ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºå®ä¾‹ã€‚</p><pre class=" language-lang-php"><code class="language-lang-php"><?php/** * Created by PhpStorm. * User: wxiangqian * Date: 2020-10-28 * Time: 15:23 */namespace App\Services;use Hhxsv5\LaravelS\Swoole\WebSocketHandlerInterface;use Illuminate\Support\Facades\Log;use Swoole\Http\Request;use Swoole\WebSocket\Frame;use Swoole\WebSocket\Server;/** * @see https://wiki.swoole.com/#/start/start_ws_server */class WebSocketService implements WebSocketHandlerInterface{    // å£°æ˜æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°    public function __construct()    {    }    public function onOpen(Server $server, Request $request)    {        // åœ¨è§¦å‘onOpenäº‹ä»¶ä¹‹å‰ï¼Œå»ºç«‹WebSocketçš„HTTPè¯·æ±‚å·²ç»ç»è¿‡äº†Laravelçš„è·¯ç”±ï¼Œ        // æ‰€ä»¥Laravelçš„Requestã€Authç­‰ä¿¡æ¯æ˜¯å¯è¯»çš„ï¼ŒSessionæ˜¯å¯è¯»å†™çš„ï¼Œä½†ä»…é™åœ¨onOpenäº‹ä»¶ä¸­ã€‚        // \Log::info('New WebSocket connection', [$request->fd, request()->all(), session()->getId(), session('xxx'), session(['yyy' => time()])]);        Log::info('WebSocket è¿æ¥å»ºç«‹');        $server->push($request->fd, 'Welcome to LaravelS');        // throw new \Exception('an exception');// æ­¤æ—¶æŠ›å‡ºçš„å¼‚å¸¸ä¸Šå±‚ä¼šå¿½ç•¥ï¼Œå¹¶è®°å½•åˆ°Swooleæ—¥å¿—ï¼Œéœ€è¦å¼€å‘è€…try/catchæ•è·å¤„ç†    }    public function onMessage(Server $server, Frame $frame)    {        // \Log::info('Received message', [$fram        // \Log::info('Received message', [$frame->fd, $frame->data, $frame->opcode, $frame->finish]);        //        //        $server->push($frame->fd, $frame->data);e->fd, $frame->data, $frame->opcode, $frame->finish]);        $server->push($frame->fd, $frame->data);//        $arr = [//            'time' => date('Y-m-d H:i:s')//        ];//        $server->push($frame->fd, json_encode($arr));        // throw new \Exception('an exception');// æ­¤æ—¶æŠ›å‡ºçš„å¼‚å¸¸ä¸Šå±‚ä¼šå¿½ç•¥ï¼Œå¹¶è®°å½•åˆ°Swooleæ—¥å¿—ï¼Œéœ€è¦å¼€å‘è€…try/catchæ•è·å¤„ç†    }    public function onClose(Server $server, $fd, $reactorId)    {        Log::info('WebSocket è¿æ¥å…³é—­');        // throw new \Exception('an exception');// æ­¤æ—¶æŠ›å‡ºçš„å¼‚å¸¸ä¸Šå±‚ä¼šå¿½ç•¥ï¼Œå¹¶è®°å½•åˆ°Swooleæ—¥å¿—ï¼Œéœ€è¦å¼€å‘è€…try/catchæ•è·å¤„ç†    }}</code></pre><p>2.æ›´æ”¹é…ç½®<code>config/laravels.php</code>ã€‚</p><pre class=" language-lang-php"><code class="language-lang-php">// ...'websocket'      => [    'enable'  => true, // çœ‹æ¸…æ¥šï¼Œè¿™é‡Œæ˜¯true    'handler' => \App\Services\WebSocketService::class,],'swoole'         => [    //...    // dispatch_modeåªèƒ½è®¾ç½®ä¸º2ã€4ã€5ï¼Œhttps://wiki.swoole.com/#/server/setting?id=dispatch_mode    'dispatch_mode' => 2,    //...],// ...</code></pre><p>3.ä½¿ç”¨<code>SwooleTable</code>ç»‘å®šFDä¸UserIdï¼Œå¯é€‰çš„ï¼Œ<a href="#ä½¿ç”¨swooletable">Swoole Tableç¤ºä¾‹</a>ã€‚ä¹Ÿå¯ä»¥ç”¨å…¶ä»–å…¨å±€å­˜å‚¨æœåŠ¡ï¼Œä¾‹å¦‚Redis/Memcached/MySQLï¼Œä½†éœ€è¦æ³¨æ„å¤šä¸ª<code>Swoole Server</code>å®ä¾‹æ—¶FDå¯èƒ½å†²çªã€‚</p><p>4.ä¸Nginxé…åˆä½¿ç”¨ï¼ˆæ¨èï¼‰</p><blockquote><p>å‚è€ƒ <a href="http://nginx.org/en/docs/http/websocket.html">WebSocketä»£ç†</a></p></blockquote><pre class=" language-lang-nginx"><code class="language-lang-nginx">map $http_upgrade $connection_upgrade {    default upgrade;    ''      close;}upstream swoole {    # é€šè¿‡ IP:Port è¿æ¥    server 127.0.0.1:5200 weight=5 max_fails=3 fail_timeout=30s;    # é€šè¿‡ UnixSocket Stream è¿æ¥ï¼Œå°è¯€çªï¼šå°†socketæ–‡ä»¶æ”¾åœ¨/dev/shmç›®å½•ä¸‹ï¼Œå¯è·å¾—æ›´å¥½çš„æ€§èƒ½    #server unix:/yourpath/laravel-s-test/storage/laravels.sock weight=5 max_fails=3 fail_timeout=30s;    #server 192.168.1.1:5200 weight=3 max_fails=3 fail_timeout=30s;    #server 192.168.1.2:5200 backup;    keepalive 16;}server {    listen 80;    # åˆ«å¿˜äº†ç»‘Host    server_name laravels.com;    root /yourpath/laravel-s-test/public;    access_log /yourpath/log/nginx/$server_name.access.log  main;    autoindex off;    index index.html index.htm;    # Nginxå¤„ç†é™æ€èµ„æº(å»ºè®®å¼€å¯gzip)ï¼ŒLaravelSå¤„ç†åŠ¨æ€èµ„æºã€‚    location / {        try_files $uri @laravels;    }    # å½“è¯·æ±‚PHPæ–‡ä»¶æ—¶ç›´æ¥å“åº”404ï¼Œé˜²æ­¢æš´éœ²public/*.php    #location ~* \.php$ {    #    return 404;    #}    # Httpå’ŒWebSocketå…±å­˜ï¼ŒNginxé€šè¿‡locationåŒºåˆ†    # !!! WebSocketè¿æ¥æ—¶è·¯å¾„ä¸º/ws    # Javascript: var ws = new WebSocket("ws://laravels.com/ws");    location =/ws {        # proxy_connect_timeout 60s;        # proxy_send_timeout 60s;        # proxy_read_timeoutï¼šå¦‚æœ60ç§’å†…è¢«ä»£ç†çš„æœåŠ¡å™¨æ²¡æœ‰å“åº”æ•°æ®ç»™Nginxï¼Œé‚£ä¹ˆNginxä¼šå…³é—­å½“å‰è¿æ¥ï¼›åŒæ—¶ï¼ŒSwooleçš„å¿ƒè·³è®¾ç½®ä¹Ÿä¼šå½±å“è¿æ¥çš„å…³é—­        # proxy_read_timeout 60s;        proxy_http_version 1.1;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Real-PORT $remote_port;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header Host $http_host;        proxy_set_header Scheme $scheme;        proxy_set_header Server-Protocol $server_protocol;        proxy_set_header Server-Name $server_name;        proxy_set_header Server-Addr $server_addr;        proxy_set_header Server-Port $server_port;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection $connection_upgrade;        proxy_pass http://swoole;    }    location @laravels {        # proxy_connect_timeout 60s;        # proxy_send_timeout 60s;        # proxy_read_timeout 60s;        proxy_http_version 1.1;        proxy_set_header Connection "";        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Real-PORT $remote_port;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header Host $http_host;        proxy_set_header Scheme $scheme;        proxy_set_header Server-Protocol $server_protocol;        proxy_set_header Server-Name $server_name;        proxy_set_header Server-Addr $server_addr;        proxy_set_header Server-Port $server_port;        proxy_pass http://swoole;    }}</code></pre><p>5.å¿ƒè·³é…ç½®</p><ul><li><p>Swooleçš„å¿ƒè·³é…ç½®</p><pre class=" language-lang-php"><code class="language-lang-php">  // config/laravels.php  'swoole' => [      //...      // è¡¨ç¤ºæ¯60ç§’éå†ä¸€æ¬¡ï¼Œä¸€ä¸ªè¿æ¥å¦‚æœ600ç§’å†…æœªå‘æœåŠ¡å™¨å‘é€ä»»ä½•æ•°æ®ï¼Œæ­¤è¿æ¥å°†è¢«å¼ºåˆ¶å…³é—­      'heartbeat_idle_time'      => 600,      'heartbeat_check_interval' => 60,      //...  ],</code></pre></li><li><p>Nginxè¯»å–ä»£ç†æœåŠ¡å™¨è¶…æ—¶çš„é…ç½®</p><pre class=" language-lang-nginx"><code class="language-lang-nginx">  # å¦‚æœ60ç§’å†…è¢«ä»£ç†çš„æœåŠ¡å™¨æ²¡æœ‰å“åº”æ•°æ®ç»™Nginxï¼Œé‚£ä¹ˆNginxä¼šå…³é—­å½“å‰è¿æ¥  proxy_read_timeout 60s;</code></pre><h2 id="HTMLå®æˆ˜ä»£ç "><a href="#HTMLå®æˆ˜ä»£ç " class="headerlink" title="HTMLå®æˆ˜ä»£ç "></a>HTMLå®æˆ˜ä»£ç </h2><p><a href="https://github.com/WXiangQian/laravel-api/blob/master/resources/views/websocket.blade.php">GitHubå®Œæ•´æºä»£ç </a></p></li></ul><pre><code>&lt;script type="text/javascript"&gt;    if(window.WebSocket){        // ç«¯å£å’Œipåœ°å€å¯¹åº”ä¸è¦å†™é”™        var webSocket = new WebSocket("ws://127.0.0.1:5200");        webSocket.onopen = function (event) {            console.log('webSocket è¿æ¥æˆåŠŸ');        };        // è¿æ¥å…³é—­æ—¶è§¦å‘        webSocket.onclose = function (event) {            console.log("WebSocket å…³é—­è¿æ¥");        }        //æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯å›è°ƒ        webSocket.onmessage = function (event) {            var content = document.getElementById('content');            content.innerHTML = content.innerHTML.concat('&lt;p style="margin-left:20px;height:20px;line-height:20px;"&gt;'+event.data+'&lt;/p&gt;');            console.log(event.data)        }        var sendMessage = function(){            var data = document.getElementById('message').value;            webSocket.send(data);        }    }else{        console.log("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWebSocket");    }&lt;/script&gt;</code></pre><h2 id="å®æˆ˜æˆªå›¾"><a href="#å®æˆ˜æˆªå›¾" class="headerlink" title="å®æˆ˜æˆªå›¾"></a>å®æˆ˜æˆªå›¾</h2><p><img src="https://img-blog.csdnimg.cn/20201203152652336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="å¯åŠ¨laravelsæœåŠ¡"><br><img src="https://img-blog.csdnimg.cn/20201203153100867.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="é¡µé¢å®æˆ˜"></p><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>å¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åŠ©å¤§å®¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨websocketã€‚ğŸ‘</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­ç§˜ã€ŠåŒ11æ˜Ÿç§€çŒ«å·…å³°æ—¶åˆ»ã€‹åŠŸèƒ½è®¾è®¡</title>
      <link href="2020/11/13/php/%E6%8F%AD%E7%A7%98%E3%80%8A%E5%8F%8C11%E6%98%9F%E7%A7%80%E7%8C%AB%E5%B7%85%E5%B3%B0%E6%97%B6%E5%88%BB%E3%80%8B%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/"/>
      <url>2020/11/13/php/%E6%8F%AD%E7%A7%98%E3%80%8A%E5%8F%8C11%E6%98%9F%E7%A7%80%E7%8C%AB%E5%B7%85%E5%B3%B0%E6%97%B6%E5%88%BB%E3%80%8B%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¸ºå¤§å®¶æä¾›æ›´å¥½çš„è®¾è®¡æ€è·¯ï¼Œä¸€èµ·çœ‹é€åŠ©åŠ›æ‹‰äººå¤´ï¼Œå‘å¤šå¤šç ä¸€åˆ€ç­‰ç­‰åŠŸèƒ½~~</p><blockquote><p>2020-11-10æ™š9ç‚¹å†çœ‹æµ™æ±Ÿå«è§†ç›´æ’­ï¼ŒæŸå®APPæ‰‹æœºæ‘‡ä¸€æ‘‡æŠ½çº¢åŒ…ã€‚è¿›å»æ´»åŠ¨ä»¥åå‘ç°ï¼Œè¿™åŠŸèƒ½æˆ‘å»å¹´åœ¨æŸå…¬å¸è®¾è®¡è¿‡ç±»ä¼¼çš„åŠŸèƒ½ã€‚æ‰€ä»¥ä»Šå¤©æ‹¿æ¥åˆ†äº«ç»™å¤§å®¶~~~</p></blockquote><h4 id="æŸå®å›¾ç‰‡"><a href="#æŸå®å›¾ç‰‡" class="headerlink" title="æŸå®å›¾ç‰‡"></a>æŸå®å›¾ç‰‡</h4><p>ä¸€ä¸ªäººå¤´1å—é’±ï¼ŒæŸå®æˆæœ¬ä»·çœŸçš„ä½å“¦ï¼Œé‚£å‘å¤šå¤šå²‚ä¸æ˜¯æ›´ä½?</p><p><img src="https://img-blog.csdnimg.cn/20201110213704221.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/2020111021400446.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://img-blog.csdnimg.cn/20201110214028416.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20201110214811304.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="æŸå®åŠŸèƒ½é€»è¾‘"><a href="#æŸå®åŠŸèƒ½é€»è¾‘" class="headerlink" title="æŸå®åŠŸèƒ½é€»è¾‘"></a>æŸå®åŠŸèƒ½é€»è¾‘</h4><blockquote><p>å¤§ä½¬å‹¿å–·ï¼Œè‚‰çœ¼å¯è§èƒ½æƒ³åˆ°çš„é€»è¾‘ç®€å•çš„æè¿°ä¸€ä¸‹ã€‚</p></blockquote><ul><li>æ¯ä¸ªç”¨æˆ·åªèƒ½å¸®ä¸€ä½å¥½å‹åŠ©åŠ›</li><li>æ¯æ‹‰ä¸€ä½ç”¨æˆ·ï¼Œåˆ™åŠ©åŠ›ä¸€æ¬¡</li><li>1äººã€3äººã€å†é‚€3äººã€50äººä¸ºç›®æ ‡ï¼Œå¼•å¯¼å®¢æˆ·å»æ‹‰æ´»è·ƒç”¨æˆ·ï¼ˆæœ‰æœºä¼šèµ¢å–æ¸…ç©ºè´­ç‰©è½¦æ´»åŠ¨ï¼‰</li><li>å‚ä¸ç”¨æˆ·æ·˜æ°”å€¼åœ¨401åˆ†åŠå­ä¸Š,è¢«é‚€è¯·åŠ©åŠ›è€…æ·˜æ°”å€¼501åˆ†åŠä¸Šã€‚</li><li>å‚ä¸æ¬¡æ•°ï¼šç”¨æˆ·æ¯åœºä»…å¯å‚ä¸1æ²‰,6åœºå¯è®¡å¯å‚ä¸6æ¬¡ã€‚ï¼ˆè®©ä½ åœ¨çŸ­æ—¶é—´å†…ï¼Œæ‹‰å–50åå¥½å‹ï¼Œè¿˜æ˜¯æœ‰éš¾åº¦çš„ã€å¥—è·¯ä¹ŸæŒºæ·±çš„ã€‚ï¼‰</li><li>ç›´æ¥ç‚¹å–é¢†å–æ—¶ï¼Œä¼šæç¤ºæ˜¯å¦æ”¾å¼ƒè†¨èƒ€æœºä¼šï¼ˆå¥—è·¯ï¼‰<h3 id="åŠŸèƒ½éœ€æ±‚èƒŒæ™¯"><a href="#åŠŸèƒ½éœ€æ±‚èƒŒæ™¯" class="headerlink" title="åŠŸèƒ½éœ€æ±‚èƒŒæ™¯"></a>åŠŸèƒ½éœ€æ±‚èƒŒæ™¯</h3><blockquote><p>å¥½å‹åŠ©åŠ›éœ€æ±‚æ¥æºäºä¸‹å®šé‡‘é€ä¼˜æƒ åˆ¸åŠŸèƒ½<br>æ‹‰äººåŠ©åŠ›æ˜¯ä¸€ç§æ‹‰æ–°æ´»åŠ¨ï¼Œä½¿æ´»åŠ¨æ¥æ›å…‰å…¬å¸äº§å“ï¼Œæé«˜çŸ¥ååº¦<br>æ¯”å¦‚æ”¯ä»˜1å…ƒå®šé‡‘é€ä¸€ä¸ª10å…ƒä¼˜æƒ åˆ¸ï¼Œç„¶åé€šè¿‡åŠ©ç†è®©ä¸€ä¸ª10å…ƒçš„ä¼˜æƒ åˆ¸é‡‘é¢æ‰©å±•åˆ°20ã€30ç”šè‡³æ›´å¤šã€‚</p></blockquote></li></ul><p>åŠ©åŠ›ç»“æŸåï¼ŒåŠ©åŠ›è€…ä¹Ÿä¼šè·å¾—ç­‰é¢çš„ä¼˜æƒ åˆ¸ï¼Œæ‰€ä»¥è¯´è¿™æ ·ä¼šä¿ƒè¿›æ›´å¤šçš„ç”¨æˆ·æ¥å‚åŠ æ´»åŠ¨ï¼Œ</p><h3 id="åŠ©åŠ›è§„åˆ™"><a href="#åŠ©åŠ›è§„åˆ™" class="headerlink" title="åŠ©åŠ›è§„åˆ™"></a>åŠ©åŠ›è§„åˆ™</h3><blockquote><p>ç”±äºåŠ©åŠ›æ²¡æœ‰è¦æ±‚å°æ•°ç‚¹é‡‘é¢ï¼Œæ‰€ä»¥éœ€æ±‚å°±ä¼šç®€å•å¾ˆå¤šã€‚</p></blockquote><p>å¥½å‹åŠ©åŠ›éšæœºè§„åˆ™ï¼šä¸Šé™-åŸºæœ¬ / äººæ•°    = å‡å€¼ï¼ˆç›´æ¥å–æ•´ï¼Œèˆå¼ƒå°æ•°ï¼Œä¿ç•™æ•´æ•°ï¼‰<br>éšæœºï¼š(å‡å€¼,å‡å€¼ X 2)ï¼Œæœ€åä¸€ä¸ªäººç›´æ¥è·å–å‰©ä½™çš„é’±<br>å¯ä»¥<strong>åŠ©åŠ›1ä½å¥½å‹</strong>ä¸åŒè¯¾ç¨‹å‘èµ·çš„è†¨èƒ€ï¼Œä½†æ˜¯åªèƒ½ä¸ºåŒä¸€å¥½å‹<br>äººæ•°æ˜¯åå°è®¾ç½®çš„éœ€è¦å‡ ä¸ªäººåŠ©åŠ›</p><blockquote><p>ç”ŸæˆåŠ©åŠ›è®°å½•çš„è¯ï¼Œä¼šæœ‰ä¸€ä¸ªåŸºæœ¬é‡‘é¢å’Œä¸€ä¸ªä¸Šé™é‡‘é¢ï¼Œè¿˜ä¼šè®¾å®šåŠ©åŠ›äººæ•°</p></blockquote><p><img src="https://img-blog.csdnimg.cn/2020042818235670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="éœ€è¦è€ƒè™‘çš„å› ç´ ï¼š"><a href="#éœ€è¦è€ƒè™‘çš„å› ç´ ï¼š" class="headerlink" title="éœ€è¦è€ƒè™‘çš„å› ç´ ï¼š"></a>éœ€è¦è€ƒè™‘çš„å› ç´ ï¼š</h3><ol><li>å‘èµ·åŠ©åŠ›è®°å½•æ˜¯å¦å­˜åœ¨</li><li>åˆ¤æ–­æ˜¯å¦ æ˜¯è‡ªå·±ç»™è‡ªå·±åŠ©åŠ›</li><li>æŸ¥è¯¢æ˜¯å¦æœ‰åŠ©åŠ›è¿‡çš„è®°å½•(åªèƒ½å¸®ä¸€ä¸ªå¥½å‹åŠ©åŠ›)<ol><li>æŸ¥è¯¢æ˜¯å¸®å“ªä½å¥½å‹åŠ©åŠ›çš„</li><li>å¦‚æœä¸æ˜¯åŒä¸€ä¸ªäººï¼Œåˆ™æç¤ºï¼šåªèƒ½å¸®ä¸€ä¸ªå¥½å‹åŠ©åŠ›</li><li>å¥½å‹çš„ä¸€ä¸ªè¯¾ç¨‹åªèƒ½åŠ©åŠ›ä¸€æ¬¡</li></ol></li><li>æœ€åä¸€ä¸ªäººç›´æ¥è·å–å‰©ä½™çš„é’± </li></ol><p><strong>åˆ‡è®°</strong>ï¼šä¸€å®šè¦å¼€äº‹ç‰©ï¼Œä¸ç„¶å½“å¤šä¸ªäººåŒæ—¶åŠ©åŠ›çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ã€‚</p><h3 id="SQLæ•°æ®è¡¨è®¾è®¡"><a href="#SQLæ•°æ®è¡¨è®¾è®¡" class="headerlink" title="SQLæ•°æ®è¡¨è®¾è®¡"></a>SQLæ•°æ®è¡¨è®¾è®¡</h3><p>ç»“åˆè‡ªå·±éœ€æ±‚è®¾è®¡å°±å¥½äº†ï¼Œå¤§åŒå°å¼‚ã€‚</p><h3 id="éƒ¨åˆ†ä»£ç å®ç°"><a href="#éƒ¨åˆ†ä»£ç å®ç°" class="headerlink" title="éƒ¨åˆ†ä»£ç å®ç°"></a>éƒ¨åˆ†ä»£ç å®ç°</h3><pre class=" language-lang-php"><code class="language-lang-php">/** * $limit_amount ä¸Šé™é‡‘é¢ * $start_amount åŸºæœ¬é‡‘é¢ * $assist_num è®¾å®šçš„åŠ©åŠ›äººæ•° * $sale_amount åˆ¸çš„æ€»é‡‘é¢ * $help_amount å¥½å‹åŠ©åŠ›çš„é‡‘é¢ * $mean_value éšæœºé‡‘é¢çš„å·¦åŒºé—´ * $mean_value_max éšæœºé‡‘é¢çš„å³åŒºé—´ */ // count_help_userséœ€è¦ç»“åˆè‡ªå·±çš„åœºæ™¯å»è·å–æ˜¯ç¬¬å‡ ä¸ªäººåŠ©åŠ› $count_help_users = 0;// æœ€åä¸€ä¸ªäººç›´æ¥è·å–å‰©ä½™çš„é’±if ($diff == 1) {    $help_amount = $limit_amount - $amount;    $sale_amount = $limit_amount;} else {    //ä¸Šé™-åŸºæœ¬ / äººæ•°  = å‡å€¼ï¼ˆç›´æ¥å–æ•´ï¼Œèˆå¼ƒå°æ•°ï¼Œä¿ç•™æ•´æ•°ï¼‰    $mean_value = intval(($limit_amount - $start_amount) / $assist_num);    $mean_value_max = intval($mean_value) * 2;    // ç¬¬ä¸€ä¸ªäºº    if ($count_help_users == 0) {        $help_amount = mt_rand($mean_value, $mean_value_max);        $sale_amount = $info['amount'] + $help_amount;    } else {        $help_amount = mt_rand(1, $mean_value - 1);        $sale_amount = $info['amount'] + $help_amount;    }}// æ•°æ®éƒ½çŸ¥é“äº†ï¼Œä¸‹é¢å°±æŠŠåŠ©åŠ›çš„é‡‘é¢ä¹‹ç±»çš„ä¿¡æ¯å­˜å…¥æ•°æ®è¡¨å§</code></pre><h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><p>å¦‚æœåŠŸèƒ½è®¾è®¡æœ‰ä»€ä¹ˆæ¼æ´ï¼Œæ¬¢è¿å¤§å®¶æä¾›æ›´å¥½çš„å»ºè®®ï¼Œå¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åŠ©ä½ ä»¬å®ç°â€å¥½å‹åŠ©åŠ›â€åŠŸèƒ½ğŸ‘<br><img src="https://img-blog.csdnimg.cn/20200426102941906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="å›¾ç‰‡æ¥æºäºç½‘ç»œ"></p><h3 id="æŸå®å®£ä¼ å›¾"><a href="#æŸå®å®£ä¼ å›¾" class="headerlink" title="æŸå®å®£ä¼ å›¾"></a>æŸå®å®£ä¼ å›¾</h3><p><img src="https://img-blog.csdnimg.cn/20201110215444968.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸‹golangç¯å¢ƒå®‰è£…ä»¥åŠæ–°æ‰‹å…¥é—¨</title>
      <link href="2020/11/06/golang/Mac%E4%B8%8Bgolang%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8/"/>
      <url>2020/11/06/golang/Mac%E4%B8%8Bgolang%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>Macä¸‹golangç¯å¢ƒå®‰è£…ä»¥åŠæ–°æ‰‹å…¥é—¨</p><p><img src="https://img-blog.csdnimg.cn/img_convert/76455cba1d05bcbdabdd9f425be49da4.png" alt=""></p><p><a href="https://www.runoob.com/go/go-tutorial.html">go èœé¸Ÿæ•™ç¨‹</a></p><h3 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h3><p>mac ç¯å¢ƒ é¦–å…ˆå®‰è£…<a href="https://brew.sh/">brew</a></p><pre><code>    brew install go</code></pre><p><strong>æ‰§è¡Œ</strong>å®Œå‘½ä»¤åï¼Œå¦‚ä¸‹æ˜¾ç¤ºï¼š</p><pre><code>Updating Homebrew...==&gt; Auto-updated Homebrew!Updated 1 tap (homebrew/services).No changes to formulae.==&gt; Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/bottles/go-1.11.2.m######################################################################## 100.0%==&gt; Pouring go-1.11.2.mojave.bottle.tar.gzWarning: The post-install step did not complete successfullyYou can try again using `brew postinstall go`==&gt; CaveatsA valid GOPATH is required to use the `go get` command.If $GOPATH is not specified, $HOME/go will be used by default:  https://golang.org/doc/code.html#GOPATHYou may wish to add the GOROOT-based install location to your PATH:  export PATH=$PATH:/usr/local/opt/go/libexec/bin==&gt; SummaryğŸº  /usr/local/Cellar/go/1.11.2: 9,282 files, 404MB</code></pre><p>éœ€è¦è®¾ç½®GOPATHå’ŒGOROOTçš„ç¯å¢ƒå˜é‡ï¼Œä»¥åŠè®¾ç½®PATH.</p><h3 id="ç¯å¢ƒå˜é‡é…ç½®"><a href="#ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="ç¯å¢ƒå˜é‡é…ç½®"></a>ç¯å¢ƒå˜é‡é…ç½®</h3><p>é€šè¿‡go envæŸ¥çœ‹goçš„è¯¦ç»†ä¿¡æ¯</p><pre><code>go env</code></pre><p>éœ€è¦è®¾ç½®çš„ç¯å¢ƒå˜é‡åŒ…æ‹¬:<strong>GOPATH</strong> ,<strong>GOBIN</strong> ä»¥åŠæŠŠ<strong>GOBIN</strong>åŠ å…¥åˆ°PATHä¸­,<strong>GOROOT</strong>å˜é‡é»˜è®¤å·²ç»è®¾ç½®å¥½ã€‚</p><p>å¦‚æœéœ€è¦ä¿®æ”¹é»˜è®¤çš„ç¯å¢ƒå˜é‡é…ç½®ä¿®æ”¹ vim ~/.bash_profile æˆ–è€… vim ~/.zshrc</p><pre><code>#GOROOT# CentOS ä¸­å¦‚ä¸‹è®¾ç½® GOROOTï¼Œçœ‹ä½ å®‰è£…çš„è·¯å¾„# export GOROOT=/usr/local/go# Mac OS ä¸­é€šè¿‡å‘½ä»¤è¡Œå·¥å…·brewå®‰è£…å¦‚ä¸‹é…ç½® GOROOTexport GOROOT=/usr/local/opt/go/libexec#GOPATH root binexport GOBIN=$GOROOT/binexport PATH=$PATH:$GOBIN#GOPATH#export GOPATH=$HOME/goexport GOPATH=/Users/wxq/go#GOPATH binexport PATH=$PATH:$GOPATH/binexport GOPROXY=https://goproxy.io</code></pre><p>ä½¿å…¶ç«‹å³ç”Ÿæ•ˆ</p><pre><code>source ~/.bash_profile</code></pre><p>ç„¶ååœ¨æ‰§è¡Œ <strong>go env</strong>çš„æ—¶å€™é…ç½®å°±ä¼šç”Ÿæ•ˆ</p><p><strong>ç¯å¢ƒå˜é‡è®¾ç½®å®Œæˆ!</strong></p><h3 id="æ ‡å‡†å‘½ä»¤è¯¦è§£"><a href="#æ ‡å‡†å‘½ä»¤è¯¦è§£" class="headerlink" title="æ ‡å‡†å‘½ä»¤è¯¦è§£"></a>æ ‡å‡†å‘½ä»¤è¯¦è§£</h3><pre><code>go --helpGo is a tool for managing Go source code.Goæ˜¯ç”¨äºç®¡ç†Goæºä»£ç çš„å·¥å…·ã€‚Usageç”¨æ³•:  go command [arguments]The commands are:  build å‘½ä»¤ç”¨äºç¼–è¯‘æˆ‘ä»¬æŒ‡å®šçš„æºç æ–‡ä»¶æˆ–ä»£ç åŒ…ä»¥åŠå®ƒä»¬çš„ä¾èµ–åŒ…ã€‚    -o æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¸¦ä¸Šè·¯å¾„ï¼Œä¾‹å¦‚ go build -o a/b/c    -i å®‰è£…ç›¸åº”çš„åŒ…ï¼Œç¼–è¯‘+go install    -a æ›´æ–°å…¨éƒ¨å·²ç»æ˜¯æœ€æ–°çš„åŒ…çš„ï¼Œä½†æ˜¯å¯¹æ ‡å‡†åŒ…ä¸é€‚ç”¨    -n æŠŠéœ€è¦æ‰§è¡Œçš„ç¼–è¯‘å‘½ä»¤æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯ä¸æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“åº•å±‚æ˜¯å¦‚ä½•è¿è¡Œçš„    -p n æŒ‡å®šå¯ä»¥å¹¶è¡Œå¯è¿è¡Œçš„ç¼–è¯‘æ•°ç›®ï¼Œé»˜è®¤æ˜¯CPUæ•°ç›®    -race å¼€å¯ç¼–è¯‘çš„æ—¶å€™è‡ªåŠ¨æ£€æµ‹æ•°æ®ç«äº‰çš„æƒ…å†µï¼Œç›®å‰åªæ”¯æŒ64ä½çš„æœºå™¨    -v æ‰“å°å‡ºæ¥æˆ‘ä»¬æ­£åœ¨ç¼–è¯‘çš„åŒ…å    -work æ‰“å°å‡ºæ¥ç¼–è¯‘æ—¶å€™çš„ä¸´æ—¶æ–‡ä»¶å¤¹åç§°ï¼Œå¹¶ä¸”å¦‚æœå·²ç»å­˜åœ¨çš„è¯å°±ä¸è¦åˆ é™¤    -x æ‰“å°å‡ºæ¥æ‰§è¡Œçš„å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯å’Œ-nçš„ç»“æœç±»ä¼¼ï¼Œåªæ˜¯è¿™ä¸ªä¼šæ‰§è¡Œ    -ccflags 'arg list' ä¼ é€’å‚æ•°ç»™5c, 6c, 8c è°ƒç”¨    -compiler name æŒ‡å®šç›¸åº”çš„ç¼–è¯‘å™¨ï¼Œgccgoè¿˜æ˜¯gc    -gccgoflags 'arg list' ä¼ é€’å‚æ•°ç»™gccgoç¼–è¯‘è¿æ¥è°ƒç”¨    -gcflags 'arg list' ä¼ é€’å‚æ•°ç»™5g, 6g, 8g è°ƒç”¨    -installsuffix suffix ä¸ºäº†å’Œé»˜è®¤çš„å®‰è£…åŒ…åŒºåˆ«å¼€æ¥ï¼Œé‡‡ç”¨è¿™ä¸ªå‰ç¼€æ¥é‡æ–°å®‰è£…é‚£äº›ä¾èµ–çš„åŒ…ï¼Œ-raceçš„æ—¶å€™é»˜è®¤å·²ç»æ˜¯-installsuffix race,å¤§å®¶å¯ä»¥é€šè¿‡-nå‘½ä»¤æ¥éªŒè¯    -ldflags 'flag list' ä¼ é€’å‚æ•°ç»™5l, 6l, 8l è°ƒç”¨    -tags 'tag list' è®¾ç½®åœ¨ç¼–è¯‘çš„æ—¶å€™å¯ä»¥é€‚é…çš„é‚£äº›tagï¼Œè¯¦ç»†çš„tagé™åˆ¶å‚è€ƒé‡Œé¢çš„http://golang.org/pkg/go/build/  clean       åˆ é™¤æ‰æ‰§è¡Œå…¶å®ƒå‘½ä»¤æ—¶äº§ç”Ÿçš„ä¸€äº›æ–‡ä»¶å’Œç›®å½•ã€‚    -i æ¸…é™¤å…³è”çš„å®‰è£…çš„åŒ…å’Œå¯è¿è¡Œæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡go installå®‰è£…çš„æ–‡ä»¶    -n æŠŠéœ€è¦æ‰§è¡Œçš„æ¸…é™¤å‘½ä»¤æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯ä¸æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“åº•å±‚æ˜¯å¦‚ä½•è¿è¡Œçš„    -r å¾ªç¯çš„æ¸…é™¤åœ¨importä¸­å¼•å…¥çš„åŒ…    -x æ‰“å°å‡ºæ¥æ‰§è¡Œçš„è¯¦ç»†å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯-næ‰“å°çš„æ‰§è¡Œç‰ˆæœ¬  doc å‘½ä»¤å¯ä»¥æ‰“å°é™„äºGoè¯­è¨€ç¨‹åºå®ä½“ä¸Šçš„æ–‡æ¡£ã€‚  env ç”¨äºæ‰“å°Goè¯­è¨€çš„ç¯å¢ƒä¿¡æ¯ã€‚  bug å¯åŠ¨é”™è¯¯æŠ¥å‘Šã€‚  fix æŠŠæŒ‡å®šä»£ç åŒ…çš„æ‰€æœ‰Goè¯­è¨€æºç æ–‡ä»¶ä¸­çš„æ—§ç‰ˆæœ¬ä»£ç ä¿®æ­£ä¸ºæ–°ç‰ˆæœ¬çš„ä»£ç ã€‚  fmt åœ¨åŒ…æºä¸Šè¿è¡Œgofmtã€‚    -l æ˜¾ç¤ºé‚£äº›éœ€è¦æ ¼å¼åŒ–çš„æ–‡ä»¶    -w æŠŠæ”¹å†™åçš„å†…å®¹ç›´æ¥å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä½œä¸ºç»“æœæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚    -r æ·»åŠ å½¢å¦‚â€œa[b:len(a)] -&gt; a[b:]â€çš„é‡å†™è§„åˆ™ï¼Œæ–¹ä¾¿æˆ‘ä»¬åšæ‰¹é‡æ›¿æ¢    -s ç®€åŒ–æ–‡ä»¶ä¸­çš„ä»£ç     -d æ˜¾ç¤ºæ ¼å¼åŒ–å‰åçš„diffè€Œä¸æ˜¯å†™å…¥æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯false    -e æ‰“å°æ‰€æœ‰çš„è¯­æ³•é”™è¯¯åˆ°æ ‡å‡†è¾“å‡ºã€‚å¦‚æœä¸ä½¿ç”¨æ­¤æ ‡è®°ï¼Œåˆ™åªä¼šæ‰“å°ä¸åŒè¡Œçš„å‰10ä¸ªé”™è¯¯ã€‚    -cpuprofile æ”¯æŒè°ƒè¯•æ¨¡å¼ï¼Œå†™å…¥ç›¸åº”çš„cpufileåˆ°æŒ‡å®šçš„æ–‡ä»¶  generate é€šè¿‡å¤„ç†æºç”ŸæˆGoæ–‡ä»¶ã€‚  get ä¸‹è½½æˆ–æ›´æ–°å®‰è£…æŒ‡å®šçš„ä»£ç åŒ…åŠå…¶ä¾èµ–åŒ…ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œç¼–è¯‘å’Œå®‰è£…ã€‚    -d åªä¸‹è½½ä¸å®‰è£…    -f åªæœ‰åœ¨ä½ åŒ…å«äº†-uå‚æ•°çš„æ—¶å€™æ‰æœ‰æ•ˆï¼Œä¸è®©-uå»éªŒè¯importä¸­çš„æ¯ä¸€ä¸ªéƒ½å·²ç»è·å–äº†ï¼Œè¿™å¯¹äºæœ¬åœ°forkçš„åŒ…ç‰¹åˆ«æœ‰ç”¨    -fix åœ¨è·å–æºç ä¹‹åå…ˆè¿è¡Œfixï¼Œç„¶åå†å»åšå…¶ä»–çš„äº‹æƒ…    -t åŒæ—¶ä¹Ÿä¸‹è½½éœ€è¦ä¸ºè¿è¡Œæµ‹è¯•æ‰€éœ€è¦çš„åŒ…    -u å¼ºåˆ¶ä½¿ç”¨ç½‘ç»œå»æ›´æ–°åŒ…å’Œå®ƒçš„ä¾èµ–åŒ…    -v æ˜¾ç¤ºæ‰§è¡Œçš„å‘½ä»¤  install ç”¨äºç¼–è¯‘å¹¶å®‰è£…æŒ‡å®šçš„ä»£ç åŒ…åŠå®ƒä»¬çš„ä¾èµ–åŒ…ã€‚  list åˆ—å‡ºæŒ‡å®šçš„ä»£ç åŒ…çš„ä¿¡æ¯ã€‚  run å‘½ä»¤å¯ä»¥ç¼–è¯‘å¹¶è¿è¡Œå‘½ä»¤æºç æ–‡ä»¶ã€‚  test å¯¹Goè¯­è¨€ç¼–å†™çš„ç¨‹åºè¿›è¡Œæµ‹è¯•ã€‚    -bench regexp æ‰§è¡Œç›¸åº”çš„benchmarksï¼Œä¾‹å¦‚ -bench=.    -cover å¼€å¯æµ‹è¯•è¦†ç›–ç‡    -run regexp åªè¿è¡ŒregexpåŒ¹é…çš„å‡½æ•°ï¼Œä¾‹å¦‚ -run=Array é‚£ä¹ˆå°±æ‰§è¡ŒåŒ…å«æœ‰Arrayå¼€å¤´çš„å‡½æ•°    -v æ˜¾ç¤ºæµ‹è¯•çš„è¯¦ç»†å‘½ä»¤  tool è¿è¡ŒæŒ‡å®šçš„goå·¥å…·    go tool fix . ç”¨æ¥ä¿®å¤ä»¥å‰è€ç‰ˆæœ¬çš„ä»£ç åˆ°æ–°ç‰ˆæœ¬ï¼Œä¾‹å¦‚go1ä¹‹å‰è€ç‰ˆæœ¬çš„ä»£ç è½¬åŒ–åˆ°go1,ä¾‹å¦‚APIçš„å˜åŒ–    go tool vet directory|files ç”¨æ¥åˆ†æå½“å‰ç›®å½•çš„ä»£ç æ˜¯å¦éƒ½æ˜¯æ­£ç¡®çš„ä»£ç ,ä¾‹å¦‚æ˜¯ä¸æ˜¯è°ƒç”¨fmt.Printfé‡Œé¢çš„å‚æ•°ä¸æ­£ç¡®ï¼Œä¾‹å¦‚å‡½æ•°é‡Œé¢æå‰returnäº†ç„¶åå‡ºç°äº†æ— ç”¨ä»£ç ä¹‹ç±»çš„ã€‚  version æ‰“å°Goçš„ç‰ˆæœ¬ä¿¡æ¯  vet ç”¨äºæ£€æŸ¥Goè¯­è¨€æºç ä¸­é™æ€é”™è¯¯çš„ç®€å•å·¥å…·ã€‚Use "go help [command]" for more information about a command.Additional help topics:  c           calling between Go and C  buildmode   description of build modes  filetype    file types  gopath      GOPATH environment variable  environment environment variables  importpath  import path syntax  packages    description of package lists  testflag    description of testing flags  testfunc    description of testing functionsUse "go help [topic]" for more information about that topic.</code></pre><h3 id="è¿è¡ŒGo"><a href="#è¿è¡ŒGo" class="headerlink" title="è¿è¡ŒGo"></a>è¿è¡ŒGo</h3><p>æˆ‘ä»¬å…ˆå†™ä¸€æ®µGOä»£ç ï¼Œå¾ˆç®€å•å°±æ˜¯æ‰“å°è¾“å‡ºä¸€ä¸ªhello world!, ä¿å­˜ä¸ºhello.goæ–‡ä»¶</p><pre><code>package mainimport "fmt" func main() {   fmt.Println("Hello, World!")}</code></pre><h3 id="é€šè¿‡goå‘½ä»¤è¿è¡Œ"><a href="#é€šè¿‡goå‘½ä»¤è¿è¡Œ" class="headerlink" title="é€šè¿‡goå‘½ä»¤è¿è¡Œ"></a>é€šè¿‡goå‘½ä»¤è¿è¡Œ</h3><p>å‘½ä»¤è¿è¡Œgoç¨‹åºï¼Œåœ¨hello.goè¿™ä¸ªå½“å‰ç›®å½•ä¸‹è¿è¡Œä¸‹é¢å‘½ä»¤ï¼Œå¯ä»¥è¾“å‡ºhello world!ã€‚</p><pre><code>go run hello.go</code></pre><h4 id="é€šè¿‡goå‘½ä»¤ç¼–è¯‘è¿è¡Œ"><a href="#é€šè¿‡goå‘½ä»¤ç¼–è¯‘è¿è¡Œ" class="headerlink" title="é€šè¿‡goå‘½ä»¤ç¼–è¯‘è¿è¡Œ"></a>é€šè¿‡goå‘½ä»¤ç¼–è¯‘è¿è¡Œ</h4><p>GOç¨‹åºçš„ä»£ç æ˜¯å¯ä»¥ç›´æ¥ç¼–è¯‘æˆexeæ–‡ä»¶ æˆ–è€… äºŒè¿›åˆ¶æ–‡ä»¶ç›´æ¥è¿è¡Œï¼Œåœ¨hello.goç›®å½•ä¸‹è¿è¡Œä¸‹é¢å‘½ä»¤ï¼Œå³å¯æŠŠgoç¨‹åºç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶</p><pre><code>go build hello.go</code></pre><p>ä¸Šé¢å‘½ä»¤æ–‡ä»¶å¯ä»¥ç¼–è¯‘æˆä¸€ä¸ªhelloå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åç›´æ¥åœ¨å½“å‰ç›®å½•ä¸‹ ./hello è¿è¡Œï¼Œå¯ä»¥è¾“å‡ºhello world!ã€‚</p><h3 id="goçš„åŸºæœ¬çŸ¥è¯†"><a href="#goçš„åŸºæœ¬çŸ¥è¯†" class="headerlink" title="goçš„åŸºæœ¬çŸ¥è¯†"></a>goçš„åŸºæœ¬çŸ¥è¯†</h3><h4 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h4><p>æ³¨é‡Šä¸ä¼šè¢«ç¼–è¯‘ï¼Œæ¯ä¸€ä¸ªåŒ…åº”è¯¥æœ‰ç›¸å…³æ³¨é‡Šã€‚</p><blockquote><p>å•è¡Œæ³¨é‡Šæ˜¯æœ€å¸¸è§çš„æ³¨é‡Šå½¢å¼ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ä»¥ // å¼€å¤´çš„å•è¡Œæ³¨é‡Šã€‚<br>å¤šè¡Œæ³¨é‡Šä¹Ÿå«å—æ³¨é‡Šï¼Œå‡å·²ä»¥ /<em> å¼€å¤´ï¼Œå¹¶ä»¥ </em>/ ç»“å°¾ã€‚å¦‚ï¼š</p></blockquote><pre><code>// å•è¡Œæ³¨é‡Š/* hello WXiangQian æˆ‘æ˜¯å¤šè¡Œæ³¨é‡Š */</code></pre><h4 id="å­—ç¬¦ä¸²è¿æ¥"><a href="#å­—ç¬¦ä¸²è¿æ¥" class="headerlink" title="å­—ç¬¦ä¸²è¿æ¥"></a>å­—ç¬¦ä¸²è¿æ¥</h4><p>Go è¯­è¨€çš„å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡ â• å®ç°ï¼š</p><pre><code>package mainimport "fmt"func main() {    fmt.Println("hello" + "WXiangQian")}</code></pre><h3 id="å¸¸è§çš„åŸºæœ¬é”™è¯¯"><a href="#å¸¸è§çš„åŸºæœ¬é”™è¯¯" class="headerlink" title="å¸¸è§çš„åŸºæœ¬é”™è¯¯"></a>å¸¸è§çš„åŸºæœ¬é”™è¯¯</h3><ul><li>{ å†™æ³•<blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ { ä¸èƒ½å•ç‹¬æ”¾åœ¨ä¸€è¡Œï¼Œæ‰€ä»¥ä»¥ä¸‹ä»£ç åœ¨è¿è¡Œæ—¶ä¼šäº§ç”Ÿé”™è¯¯ï¼š</p><pre class=" language-lang-go"><code class="language-lang-go">package mainimport "fmt"func main()  {  // é”™è¯¯ï¼Œ{ ä¸èƒ½åœ¨å•ç‹¬çš„è¡Œä¸Š fmt.Println("Hello, World!")}</code></pre></blockquote></li><li>å¤šä½™çš„ Imports<blockquote><p>Goç¼–è¯‘å™¨å¯¹Goç¨‹åºéå¸¸ä¸¥æ ¼ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨ï¼Œå°±ä¸è¦æœ‰å¤šä½™çš„è¯·æ±‚ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè¯•å›¾å¼•å…¥osåŒ…ï¼Œä½†æ˜¯åœ¨ä»£ç å½“ä¸­ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨ï¼ŒGoç¼–è¯‘å™¨å¯¹è¿™æ ·çš„è¡Œä¸ºä¸¥å‰ç¦æ­¢ã€‚å»æ‰ç¬¬å››è¡Œä»£ç ä¹‹åï¼Œç¨‹åºå°±èƒ½æ­£ç¡®ç¼–è¯‘è¿è¡Œã€‚</p></blockquote></li><li>å‘½ååŒºåˆ†å¤§å°å†™<blockquote><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæ‰“å°å‡½æ•°å†™çš„æ˜¯fmt.printlnä¸æ˜¯ä¹‹å‰æ‰€å†™çš„fmt.Printlnã€‚Goè¯­è¨€åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥åœ¨ç¼–ç¨‹æ—¶ï¼Œè¦ä¸¥æ ¼æŒ‰ç…§å®šä¹‰çš„æ–¹å¼è¿›è¡Œå¼•ç”¨å’Œè°ƒç”¨ã€‚</p></blockquote></li></ul><blockquote><p><strong>å°¤å…¶æ³¨æ„Printlnçš„lä¸æ˜¯içš„å¤§å†™Iï¼ï¼ï¼ï¼ï¼ï¼ˆpsï¼šå¤šæ¬¡å› ä¸ºå†™æˆPrintInè€Œè¢«æŠ¥é”™ï¼Œè™½ç„¶æœ‰ç‚¹ç™½ç—´ï¼Œä½†æ˜¯è¯·æ³¨æ„!</strong></p></blockquote><ul><li><p>åˆ†å·åˆ†è¡Œ</p><blockquote><p>å¦‚æœä½ å­¦è¿‡Cã€C++ã€Javaã€Perlç­‰ç­‰ï¼Œåº”è¯¥å·²ç»æ³¨æ„åˆ°Goï¼ˆè‡³å°‘åœ¨å‰é¢çš„ä»£ç ä¸­ï¼‰æ²¡æœ‰è¦æ±‚åœ¨è¯­å¥çš„æœ«å°¾æ·»åŠ åˆ†å·ã€‚å…¶å®åœ¨Goè¯­è¨€ä¸­ï¼Œä¼šè‡ªåŠ¨åœ¨ä¸€è¡Œçš„æœ«å°¾æ·»åŠ åˆ†å·ã€‚ç„¶è€Œï¼Œå¦‚æœåœ¨ä¸€æ ·æœ‰ä¸¤æ¡è¡¨è¾¾å¼ï¼Œéœ€è¦ç”¨åˆ†å·æ˜¾ç¤ºçš„è¿›è¡Œåˆ†å‰²ã€‚</p></blockquote></li><li><p>æ— æ•ˆçš„åˆ†å·</p><blockquote><p>åœ¨importåé¢ä¸å¯ä»¥åŒæ—¶åŠ å…¥ä¸¤ä¸ª;ç¬¬äºŒä¸ªåˆ†å·ä¹‹å‰æ²¡æœ‰ä»»ä½•æœ‰æ•ˆçš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æŠ¥äº†prog.go:3: empty top-level declarationé”™è¯¯ã€‚å»æ‰å¤šä½™çš„åˆ†å·ï¼Œç¨‹åºå¯æ­£ç¡®è¿è¡Œã€‚</p></blockquote></li></ul><h3 id="golangå­¦ä¹ ä»“åº“åœ°å€"><a href="#golangå­¦ä¹ ä»“åº“åœ°å€" class="headerlink" title="golangå­¦ä¹ ä»“åº“åœ°å€"></a>golangå­¦ä¹ ä»“åº“åœ°å€</h3><p><a href="https://github.com/WXiangQian/go-study">https://github.com/WXiangQian/go-study</a></p><blockquote><p>ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›ğŸ‘ï¼ï¼ï¼</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸‹elkã€ElasticSearchã€logstashã€kibanaå®‰è£…</title>
      <link href="2020/10/21/MacOS/Mac%E4%B8%8Belk%E3%80%81ElasticSearch%E3%80%81logstas%E3%80%81kibana%E5%AE%89%E8%A3%85/"/>
      <url>2020/10/21/MacOS/Mac%E4%B8%8Belk%E3%80%81ElasticSearch%E3%80%81logstas%E3%80%81kibana%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>Macç¯å¢ƒï¼šOS X 10.15.5</p><h3 id="å®‰è£…ELK"><a href="#å®‰è£…ELK" class="headerlink" title="å®‰è£…ELK"></a>å®‰è£…ELK</h3><p>elasticsearchã€logstashã€kibanaåœ¨macä¸‹çš„å®‰è£…ä¸å¯åŠ¨</p><h4 id="å®‰è£…java8"><a href="#å®‰è£…java8" class="headerlink" title="å®‰è£…java8"></a>å®‰è£…java8</h4><p>ç½‘ä¸Šæ•™ç¨‹éƒ½æ¨èä»¥ä¸‹å‘½ä»¤ï¼Œä½†æ˜¯é”™è¯¯çš„âŒ</p><pre><code>brew cask install homebrew/cask-versions/java8</code></pre><p>æŠ¥é”™ï¼šCask â€˜java8â€™ is unavailable: â€˜/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask-versions/Casks/java8.rbâ€™ does not exist.</p><blockquote><p>macç”¨homebrewå®‰è£…java8çš„æ—¶å€™æŠ¥é”™ï¼Œhomebrewé»˜è®¤ä¸æ”¯æŒjava8äº†ã€‚</p></blockquote><p>è§£å†³æ–¹æ¡ˆï¼š</p><pre><code>brew cask install homebrew/cask-versions/adoptopenjdk8</code></pre><h4 id="å®‰è£…es-elasticsearch"><a href="#å®‰è£…es-elasticsearch" class="headerlink" title="å®‰è£…es(elasticsearch)"></a>å®‰è£…es(elasticsearch)</h4><pre><code>brew install elasticsearch</code></pre><p>è¿è¡Œes</p><pre><code>brew services start elasticsearch</code></pre><blockquote><p>æŸ¥çœ‹å®‰è£…ä¿¡æ¯æ‰§è¡Œ <code>brew info elasticsearch</code></p></blockquote><p>curlè¯·æ±‚åœ°å€<code>http://localhost:9200</code>æˆ–è€…æµè§ˆå™¨è¯·æ±‚åœ°å€çœ‹ä¸€ä¸‹æ•ˆæœ</p><pre><code>curl http://localhost:9200</code></pre><p><img src="https://img-blog.csdnimg.cn/20200907191225118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><pre><code>{  "name" : "wxiangqiandeMacBook-Pro.local",  "cluster_name" : "elasticsearch_brew",  "cluster_uuid" : "K1g6JY_6RYaqxNTa_niphA",  "version" : {    "number" : "7.8.1-SNAPSHOT",    "build_flavor" : "oss",    "build_type" : "tar",    "build_hash" : "unknown",    "build_date" : "2020-07-31T16:57:12.889003Z",    "build_snapshot" : true,    "lucene_version" : "8.5.1",    "minimum_wire_compatibility_version" : "6.8.0",    "minimum_index_compatibility_version" : "6.0.0-beta1"  },  "tagline" : "You Know, for Search"}</code></pre><h4 id="å®‰è£…logstash"><a href="#å®‰è£…logstash" class="headerlink" title="å®‰è£…logstash"></a>å®‰è£…logstash</h4><pre><code>brew install logstash</code></pre><h4 id="å®‰è£…Kibana"><a href="#å®‰è£…Kibana" class="headerlink" title="å®‰è£…Kibana"></a>å®‰è£…Kibana</h4><p>Kibanaæ˜¯ESçš„ä¸€ä¸ªé…å¥—å·¥å…·ï¼Œå¯ä»¥è®©ç”¨æˆ·åœ¨ç½‘é¡µä¸­ä¸ESè¿›è¡Œäº¤äº’</p><pre><code>brew install kibana</code></pre><p>å¯åŠ¨Kibana</p><pre><code>brew services start kibana</code></pre><p>æœ¬åœ°æµè§ˆå™¨è®¿é—®</p><pre><code>http://localhost:5601</code></pre><blockquote><p>ç®€å•çš„elkå®‰è£…å°±åˆ°è¿™é‡Œäº†ï¼</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> MacOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel join å­æŸ¥è¯¢ joinSubçš„æºç å‰–æ</title>
      <link href="2020/09/24/laravel/laravel%20join%20%E5%AD%90%E6%9F%A5%E8%AF%A2%20joinSub%E7%9A%84%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/"/>
      <url>2020/09/24/laravel/laravel%20join%20%E5%AD%90%E6%9F%A5%E8%AF%A2%20joinSub%E7%9A%84%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æƒ³å®ç°joinä¸­ä½¿ç”¨å­æŸ¥è¯¢çš„éœ€æ±‚ï¼Œäºæ˜¯æ ¹æ®æ–‡æ¡£ä»¥åŠæºç å¯»æ‰¾æ–¹æ³•</p></blockquote><h3 id="æƒ³è¦å®ç°çš„åŸç”Ÿsql"><a href="#æƒ³è¦å®ç°çš„åŸç”Ÿsql" class="headerlink" title="æƒ³è¦å®ç°çš„åŸç”Ÿsql"></a>æƒ³è¦å®ç°çš„åŸç”Ÿsql</h3><pre class=" language-lang-sql"><code class="language-lang-sql">SELECT*FROM    `a`    LEFT JOIN ( SELECT * FROM `b` WHERE `type` = 2 ) AS b     AND ( `a`.`a` = `b`.`a` AND `a`.`b` = `b`.`b` AND `a`.`c` = `b`.`c` )     OR  ( `a`.`a` = `b`.`a` AND `a`.`b` = `b`.`b` AND `a`.`d` = `b`.`d` )</code></pre><h4 id="å®˜æ–¹æ–‡æ¡£ç»™çš„æ–¹æ³•-å­æŸ¥è¯¢è”æ¥"><a href="#å®˜æ–¹æ–‡æ¡£ç»™çš„æ–¹æ³•-å­æŸ¥è¯¢è”æ¥" class="headerlink" title="å®˜æ–¹æ–‡æ¡£ç»™çš„æ–¹æ³•(å­æŸ¥è¯¢è”æ¥)"></a>å®˜æ–¹æ–‡æ¡£ç»™çš„æ–¹æ³•(å­æŸ¥è¯¢è”æ¥)</h4><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>joinSub</code>ï¼Œ<code>leftJoinSub</code>å’Œ<code>rightJoinSub</code>æ–¹æ³•åŠ å…¥æŸ¥è¯¢çš„å­æŸ¥è¯¢ã€‚è¿™äº›æ–¹æ³•ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šå­æŸ¥è¯¢ï¼Œå…¶è¡¨åˆ«åå’Œå®šä¹‰ç›¸å…³åˆ—çš„Closureï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">$latestPosts = DB::table('posts')                   ->select('user_id', DB::raw('MAX(created_at) as last_post_created_at'))                   ->where('is_published', true)                   ->groupBy('user_id');$users = DB::table('users')        ->joinSub($latestPosts, 'latest_posts', function ($join) {            $join->on('users.id', '=', 'latest_posts.user_id');        })->get();</code></pre><h3 id="å®ç°æ–¹æ³•1ï¼šjoinSub"><a href="#å®ç°æ–¹æ³•1ï¼šjoinSub" class="headerlink" title="å®ç°æ–¹æ³•1ï¼šjoinSub"></a>å®ç°æ–¹æ³•1ï¼šjoinSub</h3><pre class=" language-lang-php"><code class="language-lang-php">$query = DB::table('table_name2')->where('type','=',2);$info = DB::table('table_name')            ->joinSub($query,'table_name2', function ($join) {                $join->on([                    ['table_name.a', '=', 'table_name2.a'],                    ['table_name.b', '=', 'table_name2.b'],                    ['table_name.c', '=', 'table_name2.c'],                ])->orOn([                    ['table_name.a', '=', 'table_name2.a'],                    ['table_name.b', '=', 'table_name2.b'],                    ['table_name.d', '=', 'table_name2.d'],                ]);            })->get();</code></pre><h3 id="å®ç°æ–¹æ³•2ï¼šjoin-getBindings-addBinding"><a href="#å®ç°æ–¹æ³•2ï¼šjoin-getBindings-addBinding" class="headerlink" title="å®ç°æ–¹æ³•2ï¼šjoin+getBindings+addBinding"></a>å®ç°æ–¹æ³•2ï¼šjoin+getBindings+addBinding</h3><p>ps: join+å­æŸ¥è¯¢åªæœ‰ç”¨åˆ°whereçš„æ—¶å€™æ‰éœ€è¦addBindingï¼Œå¦åˆ™sqlè¯­å¥ä¼šåªæœ‰â€™?â€™</p><pre class=" language-lang-php"><code class="language-lang-php">$query = DB::table('table_name2')->where('type','=',2);$info = DB::table('table_name')            ->join(DB::raw('('.$query->toSql().') as table_name2'), function ($join) use ($query) {                $join->on([                    ['table_name.a', '=', 'table_name2.a'],                    ['table_name.b', '=', 'table_name2.b'],                    ['table_name.c', '=', 'table_name2.c'],                ])->orOn([                        ['table_name.a', '=', 'table_name2.a'],                        ['table_name.b', '=', 'table_name2.b'],                        ['table_name.d', '=', 'table_name2.d'],                    ])->addBinding($query->getBindings());            })->get();</code></pre><h3 id="æºç å‰–æjoinSubæ–¹æ³•"><a href="#æºç å‰–æjoinSubæ–¹æ³•" class="headerlink" title="æºç å‰–æjoinSubæ–¹æ³•"></a>æºç å‰–æjoinSubæ–¹æ³•</h3><p>æ–‡ä»¶åœ°å€ï¼š<code>/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php</code></p><pre class=" language-lang-php"><code class="language-lang-php">/**  * AddHoneycombLog a subquery join clause to the query.  *  * @param  \Closure|\Illuminate\Database\Query\Builder|string  $query  * @param  string  $as  * @param  \Closure|string  $first  * @param  string|null  $operator  * @param  string|null  $second  * @param  string  $type  * @param  bool  $where  * @return \Illuminate\Database\Query\Builder|static  *  * @throws \InvalidArgumentException  */ public function joinSub($query, $as, $first, $operator = null, $second = null, $type = 'inner', $where = false) {      // ç»“æœï¼šqueryä¸ºåŸç”Ÿsqlï¼Œbindingsä¸ºgetBindingsçš„ç»‘å®šå‚æ•°      // createSubæ–¹æ³•è§ä¸‹æ–¹     [$query, $bindings] = $this->createSub($query);     $expression = '('.$query.') as '.$this->grammar->wrapTable($as);     $this->addBinding($bindings, 'join');     return $this->join(new Expression($expression), $first, $operator, $second, $type, $where); } /**  * Creates a subquery and parse it.  *  * @param  \Closure|\Illuminate\Database\Query\Builder|string  $query  * @return array  */ protected function createSub($query) {     // If the given query is a Closure, we will execute it while passing in a new     // query instance to the Closure. This will give the developer a chance to     // format and work with the query before we cast it to a raw SQL string.     if ($query instanceof Closure) {         $callback = $query;         $callback($query = $this->forSubQuery());     }     return $this->parseSub($query); } /**   * Parse the subquery into SQL and bindings.   *   * @param  mixed  $query   * @return array   *   * @throws \InvalidArgumentException   */  protected function parseSub($query)  {      if ($query instanceof self || $query instanceof EloquentBuilder) {          return [$query->toSql(), $query->getBindings()];      } elseif (is_string($query)) {          return [$query, []];      } else {          throw new InvalidArgumentException(              'A subquery must be a query builder instance, a Closure, or a string.'          );      }  }/**  * AddHoneycombLog a binding to the query.  *  * @param  mixed  $value  * @param  string  $type  * @return $this  *  * @throws \InvalidArgumentException  */  public function addBinding($value, $type = 'where')  {      if (! array_key_exists($type, $this->bindings)) {          throw new InvalidArgumentException("Invalid binding type: {$type}.");      }      if (is_array($value)) {          $this->bindings[$type] = array_values(array_merge($this->bindings[$type], $value));      } else {          $this->bindings[$type][] = $value;      }      return $this;  }</code></pre><blockquote><p>ä¸Šè¿°ä»£ç å·²ç”¨modelçš„æ–¹å¼å®ç°äº†åŸç”Ÿsql</p></blockquote><p>laravel join å­æŸ¥è¯¢ joinSubçš„æºç å‰–æå°±åˆ°è¿™äº†ï¼Œå¸Œæœ›æ–‡ç« å¯ä»¥å¸®å¿™è§£å†³ä½ çš„éš¾é¢˜ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨ğŸ‘</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel leftjoin on orOnçš„æºç å‰–æ</title>
      <link href="2020/09/21/laravel/laravel%20leftjoin%20on%20orOn%E7%9A%84%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/"/>
      <url>2020/09/21/laravel/laravel%20leftjoin%20on%20orOn%E7%9A%84%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>leftjoinè¿æ¥æ—¶éœ€è¦å¯¹ä¸æ­¢ä¸€ä¸ªæ¡ä»¶è¿›è¡Œè¿›è¡ŒåŒ¹é…ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨é—­åŒ…æ–¹å¼</p><pre><code>leftjoin('db', function ($join) {Â·Â·Â·});</code></pre><h3 id="åŸç”Ÿjoin-orOnä¾‹å­"><a href="#åŸç”Ÿjoin-orOnä¾‹å­" class="headerlink" title="åŸç”Ÿjoin orOnä¾‹å­"></a>åŸç”Ÿjoin orOnä¾‹å­</h3><p>åŸç”Ÿsqlä¾‹å­å¦‚ä¸‹ï¼š</p><pre class=" language-lang-sql"><code class="language-lang-sql">SELECT    *FROM    `a`    LEFT JOIN `b` ON `b`.`deleted_at` IS NULL     AND ( `a`.`a` = `b`.`a` AND `a`.`b` = `b`.`b` AND `a`.`c` = `b`.`c` )     OR  ( `a`.`a` = `b`.`a` AND `a`.`b` = `b`.`b` AND `a`.`d` = `b`.`d` )</code></pre><blockquote><p>æƒ³ç”¨modelçš„æ–¹æ³•å®ç°join çš„ orOnï¼Œç™¾åº¦è°·æ­Œè¿‡åæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„èµ„æ–™</p></blockquote><p>å®˜æ–¹æ–‡æ¡£çš„orOnèµ„æ–™å¦‚ä¸‹ï¼š<br><a href="https://laravel.com/docs/6.x/queries#joins">https://laravel.com/docs/6.x/queries#joins</a></p><h4 id="Cross-Join-Clause"><a href="#Cross-Join-Clause" class="headerlink" title="Cross Join Clause"></a>Cross Join Clause</h4><p>To perform a â€œcross joinâ€ use the crossJoin method with the name of the table you wish to cross join to. Cross joins generate a cartesian product between the first table and the joined table:</p><pre class=" language-lang-php"><code class="language-lang-php">$users = DB::table('sizes')            ->crossJoin('colors')            ->get();</code></pre><h4 id="Advanced-Join-Clauses"><a href="#Advanced-Join-Clauses" class="headerlink" title="Advanced Join Clauses"></a>Advanced Join Clauses</h4><p>You may also specify more advanced join clauses. To get started, pass a Closure as the second argument into the join method. The Closure will receive a JoinClause object which allows you to specify constraints on the join clause:</p><pre class=" language-lang-php"><code class="language-lang-php">DB::table('users')        ->join('contacts', function ($join) {            $join->on('users.id', '=', 'contacts.user_id')->orOn(...);        })        ->get();</code></pre><h3 id="æºç å‰–æ"><a href="#æºç å‰–æ" class="headerlink" title="æºç å‰–æ"></a>æºç å‰–æ</h3><p>è¿™æ—¶å€™åªèƒ½å¯»æ‰¾æºç äº†</p><h4 id="å…ˆä»-join-gt-onå¼€å§‹"><a href="#å…ˆä»-join-gt-onå¼€å§‹" class="headerlink" title="å…ˆä»$join->onå¼€å§‹"></a>å…ˆä»<code>$join-&gt;on</code>å¼€å§‹</h4><p>æ–‡ä»¶åœ°å€ï¼š<code>/vendor/laravel/framework/src/Illuminate/Database/Query/JoinClause.php</code></p><pre class=" language-lang-php"><code class="language-lang-php">/**  * AddHoneycombLog an "on" clause to the join.  *  * On clauses can be chained, e.g.  *  *  $join->on('contacts.user_id', '=', 'users.id')  *       ->on('contacts.info_id', '=', 'info.id')  *  * will produce the following SQL:  *  * on `contacts`.`user_id` = `users`.`id` and `contacts`.`info_id` = `info`.`id`  *  * @param  \Closure|string  $first  * @param  string|null  $operator  * @param  string|null  $second  * @param  string  $boolean  * @return $this  *  * @throws \InvalidArgumentException  */ public function on($first, $operator = null, $second = null, $boolean = 'and') {     if ($first instanceof Closure) {         return $this->whereNested($first, $boolean);     }     return $this->whereColumn($first, $operator, $second, $boolean); } /**  * AddHoneycombLog an "or on" clause to the join.  *  * @param  \Closure|string  $first  * @param  string|null  $operator  * @param  string|null  $second  * @return \Illuminate\Database\Query\JoinClause  */ public function orOn($first, $operator = null, $second = null) {     return $this->on($first, $operator, $second, 'or'); }</code></pre><blockquote><p>ç”±ä¸Šå¯è§ï¼Œjoinä¸­çš„on å¯ä»¥ä¼ é€’ <code>$boolean = 'or'</code>çš„<br>ä½¿ç”¨on ä¼ é€’booleanå‚æ•° === orOnæ–¹æ³•</p></blockquote><h4 id="å•whereæ¡ä»¶"><a href="#å•whereæ¡ä»¶" class="headerlink" title="å•whereæ¡ä»¶"></a>å•whereæ¡ä»¶</h4><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç å®ç°ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">$info = DB::table('table_name')    ->leftJoin('table_name2', function ($join) {        $join->on('table_name.a', '=', 'table_name2.a')             ->orOn('table_name.b', '=', 'table_name2.b');    })->get();</code></pre><h4 id="æŸ¥çœ‹whereColumnæ–¹æ³•"><a href="#æŸ¥çœ‹whereColumnæ–¹æ³•" class="headerlink" title="æŸ¥çœ‹whereColumnæ–¹æ³•"></a>æŸ¥çœ‹<code>whereColumn</code>æ–¹æ³•</h4><p>æ–‡ä»¶åœ°å€ï¼š<code>/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php</code></p><pre class=" language-lang-php"><code class="language-lang-php">/** * AddHoneycombLog a "where" clause comparing two columns to the query. * * @param  string|array  $first * @param  string|null  $operator * @param  string|null  $second * @param  string|null  $boolean * @return \Illuminate\Database\Query\Builder|static */public function whereColumn($first, $operator = null, $second = null, $boolean = 'and'){    // If the column is an array, we will assume it is an array of key-value pairs    // and can add them each as a where clause. We will maintain the boolean we    // received when the method was called and pass it into the nested where.    if (is_array($first)) {        return $this->addArrayOfWheres($first, $boolean, 'whereColumn');    }    // If the given operator is not found in the list of valid operators we will    // assume that the developer is just short-cutting the '=' operators and    // we will set the operators to '=' and set the values appropriately.    if ($this->invalidOperator($operator)) {        [$second, $operator] = [$operator, '='];    }    // Finally, we will add this where clause into this array of clauses that we    // are building for the query. All of them will be compiled via a grammar    // once the query is about to be executed and run against the database.    $type = 'Column';    $this->wheres[] = compact(        'type', 'first', 'operator', 'second', 'boolean'    );    return $this;}</code></pre><blockquote><p>ç”±<code>is_array</code>å¯è§ï¼Œæ˜¯å¯ä»¥ä¼ é€’æ•°ç»„çš„</p></blockquote><h4 id="å¤šwhereæ¡ä»¶"><a href="#å¤šwhereæ¡ä»¶" class="headerlink" title="å¤šwhereæ¡ä»¶"></a>å¤šwhereæ¡ä»¶</h4><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç å®ç°ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">$info = DB::table('table_name')    ->leftJoin('table_name2', function ($join) {        $join->on([                   ['table_name.a', '=', 'table_name2.a'],                   ['table_name.b', '=', 'table_name2.b'],                   ['table_name.c', '=', 'table_name2.c'],             ])           ->orOn([                   ['table_name.a', '=', 'table_name2.a'],                   ['table_name.b', '=', 'table_name2.b'],                   ['table_name.d', '=', 'table_name2.d'],           ]);    })->get();</code></pre><blockquote><p>ä¸Šè¿°ä»£ç å·²ç”¨modelçš„æ–¹å¼å®ç°äº†åŸç”Ÿsql</p></blockquote><p>laravel leftjoin on orOnçš„æºç å‰–æå°±åˆ°è¿™äº†ï¼Œå¸Œæœ›æ–‡ç« å¯ä»¥å¸®å¿™è§£å†³ä½ çš„éš¾é¢˜ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨ğŸ‘</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel Api æŠ¥é”™429 Too Many Attempts.</title>
      <link href="2020/09/10/laravel/Laravel%20Api%20%E6%8A%A5%E9%94%99429%20Too%20Many%20Attempts./"/>
      <url>2020/09/10/laravel/Laravel%20Api%20%E6%8A%A5%E9%94%99429%20Too%20Many%20Attempts./</url>
      
        <content type="html"><![CDATA[<h3 id="429-Too-Many-Attempts"><a href="#429-Too-Many-Attempts" class="headerlink" title="429 Too Many Attempts."></a>429 Too Many Attempts.</h3><p>åœ¨ Laravel ä¸­è¯¥åŠŸèƒ½é€šè¿‡å†…ç½®çš„ throttle ä¸­é—´ä»¶æ¥å®ç°ï¼Œè¯¥ä¸­é—´ä»¶æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ¬¡æ•°ä¸Šé™ï¼Œç¬¬äºŒä¸ªæ˜¯æŒ‡å®šæ—¶é—´æ®µï¼ˆå•ä½ï¼šåˆ†é’Ÿï¼‰<br><img src="https://img-blog.csdnimg.cn/20200722092509477.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•° 100 ä»£è¡¨æ¯åˆ†é’Ÿé™åˆ¶ 100 æ¬¡è¯·æ±‚</li><li>ç¬¬äºŒä¸ªå‚æ•° 1 ä»£è¡¨è§¦å‘äº†é™åˆ¶è§„åˆ™ï¼Œåˆ™1åˆ†é’Ÿå†…ç¦æ­¢è®¿é—®</li></ul><blockquote><p>æ ¹æ®å®é™…æƒ…å†µå°†ç¬¬ä¸€ä¸ªå‚æ•°ä¿®æ”¹ä¸ºæ›´å¤§ï¼Œä¾‹å¦‚ï¼š10000</p></blockquote><p>å–æ¶ˆ API æ¥å£é»˜è®¤çš„è¯·æ±‚é¢‘ç‡é™åˆ¶,ç›´æ¥æ³¨é‡Šå°±å¯ä»¥</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨phpå®ç°æ— é™æåˆ†ç±»åŠŸèƒ½</title>
      <link href="2020/08/26/php/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%94%A8php%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E6%9E%81%E5%88%86%E7%B1%BB%E5%8A%9F%E8%83%BD/"/>
      <url>2020/08/26/php/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%94%A8php%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E6%9E%81%E5%88%86%E7%B1%BB%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<p>phpè½»æ¾å®ç°æ— é™æåˆ†ç±»åŠŸèƒ½</p><blockquote><p>æœ¬æ–‡çš„  <strong>todo</strong>  éƒ½æ˜¯éœ€è¦è‡ªè¡Œä¿®æ”¹çš„</p></blockquote><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>å¦‚ï¼š</p><ul><li>é¢åŒ…å±‘å¯¼èˆª</li><li>åˆ†ç±»ï¼ˆå¦‚ï¼šå•†å“åˆ†ç±»ã€è¯¾ç¨‹åˆ†ç±»ã€åŸå¸‚ï¼‰</li><li>æ–‡ä»¶å¤¹</li></ul><a id="more"></a><h3 id="æ•°æ®è¡¨è®¾è®¡"><a href="#æ•°æ®è¡¨è®¾è®¡" class="headerlink" title="æ•°æ®è¡¨è®¾è®¡"></a>æ•°æ®è¡¨è®¾è®¡</h3><p>codeå­—æ®µæ˜¯ä¸ºäº†æ–¹ä¾¿ç­›é€‰</p><pre class=" language-lang-sql"><code class="language-lang-sql">// todo è¡¨åéœ€è¦æ›´æ¢CREATE TABLE `è¡¨å` (  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  `pid` int(11) unsigned NOT NULL DEFAULT '0',  `name` varchar(191) COLLATE utf8_unicode_ci NOT NULL COMMENT 'åç§°',  `code` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'codeç :ä¸Šçº§code+æœ¬çº§id+pid',  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'ä¿®æ”¹æ—¶é—´',  PRIMARY KEY (`id`) USING BTREE) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC COMMENT='XXX';</code></pre><h3 id="æ•°æ®è¡¨æ•°æ®"><a href="#æ•°æ®è¡¨æ•°æ®" class="headerlink" title="æ•°æ®è¡¨æ•°æ®"></a>æ•°æ®è¡¨æ•°æ®</h3><p><img src="https://img-blog.csdnimg.cn/20200804172349530.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="æ— é™æåˆ†ç±»çš„åˆ—è¡¨å¤„ç†é€»è¾‘"><a href="#æ— é™æåˆ†ç±»çš„åˆ—è¡¨å¤„ç†é€»è¾‘" class="headerlink" title="æ— é™æåˆ†ç±»çš„åˆ—è¡¨å¤„ç†é€»è¾‘"></a>æ— é™æåˆ†ç±»çš„åˆ—è¡¨å¤„ç†é€»è¾‘</h3><p><img src="https://img-blog.csdnimg.cn/20200818154747462.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70#pic_center" alt="å›¾ç‰‡æ¥æºäºç½‘ç»œ"></p><p>å› ä¸ºæ˜¯demoï¼Œæ‰€ä»¥éƒ½æ•´åˆåˆ°ä¸€ä¸ªfunctionäº†ï¼Œè¯·è‡ªè¡Œæ‹†åˆ†</p><pre class=" language-lang-php"><code class="language-lang-php">public function getList(){    // todo å…ˆæŸ¥è¯¢å‡ºæ•°æ®è¡¨çš„æ‰€æœ‰æ•°æ® data    $data = Model::get();    // å¤„ç†æ•°æ®    $source = [];    foreach ($data as $v) {        $source[] = [            'id' => $v->id,            'pid' => $v->pid,            'name' => $v->name,            'code' => $v->code        ];    }    // ç”Ÿæˆtreeæ•°æ®    $pk = 'id'; //ä¸»é”®æ ‡è®°å­—æ®µ    $pid = 'pid'; //parentæ ‡è®°å­—æ®µ    $child = 'children';//childæ ‡è®°å­—æ®µ    $root = 0;    $list = $source //è¦è½¬æ¢çš„äºŒç»´ç»“æœé›†    $tree = [];    if (is_array($list)) {        //åˆ›å»ºåŸºäºä¸»é”®çš„æ•°ç»„å¼•ç”¨        $refer = array();        foreach ($list as $key => $data) {            $refer[$data[$pk]] = &$list[$key];            //åˆ¤æ–­æ˜¯å¦å­˜åœ¨parent            $parantId = $data[$pid];            if ($root == $parantId) {                $tree[] = &$list[$key];            } else {                if (isset($refer[$parantId])) {                    $parent = &$refer[$parantId];                    $parent[$child][] = &$list[$key];                }            }        }    }    return response()->json([            'code' => '1',            'msg' => 'success,            'data' => $tree        ]);}</code></pre><h4 id="apiè¿”å›æ ¼å¼"><a href="#apiè¿”å›æ ¼å¼" class="headerlink" title="apiè¿”å›æ ¼å¼"></a>apiè¿”å›æ ¼å¼</h4><pre class=" language-lang-json"><code class="language-lang-json">{    "code": 1,    "msg": "success",    "data": [        {            "id": 1,            "pid": 0,            "name": "åŒ—äº¬",            "code": "10",            "children": [                {                    "id": 2,                    "pid": 1,                    "name": "æ˜Œå¹³",                    "code": "1021",                    "children": [                        {                            "id": 3,                            "pid": 2,                            "name": "å›é¾™è§‚",                            "code": "102132",                            "children": [                                {                                    "id": 4,                                    "pid": 3,                                    "name": "é‡‘åŸŸååºœ",                                    "code": "10213243"                                },                                {                                    "id": 8,                                    "pid": 3,                                    "name": "èæ³½å®¶å›­",                                    "code": "10213283"                                }                            ]                        },                        {                            "id": 5,                            "pid": 2,                            "name": "é¾™æ³½",                            "code": "102152",                            "children": [                                {                                    "id": 7,                                    "pid": 5,                                    "name": "é¾™åå›­",                                    "code": "10215275"                                },                                {                                    "id": 9,                                    "pid": 5,                                    "name": "é¾™æ³½è‹‘",                                    "code": "10215295"                                }                            ]                        }                    ]                },                {                    "id": 6,                    "pid": 1,                    "name": "æœé˜³",                    "code": "1061"                }            ]        }    ]}</code></pre><h3 id="æ‹¼è£…æ— é™æåˆ†ç±»name"><a href="#æ‹¼è£…æ— é™æåˆ†ç±»name" class="headerlink" title="æ‹¼è£…æ— é™æåˆ†ç±»name"></a>æ‹¼è£…æ— é™æåˆ†ç±»name</h3><p>æ‹¼è£…çš„å­—ç¬¦ä¸²å®ä¾‹ï¼š</p><ul><li>åŒ—äº¬/æ˜Œå¹³/å›é¾™è§‚</li><li>åŒ—äº¬/æ˜Œå¹³</li></ul><pre class=" language-lang-php"><code class="language-lang-php">public function getData(){    // ä»¥codeä¸ºkeyçš„åˆ†ç±»ä¿¡æ¯    $codeList = [];    // å…ˆæŸ¥è¯¢å‡ºæ•°æ®è¡¨çš„æ‰€æœ‰æ•°æ® list    $list = Model::get();    foreach ($list as $v) {      $codeList[$v['code']] = $v;      }    // todo $data å…¶å®ƒåˆ—è¡¨æ•°æ®    foreach($data as &$v) {        // todo childéœ€è¦è‡ªå·±æ‹¼è£…        $child = [            'pid' => 1,            'name' => 'æ˜Œå¹³'        ];        if ($child['pid'] && $child['name']) {            $deptName = $this->getDeptName($departmentList, $child);        } else {            $deptName = $child['name'] ?? '-';        }        $v['str'] = $deptName;    }}/** * æ‹¼æ¥ç»„ç»‡æ¶æ„å­—ç¬¦ä¸² * @param $data [] * @param $child [] * @return mixed * User: WXiangQian */public function getDeptName($data, $child){    $pid = $child['pid'];    if ($child['pid'] == 0) {        return $child['name'];    }    foreach ($data as $k => $v) {        if ($child['pid'] == $v['id']) {            // todo æš‚æ—¶ç”¨ / å»æ‹¼æ¥çš„ï¼Œä¹Ÿå¯ä»¥ç”¨ - è‡ªå®šä¹‰            $child['name'] = $v['name'] . '/' . $child['name'];            $child['pid'] = $v['pid'];            unset($data[$k]);        }    }    // æœªæ‰¾åˆ°æ•°æ®ï¼Œåˆ™è¿”å› â€œ-â€ æ•°æ®    if ($pid == $child['pid']) {        return '-';    }    return $this->getDeptName($data, $child);}</code></pre><h3 id="å®ç°æ•ˆæœå›¾"><a href="#å®ç°æ•ˆæœå›¾" class="headerlink" title="å®ç°æ•ˆæœå›¾"></a>å®ç°æ•ˆæœå›¾</h3><p><img src="https://img-blog.csdnimg.cn/20200818155129788.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20200818155144917.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>phpè½»æ¾å®ç°æ— é™æåˆ†ç±»åŠŸèƒ½å°±ç®€å•åˆ°è¿™äº†ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨ğŸ‘</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jwt-authæ ¹æ®tokenåè§£æå‡ºç”¨æˆ·ä¿¡æ¯</title>
      <link href="2020/08/10/php/jwt-auth%E6%A0%B9%E6%8D%AEtoken%E5%8F%8D%E8%A7%A3%E6%9E%90%E5%87%BA%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF/"/>
      <url>2020/08/10/php/jwt-auth%E6%A0%B9%E6%8D%AEtoken%E5%8F%8D%E8%A7%A3%E6%9E%90%E5%87%BA%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p>tokenè§£å¯†ä½¿ç”¨authenticateæ–¹æ³•ï¼Œæ³¨æ„è¦å…ˆsetTokenï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">use Tymon\JWTAuth\JWTAuth;class VerifySign extends JWTAuth{    public function getUserInfo($token)    {          $this->setToken($token);          $user = $this->authenticate();          reutrn $user;    }}</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸‹å®‰è£…swooleçš„æ­¥éª¤ä»¥åŠé‡åˆ°çš„é—®é¢˜</title>
      <link href="2020/08/03/php/Mac%E4%B8%8B%E5%AE%89%E8%A3%85swoole%E7%9A%84%E6%AD%A5%E9%AA%A4%E4%BB%A5%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>2020/08/03/php/Mac%E4%B8%8B%E5%AE%89%E8%A3%85swoole%E7%9A%84%E6%AD%A5%E9%AA%A4%E4%BB%A5%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Swoole æ‰©å±•æ˜¯æŒ‰ç…§ PHP æ ‡å‡†æ‰©å±•æ„å»ºçš„ã€‚ä½¿ç”¨ phpize æ¥ç”Ÿæˆç¼–è¯‘æ£€æµ‹è„šæœ¬ï¼Œ./configure æ¥åšç¼–è¯‘é…ç½®æ£€æµ‹ï¼Œmake è¿›è¡Œç¼–è¯‘ï¼Œmake install è¿›è¡Œå®‰è£…ã€‚</p></blockquote><p>Swooleå®˜æ–¹åœ°å€<a href="https://www.swoole.com">https://www.swoole.com</a><br>Swooleå®˜æ–¹æ–‡æ¡£<a href="https://wiki.swoole.com">https://wiki.swoole.com</a></p><h3 id="å®‰è£…å‡†å¤‡"><a href="#å®‰è£…å‡†å¤‡" class="headerlink" title="å®‰è£…å‡†å¤‡"></a>å®‰è£…å‡†å¤‡</h3><p>å®‰è£…å‰å¿…é¡»ä¿è¯ç³»ç»Ÿå·²ç»å®‰è£…äº†ä¸‹åˆ—è½¯ä»¶</p><ul><li>php-7.1 æˆ–æ›´é«˜ç‰ˆæœ¬</li><li>gcc-4.8 æˆ–æ›´é«˜ç‰ˆæœ¬</li><li>make</li><li>autoconf<a id="more"></a><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3></li></ul><ol><li><p>ä¸‹è½½ swoole æºç <br>é¦–å…ˆå»GitHubä¸‹è½½å‹ç¼©åŒ…:<a href="https://github.com/swoole/swoole-src/releases">https://github.com/swoole/swoole-src/releases</a></p></li><li><p>ä»æºç ç¼–è¯‘å®‰è£…</p><pre><code>phpize</code></pre></li></ol><pre><code>sudo ./configure</code></pre><pre><code>make &amp;&amp; sudo make install</code></pre><ol><li>å¯ç”¨æ‰©å±•<br>ç¼–è¯‘å®‰è£…åˆ°ç³»ç»ŸæˆåŠŸåï¼Œéœ€è¦åœ¨ php.ini ä¸­åŠ å…¥ä¸€è¡Œ <strong>extension=swoole.so</strong> æ¥å¯ç”¨ Swoole æ‰©å±•</li></ol><h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><p>æ‰§è¡Œ phpize æŠ¥é”™å¦‚ä¸‹ï¼š</p><pre><code>phpize grep: /usr/include/php/main/php.h: No such file or directorygrep: /usr/include/php/Zend/zend_modules.h: No such file or directorygrep: /usr/include/php/Zend/zend_extensions.h: No such file or directoryConfiguring for:PHP Api Version:        Zend Module Api No:     Zend Extension Api No:</code></pre><p>è§£å†³æ–¹æ³•</p><pre><code>ln -s /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include /usr/include</code></pre><p>æ³¨:å¦‚æœè¿˜æ˜¯æ²¡æœ‰æˆåŠŸï¼Œåˆ™åº”è¯¥å…³é—­Rootless</p><h4 id="å¼€å…³-Rootless"><a href="#å¼€å…³-Rootless" class="headerlink" title="å¼€å…³ Rootless"></a>å¼€å…³ Rootless</h4><p>å…³é—­å’Œå¼€å¯ Rootless éå¸¸ç®€å•ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><p>é‡å¯ Macï¼Œå¬åˆ°å¼€æœºå¯åŠ¨å£°åæŒ‰ä¸‹ Command+Rï¼Œè¿›å…¥æ¢å¤æ¨¡å¼ï¼Œåœ¨ä¸Šé¢çš„èœå•å®ç”¨å·¥å…·ä¸­æ‰¾åˆ°å¹¶æ‰“å¼€ Terminalï¼ˆå¦‚æœé¡¶éƒ¨æ²¡å‡ºç°èœå•ï¼Œè¯·ç»§ç»­é‡å¯^_^ï¼‰ã€‚è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><ol><li>å…³é—­ Rootless<pre><code>csrutil disable</code></pre></li><li>å¼€å¯ Rootless<pre><code>csrutil enable</code></pre>æ‰§è¡Œå®Œå‘½ä»¤åï¼Œé‡å¯ç”µè„‘å³å¯ç”Ÿæ•ˆã€‚</li></ol><p><strong>Macä¸‹å®‰è£…swooleæ­¥éª¤ä»¥åŠé‡åˆ°çš„é—®é¢˜å°±ç®€å•åˆ°è¿™äº†ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨ğŸ‘</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹OpenSSLè‡ªç­¾sslè¯ä¹¦</title>
      <link href="2020/07/28/linux/Linux%E4%B8%8BOpenSSL%E8%87%AA%E7%AD%BEssl%E8%AF%81%E4%B9%A6/"/>
      <url>2020/07/28/linux/Linux%E4%B8%8BOpenSSL%E8%87%AA%E7%AD%BEssl%E8%AF%81%E4%B9%A6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç¿»éå¤šç¯‡è‡ªç­¾sslè¯ä¹¦èµ„æ–™æ€»ç»“çš„ç»éªŒï¼Œä¸è¿‡è¿˜æ˜¯æ¨èç”¨é˜¿é‡Œäº‘å…è´¹çš„è¯ä¹¦ã€‚å› å†…ç½‘éœ€è¦ç”¨åˆ°çš„è¯ä¹¦ï¼Œæ‰€ä»¥ä½¿ç”¨äº†è‡ªç­¾sslã€‚</p></blockquote><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>HTTPSæœåŠ¡æ˜¯å·¥ä½œåœ¨SSL/TLSä¸Šçš„HTTPã€‚<br>é¦–å…ˆç®€å•åŒºåˆ†ä¸€ä¸‹HTTPSï¼ŒSSL ï¼ŒTLS ï¼ŒOpenSSLè¿™å››è€…çš„å…³ç³»ï¼š</p><ul><li>SSLï¼šï¼ˆSecure Socket Layerï¼Œå®‰å…¨å¥—æ¥å­—å±‚ï¼‰æ˜¯åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€æ¡SSLå®‰å…¨é€šé“çš„å®‰å…¨åè®®ï¼›</li><li>TLSï¼šï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨åè®®ï¼‰ï¼Œç”¨äºä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´æä¾›ä¿å¯†æ€§å’Œæ•°æ®å®Œæ•´æ€§ï¼›</li><li>TLSçš„å‰èº«æ˜¯SSLï¼›</li><li>OpenSSLæ˜¯TLS/SSLåè®®çš„å¼€æºå®ç°ï¼Œæä¾›å¼€å‘åº“å’Œå‘½ä»¤è¡Œç¨‹åºï¼›</li><li>HTTPSæ˜¯HTTPçš„åŠ å¯†ç‰ˆï¼Œåº•å±‚ä½¿ç”¨çš„åŠ å¯†åè®®æ˜¯TLSã€‚</li></ul><blockquote><p>ç»“è®ºï¼šSSL/TLS æ˜¯åè®®ï¼ŒOpenSSLæ˜¯åè®®çš„ä»£ç å®ç°ã€‚</p></blockquote><p>509è¯ä¹¦åŒ…å«ä¸‰ä¸ªæ–‡ä»¶ï¼škeyï¼Œcsrï¼Œcrtã€‚</p><ul><li>keyæ˜¯æœåŠ¡å™¨ä¸Šçš„ç§é’¥æ–‡ä»¶ï¼Œç”¨äºå¯¹å‘é€ç»™å®¢æˆ·ç«¯æ•°æ®çš„åŠ å¯†ï¼Œä»¥åŠå¯¹ä»å®¢æˆ·ç«¯æ¥æ”¶åˆ°æ•°æ®çš„è§£å¯†</li><li>csræ˜¯è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ï¼Œç”¨äºæäº¤ç»™è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰å¯¹è¯ä¹¦ç­¾å</li><li>crtæ˜¯ç”±è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾ååçš„è¯ä¹¦ï¼Œæˆ–è€…æ˜¯å¼€å‘è€…è‡ªç­¾åçš„è¯ä¹¦ï¼ŒåŒ…å«è¯ä¹¦æŒæœ‰äººçš„ä¿¡æ¯ï¼ŒæŒæœ‰äººçš„å…¬é’¥ï¼Œä»¥åŠç­¾ç½²è€…çš„ç­¾åç­‰ä¿¡æ¯</li></ul><blockquote><p>å¤‡æ³¨ï¼šåœ¨å¯†ç å­¦ä¸­ï¼ŒX.509æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œè§„èŒƒäº†å…¬å¼€ç§˜é’¥è®¤è¯ã€è¯ä¹¦åŠé”€åˆ—è¡¨ã€æˆæƒå‡­è¯ã€å‡­è¯è·¯å¾„éªŒè¯ç®—æ³•ç­‰ã€‚<br><a id="more"></a><br>é¦–å…ˆä½ å¿…éœ€ç¡®ä¿ä½ çš„æœåŠ¡å™¨ä¸Šå®‰è£…äº†openssl</p><pre><code>openssl version -a</code></pre><p><img src="https://img-blog.csdnimg.cn/20200727145125275.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></blockquote><h3 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h3><ol><li>æˆä¸ºè‡ªå·±çš„CA</li><li>ç„¶åå°†SSLè¯ä¹¦ç­¾åä¸ºCA</li><li>ç„¶åå°†CAè¯ä¹¦ï¼ˆè€Œä¸æ˜¯SSLè¯ä¹¦ï¼Œè¯¥è¯ä¹¦åˆ°æ‚¨çš„æœåŠ¡å™¨ä¸Šï¼‰å¯¼å…¥Chrome / Chromiumã€‚ï¼ˆæ˜¯çš„ï¼Œå³ä½¿åœ¨Linuxä¸Šä¹Ÿå¯ä»¥ã€‚ï¼‰</li></ol><h4 id="æˆä¸ºCAé¢å‘æœºæ„"><a href="#æˆä¸ºCAé¢å‘æœºæ„" class="headerlink" title="æˆä¸ºCAé¢å‘æœºæ„"></a>æˆä¸ºCAé¢å‘æœºæ„</h4><p>ç”Ÿæˆç§é’¥(ä¼šè®©ä½ è®¾ç½®å¯†ç )</p><pre><code>openssl genrsa -des3 -out myCA.key 2048</code></pre><p>æ¶ˆé™¤keyçš„å¯†ç </p><pre><code>openssl rsa -in myCA.key -out myCA.key</code></pre><p>ç”Ÿæˆpemæ–‡ä»¶</p><pre><code>openssl req -utf8 -x509 -new -nodes -key myCA.key -sha256 -days 825 -out myCA.pem</code></pre><blockquote><p> åŠ å‚æ•°-utf8 æ˜¯å› ä¸ºç”Ÿæˆçš„ç»„ç»‡å’ŒåŸå¸‚ä½¿ç”¨ä¸­æ–‡ä¼šä¹±ç </p></blockquote><h4 id="åˆ›å»ºCAç­¾åè¯ä¹¦"><a href="#åˆ›å»ºCAç­¾åè¯ä¹¦" class="headerlink" title="åˆ›å»ºCAç­¾åè¯ä¹¦"></a>åˆ›å»ºCAç­¾åè¯ä¹¦</h4><p>ç”Ÿæˆç§é’¥</p><pre><code>openssl genrsa -out server.key 2048</code></pre><p>åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚</p><pre><code>openssl req -new -key server.key -out server.csr</code></pre><p>ä¸ºæ‰©å±•åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶</p><pre><code>&gt;server.ext cat &lt;&lt;-EOFauthorityKeyIdentifier=keyid,issuerbasicConstraints=CA:FALSEkeyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEnciphermentsubjectAltName = @alt_names[alt_names]DNS.1 = www.baidu.com # Be sure to include the domain name here because Common Name is not so commonly honoured by itselfDNS.2 = www.sougou.com # Optionally, add additional domains (I've added a subdomain here)IP.1 = 192.168.1.1 # Optionally, add an IP address (if the connection which you have planned requires it)EOF</code></pre><p>åˆ›å»ºç­¾åè¯ä¹¦</p><pre><code>openssl x509 -req -in server.csr -CA myCA.pem -CAkey myCA.key -CAcreateserial \-out server.crt -days 3650 -sha256 -extfile server.ext</code></pre><blockquote><p>3650æ˜¯è¯ä¹¦æœ‰æ•ˆæœŸå¤©æ•°</p></blockquote><h3 id="nginxé¡¹ç›®é…ç½®æ–‡ä»¶"><a href="#nginxé¡¹ç›®é…ç½®æ–‡ä»¶" class="headerlink" title="nginxé¡¹ç›®é…ç½®æ–‡ä»¶"></a>nginxé¡¹ç›®é…ç½®æ–‡ä»¶</h3><blockquote><p>æ‰¾åˆ°.crt .keyæ–‡ä»¶è·¯å¾„</p><pre><code>ssl_certificate /Users/wxiangqian/ssl/server.crt;ssl_certificate_key /Users/wxiangqian/ssl/server.key;</code></pre><p>é‡å¯NGINX</p><pre><code>sudo nginx -s reload</code></pre></blockquote><h3 id="é¢å¤–æ­¥éª¤ï¼ˆè‡³å°‘é€‚ç”¨äºMacï¼‰ï¼š"><a href="#é¢å¤–æ­¥éª¤ï¼ˆè‡³å°‘é€‚ç”¨äºMacï¼‰ï¼š" class="headerlink" title="é¢å¤–æ­¥éª¤ï¼ˆè‡³å°‘é€‚ç”¨äºMacï¼‰ï¼š"></a>é¢å¤–æ­¥éª¤ï¼ˆè‡³å°‘é€‚ç”¨äºMacï¼‰ï¼š</h3><p>myCA.pemåœ¨æ‚¨çš„Chromeè®¾ç½®ä¸­ä»¥æˆæƒæ–¹å¼å¯¼å…¥ï¼ˆè®¾ç½®&gt;ç®¡ç†è¯ä¹¦&gt;æƒé™&gt;å¯¼å…¥ï¼‰<br>åœ¨â€œæ–‡ä»¶&gt;å¯¼å…¥æ–‡ä»¶â€ä¸­å¯¼å…¥CAè¯ä¹¦ï¼Œç„¶ååœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°å®ƒï¼Œå³é”®å•å‡»å®ƒï¼Œå±•å¼€â€œ&gt;â€œä¿¡ä»»â€ï¼Œç„¶åé€‰æ‹©â€œå§‹ç»ˆâ€<br><img src="https://img-blog.csdnimg.cn/20200727151546463.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20200727151641590.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="è®¿é—®é¡¹ç›®åœ°å€"><a href="#è®¿é—®é¡¹ç›®åœ°å€" class="headerlink" title="è®¿é—®é¡¹ç›®åœ°å€"></a>è®¿é—®é¡¹ç›®åœ°å€</h3><p>å› ä¸ºæ˜¯è‡ªç­¾è¯ä¹¦ï¼Œæ²¡æœ‰é€šè¿‡CAæœºæ„è®¤è¯ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºä¸å®‰å…¨<br><img src="https://img-blog.csdnimg.cn/20200727151757150.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç‚¹å‡»è¯ä¹¦ä¼šæŸ¥çœ‹åˆ°è¯¥è¯ä¹¦çš„è¯¦ç»†ä¿¡æ¯<br><img src="https://img-blog.csdnimg.cn/2020072715192930.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¦‚æœå‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œåˆ™éœ€è¦å¯¼å…¥è¯ä¹¦<br><img src="https://img-blog.csdnimg.cn/20200727152035954.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ‚¨çš„è¿æ¥ä¸æ˜¯ç§å¯†è¿æ¥<br>æ”»å‡»è€…å¯èƒ½ä¼šè¯•å›¾ä» x.x.x.x çªƒå–æ‚¨çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼šå¯†ç ã€é€šè®¯å†…å®¹æˆ–ä¿¡ç”¨å¡ä¿¡æ¯ï¼‰ã€‚äº†è§£è¯¦æƒ…<br>NET::ERR_CERT_INVALID</p><p>å°†æ‚¨è®¿é—®çš„éƒ¨åˆ†ç½‘é¡µçš„ç½‘å€ã€æœ‰é™çš„ç³»ç»Ÿä¿¡æ¯ä»¥åŠéƒ¨åˆ†ç½‘é¡µå†…å®¹å‘é€ç»™ Googleï¼Œä»¥å¸®åŠ©æˆ‘ä»¬æå‡ Chrome çš„å®‰å…¨æ€§ã€‚éšç§æƒæ”¿ç­–<br>x.x.x.x é€šå¸¸ä¼šä½¿ç”¨åŠ å¯†æŠ€æœ¯æ¥ä¿æŠ¤æ‚¨çš„ä¿¡æ¯ã€‚Google Chrome æ­¤æ¬¡å°è¯•è¿æ¥åˆ° x.x.x.x æ—¶ï¼Œæ­¤ç½‘ç«™å‘å›äº†å¼‚å¸¸çš„é”™è¯¯å‡­æ®ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºæœ‰æ”»å‡»è€…åœ¨è¯•å›¾å†’å…… x.x.x.xï¼Œæˆ– Wi-Fi ç™»å½•å±å¹•ä¸­æ–­äº†æ­¤æ¬¡è¿æ¥ã€‚è¯·æ”¾å¿ƒï¼Œæ‚¨çš„ä¿¡æ¯ä»ç„¶æ˜¯å®‰å…¨çš„ï¼Œå› ä¸º Google Chrome å°šæœªè¿›è¡Œä»»ä½•æ•°æ®äº¤æ¢ä¾¿åœæ­¢äº†è¿æ¥ã€‚</p><p>æ‚¨ç›®å‰æ— æ³•è®¿é—® x.x.x.xï¼Œå› ä¸ºæ­¤ç½‘ç«™å‘é€äº† Google Chrome æ— æ³•å¤„ç†çš„æ‚ä¹±å‡­æ®ã€‚ç½‘ç»œé”™è¯¯å’Œæ”»å‡»é€šå¸¸æ˜¯æš‚æ—¶çš„ï¼Œå› æ­¤ï¼Œæ­¤ç½‘é¡µç¨åå¯èƒ½ä¼šæ¢å¤æ­£å¸¸ã€‚</p><blockquote><p>è§£å†³ï¼šå°±æ˜¯åœ¨å½“å‰é¡µé¢ç”¨é”®ç›˜è¾“å…¥  <strong>thisisunsafe</strong>  ï¼Œä¸æ˜¯åœ¨åœ°å€æ è¾“å…¥ï¼Œå°±ç›´æ¥æ•²é”®ç›˜å°±è¡Œäº†ï¼Œé¡µé¢å³ä¼šè‡ªåŠ¨åˆ·æ–°è¿›å…¥ç½‘é¡µã€‚</p></blockquote><p>æœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶ä»¬ä¸ºï¼š<br><img src="https://img-blog.csdnimg.cn/20200728093050978.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>Crtè¯ä¹¦å†…å®¹æŸ¥çœ‹<br><a href="https://www.getssl.cn/decode_crt.php">https://www.getssl.cn/decode_crt.php</a></p><p>å‚è€ƒæ–‡ç« ï¼š<br><a href="https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate">https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate</a><br><a href="https://blog.csdn.net/u013066244/article/details/78725842">https://blog.csdn.net/u013066244/article/details/78725842</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel Auth å†…ç½®ç™»å½•-æ ¹æ®ç”¨æˆ·ä¿¡æ¯å®ç°ç™»å½•</title>
      <link href="2020/07/23/laravel/LaravelAuth%E5%86%85%E7%BD%AE%E7%99%BB%E5%BD%95-%E6%A0%B9%E6%8D%AE%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95/"/>
      <url>2020/07/23/laravel/LaravelAuth%E5%86%85%E7%BD%AE%E7%99%BB%E5%BD%95-%E6%A0%B9%E6%8D%AE%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h3 id="laravel-auth-å†…ç½®ç™»å½•-æ ¹æ®ç”¨æˆ·ä¿¡æ¯å®ç°ç™»å½•"><a href="#laravel-auth-å†…ç½®ç™»å½•-æ ¹æ®ç”¨æˆ·ä¿¡æ¯å®ç°ç™»å½•" class="headerlink" title="laravel auth å†…ç½®ç™»å½•-æ ¹æ®ç”¨æˆ·ä¿¡æ¯å®ç°ç™»å½•"></a>laravel auth å†…ç½®ç™»å½•-æ ¹æ®ç”¨æˆ·ä¿¡æ¯å®ç°ç™»å½•</h3><blockquote><p>é¡¹ç›®ï¼šlaravelé¡¹ç›®æ²¡æœ‰å‰åç«¯åˆ†ç¦»<br>èƒŒæ™¯ï¼šæ ¹æ®ç”¨æˆ·ä¿¡æ¯(æˆ–uid)å®ç°ç™»å½•<br>ç™»å½•æœºåˆ¶ï¼šlaravelè‡ªå¸¦çš„auth session</p></blockquote><p><img src="https://img-blog.csdnimg.cn/20200721174022728.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><pre class=" language-lang-php"><code class="language-lang-php">    // Authentication Guard    $guard = 'admin';    // è·å–ç”¨æˆ·çš„userä¿¡æ¯    $user = Admin::getUserById($uid);    // ç™»å½•    Auth::guard($guard)->login($user);    // éªŒè¯æ˜¯å¦ç™»é™†æˆåŠŸ    if ($user == Auth::guard($guard)->user()) {        return redirect('/');    }</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GuzzleHttp cURL errot 60:SSL certificate problem:self signed certificate</title>
      <link href="2020/07/22/php/GuzzleHttp-cURL-error%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>2020/07/22/php/GuzzleHttp-cURL-error%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>GuzzleHttp cURL error 60: SSL certificate problem: self signed certificate</p><h3 id="æŠ¥é”™é—®é¢˜"><a href="#æŠ¥é”™é—®é¢˜" class="headerlink" title="æŠ¥é”™é—®é¢˜"></a>æŠ¥é”™é—®é¢˜</h3><p>GuzzleHttp    å‘èµ·httpsè¯·æ±‚æ—¶ï¼Œä¼šæŠ¥ä»¥ä¸‹é”™è¯¯</p><pre><code>cURL error 60: SSL certificate problem: self signed certificate</code></pre><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>guzzle å‘èµ·httpè¯·æ±‚ä¸httpsè¯·æ±‚çš„åŒºåˆ«ï¼Œå‘èµ·httpsè¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥ä¸€ä¸ªé…ç½®é¡¹ï¼Œ</p><pre><code>$client = new \GuzzleHttp\Client(['verify' =&gt;false]);</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸‹å®‰è£…brewé‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ</title>
      <link href="2020/07/07/MacOS/Mac%E4%B8%8B%E5%AE%89%E8%A3%85brew%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>2020/07/07/MacOS/Mac%E4%B8%8B%E5%AE%89%E8%A3%85brew%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h2 id="Macä¸‹å®‰è£…brewé‡åˆ°çš„å‘"><a href="#Macä¸‹å®‰è£…brewé‡åˆ°çš„å‘" class="headerlink" title="Macä¸‹å®‰è£…brewé‡åˆ°çš„å‘"></a>Macä¸‹å®‰è£…brewé‡åˆ°çš„å‘</h2><p>ç‰ˆæœ¬ï¼šMac OS 10.15.5 </p><blockquote><p>brewå®˜æ–¹åœ°å€ï¼š<a href="https://brew.sh/index_zh-cn">https://brew.sh</a></p></blockquote><h3 id="Homebrewæ˜¯ä»€ä¹ˆ"><a href="#Homebrewæ˜¯ä»€ä¹ˆ" class="headerlink" title="Homebrewæ˜¯ä»€ä¹ˆ"></a>Homebrewæ˜¯ä»€ä¹ˆ</h3><p>Homebrewæ˜¯ä¸€æ¬¾Mac OSå¹³å°ä¸‹çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œæ‹¥æœ‰å®‰è£…ã€å¸è½½ã€æ›´æ–°ã€æŸ¥çœ‹ã€æœç´¢ç­‰å¾ˆå¤šå®ç”¨çš„åŠŸèƒ½ã€‚ç®€å•çš„ä¸€æ¡æŒ‡ä»¤ï¼Œå°±å¯ä»¥å®ç°åŒ…ç®¡ç†ï¼Œè€Œä¸ç”¨ä½ å…³å¿ƒå„ç§ä¾èµ–å’Œæ–‡ä»¶è·¯å¾„çš„æƒ…å†µï¼Œååˆ†æ–¹ä¾¿å¿«æ·ã€‚</p><a id="more"></a><h3 id="å®‰è£…-Homebrew"><a href="#å®‰è£…-Homebrew" class="headerlink" title="å®‰è£… Homebrew"></a>å®‰è£… Homebrew</h3><blockquote><p>å…¶å®åœ¨æ²¡æœ‰é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸€æ¡å‘½ä»¤å°±å¯ä»¥å®‰è£…æˆåŠŸ</p></blockquote><p>å°†ä¸‹æ–¹å‘½ä»¤ç²˜è´´åˆ°ç»ˆç«¯</p><pre><code>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"</code></pre><h4 id="å®‰è£…ä¸­é‡åˆ°çš„é—®é¢˜"><a href="#å®‰è£…ä¸­é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å®‰è£…ä¸­é‡åˆ°çš„é—®é¢˜"></a>å®‰è£…ä¸­é‡åˆ°çš„é—®é¢˜</h4><p>æ–°ç”µè„‘ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼šå¦‚å›¾æ‰€ç¤º<br><img src="https://img-blog.csdnimg.cn/20200624161931374.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>xcode-select â€“installå®‰è£…å¤±è´¥ä¸èƒ½å®‰è£…è¯¥è½¯ä»¶ å› ä¸ºå½“å‰æ— æ³•ä»è½¯ä»¶æ›´æ–°æœåŠ¡å™¨è·å¾—<br><img src="https://img-blog.csdnimg.cn/20200624162014585.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>è¿™æ—¶å€™é‡ç‚¹æ¥äº†ï¼Œæƒ³åŠæ³•å»è§£å†³è¿™ä¸ªé—®é¢˜</p><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>è·³è½¬<a href="https://developer.apple.com/download/more/">https://developer.apple.com/download/more/ </a>ç½‘ç«™ï¼Œä¸­é—´ä¼šè®©ä½ å»ç™»å½•Appleè´¦å·ï¼Œç™»å½•æˆåŠŸåå›åˆ°é“¾æ¥</p><p> <img src="https://img-blog.csdnimg.cn/2020062416300697.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://img-blog.csdnimg.cn/20200624163106859.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/2020062416325385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ‰¾åˆ°é€‚åˆä½ ç”µè„‘ç‰ˆæœ¬çš„è½¯ä»¶å»ä¸‹è½½ &amp;&amp; å®‰è£…</p><p><img src="https://img-blog.csdnimg.cn/20200624163415542.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬ç»§ç»­å®‰è£…brewå³å¯<br><img src="https://img-blog.csdnimg.cn/20200624163614611.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="å®‰è£…å®Œæˆ"><a href="#å®‰è£…å®Œæˆ" class="headerlink" title="å®‰è£…å®Œæˆ"></a>å®‰è£…å®Œæˆ</h3><p>å‘½ä»¤è¡Œè¾“å…¥brewå‘½ä»¤</p><pre><code>brew</code></pre><p>ç»“æœå¦‚ä¸‹ï¼š</p><pre><code>    Example usage:      brew search [TEXT|/REGEX/]      brew (info|home|options) [FORMULA...]      brew install FORMULA...      brew update      brew upgrade [FORMULA...]      brew uninstall FORMULA...      brew list [FORMULA...]    Troubleshooting:      brew config      brew doctor      brew install -vd FORMULA    Brewing:      brew create [URL [--no-fetch]]      brew edit [FORMULA...]      https://github.com/Homebrew/brew/blob/master/share/doc/homebrew/Formula-Cookbook.md    Further help:      man brew      brew help [COMMAND]      brew home</code></pre><h3 id="ä½¿ç”¨brew"><a href="#ä½¿ç”¨brew" class="headerlink" title="ä½¿ç”¨brew"></a>ä½¿ç”¨brew</h3><ul><li>æ›´æ–°Homebrew<pre><code>brew update</code></pre></li><li>å®‰è£…è½¯ä»¶åŒ…<pre><code>brew install [åŒ…å]</code></pre></li><li>å¸è½½å®‰è£…åŒ…<pre><code>brew uninstall [åŒ…å]</code></pre></li><li>æŸ¥çœ‹å®‰è£…åˆ—è¡¨<pre><code>brew list</code></pre></li><li>æŸ¥è¯¢å¯ç”¨åŒ…<pre><code>brew search [åŒ…å]</code></pre></li></ul><p><strong>mac os ä¸‹çš„brewå®‰è£…å°±ç®€å•åˆ°è¿™äº†ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨ğŸ‘</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> MacOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOSå®‰è£…è½¯ä»¶æ—¶æç¤ºæ–‡ä»¶å·²æŸå</title>
      <link href="2020/07/02/MacOS/MacOS%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%97%B6%E6%8F%90%E7%A4%BA%E6%96%87%E4%BB%B6%E5%B7%B2%E6%8D%9F%E5%9D%8F/"/>
      <url>2020/07/02/MacOS/MacOS%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%97%B6%E6%8F%90%E7%A4%BA%E6%96%87%E4%BB%B6%E5%B7%B2%E6%8D%9F%E5%9D%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°â€œæ–‡ä»¶å·²æŸåâ€"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°â€œæ–‡ä»¶å·²æŸåâ€" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºç°â€œæ–‡ä»¶å·²æŸåâ€"></a>ä¸ºä»€ä¹ˆä¼šå‡ºç°â€œæ–‡ä»¶å·²æŸåâ€</h3><p>é¦–å…ˆä½ å®‰è£…çš„è½¯ä»¶æ˜¯æ±‰åŒ–çš„æˆ–è€…æ˜¯ç ´è§£è¿‡çš„ï¼Œæ‰€ä»¥å®‰è£…å®Œåå°±æç¤ºè¿™ä¸ªé”™è¯¯ã€‚</p><h3 id="å¦‚ä½•è§£å†³â€œæ–‡ä»¶å·²æŸåâ€çš„é—®é¢˜"><a href="#å¦‚ä½•è§£å†³â€œæ–‡ä»¶å·²æŸåâ€çš„é—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³â€œæ–‡ä»¶å·²æŸåâ€çš„é—®é¢˜"></a>å¦‚ä½•è§£å†³â€œæ–‡ä»¶å·²æŸåâ€çš„é—®é¢˜</h3><a id="more"></a><p>é¦–å…ˆå®‰å…¨æ€§æ”¹ä¸ºä»»ä½•æ¥æº<br><img src="https://img-blog.csdnimg.cn/20200624173822900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä¸€ä¸‹å‘½ä»¤å³å¯</p><pre><code>sudo spctl --master-disable</code></pre><p>ç³»ç»Ÿåå¥½è®¾ç½®-&gt;å®‰å…¨æ€§ä¸éšç§<br><img src="https://img-blog.csdnimg.cn/20200624172952655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="æœ€ç»ˆè§£å†³æ–¹æ¡ˆ"><a href="#æœ€ç»ˆè§£å†³æ–¹æ¡ˆ" class="headerlink" title="æœ€ç»ˆè§£å†³æ–¹æ¡ˆ"></a>æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</h3><p>å°†è¦å®‰è£…çš„è½¯ä»¶æ‹–åŠ¨åˆ°applicationä¸­<br>ç„¶åæ‰“å¼€ç»ˆç«¯ï¼›<br>è¾“å…¥ä»¥ä¸‹å‘½ä»¤:</p><pre><code>sudo xattr -d com.apple.quarantine /Applications/xxxx.app</code></pre><blockquote><p>xxxxä¸ºè¯¥è½¯ä»¶çš„åå­—</p></blockquote><p>æ‰§è¡Œå®Œå‘½ä»¤ä»¥åï¼Œé‡æ–°æ‰“å¼€è¦å®‰è£…çš„è½¯ä»¶å³å¯æˆåŠŸ</p><p><strong>ä»¥ä¸Šæ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼Œæ–‡ä»¶æŸåçš„é—®é¢˜å°±è½»æ¾è§£å†³äº†</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> MacOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæˆ‘çš„æ†¨æ†¨å¥³å‹éƒ½èƒ½çœ‹æ‡‚å­¦ä¼šçš„PHPåŒºåˆ«è¡¨æ ¼åˆé›†ã€‹</title>
      <link href="2020/05/12/php/%E3%80%8A%E6%88%91%E7%9A%84%E6%86%A8%E6%86%A8%E5%A5%B3%E5%8F%8B%E9%83%BD%E8%83%BD%E7%9C%8B%E6%87%82%E5%AD%A6%E4%BC%9A%E7%9A%84PHP%E5%8C%BA%E5%88%AB%E8%A1%A8%E6%A0%BC%E5%90%88%E9%9B%86%E3%80%8B/"/>
      <url>2020/05/12/php/%E3%80%8A%E6%88%91%E7%9A%84%E6%86%A8%E6%86%A8%E5%A5%B3%E5%8F%8B%E9%83%BD%E8%83%BD%E7%9C%8B%E6%87%82%E5%AD%A6%E4%BC%9A%E7%9A%84PHP%E5%8C%BA%E5%88%AB%E8%A1%A8%E6%A0%BC%E5%90%88%E9%9B%86%E3%80%8B/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é€šä¿—æ˜“æ‡‚çš„è¡¨æ ¼æ±‡æ€»ï¼Œå¸¦ä½ å¿«é€Ÿç†è§£ä¸¤è€…(æˆ–å¤šè€…)çš„åŒºåˆ«å…³ç³»</p></blockquote><p><strong>æŒç»­æ›´æ–°</strong>~~~ï¼Œå¦‚æœ‰é—æ¼å¯ä»¥è¯„è®ºåŒºå‘Šè¯‰æˆ‘~<br><img src="https://img-blog.csdnimg.cn/2020051114405245.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><a id="more"></a><h1 id="åŒºåˆ«è¡¨æ ¼æ±‡æ€»"><a href="#åŒºåˆ«è¡¨æ ¼æ±‡æ€»" class="headerlink" title="åŒºåˆ«è¡¨æ ¼æ±‡æ€»"></a>åŒºåˆ«è¡¨æ ¼æ±‡æ€»</h1><h2 id="isset-å’Œ-empty"><a href="#isset-å’Œ-empty" class="headerlink" title="isset å’Œ empty"></a>isset å’Œ empty</h2><p>issetï¼šæ£€æµ‹å˜é‡æ˜¯å¦å·²è®¾ç½®å¹¶ä¸”é NULL</p><p>emptyï¼šåˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºç©ºï¼Œå˜é‡ä¸º 0/false ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯ç©ºï¼›å˜é‡ä¸å­˜åœ¨ï¼Œä¸ä¼šäº§ç”Ÿè­¦å‘Š</p><div class="table-container"><table><thead><tr><th>å˜é‡çš„å€¼ï¼ˆ$varï¼‰</th><th>issetï¼ˆ$varï¼‰</th><th>emptyï¼ˆ$varï¼‰</th></tr></thead><tbody><tr><td>â€œâ€ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td></tr><tr><td>â€œ â€œï¼ˆç©ºæ ¼å­—ç¬¦ï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆfalseï¼‰</td></tr><tr><td>false</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td></tr><tr><td>true</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆfalseï¼‰</td></tr><tr><td>array()ï¼ˆä¸€ä¸ªç©ºæ•°ç»„ï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td></tr><tr><td>NUllå€¼</td><td>å¸ƒå°”ï¼ˆfalseï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td></tr><tr><td>â€œ0â€ï¼ˆ0ä½œä¸ºå­—ç¬¦ä¸²ï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td></tr><tr><td>0ï¼ˆ0ä¸ºæ•´æ•°ï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td></tr><tr><td>0.0ï¼ˆ0ä½œä¸ºæµ®ç‚¹æ•°ï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td><td>å¸ƒå°”ï¼ˆtrueï¼‰</td></tr></tbody></table></div><h2 id="publicã€protectedã€private-3pä¿®é¥°ç¬¦"><a href="#publicã€protectedã€private-3pä¿®é¥°ç¬¦" class="headerlink" title="publicã€protectedã€private(3pä¿®é¥°ç¬¦)"></a>publicã€protectedã€private(3pä¿®é¥°ç¬¦)</h2><div class="table-container"><table><thead><tr><th></th><th>åœ¨ç±»å¤–</th><th>åœ¨å­ç±»</th><th>åœ¨æœ¬ç±»</th></tr></thead><tbody><tr><td>publicï¼ˆå…¬æœ‰ï¼‰</td><td>âœ”</td><td>âœ”</td><td>âœ”</td></tr><tr><td>protectedï¼ˆå—ä¿æŠ¤ï¼‰</td><td>âœ–</td><td>âœ”</td><td>âœ”</td></tr><tr><td>privateï¼ˆç§æœ‰ï¼‰</td><td>âœ–</td><td>âœ–</td><td>âœ”</td></tr></tbody></table></div><h2 id="cookie-å’Œ-session"><a href="#cookie-å’Œ-session" class="headerlink" title="cookie å’Œ session"></a>cookie å’Œ session</h2><div class="table-container"><table><thead><tr><th></th><th>cookie</th><th>session</th></tr></thead><tbody><tr><td>å­˜å‚¨</td><td>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰</td><td>æœåŠ¡å™¨ç«¯</td></tr><tr><td>å®‰å…¨</td><td>å®¹æ˜“è¢«æ›´æ”¹</td><td>å®‰å…¨ä¸€äº›</td></tr><tr><td>æ€§èƒ½</td><td>å‡è½»æœåŠ¡å™¨çš„æ€§èƒ½</td><td>å ç”¨æœåŠ¡å™¨çš„æ€§èƒ½</td></tr></tbody></table></div><p>Session çš„è¿è¡Œä¾èµ–Session IDï¼Œè€Œ Session ID æ˜¯å­˜åœ¨ Cookie ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæµè§ˆå™¨ç¦ç”¨äº† Cookieï¼ŒSession ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°ï¼Œæ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ Session IDï¼‰</p><h2 id="get-å’Œ-post"><a href="#get-å’Œ-post" class="headerlink" title="get å’Œ post"></a>get å’Œ post</h2><div class="table-container"><table><thead><tr><th>è¯·æ±‚æ–¹å¼</th><th>get</th><th>post</th></tr></thead><tbody><tr><td>æœ¬è´¨</td><td>å‘æœåŠ¡å™¨å‘ç´¢å–æ•°æ®çš„ä¸€ç§è¯·æ±‚</td><td>å‘æœåŠ¡å™¨æäº¤æ•°æ®çš„ä¸€ç§è¯·æ±‚</td></tr><tr><td>æœåŠ¡å™¨ç«¯è·å–å€¼çš„æ–¹æ³•</td><td>$_GET</td><td>$_POST</td></tr><tr><td>å®‰å…¨æ€§</td><td>ä½</td><td>è¾ƒå®‰å…¨</td></tr><tr><td>å¤§å°</td><td>URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦</td><td>æ²¡æœ‰å¤§å°é™åˆ¶</td></tr></tbody></table></div><h2 id="echoã€printã€print-rã€var-dump"><a href="#echoã€printã€print-rã€var-dump" class="headerlink" title="echoã€printã€print_rã€var_dump"></a>echoã€printã€print_rã€var_dump</h2><div class="table-container"><table><thead><tr><th>echo</th><th>print</th><th>print_r</th><th>var_dump</th></tr></thead><tbody><tr><td>è¯­è¨€ç»“æ„</td><td>è¯­è¨€ç»“æ„</td><td>æ™®é€šå‡½æ•°</td><td>æ™®é€šå‡½æ•°</td></tr><tr><td>è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²</td><td>è¾“å‡ºå­—ç¬¦ä¸²</td><td>æ‰“å°å…³äºå˜é‡çš„æ˜“äºç†è§£çš„ä¿¡æ¯</td><td>æ‰“å°å…³äºå˜é‡çš„æ˜“äºç†è§£çš„ä¿¡æ¯(å¸¦ç±»å‹)</td></tr></tbody></table></div><h2 id="Redis-å’Œ-Memcached"><a href="#Redis-å’Œ-Memcached" class="headerlink" title="Redis å’Œ Memcached"></a>Redis å’Œ Memcached</h2><div class="table-container"><table><thead><tr><th>ç¼“å­˜</th><th>Redis</th><th>Memcached</th></tr></thead><tbody><tr><td>æ•°æ®æ”¯æŒç±»å‹</td><td>å¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰5ç§ï¼šStringã€Hashã€Listã€Setå’ŒZSet</td><td>ä»…æ”¯æŒç®€å•çš„key-valueç»“æ„</td></tr><tr><td>çº¿ç¨‹</td><td>å•çº¿ç¨‹çš„IOå¤ç”¨æ¨¡å‹</td><td>å¤šçº¿ç¨‹ï¼Œéé˜»å¡IOå¤ç”¨çš„ç½‘ç»œæ¨¡å‹</td></tr><tr><td>æ˜¯å¦æ”¯æŒäº‹åŠ¡</td><td>âœ”</td><td>âœ–</td></tr><tr><td>æŒä¹…åŒ–</td><td>âœ”</td><td>âœ–</td></tr></tbody></table></div><h2 id="Nginx-å’Œ-Apache"><a href="#Nginx-å’Œ-Apache" class="headerlink" title="Nginx å’Œ Apache"></a>Nginx å’Œ Apache</h2><div class="table-container"><table><thead><tr><th>webæœåŠ¡å™¨</th><th>Nginx</th><th>Apache</th></tr></thead><tbody><tr><td>åå‘ä»£ç†</td><td>éå¸¸å¥½</td><td>å¥½</td></tr><tr><td>Rewriteè§„åˆ™</td><td>éå¸¸å¥½</td><td>å¥½</td></tr><tr><td>FstCGI</td><td>å¥½</td><td>å·®</td></tr><tr><td>çƒ­éƒ¨ç½²</td><td>âœ”</td><td>âœ–</td></tr><tr><td>ç³»ç»Ÿå‹åŠ›æ¯”è¾ƒ</td><td>å¾ˆå°</td><td>å°</td></tr><tr><td>ç¨³å®šæ€§</td><td>éå¸¸å¥½</td><td>å¥½</td></tr><tr><td>å®‰å…¨æ€§</td><td>ä¸€èˆ¬</td><td>å¥½</td></tr><tr><td>é™æ€æ–‡ä»¶å¤„ç†</td><td>éå¸¸å¥½</td><td>ä¸€èˆ¬</td></tr><tr><td>è™šæ‹Ÿä¸»æœº</td><td>âœ”</td><td>âœ”</td></tr><tr><td>å†…å­˜æ¶ˆè€—</td><td>éå¸¸å°</td><td>å¾ˆå¤§</td></tr></tbody></table></div><h2 id="urlencode-å’Œ-rawurlencode"><a href="#urlencode-å’Œ-rawurlencode" class="headerlink" title="urlencode å’Œ rawurlencode"></a>urlencode å’Œ rawurlencode</h2><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>å¯¹ç©ºæ ¼çš„å¤„ç†</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td>urlencode</td><td>å¤„ç†æˆâ€œ+â€</td><td>è¿”å›å­—ç¬¦ä¸²ï¼Œæ­¤å­—ç¬¦ä¸²ä¸­é™¤äº† -_. ä¹‹å¤–çš„æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦éƒ½å°†è¢«æ›¿æ¢æˆç™¾åˆ†å·ï¼ˆ%ï¼‰åè·Ÿä¸¤ä½åå…­è¿›åˆ¶æ•°ï¼Œç©ºæ ¼åˆ™ç¼–ç ä¸ºåŠ å·ï¼ˆ+ï¼‰ã€‚æ­¤ç¼–ç ä¸ WWW è¡¨å• POST æ•°æ®çš„ç¼–ç æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼ŒåŒæ—¶ä¸ application/x-www-form-urlencoded çš„åª’ä½“ç±»å‹ç¼–ç æ–¹å¼ä¸€æ ·ã€‚ç”±äºå†å²åŸå› ï¼Œæ­¤ç¼–ç åœ¨å°†ç©ºæ ¼ç¼–ç ä¸ºåŠ å·ï¼ˆ+ï¼‰æ–¹é¢ä¸ Â» RFC3986 ç¼–ç ï¼ˆå‚è§ rawurlencode()ï¼‰ä¸åŒ</td></tr><tr><td>rawurlencode</td><td>å¤„ç†æˆâ€œ%20â€</td><td>è¿”å›å­—ç¬¦ä¸²ï¼Œæ­¤å­—ç¬¦ä¸²ä¸­é™¤äº† -_. ä¹‹å¤–çš„æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦éƒ½å°†è¢«æ›¿æ¢æˆç™¾åˆ†å·ï¼ˆ%ï¼‰åè·Ÿä¸¤ä½åå…­è¿›åˆ¶æ•°ã€‚è¿™æ˜¯åœ¨ Â» RFC 3986 ä¸­æè¿°çš„ç¼–ç ï¼Œæ˜¯ä¸ºäº†ä¿æŠ¤åŸä¹‰å­—ç¬¦ä»¥å…å…¶è¢«è§£é‡Šä¸ºç‰¹æ®Šçš„ URL å®šç•Œç¬¦ï¼ŒåŒæ—¶ä¿æŠ¤ URL æ ¼å¼ä»¥å…å…¶è¢«ä¼ è¾“åª’ä½“ï¼ˆåƒä¸€äº›é‚®ä»¶ç³»ç»Ÿï¼‰ä½¿ç”¨å­—ç¬¦è½¬æ¢æ—¶å¼„ä¹±</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>urlencode</th><th>rawurlencode</th></tr></thead><tbody><tr><td>è¿”å›å€¼</td><td></td><td></td></tr><tr><td>å¯¹ç©ºæ ¼çš„å¤„ç†</td><td>å¤„ç†æˆâ€œ+â€</td><td>å¤„ç†æˆâ€œ%20â€</td></tr></tbody></table></div><h2 id="includeã€requireã€include-onceã€require-once"><a href="#includeã€requireã€include-onceã€require-once" class="headerlink" title="includeã€requireã€include_onceã€require_once"></a>includeã€requireã€include_onceã€require_once</h2><div class="table-container"><table><thead><tr><th></th><th>å¤„ç†å¤±è´¥æ–¹å¼</th></tr></thead><tbody><tr><td>include</td><td>åªäº§ç”Ÿä¸€ä¸ªè­¦å‘Šçº§åˆ«é”™è¯¯ï¼Œç¨‹åºç»§ç»­è¿è¡Œ</td></tr><tr><td>require</td><td>ä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½çº§åˆ«é”™è¯¯ï¼Œå¹¶åœæ­¢ç¨‹åºè¿è¡Œ</td></tr><tr><td>include_once</td><td>åŒincludeï¼Œå½“æ‰€åŒ…å«çš„æ–‡ä»¶ä»£ç å·²ç»å­˜åœ¨æ—¶å€™ï¼Œä¸åœ¨åŒ…å«</td></tr><tr><td>require_once</td><td>åŒrequireï¼Œå½“æ‰€åŒ…å«çš„æ–‡ä»¶ä»£ç å·²ç»å­˜åœ¨æ—¶å€™ï¼Œä¸åœ¨åŒ…å«</td></tr></tbody></table></div><h2 id="MyISAM-å’Œ-InnoDB"><a href="#MyISAM-å’Œ-InnoDB" class="headerlink" title="MyISAM å’Œ InnoDB"></a>MyISAM å’Œ InnoDB</h2><div class="table-container"><table><thead><tr><th>å­˜å‚¨å¼•æ“</th><th>MyISAM</th><th>InnoDB</th></tr></thead><tbody><tr><td></td><td>é»˜è®¤å¼•æ“</td><td>éœ€è¦æŒ‡å®š</td></tr><tr><td>åœºæ™¯</td><td>é€‚åˆæŸ¥è¯¢ä»¥åŠæ’å…¥ä¸ºä¸»çš„åº”ç”¨</td><td>é€‚åˆé¢‘ç¹ä¿®æ”¹ä»¥åŠæ¶‰åŠåˆ°å®‰å…¨æ€§è¾ƒé«˜çš„åº”ç”¨</td></tr><tr><td>æ˜¯å¦æ”¯æŒFULLTEXTç±»å‹çš„ç´¢å¼•</td><td>âœ”</td><td>âœ–</td></tr><tr><td>æ˜¯å¦æ”¯æŒäº‹åŠ¡</td><td>âœ–</td><td>âœ”</td></tr><tr><td>æ˜¯å¦æ”¯æŒå¤–é”®</td><td>âœ–</td><td>âœ”</td></tr><tr><td>è¡¨çš„å…·ä½“è¡Œæ•°</td><td>select count(<em>) from table,MyISAMåªè¦ç®€å•çš„è¯»å‡ºä¿å­˜å¥½çš„è¡Œæ•°ï¼Œæ³¨æ„çš„æ˜¯ï¼Œå½“count(</em>)è¯­å¥åŒ…å«   whereæ¡ä»¶æ—¶ï¼Œä¸¤ç§è¡¨çš„æ“ä½œæ˜¯ä¸€æ ·çš„</td><td>InnoDB ä¸­ä¸ä¿å­˜è¡¨çš„å…·ä½“è¡Œæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œselect count(*) from tableæ—¶ï¼ŒInnoDBè¦æ‰«æä¸€éæ•´ä¸ªè¡¨æ¥è®¡ç®—æœ‰å¤šå°‘è¡Œ</td></tr><tr><td>é”</td><td>è¡¨é”</td><td>è¡Œé”ï¼ˆæŸäº›æƒ…å†µä¸‹è¿˜æ˜¯é”æ•´è¡¨ï¼Œå¦‚ update table set a=1 where user like â€˜%lee%â€™)</td></tr><tr><td>æ¸…ç©ºæ•´ä¸ªè¡¨æ—¶</td><td>é‡æ–°å»ºè¡¨</td><td>ä¸€è¡Œä¸€è¡Œçš„åˆ é™¤</td></tr></tbody></table></div><h2 id="varchar-å’Œ-char"><a href="#varchar-å’Œ-char" class="headerlink" title="varchar å’Œ char"></a>varchar å’Œ char</h2><div class="table-container"><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>varchar</th><th>char</th></tr></thead><tbody><tr><td>è§£é‡Š</td><td>å˜é•¿</td><td>å®šé•¿</td></tr><tr><td>å®šä¹‰é•¿åº¦</td><td>å°äºå®šä¹‰é•¿åº¦æ—¶ï¼Œè¿˜æ˜¯æŒ‰å®é™…é•¿åº¦å­˜å‚¨ï¼Œæ’å…¥å¤šé•¿å°±å­˜å¤šé•¿</td><td>å¦‚æœæ’å…¥çš„é•¿åº¦å°äºå®šä¹‰é•¿åº¦æ—¶ï¼Œåˆ™ç”¨ç©ºæ ¼å¡«å……</td></tr><tr><td>å­˜å‚¨çš„å®¹é‡</td><td>æœ€å¤šèƒ½å­˜æ”¾ 65532 ä¸ªå­—ç¬¦ã€‚varcharçš„æœ€å¤§æœ‰æ•ˆé•¿åº¦ç”±æœ€å¤§è¡Œå¤§å°å’Œä½¿ç”¨çš„å­—ç¬¦é›†ç¡®å®šã€‚æ•´ä½“æœ€å¤§é•¿åº¦æ˜¯ 65,532å­—èŠ‚ã€‚</td><td>æœ€å¤šèƒ½å­˜æ”¾çš„å­—ç¬¦ä¸ªæ•° 255ï¼Œå’Œç¼–ç æ— å…³</td></tr></tbody></table></div><h1 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h1><p>æŒç»­æ›´æ–°ä¸­~~~ï¼Œå¦‚æœæœ‰æ·»åŠ æˆ–è€…çº æ­£çš„åœ°æ–¹æ¬¢è¿è¯„è®ºã€‚<br>(ä½ çš„æ¯ä¸€ä¸ªğŸ‘éƒ½æ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›)</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•åšä¸€å¥—utmå¹¿å‘ŠæŠ•æ”¾</title>
      <link href="2020/05/07/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E5%81%9A%E4%B8%80%E5%A5%97utm%E5%B9%BF%E5%91%8A%E6%8A%95%E6%94%BE/"/>
      <url>2020/05/07/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E5%81%9A%E4%B8%80%E5%A5%97utm%E5%B9%BF%E5%91%8A%E6%8A%95%E6%94%BE/</url>
      
        <content type="html"><![CDATA[<h3 id="è®¾è®¡èƒŒæ™¯"><a href="#è®¾è®¡èƒŒæ™¯" class="headerlink" title="è®¾è®¡èƒŒæ™¯"></a>è®¾è®¡èƒŒæ™¯</h3><p>   ç›®å‰å¹³å°ä¸Šç¼ºä¹å¯¹ç”¨æˆ·æ¥æºå’Œç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œå¯¼è‡´å¤–éƒ¨æŠ•æ”¾æ´»åŠ¨å’Œå¹³å°çš„è¿è¥æ´»åŠ¨æ— æ³•ç²¾ç¡®æŒæ¡æŠ•æ”¾æ•ˆæœã€‚è¿™æ¬¡å¢åŠ çš„åŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŒæ¡ä¸åŒçš„æŠ•æ”¾ã€æ´»åŠ¨æ‰€å¸¦æ¥çš„ç”¨æˆ·è´¨é‡ï¼Œä»è€Œä¼˜åŒ–æŠ•æ”¾åŠæ´»åŠ¨æ‰‹æ®µã€‚</p><a id="more"></a><h3 id="è®¾è®¡æ¦‚è§ˆ"><a href="#è®¾è®¡æ¦‚è§ˆ" class="headerlink" title="è®¾è®¡æ¦‚è§ˆ"></a>è®¾è®¡æ¦‚è§ˆ</h3><p>   é€šè¿‡åœ¨é“¾æ¥åé¢æ·»åŠ UTMï¼ˆè·Ÿè¸ªæ¨¡å—ï¼‰å‚æ•°çš„æ–¹å¼ï¼Œè·Ÿè¸ªç”¨æˆ·æ¥æºã€‚å¹¶ä¸”é€šè¿‡ä¸ºæ¸¸å®¢æ¨¡å¼çš„ç”¨æˆ·åˆ†é…ä¸´æ—¶IDçš„æ–¹å¼ï¼Œå¯ä»¥ä»æ¸¸å®¢æ—¶æœŸå°±å¼€å§‹è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºï¼Œä»è€Œæ›´å……åˆ†çš„æŒæ¡æŠ•æ”¾æ•ˆæœå’Œç”¨æˆ·è´¨é‡ã€‚</p><h3 id="è¯¦ç»†è®¾è®¡"><a href="#è¯¦ç»†è®¾è®¡" class="headerlink" title="è¯¦ç»†è®¾è®¡"></a>è¯¦ç»†è®¾è®¡</h3><h4 id="UTMå‚æ•°"><a href="#UTMå‚æ•°" class="headerlink" title="UTMå‚æ•°"></a>UTMå‚æ•°</h4><p>  UTMï¼ˆurchin tracking moduleï¼‰æ˜¯ä¸€å¥—æ ‡å‡†çš„æ¸ é“è·Ÿè¸ªå·¥å…·ï¼Œé™¤äº†ç”¨æ¥è·Ÿè¸ªä¸åŒæ¸ é“çš„æµé‡æ•ˆæœå¤–ï¼Œè¿˜å¯ä»¥ç”¨æ¥ä½œä¸ºç²¾ç»†åŒ–è¿è¥å·¥å…·ï¼Œä¸æ–­ä¼˜åŒ–æŠ•æ”¾ã€æ´»åŠ¨æ•ˆæœã€‚<br>    UTMå¸¸ç”¨çš„å‚æ•°æœ‰5ä¸ªï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><div class="table-container"><table><thead><tr><th>å‚æ•°</th><th>åç§°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>utm_source</td><td>æ¸ é“æ¥æº</td><td>utm_source=zhihu</td></tr><tr><td>utm_medium</td><td>æŠ•æ”¾åª’ä»‹</td><td>utm_medium=kecheng</td></tr><tr><td>utm_campaign</td><td>å¹¿å‘Šåç§°</td><td>utm_campaign=zhihu0728</td></tr><tr><td>utm_content</td><td>å¹¿å‘Šå†…å®¹</td><td>utm_content=153</td></tr><tr><td>utm_term</td><td>å¹¿å‘Šå…³é”®è¯</td><td>utm_content=cv</td></tr></tbody></table></div><h4 id="ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸ"></a>ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸ</h4><p>   ç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±ä¸€ç³»åˆ—å…·ä½“çš„ç”¨æˆ·è¡Œä¸ºæ„æˆçš„ï¼Œåœ¨æœ¬æ¬¡è®¾è®¡ä¸­ï¼Œå®šä¹‰çš„å¯ä»¥æ”¶å½•å…¥ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸçš„ç”¨æˆ·è¡Œä¸ºæœ‰ï¼šç¬¬ä¸€æ¬¡æµè§ˆï¼ˆç¬¬ä¸€æ¬¡ä½¿ç”¨è¯¥äº§å“ï¼‰ã€ç™»å½•ã€æ³¨å†Œã€è®¿é—®è¯¾ç¨‹ã€ä¸‹å•ã€è´­ä¹°æˆåŠŸå’Œå‚ä¸æ´»åŠ¨ï¼ˆæ´»åŠ¨ç‰¹æŒ‡è®¿é—®å¸¦æœ‰UTMå‚æ•°çš„é¡µé¢ï¼Œå¯èƒ½æ˜¯å¯¹å¤–æŠ•æ”¾çš„å¹¿å‘Šï¼Œä¹Ÿå¯èƒ½æ˜¯å®˜ç½‘çš„ä¸€æ¬¡æ´»åŠ¨ï¼‰ã€‚ä¸‹æ–‡ä¸­å°†éœ€è¦æ”¶å½•å…¥ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸçš„ç”¨æˆ·è¡Œä¸ºå‘½åä¸ºç”¨æˆ·å…³é”®è¡Œä¸ºã€‚<br>    æ”¶å½•çš„ç”¨æˆ·å…³é”®è¡Œä¸ºçš„æ ¼å¼ä¸ºï¼šè¡Œä¸ºã€è¡Œä¸ºå¯¹è±¡ã€è®¾å¤‡ã€æµè§ˆå™¨ã€æ—¶é—´æˆ³ã€‚æ¯”å¦‚ç”¨æˆ·ä¸‹å•äº†æŸä¸ªè¯¾ç¨‹Aï¼Œæ”¶å½•çš„æ ¼å¼ä¸ºï¼šä¸‹å•ã€è¯¾ç¨‹Aã€æ‰‹æœºã€APPã€æ—¶é—´æˆ³ã€‚</p><h4 id="ä¸´æ—¶ID"><a href="#ä¸´æ—¶ID" class="headerlink" title="ä¸´æ—¶ID"></a>ä¸´æ—¶ID</h4><p>   ç”¨æˆ·ä»¥æ¸¸å®¢èº«ä»½è®¿é—®ç½‘ç«™æ—¶ï¼ˆPCã€Mç«™ã€APPï¼‰ï¼Œå¦‚æœæ˜¯ä»¥æ¸¸å®¢èº«ä»½ï¼Œéœ€è¦ç»™ç”¨æˆ·åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ä¸´æ—¶IDï¼Œå¹¶ä¸”éœ€è¦ä»¥è¯¥ä¸´æ—¶IDåœ¨åå°åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç”Ÿå‘½å‘¨æœŸè®°å½•ã€‚åç»­è¯¥ç”¨æˆ·æ³¨å†Œæˆ–è€…ç™»å½•åï¼Œéœ€è¦å°†è¯¥ä¸´æ—¶IDä¸Šå‘ç”Ÿçš„ç”¨æˆ·å…³é”®è¡Œä¸ºåˆå¹¶åˆ°å­¦å·ä¸Šå»ã€‚ä½†è¯¥ä¸´æ—¶IDä¸è¦åˆ é™¤ï¼Œä»¥ä¾¿ç»§ç»­ç»Ÿè®¡ç”¨æˆ·ä¸‡ä¸€é€€å‡ºç™»å½•ååœ¨å¹³å°ä¸Šçš„è¡Œä¸ºã€‚<br>    åˆ›å»ºä¸´æ—¶IDæ—¶ï¼Œéœ€è¦åŒæ—¶å°†ç¬¬ä¸€æ¬¡æµè§ˆçš„ä¿¡æ¯å†™ä¸Šï¼Œå¦‚æœæ˜¯é€šè¿‡æ´»åŠ¨é“¾æ¥ï¼Œåˆ™å°†è¯¥æ¬¡è¡Œä¸ºè®°ä¸ºâ€œå‚ä¸æ´»åŠ¨â€ï¼Œå¦åˆ™çš„è¯å°±è®°ä¸ºç¬¬ä¸€æ¬¡æµè§ˆã€‚æ¯”å¦‚ç”¨æˆ·é€šè¿‡ç™¾åº¦æœç´¢ï¼Œè¿›å…¥ä¸»é¡µï¼Œè®°å½•çš„æ ¼å¼ä¸ºï¼šç¬¬ä¸€æ¬¡æµè§ˆã€å…·ä½“é“¾æ¥ã€PCã€Chromeã€æ—¶é—´æˆ³ã€‚</p><h4 id="æ•°æ®ç»Ÿè®¡"><a href="#æ•°æ®ç»Ÿè®¡" class="headerlink" title="æ•°æ®ç»Ÿè®¡"></a>æ•°æ®ç»Ÿè®¡</h4><p>   ç”¨æˆ·é€šè¿‡æ´»åŠ¨é“¾æ¥åˆ›å»ºçš„è´¦æˆ·ï¼Œéœ€è¦å¯¹ç”¨æˆ·çš„åç»­å…³é”®è¡Œä¸ºåšæŒç»­ç»Ÿè®¡ï¼Œæ¯”å¦‚æ³¨å†Œã€è´­ä¹°ç­‰ï¼Œä»¥æ–¹ä¾¿æ ¹æ®è¿™äº›æ•°æ®åšç²¾ç»†åŒ–çš„è¿è¥ï¼Œæå‡å¹¿å‘Šæˆ–è€…æ´»åŠ¨æ•ˆç‡ã€‚<br>    ä¸€ä¸ªç”¨æˆ·å‚ä¸äº†å¤šæ¬¡æ´»åŠ¨ï¼Œæ¯”å¦‚æ´»åŠ¨Aã€Bã€Cï¼Œåç»­è¯¥ç”¨æˆ·å¦‚æœæ³¨å†Œæˆ–è€…è´­ä¹°äº†è¯¾ç¨‹ï¼ˆä»»ä½•å¹³å°è¯¾ç¨‹éƒ½å¯ä»¥ï¼‰ï¼Œåˆ™æ³¨å†Œæˆ–è€…è´­ä¹°æ•°æ®ï¼Œéœ€è¦ç»Ÿè®¡åˆ°æ´»åŠ¨Aä¸Šï¼Œå› ä¸ºæ˜¯æ´»åŠ¨Aæœ€æ—©è§¦è¾¾è¯¥ç”¨æˆ·ï¼Œä½¿å…¶äº†è§£åˆ°å…¬å¸çš„äº§å“ã€‚</p><h3 id="æŠ€æœ¯å®ç°æ€è·¯"><a href="#æŠ€æœ¯å®ç°æ€è·¯" class="headerlink" title="æŠ€æœ¯å®ç°æ€è·¯"></a>æŠ€æœ¯å®ç°æ€è·¯</h3><ol><li>å½“å­˜åœ¨è¿™å‡ ä¸ªå‚æ•°çš„æ—¶å€™å»åŒ¹é…æ˜¯å¦æœ‰è®¾ç½®æŠ•æ”¾utm<ol><li>æœ‰ï¼šåˆ™å°†å”¯ä¸€æ ‡è¯†å­˜å…¥åˆ°cookie</li><li>æ²¡æœ‰ï¼šåˆ™ä¸æ˜¯å¹¿å‘ŠæŠ•æ”¾æ¥æº<ol><li>è™šæ‹Ÿidï¼šæš‚æ—¶ç”¨phpä¸­session_idä½œä¸ºè™šæ‹Ÿidçš„(å¦‚æœæœ‹å‹ä»¬æœ‰æ›´å¥½çš„å»ºè®®ï¼Œå¯ä»¥æ¨èä¸€ä¸‹ï¼Œäº’ç›¸å­¦ä¹ )</li><li>å½“å‘ç°ç”¨æˆ·å·²æ³¨å†Œæˆ–ç™»å½•åï¼Œå°†è¦æŠŠè™šæ‹Ÿidç”Ÿæˆçš„æ‰€æœ‰è®°å½•ç»‘å®šåˆ°uidä¸Šï¼Œè¿™æ ·æ‰èƒ½ä¸ä¸¢å¤±æœªæ³¨å†Œäººçš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœæœªæ³¨å†Œæˆ–ç™»å½•ï¼Œé‚£å°±æ²¡åŠæ³•äº†ã€‚</li></ol></li></ol></li></ol><h3 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h3><p>ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸè®°å½•è¡¨</p><pre class=" language-lang-mysql"><code class="language-lang-mysql">CREATE TABLE `utm` (  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,  `vid` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'ç™»é™†å‰çš„è™šæ‹Ÿid',  `uid` int(11) NOT NULL DEFAULT '0' COMMENT 'ç”¨æˆ·id',  `utm_url_id` int(11) NOT NULL DEFAULT '0' COMMENT 'å…³è”æŠ•æ”¾id',  `url` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'è®°å½•é“¾æ¥',  `device` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'è®¾å¤‡',  `browser` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'æµè§ˆå™¨',  `course_id` int(11) NOT NULL DEFAULT '0' COMMENT 'è¯¾ç¨‹',  `pay_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'æ¶ˆè´¹é‡‘é¢',  `add_time` int(11) NOT NULL DEFAULT '0' COMMENT 'æ·»åŠ æ—¶é—´',  `action` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'è¡Œä¸º',  PRIMARY KEY (`id`),  KEY `rds_idx_0` (`uid`,`vid`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸè®°å½•'</code></pre><p>å¹¿å‘ŠæŠ•æ”¾è¡¨</p><pre class=" language-lang-mysql"><code class="language-lang-mysql">CREATE TABLE `utm2` (  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'é“¾æ¥åç§°',  `url` text COLLATE utf8_unicode_ci NOT NULL COMMENT 'urlå®Œæ•´åœ°å€',  `utm_campaign` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'ç¼©ç•¥å',  `utm_source` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'æ¥æº',  `utm_medium` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'åª’ä»‹',  `utm_term` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'å…³é”®è¯',  `utm_content` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'å†…å®¹',  `add_time` int(11) NOT NULL DEFAULT '0' COMMENT 'æ·»åŠ æ—¶é—´',  `url_index` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'urlå”¯ä¸€ç´¢å¼•',  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='å¹¿å‘ŠæŠ•æ”¾'</code></pre><h3 id="å®æˆ˜é“¾æ¥"><a href="#å®æˆ˜é“¾æ¥" class="headerlink" title="å®æˆ˜é“¾æ¥"></a>å®æˆ˜é“¾æ¥</h3><p><a href="https://wxiangqian.blog.csdn.net/article/details/105764287?utm_source=csdn">https://wxiangqian.blog.csdn.net/article/details/105764287?utm_source=csdn</a></p><h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><p>å¦‚æœåŠŸèƒ½è®¾è®¡æœ‰ä»€ä¹ˆæ¼æ´ï¼Œæ¬¢è¿å¤§å®¶æä¾›æ›´å¥½çš„å»ºè®®ï¼Œå¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åŠ©ä½ ä»¬å®ç°â€utmâ€åŠŸèƒ½ğŸ‘<br><img src="https://img-blog.csdnimg.cn/20200426112621934.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç¯‡æ–‡ç« æ­ç©¿åˆ›ä¸šå…¬å¸çš„å¥—è·¯</title>
      <link href="2020/04/23/%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E6%8F%AD%E7%A9%BF%E5%88%9B%E4%B8%9A%E5%85%AC%E5%8F%B8%E7%9A%84%E5%A5%97%E8%B7%AF/"/>
      <url>2020/04/23/%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E6%8F%AD%E7%A9%BF%E5%88%9B%E4%B8%9A%E5%85%AC%E5%8F%B8%E7%9A%84%E5%A5%97%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆè¡·"><a href="#åˆè¡·" class="headerlink" title="åˆè¡·"></a>åˆè¡·</h2><p>æ¯ä¸ªåˆå…¥ç¤¾ä¼šçš„æ±‚èŒè€…ï¼Œéƒ½æ›¾ç»æœ‰è¿‡æ‰¾å·¥ä½œè¢«å‘çš„ç»å†ã€‚æ€»ç»“äº†ä»¥ä¸‹æ½œå°è¯ï¼Œå¦‚æœä½ èƒ½å…¨éƒ¨GETåˆ°ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œå·²è¢«è€æ¿ä»¬æ‹‰å…¥é»‘åå•ã€‚</p><h2 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><ol><li>ã€Œå·¥èµ„4k - 8kã€â€”â€”é‚£å·¥èµ„å°±æ˜¯4k</li><li>ã€Œå·¥èµ„ä¸Šä¸å°é¡¶ã€â€”â€”å°±æ˜¯è¯´è¯´è€Œå·²ï¼Œæ²¡äººä¼šç»™ä½ ä¸€ä¸ªæœˆä¸€ç™¾ä¸‡æœˆè–ªçš„</li><li>ã€Œç¾å¥³å¦‚äº‘ã€â€”â€”æˆ‘å¸æ²¡æœ‰ç¦åˆ©ï¼Œä½ ä»¬å‘˜å·¥è‡ªå·±äº’ç›¸ç»™ç¦åˆ©å§</li><li>ã€Œå¤§ç‰›äº‘é›†ã€â€”â€”æœ‰ä¸¤ä¸ªç¨å¾®æœ‰ç‚¹ç»éªŒçš„ç¨‹åºå‘˜</li><li>ã€Œéœ€è¦ä½ æœ‰ä¸€å®šæŠ—å‹èƒ½åŠ›ã€â€”â€”éœ€è¦ä½ è‡ªæ„¿åŠ ç­</li><li>ã€Œä¸å¼ºåˆ¶åŠ ç­ã€â€”â€”éœ€è¦ä½ è‡ªæ„¿åŠ ç­</li><li>ã€Œå¼¹æ€§å·¥ä½œæ—¶é—´ã€â€”â€”ä¸Šç­ä¸å¼¹ï¼Œä¸‹ç­å¼¹ï¼Œè€Œä¸”åªå¾€ååŠå¤œå¼¹</li><li>ã€Œå¯æä¾›æœ‰ç«äº‰åŠ›çš„è–ªé…¬ã€â€”â€”æˆ‘ä»¬ç»™çš„å·¥èµ„è·Ÿå…¶ä»–å…¬å¸å·®ä¸å¤š</li><li>ã€ŒæœŸæƒæ¿€åŠ±æ‹¿åˆ°æ‰‹è½¯ã€â€”â€”å¸Œæœ›èƒ½å¼¥è¡¥ä½ çœ‹åˆ°åŸºæœ¬å·¥èµ„åçš„è„šè½¯</li><li>ã€Œæœ‰æ´»åŠ›çš„æŠ€æœ¯å›¢é˜Ÿã€â€”â€”å›¢é˜Ÿå¹³å‡å·¥ä½œç»éªŒå°äº1å¹´</li><li>ã€Œåƒäº¿å¸‚åœºçš„æ¢ç´¢è€…ã€â€”â€”ç›®å‰å°šæ²¡çœ‹æ¸…å…·ä½“å¸‚åœºåœ¨å“ª </li><li>ã€Œæ–°æŠ€æœ¯+æ–°æ–¹å‘+æ–°å›¢é˜Ÿã€â€”â€”å—¯ï¼Œç›®å‰è¿™ä¸‰æ ·éƒ½æ²¡æœ‰</li><li>ã€Œç›´è¿›æ ¸å¿ƒå›¢é˜Ÿã€â€”â€”å…¬å¸å°šæœªè®¾ç½®éæ ¸å¿ƒå›¢é˜Ÿå²—</li><li>ã€Œå…¬å¸è®¡åˆ’çŸ­æœŸå†…ä¸Šå¸‚ã€â€”â€”æ‚¨ä¹ŸçŸ¥é“è®¡åˆ’ä¸€èˆ¬èµ¶ä¸ä¸Šå˜åŒ–</li><li>ã€Œæˆ‘ä»¬æ„¿æ„èŠ±é’±å»åŸ¹å…»æœ‰æ½œåŠ›çš„äººã€â€”â€”ä¾¿å®œã€å¬è¯ã€è‚¯åŠ ç­<ol><li>ã€Œå›¢é˜Ÿå¹´è½»æœ‰æ´»åŠ›ã€â€”â€”ç¦»èŒç‡é«˜ï¼Œæ²¡æœ‰èµ„æ·±çš„è€å‘˜å·¥</li><li>ã€Œå›¢é˜Ÿéƒ½æ˜¯90åã€â€”â€”å‰é€”æœªåœçš„åˆ›ä¸šå‹å…¬å¸</li><li>ã€Œæˆ‘ä»¬çš„æ™‹å‡æœºåˆ¶å¾ˆå®Œå–„ï¼Œå‡èŒå¿«ã€â€”â€”å…¬å¸ä¸åˆ°50äººï¼Œèµ·æ­¥å¯èƒ½å°±æ˜¯ç»ç†å¼€å¤´</li><li>ã€Œæˆ‘ä»¬å€¡å¯¼ç‹¼æ€§æ–‡åŒ–ã€â€”â€”æœ«ä½æ·˜æ±°+é»˜è®¤åŠ ç­+æ‰“é¸¡è¡€+æ´—è„‘</li><li>ã€Œæˆ‘ä»¬å¹¶ä¸é¼“åŠ±åŠ ç­ ã€â€”â€”æ‰€ä»¥æˆ‘ä»¬ä¸ä¼šç»™åŠ ç­è´¹çš„</li><li>ã€Œå¸Œæœ›ä½ èƒ½ç‹¬ç«‹æ‰¿æ‹…é¡¹ç›® ã€â€”â€”å¸Œæœ›ä½ èƒ½ç‹¬ç«‹èƒŒé”…</li></ol></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ­å–œå¤§å®¶ï¼ŒæˆåŠŸä¸åˆ›ä¸šå…¬å¸çš„è€æ¿ä»¬ä¸ºæ•Œã€‚<br>(ä¸Šé¢éƒ½æ˜¯æˆ‘éšä¾¿å†™çš„ï¼Œå¸Œæœ›è€æ¿ä»¬èƒ½æ”¾è¿‡æˆ‘ï¼Œå¦‚æœä¸æƒ³æ”¾è¿‡æˆ‘ï¼Œé‚£å°±ç•™ä¸‹ä½ çš„ğŸ‘å’Œå…³æ³¨å§)</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—ä¹‹GITé¢è¯•ç¯‡</title>
      <link href="2020/04/15/git/%E3%80%8A%E5%90%8A%E6%89%93%E9%9D%A2%E8%AF%95%E5%AE%98%E3%80%8B%E7%B3%BB%E5%88%97%E4%B9%8BGIT%E9%9D%A2%E8%AF%95%E7%AF%87/"/>
      <url>2020/04/15/git/%E3%80%8A%E5%90%8A%E6%89%93%E9%9D%A2%E8%AF%95%E5%AE%98%E3%80%8B%E7%B3%BB%E5%88%97%E4%B9%8BGIT%E9%9D%A2%E8%AF%95%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸ºä»€ä¹ˆè¦ç¼–å†™è¿™ä¸ªç³»åˆ—ï¼Ÿgitä¸ç†Ÿæ‚‰çš„é¢è¯•è€…å¾ˆéš¾è¡¨ç°å‡ºè‡ªå·±ç†Ÿæ‚‰gitå·¥ä½œæµï¼Œé‚£ä¹ˆæ•™å¤§å®¶å¦‚ä½•åœ¨é¢è¯•å®˜é¢å‰å¤§å±•é›„é£ï¼ï¼ï¼</p></blockquote><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>gitæ˜¯ä¸€æ¬¾ä»£ç ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œç›®å‰å·²è¢«å¹¿æ³›çš„ä½¿ç”¨ã€‚å› æ­¤ä¼˜é›…çš„ä½¿ç”¨gitå·²ç»æˆäº†å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚ åŒºåˆ«äºSVNï¼Œgitçš„ç‰¹ç‚¹æ˜¯å»ä¸­å¿ƒåŒ–ã€‚</p><h2 id="é¢è¯•å¼€å§‹"><a href="#é¢è¯•å¼€å§‹" class="headerlink" title="é¢è¯•å¼€å§‹"></a>é¢è¯•å¼€å§‹</h2><p>ä»¥ä¸‹éƒ½æ˜¯é¢è¯•ç»å¸¸ä¼šé—®åˆ°çš„é—®é¢˜ï¼Œå¤§å®¶è¦è®°ä½å“¦ï¼ï¼ï¼</p><a id="more"></a><h4 id="1-å¹³æ—¶å¼€å‘ä½ æ˜¯ç”¨å‘½ä»¤è¡Œå·¥å…·è¿˜æ˜¯å¯è§†åŒ–å·¥å…·"><a href="#1-å¹³æ—¶å¼€å‘ä½ æ˜¯ç”¨å‘½ä»¤è¡Œå·¥å…·è¿˜æ˜¯å¯è§†åŒ–å·¥å…·" class="headerlink" title="1.å¹³æ—¶å¼€å‘ä½ æ˜¯ç”¨å‘½ä»¤è¡Œå·¥å…·è¿˜æ˜¯å¯è§†åŒ–å·¥å…·"></a>1.å¹³æ—¶å¼€å‘ä½ æ˜¯ç”¨å‘½ä»¤è¡Œå·¥å…·è¿˜æ˜¯å¯è§†åŒ–å·¥å…·</h4><p> é¢è¯•å®˜çš„åˆè¡·ä¸æ˜¯æƒ³çŸ¥é“ä½ ç”¨ä»€ä¹ˆå·¥å…·ï¼Œè€Œæ˜¯æƒ³çŸ¥é“ä½ æ˜¯å¦ç†Ÿæ‚‰å¸¸ç”¨çš„å‘½ä»¤å’Œåˆ†æ”¯ï¼Œä»¥åŠå¦‚ä½•å›¢é˜Ÿåˆä½œ</p><h4 id="2-å¸¸ç”¨çš„åˆ†æ”¯"><a href="#2-å¸¸ç”¨çš„åˆ†æ”¯" class="headerlink" title="2.å¸¸ç”¨çš„åˆ†æ”¯"></a>2.å¸¸ç”¨çš„åˆ†æ”¯</h4><div class="table-container"><table><thead><tr><th>åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>master</td><td>ä¸»åˆ†æ”¯</td></tr><tr><td>develop</td><td>å¼€å‘åˆ†æ”¯ï¼ŒåŒ…å«ç¡®å®šå³å°†å‘å¸ƒçš„ä»£ç </td></tr><tr><td>feature</td><td>æ–°åŠŸèƒ½åˆ†æ”¯ï¼Œä¸€èˆ¬ä¸€ä¸ªæ–°åŠŸèƒ½å¯¹åº”ä¸€ä¸ªåˆ†æ”¯</td></tr><tr><td>release</td><td>å‘å¸ƒå®šæœŸè¦ä¸Šçº¿çš„åŠŸèƒ½</td></tr><tr><td>hotfix</td><td>å½“ç³»ç»Ÿåœ¨çº¿ä¸Šå‡ºç°bugæ—¶ï¼Œéœ€è¦ç«é€Ÿå¤„ç†</td></tr></tbody></table></div><p>æ³¨ï¼š</p><blockquote><p>hotfixæ˜¯ä»masteråˆ†æ”¯ä¸Šåˆ‡ä¸‹æ¥ï¼Œ master branchï¼ˆç”Ÿäº§æœåŠ¡å™¨ï¼‰å…ˆå›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬æ¥é¿å…bugå†å‡ºç°ï¼Œå¼€å‘äººå‘˜å¤„ç†æ‰è¿™ä¸ªbugåè¿›è¡Œå• å…ƒæµ‹è¯•ï¼Œå›å½’æµ‹è¯•ä¹‹åï¼Œmaster merge hotfix,åˆ«å¿˜äº†develop branchä¹Ÿè¦merge å®ƒï¼</p></blockquote><h4 id="3-å¸¸ç”¨çš„å‘½ä»¤"><a href="#3-å¸¸ç”¨çš„å‘½ä»¤" class="headerlink" title="3.å¸¸ç”¨çš„å‘½ä»¤"></a>3.å¸¸ç”¨çš„å‘½ä»¤</h4><blockquote><p>ä¸è¦åªè¯´ add commit pull pushï¼Œè¿™æ ·ä¼šæ˜¾å¾—å¾ˆåˆçº§ï¼Œä»¥ä¸‹åˆ—å‡ºçš„å‘½ä»¤è¿˜ä¼šæœ‰å¾ˆå¤šå‚æ•°å»å»¶ä¼¸ï¼Œå¤§å®¶è¦å¤šå­¦ä¹ å“¦</p></blockquote><ul><li>git add </li><li>git commit</li><li>git status</li><li>git pull</li><li>git push</li><li>git merge</li><li>git stash</li><li>git reset</li><li>git log</li><li>git diff </li><li>git remote</li><li>git clone</li><li>git branch</li><li>git config</li><li>git tag</li><li>git rm</li><li>git init</li><li>git fetch</li><li>git cherry-pick</li><li>git rebase</li></ul><h4 id="4-git-checkout-å¯ä»¥å®ç°å“ªäº›åŠŸèƒ½"><a href="#4-git-checkout-å¯ä»¥å®ç°å“ªäº›åŠŸèƒ½" class="headerlink" title="4.git checkout å¯ä»¥å®ç°å“ªäº›åŠŸèƒ½"></a>4.git checkout å¯ä»¥å®ç°å“ªäº›åŠŸèƒ½</h4><ol><li>åˆ‡æ¢åˆ†æ”¯ <pre><code>git checkout åˆ†æ”¯å</code></pre></li><li>åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯    <pre><code>git checkout  -b åˆ†æ”¯å</code></pre></li><li>æ’¤é”€å¯¹æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆåªèƒ½æ’¤é”€æ‰æ²¡æœ‰addçš„æ–‡ä»¶ï¼‰<pre><code>git checkout  æ–‡ä»¶å// æ’¤é”€æ‰€æœ‰çš„æ–‡ä»¶git checkout .</code></pre></li></ol><h4 id="5-åˆå¹¶å…¶ä¸­ä¸€ä¸ªfeatureåˆ†æ”¯æœ‰å“ªå‡ ç§å®ç°æ–¹å¼"><a href="#5-åˆå¹¶å…¶ä¸­ä¸€ä¸ªfeatureåˆ†æ”¯æœ‰å“ªå‡ ç§å®ç°æ–¹å¼" class="headerlink" title="5.åˆå¹¶å…¶ä¸­ä¸€ä¸ªfeatureåˆ†æ”¯æœ‰å“ªå‡ ç§å®ç°æ–¹å¼"></a>5.åˆå¹¶å…¶ä¸­ä¸€ä¸ªfeatureåˆ†æ”¯æœ‰å“ªå‡ ç§å®ç°æ–¹å¼</h4><p>ç¬¬ä¸€ç§</p><pre><code>git pull origin feature</code></pre><p>ç¬¬äºŒç§</p><pre><code>git merge feature</code></pre><h4 id="6-git-pullå’Œgit-fetchçš„åŒºåˆ«"><a href="#6-git-pullå’Œgit-fetchçš„åŒºåˆ«" class="headerlink" title="6.git pullå’Œgit fetchçš„åŒºåˆ«"></a>6.git pullå’Œgit fetchçš„åŒºåˆ«</h4><p>é¦–å…ˆåœ¨ä½œç”¨ä¸Šä»–ä»¬çš„åŠŸèƒ½æ˜¯å¤§è‡´ç›¸åŒçš„ï¼Œéƒ½æ˜¯èµ·åˆ°äº†æ›´æ–°ä»£ç çš„ä½œç”¨ã€‚<br><strong>pull=fetch+merge</strong>ï¼Œpullçš„è¯ï¼Œä¸‹æ‹‰è¿œç¨‹åˆ†æ”¯å¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶ã€‚<br>fetchåªæ˜¯ä¸‹æ‹‰è¿œç¨‹åˆ†æ”¯ï¼Œæ€ä¹ˆåˆå¹¶ï¼Œå¯ä»¥è‡ªå·±å†åšé€‰æ‹©ã€‚</p><h4 id="7-å¦‚ä½•å°†devåˆ†æ”¯çš„commitidå¤åˆ¶åˆ°å½“å‰åˆ†æ”¯"><a href="#7-å¦‚ä½•å°†devåˆ†æ”¯çš„commitidå¤åˆ¶åˆ°å½“å‰åˆ†æ”¯" class="headerlink" title="7.å¦‚ä½•å°†devåˆ†æ”¯çš„commitidå¤åˆ¶åˆ°å½“å‰åˆ†æ”¯"></a>7.å¦‚ä½•å°†devåˆ†æ”¯çš„commitidå¤åˆ¶åˆ°å½“å‰åˆ†æ”¯</h4><pre><code>// å…ˆgit log æ‰¾åˆ°æƒ³è¦å¤åˆ¶çš„commitidgit cherry-pick commitid</code></pre><h4 id="8-è®²ä¸‹gitçš„å·¥ä½œæµç¨‹"><a href="#8-è®²ä¸‹gitçš„å·¥ä½œæµç¨‹" class="headerlink" title="8.è®²ä¸‹gitçš„å·¥ä½œæµç¨‹"></a>8.è®²ä¸‹gitçš„å·¥ä½œæµç¨‹</h4><p><img src="https://img-blog.csdnimg.cn/20200413132623430.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3,size_16,color_FFFFFF,t_70" alt="å›¾ç‰‡æ¥æºäºç½‘ç»œ"><br>æ²¡æœ‰å…·ä½“çš„æ ‡å‡†ç­”æ¡ˆï¼Œä¸Šå›¾æ˜¯ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œå…·ä½“ä»¥å¾€ä¸‹å‡ ä¸ªçŸ¥è¯†ç‚¹åˆ†æ</p><ul><li>æ¯ä¸ªåˆ†æ”¯çš„ä½œç”¨ï¼Œä»¥åŠæ˜¯å¹²ä»€ä¹ˆçš„</li><li>å¯¹äº feature æµç¨‹ï¼Œéƒ½æ˜¯ä» develop åˆ†æ”¯å‘èµ·ï¼Œåˆ†æ”¯åˆå¹¶ä»¥åŠåŠŸèƒ½ç®¡ç†</li><li>å¯¹äº hotfix æµç¨‹ï¼Œè¦ä» master åˆ†æ”¯å‘èµ·ï¼Œä¿®å¤å®Œè¦åŒæ—¶åˆå¹¶åˆ° develop å’Œ masterã€‚</li></ul><p>Git flowçš„ä¼˜ç‚¹æ˜¯æ¸…æ™°å¯æ§ï¼Œç¼ºç‚¹æ˜¯ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦åŒæ—¶ç»´æŠ¤ä¸¤ä¸ªé•¿æœŸåˆ†æ”¯ã€‚å¤§å¤šæ•°å·¥å…·éƒ½å°†masterå½“ä½œé»˜è®¤åˆ†æ”¯ï¼Œå¯æ˜¯å¼€å‘æ˜¯åœ¨developåˆ†æ”¯è¿›è¡Œçš„ï¼Œè¿™å¯¼è‡´ç»å¸¸è¦åˆ‡æ¢åˆ†æ”¯ï¼Œéå¸¸çƒ¦äººã€‚</p><h2 id="é¢è¯•ç»“æŸ"><a href="#é¢è¯•ç»“æŸ" class="headerlink" title="é¢è¯•ç»“æŸ"></a>é¢è¯•ç»“æŸ</h2><p>å¸Œæœ›ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—ä¹‹GITé¢è¯•ç¯‡èƒ½ä¸ºä½ çš„é¢è¯•æé«˜é€šè¿‡ç‡ï¼ï¼ï¼<br>ç¥ç¦æ¯ä¸€ä½å°ä¼™ä¼´éƒ½èƒ½æ‰¾åˆ°æ»¡æ„çš„å·¥ä½œï¼ï¼ï¼</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHPæ¥å…¥æµ·å°”æ¶ˆè´¹é‡‘è</title>
      <link href="2020/04/10/php/PHP%E6%8E%A5%E5%85%A5%E6%B5%B7%E5%B0%94%E6%B6%88%E8%B4%B9%E9%87%91%E8%9E%8D/"/>
      <url>2020/04/10/php/PHP%E6%8E%A5%E5%85%A5%E6%B5%B7%E5%B0%94%E6%B6%88%E8%B4%B9%E9%87%91%E8%9E%8D/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æµ·å°”æ¶ˆè´¹é‡‘èç®€ç§°â€œå—¨ä»˜â€ï¼Œå…¬å¸è¦æ±‚æ¥å…¥æµ·å°”é‡‘èåˆ†æœŸï¼Œç¬¬ä¸€æ¬¡å¬è¯´è¿™ç§æ”¯ä»˜ï¼Œå®˜æ–¹åªæœ‰javaçš„demoï¼Œæ²¡æœ‰phpçš„ï¼Œæ‰€ä»¥ä¸‹é¢ä¼šæä¾›ä¸€äº›phpå®æˆ˜ç”¨åˆ°çš„ä»£ç </p></blockquote><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><blockquote><p>æµ·å°”ä¼šæ‹‰ä¸€ä¸ªå¾®ä¿¡ç¾¤ï¼Œç»™ä¸€ä¸ªwordæ–‡æ¡£ï¼Œä¸Šé¢ä¼šå†™ç€æµ‹è¯•ç¯å¢ƒåœ°å€ï¼Œå¾ˆç®€æ´ï¼Œæ²¡æœ‰åœ¨çº¿çš„æ¥å£æ–‡æ¡£ï¼Œæ•ˆç‡æä½ï¼Œæˆ‘ä¸€å…±æ”¶åˆ°äº†3ä¸ªwordæ–‡æ¡£äº†ï¼Œä»–ä»¬ç»™çš„æ¥å£å®ä¾‹æ¯æ¬¡éƒ½è¦å°‘ç‚¹ä»€ä¹ˆã€‚å¼€å‘å®Œåï¼Œå‘ç°è¦æ³¨å†Œä»–ä»¬å¹³å°çš„è´¦å·ã€èº«ä»½è¯è®¤è¯ã€äººè„¸è¯†åˆ«ã€é“¶è¡Œå¡æ·»åŠ ï¼Œå„ç§éšç§ï¼Œè€Œä¸”åˆæ˜¯è´·æ¬¾ï¼Œç»™äººä¸€ç§å¾ˆä¸å®‰å…¨çš„æ„Ÿè§‰ã€‚ä½œä¸ºåç«¯ï¼Œè¦æµ‹è¯•è‡ªå·±å†™çš„ä»£ç ï¼Œåªèƒ½æ³¨å†Œäº†ã€‚åªè¦èƒ½å†™å‡ºæ¥phpçš„demoï¼Œå®˜æ–¹ç»™çš„æ–‡æ¡£åœ¨æ ‡å‡†ä¸€äº›ï¼Œæ¥å…¥å°±æ¯”è¾ƒæ–¹ä¾¿äº†ï¼Œè¿™ä¸¤æ ·è¿˜å¾—è‡ªå·±æ‘¸ç´¢ã€‚ã€‚ã€‚</p></blockquote><a id="more"></a><h2 id="å®æˆ˜ä»£ç "><a href="#å®æˆ˜ä»£ç " class="headerlink" title="å®æˆ˜ä»£ç "></a>å®æˆ˜ä»£ç </h2><blockquote><p>çº¿ä¸Šå’Œæµ‹è¯•é…ç½®åˆ‡æ¢éœ€è¦ä¿®æ”¹url(æ¥å£åœ°å€)</p></blockquote><h3 id="å…¬å…±é…ç½®æ–‡ä»¶"><a href="#å…¬å…±é…ç½®æ–‡ä»¶" class="headerlink" title="å…¬å…±é…ç½®æ–‡ä»¶"></a>å…¬å…±é…ç½®æ–‡ä»¶</h3><h4 id="å…¬é’¥ç§é’¥æ–‡ä»¶å¤¹"><a href="#å…¬é’¥ç§é’¥æ–‡ä»¶å¤¹" class="headerlink" title="å…¬é’¥ç§é’¥æ–‡ä»¶å¤¹"></a>å…¬é’¥ç§é’¥æ–‡ä»¶å¤¹</h4><ul><li>hai_pay/      æµ·å°”é‡‘èé…ç½®æ–‡ä»¶å¤¹</li><li>hai_pay/config/      å…¬é’¥ç§é’¥</li><li>hai_pay/config/private.pem      ç§é’¥</li><li>hai_pay/config/public.pem      å…¬é’¥</li><li>hai_pay/RSAUtils.php        </li><li>hai_pay/SignUtil.php        </li></ul><h4 id="æ–‡ä»¶å-private-pem"><a href="#æ–‡ä»¶å-private-pem" class="headerlink" title="æ–‡ä»¶å:private.pem"></a>æ–‡ä»¶å:private.pem</h4><pre><code>-----BEGIN PRIVATE KEY-----***-----END PRIVATE KEY-----</code></pre><h4 id="æ–‡ä»¶å-public-pem"><a href="#æ–‡ä»¶å-public-pem" class="headerlink" title="æ–‡ä»¶å:public.pem"></a>æ–‡ä»¶å:public.pem</h4><pre><code>-----BEGIN PUBLIC KEY-----***-----END PUBLIC KEY-----</code></pre><h4 id="æ–‡ä»¶å-RSAUtils-php"><a href="#æ–‡ä»¶å-RSAUtils-php" class="headerlink" title="æ–‡ä»¶å:RSAUtils.php"></a>æ–‡ä»¶å:RSAUtils.php</h4><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App\Http\Tools\HaiPay;class RSAUtils{    private $privateKey='';//ç§é’¥ï¼ˆç”¨äºç”¨æˆ·åŠ å¯†ï¼‰    private $publicKey='';//å…¬é’¥ï¼ˆç”¨äºæœåŠ¡ç«¯æ•°æ®è§£å¯†ï¼‰    private $dir;    public function __construct(){        $this->dir = 'config';        $this->privateKey = openssl_pkey_get_private(file_get_contents(dirname(__FILE__).'/'.$this->dir.'/private.pem'));//ç§é’¥ï¼Œç”¨äºåŠ å¯†        $this->publicKey = openssl_pkey_get_public(file_get_contents(dirname(__FILE__).'/'.$this->dir.'/public.pem'));//å…¬é’¥ï¼Œç”¨äºè§£å¯†    }    /**     * ç§é’¥åŠ å¯†     * @param åŸå§‹æ•°æ® $data     * @return å¯†æ–‡ç»“æœ string     */    public function encryptByPrivateKey($data) {        openssl_private_encrypt($data,$encrypted,$this->privateKey,OPENSSL_PKCS1_PADDING);//ç§é’¥åŠ å¯†        $encrypted = base64_encode($encrypted);//åŠ å¯†åçš„å†…å®¹é€šå¸¸å«æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦ç¼–ç è½¬æ¢ä¸‹ï¼Œåœ¨ç½‘ç»œé—´é€šè¿‡urlä¼ è¾“æ—¶è¦æ³¨æ„base64ç¼–ç æ˜¯å¦æ˜¯urlå®‰å…¨çš„        return $encrypted;    }    /**     * ç§é’¥è§£å¯†     * @param å¯†æ–‡æ•°æ® $data     * @return åŸæ–‡æ•°æ®ç»“æœ string     */    public function decryptByPrivateKey($data){        $data = base64_decode($data);        openssl_private_decrypt($data,$encrypted,$this->privateKey,OPENSSL_PKCS1_PADDING);//ç§é’¥è§£å¯†        return $encrypted;    }    /**     * ç§é’¥ç­¾å     * @param unknown $data     */    public function signByPrivateKey($data){        openssl_sign($data, $signature, $this->privateKey);        $encrypted = base64_encode($signature);//åŠ å¯†åçš„å†…å®¹é€šå¸¸å«æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦ç¼–ç è½¬æ¢ä¸‹ï¼Œåœ¨ç½‘ç»œé—´é€šè¿‡urlä¼ è¾“æ—¶è¦æ³¨æ„base64ç¼–ç æ˜¯å¦æ˜¯urlå®‰å…¨çš„        return $encrypted;    }    /**     * å…¬é’¥åŠ å¯†     * @param åŸæ–‡æ•°æ® $data     * @return åŠ å¯†ç»“æœ string     */    public function encryptByPublicKey($data) {        openssl_public_encrypt($data,$decrypted,$this->publicKey,OPENSSL_PKCS1_PADDING);//å…¬é’¥åŠ å¯†        return base64_encode($decrypted);    }    /**     * å…¬é’¥è§£å¯†     * @param å¯†æ–‡æ•°æ® $data     * @return åŸæ–‡ç»“æœ string     */    public function decryptByPublicKey($data) {        $data = base64_decode($data);        openssl_public_decrypt($data,$decrypted,$this->publicKey,OPENSSL_PKCS1_PADDING);//å…¬é’¥è§£å¯†        return $decrypted;    }    /**     * å…¬é’¥éªŒç­¾     * @param unknown $data     * @param unknown $sign     */    public function verifyByPublicKey($data,$sign){        $sign = base64_decode($sign);        return openssl_verify($data, $sign, $this->publicKey);    }    public function __destruct(){        openssl_free_key($this->privateKey);        openssl_free_key($this->publicKey);    }    public function getPrivateKey(){        return file_get_contents(dirname(__FILE__).'/'.$this->dir.'/private.pem');    }}</code></pre><h4 id="æ–‡ä»¶å-SignUtil-php"><a href="#æ–‡ä»¶å-SignUtil-php" class="headerlink" title="æ–‡ä»¶å:SignUtil.php"></a>æ–‡ä»¶å:SignUtil.php</h4><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App\Http\Tools\HaiPay;class SignUtil{    private $key = ''; /*å¯†é’¥,22ä¸ªå­—ç¬¦*/    private $iv  = ''; /*å‘é‡ï¼Œ8ä¸ªæˆ–10ä¸ªå­—ç¬¦*/    public function __construct($key = '',$iv = '')    {        $this->key = $key;        $this->iv = $iv;    }    /**     * åŠ å¯†     * @param boolean $status æ˜¯å¦åŠ å¯†     * @return string å¤„ç†è¿‡çš„æ•°æ®     */    public function encrypt($data,$status=false){        if ($status){            return base64_encode(openssl_encrypt($data, 'des-ede3-cbc', $this->key, OPENSSL_RAW_DATA,$this->iv));        }       return $data;    }    /**     * è§£å¯†     * @return string åŠ å¯†çš„å­—ç¬¦ä¸²ä¸æ˜¯å®Œæ•´çš„ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²å€¼     */    public function decrypt($data,$miv,$status=false){        if ($status){            $k=substr($miv,0,8);            $i=substr($miv,8,8);            return openssl_decrypt(base64_decode($data), 'des-ede3-cbc', $k, OPENSSL_RAW_DATA, $i);        }        return $data;    }}?></code></pre><h3 id="æ§åˆ¶å™¨æ–‡ä»¶"><a href="#æ§åˆ¶å™¨æ–‡ä»¶" class="headerlink" title="æ§åˆ¶å™¨æ–‡ä»¶"></a>æ§åˆ¶å™¨æ–‡ä»¶</h3><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App\Http\Controllers\Pay;use App\Exceptions\LogicException;use App\Http\Model\DB\AwsOrders;use App\Http\Tools\HaiPay\RSAUtils;use App\Http\Tools\HaiPay\SignUtil;use App\Http\Tools\Tools;use Illuminate\Http\Request;use GuzzleHttp\Client;use Illuminate\Support\Facades\Log;class HaiPayController extends BasicController{    protected $host;    protected $loanType;    protected $tools;    protected $http_clinet;    public function __construct(Request $request)    {        /**         * applyNoæ˜¯å½“å‰è¯·æ±‚çš„ä¸€ä¸ªè¯·æ±‚å·ï¼Œæ–¹ä¾¿æŸ¥æ—¥å¿—ç”¨çš„ï¼Œæ²¡æœ‰å…¶ä»–ä½œç”¨ã€‚ä¸ä¸è®¢å•ä¿¡æ¯ç»‘å®šã€‚         * uuid æ¯ä¸€ç¬”è®¢å•éƒ½ä¸è¦é‡å¤         */        parent::__construct($request);        $this->host = 'https://testpm.haiercash.com:9002';        $this->loanType = 0;        if(env('APP_ENV') == 'production'){            $this->loanType = 0; // todo çº¿ä¸Šåœ°å€å¾…å®Œå–„            $this->host = ''; // todo çº¿ä¸Šåœ°å€å¾…å®Œå–„        }        $this->tools = new Tools();        $this->http_clinet = new Client();        require_once  dirname(dirname(dirname(__FILE__))) . '/Tools/hai_pay/SignUtil.php';        require_once  dirname(dirname(dirname(__FILE__))) . '/Tools/hai_pay/RSAUtils.php';    }    /**     * è´·æ¬¾ç”³è¯·     * @return \Illuminate\Http\JsonResponse     * @throws LogicException     * @throws \GuzzleHttp\Exception\GuzzleException     * User: https://github.com/WXiangQian     */    public function hai_consume()    {        $key = rand(10000000, 99999999);        $iv  = rand(10000000, 99999999);        $order_id = $this->request->input('order_id',0);        $model = $this->request->input('model','');        // æœŸæ•°ã€‚3ã€6ã€9ã€12        $applyTnr = $this->request->input('applyTnr',0);        if (!in_array($applyTnr,[3,6,9,12])) {            return $this->response->tag('PARAM_ERROR')->response();        }        // æ ¹æ®è®¢å•å·æŸ¥è¯¢æ•°æ®åº“çš„å®ä»˜é‡‘é¢        $payAmt = 0;        if (!isset($payAmt)) {            return $this->response->tag('ORDER_NOT_EXIST')->response();        }        // å°äº1wçš„è¯¾ç¨‹ä¸å…è®¸ä½¿ç”¨æµ·å°”é‡‘è        if ($payAmt < 10000) {            return $this->response->tag('PARAM_ERROR')->response();        }        $post_data = array(            'uuid' => 'äº¤æ˜“æµæ°´å·',            'body' => array(                'orderSn' => 'è®¢å•å·',                'loanType' => 'è´·æ¬¾å“ç§ç¼–ç ',                'payAmt' => 'è´·æ¬¾é‡‘é¢',                'orderDate' => 'ä¸‹å•æ—¶é—´Y-m-d',                'applyTnr' => 'æœŸæ•°',                'orderMessage' => array(                    'cOrderSn' => time(),                    'topLevel' => '',                    'model' => '',                    'sku' => 0,                    'price' => 'ä»·æ ¼',                    'num' => 1,                    'cOrderAmt' => 'ä»·æ ¼',                    'cOrderPayAmt' => 'ä»·æ ¼'                ),            )        );        $sign = new SignUtil($key, $iv);        $desData = $sign->encrypt(json_encode($post_data), true);        $rsa = new RSAUtils();        $password_ = $rsa->encryptByPublicKey($key . $iv);        $data = [            'applyNo' => $order_id,            'channelNo' => '',    // todo æ–‡æ¡£é‡Œçš„æ¸ é“ç¼–å·            'tradeCode' => '', // todo å†…éƒ¨ç³»ç»Ÿä½¿ç”¨ï¼Œæ–‡æ¡£é‡Œæœ‰æ ‡è¯†            'data' => $desData,            'privatekey' => $rsa->getPrivateKey(),            'key' => $password_        ];        $data_string = json_encode($data);        $clinet_data = [            'body' => $data_string,        ];        // è¿™é‡Œä½¿ç”¨åˆ°äº†guzzleæ‰©å±•åŒ…ï¼Œå¯ä»¥æ›´æ¢ä¸ºcurlå»è¯·æ±‚        $result = $this->http_clinet->request('post', $this->host.'/api/payment/gmorder/loanApplication', $clinet_data);        if ($result->getStatusCode() != 200) {            return $this->response->tag('PARAM_ERROR')->response();        }        $result = json_decode($result->getBody(),true);        // 00000ä¸ºç”³è¯·æˆåŠŸ        if ($result['head']['retFlag'] != '00000') {            throw new LogicException($result['head']['retMsg'],400);        }        $resData = $result['body']['data'];        $resKey = $result['body']['key'];        $decryptByPublicKey = $rsa->decryptByPrivateKey($resKey);        $r = $sign->decrypt($resData, $decryptByPublicKey, true);        $url = '';        if ($r) {            $r = json_decode($r, true);            if (!empty($r['url'])) {                $url = $r['url'];            }        }        return $this->response->data(['url'=>$url])->response();    }    /**     * è´·æ¬¾å›è°ƒ     * User: https://github.com/WXiangQian     */    public function hai_callback()    {        $post = file_get_contents('php://input');        $rs = json_decode(stripslashes($post),true);        if(empty($rs['key']) || empty($rs['data'])){            echo json_encode(array('status'=>1,'msg'=>'keyå€¼æˆ–dataå€¼ä¸ºç©º'),JSON_UNESCAPED_UNICODE); die;        }        $sign = new SignUtil();        $rsa  = new RSAUtils();        $decryptByPublicKey=$rsa->decryptByPrivateKey($rs['key']);        $r = $sign->decrypt($rs['data'],$decryptByPublicKey,true);        if(!$r){            echo json_encode(array('status'=>1,'msg'=>'è§£å¯†å¤±è´¥'),JSON_UNESCAPED_UNICODE); die;        }        $r = json_decode($r,true);        if(!$r['ordersn']){            echo json_encode(array('status'=>1,'msg'=>'æ²¡æœ‰è®¢å•ç¼–å·'),JSON_UNESCAPED_UNICODE); die;        }        $out_trade_no   = $r['ordersn']; //è®¢å•å·        $transStatus    = $r['body']['outSts']; //è®¢å•çŠ¶æ€ 01å®¡æ‰¹ä¸­02å®¡æ‰¹é€šè¿‡03å®¡æ‰¹æ‹’ç»04 è´·æ¬¾å·²å–æ¶ˆ05 å®¢äººä»¥ç¡®è®¤æäº¤(è®¢å•ä¿å­˜)06 å®¡æ‰¹é€€å›(å®¢äºº        $trade_no       = $r['body']['orderNo']; //æµæ°´å·       // $notify_time    = time();       //é€šçŸ¥çš„å‘é€æ—¶é—´ã€‚æ ¼å¼ä¸ºyyyy-MM-dd HH:mm:ssã€‚        if($transStatus == '02') {            // è°ƒç”¨æ”¯ä»˜å›è°ƒå›è°ƒåœ°å€            echo json_encode(array('status'=>1,'msg'=>'02å¤„ç†æˆåŠŸ'),JSON_UNESCAPED_UNICODE); die;        }        echo json_encode(array('status'=>1,'msg'=>'å¤„ç†æˆåŠŸ'),JSON_UNESCAPED_UNICODE); die;    }}</code></pre><h2 id="å®æˆ˜demoåœ°å€"><a href="#å®æˆ˜demoåœ°å€" class="headerlink" title="å®æˆ˜demoåœ°å€"></a>å®æˆ˜demoåœ°å€</h2><p><a href="https://github.com/WXiangQian/laravel-api">https://github.com/WXiangQian/laravel-api</a></p><h2 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC8xLzE1LzE2ZmE4ODBjOGRhZmVlNDI?x-oss-process=image/format,png" alt=""></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC8xLzE1LzE2ZmE4ODBmYjg5NDdjOTQ?x-oss-process=image/format,png" alt=""></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC8xLzE1LzE2ZmE4ODExYjkyYTMyZDk?x-oss-process=image/format,png" alt=""></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC8xLzE1LzE2ZmE4ODEzZWU1NmZiODU?x-oss-process=image/format,png" alt=""></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC8xLzE1LzE2ZmE4ODE3MDUxOGQ0OTM?x-oss-process=image/format,png" alt=""></p><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><blockquote><p>çœŸæªå®æˆ˜phpæ¥å…¥æµ·å°”æ¶ˆè´¹é‡‘èï¼Œå¸Œæœ›å¯ä»¥å¾—åˆ°ä¸€ä¸ªğŸ‘å“¦</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯†ç ´laravel+groupBy+countä¸­é‚£äº›éšè—ç€çš„ç§˜å¯†</title>
      <link href="2020/04/01/laravel/%E8%AF%86%E7%A0%B4laravel-groupBy-count%E4%B8%AD%E9%82%A3%E4%BA%9B%E9%9A%90%E8%97%8F%E7%9D%80%E7%9A%84%E7%A7%98%E5%AF%86/"/>
      <url>2020/04/01/laravel/%E8%AF%86%E7%A0%B4laravel-groupBy-count%E4%B8%AD%E9%82%A3%E4%BA%9B%E9%9A%90%E8%97%8F%E7%9D%80%E7%9A%84%E7%A7%98%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<ul><li>è°ˆä¸€è°ˆé‚£äº›éšè—ç€çš„ç§˜å¯†å§ï¼ï¼ï¼</li></ul><blockquote><p>laravelæ¡†æ¶ä¸­å†™ç»Ÿè®¡ç”¨æˆ·çš„é¢†å–æ•°é‡ï¼Œæ‰“ç®—ç”¨ <strong>groupBy</strong> ï¼‹ <strong>count</strong>æ¥å®ç°ï¼ˆå»é‡ï¼‹ç»Ÿè®¡ï¼‰ï¼ŒåŠ äº†<strong>groupBy</strong>ä¹‹åå†<strong>count</strong>ï¼Œç»Ÿè®¡å‡ºæ¥ä¸çš„æ•°é‡ä¸å¯¹ã€‚æŸ¥è¯¢èµ„æ–™ï¼‹åå¤æµ‹è¯•ç»ˆäºå¾—åˆ°äº†è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><a id="more"></a><h3 id="é”™è¯¯çš„æŸ¥è¯¢è¯­å¥-âŒ"><a href="#é”™è¯¯çš„æŸ¥è¯¢è¯­å¥-âŒ" class="headerlink" title="é”™è¯¯çš„æŸ¥è¯¢è¯­å¥ âŒ"></a>é”™è¯¯çš„æŸ¥è¯¢è¯­å¥ âŒ</h3><pre><code>Model::whereIn('course_id',$course_ids)-&gt;groupBy('uid')-&gt;count();</code></pre><blockquote><p>é€šè¿‡groupByåˆ†ç»„åï¼Œå†æ‰§è¡ŒCount()å‡½æ•°è¿”å›çš„æ˜¯ï¼šåˆ†ç»„åæ•°æ®ï¼Œç¬¬ä¸€ä¸ªåˆ†ç»„çš„æ•°é‡ã€‚</p></blockquote><h3 id="æ­£ç¡®çš„æŸ¥è¯¢è¯­å¥-âœ”ï¸"><a href="#æ­£ç¡®çš„æŸ¥è¯¢è¯­å¥-âœ”ï¸" class="headerlink" title="æ­£ç¡®çš„æŸ¥è¯¢è¯­å¥ âœ”ï¸"></a>æ­£ç¡®çš„æŸ¥è¯¢è¯­å¥ âœ”ï¸</h3><pre><code>Model::whereIn('course_id',$course_ids)-&gt;groupBy('uid')-&gt;get()-&gt;count();// æˆ–Model::whereIn('course_id',$course_ids)-&gt;count(DB::raw('DISTINCT(uid)')));// æˆ–conut(Model::whereIn('course_id',$course_ids)-&gt;groupBy('uid')-&gt;pluck('uid')-&gt;toArray());</code></pre><h3 id="distinctå…³é”®å­—"><a href="#distinctå…³é”®å­—" class="headerlink" title="distinctå…³é”®å­—"></a>distinctå…³é”®å­—</h3><p>MySQLæŸ¥è¯¢çš„é»˜è®¤æ˜¾ç¤ºä¸ºæ‰€æœ‰è¡Œï¼ŒåŒ…æ‹¬é‡å¤çš„è¡Œã€‚</p><p>SELECTå­å¥ä¸­çš„MySQL DISTINCTå…³é”®å­—ç”¨äºæ¶ˆé™¤é‡å¤çš„è¡Œå¹¶æ˜¾ç¤ºå”¯ä¸€çš„å€¼åˆ—è¡¨ã€‚</p><h3 id="é‚£DISTINCT-å’ŒGROUP-BYå“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ"><a href="#é‚£DISTINCT-å’ŒGROUP-BYå“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ" class="headerlink" title="é‚£DISTINCT å’ŒGROUP BYå“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ"></a>é‚£DISTINCT å’ŒGROUP BYå“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ</h3><blockquote><p>DISTINCTæ“ä½œåªéœ€è¦æ‰¾å‡ºæ‰€æœ‰ä¸åŒçš„å€¼å°±å¯ä»¥äº†ã€‚è€ŒGROUP BYæ“ä½œè¿˜è¦ä¸ºå…¶ä»–èšé›†å‡½æ•°è¿›è¡Œå‡†å¤‡å·¥ä½œã€‚ä»è¿™ä¸€ç‚¹ä¸Šå°†ï¼ŒGROUP BYæ“ä½œåšçš„å·¥ä½œåº”è¯¥æ¯”DISTINCTæ‰€åšçš„å·¥ä½œè¦å¤šä¸€äº›ã€‚</p><p>ä½†å®é™…ä¸Šï¼ŒGROUP BY æ•ˆç‡ä¼šæ›´é«˜ç‚¹ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå¯¹äºDISTINCTæ“ä½œï¼Œå®ƒä¼šè¯»å–äº†æ‰€æœ‰è®°å½•ï¼Œè€ŒGROUP BYéœ€è¦è¯»å–çš„è®°å½•æ•°é‡ä¸åˆ†ç»„çš„ç»„æ•°é‡ä¸€æ ·å¤šï¼Œä¹Ÿå°±æ˜¯è¯´æ¯”å®é™…å­˜åœ¨çš„è®°å½•æ•°ç›®è¦å°‘å¾ˆå¤šã€‚</p></blockquote><h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><blockquote><p>ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œç›¸ä¿¡å¤§å®¶çœ‹å®Œä¸€å®šä¼šæ”¶è·ã€‚</p></blockquote><p>æ„¿é‚£äº›è¢«éšè—ç€çš„ç§˜å¯†éƒ½è¢«æŒ–æ˜å‡ºæ¥ï¼Œå…±å‹‰ï¼</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ajaxè¯·æ±‚åœ¨safariæµè§ˆå™¨ä¸è¡Œï¼Œchromeå¯ä»¥æ­£å¸¸è¯·æ±‚</title>
      <link href="2020/03/18/Ajax%E8%AF%B7%E6%B1%82%E5%9C%A8safari%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E8%A1%8C%EF%BC%8Cchrome%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E8%AF%B7%E6%B1%82/"/>
      <url>2020/03/18/Ajax%E8%AF%B7%E6%B1%82%E5%9C%A8safari%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E8%A1%8C%EF%BC%8Cchrome%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŒæ ·çš„Ajaxè¯·æ±‚ï¼Œåœ¨chromeå¯ä»¥å¾—åˆ°æ­£å¸¸çš„response,ä½†æ˜¯åœ¨safariä¼šè¿”å›â€å°è¯•è½½å…¥èµ„æºæ—¶å‘ç”Ÿé”™è¯¯â€ã€‚</p></blockquote><a id="more"></a><h3 id="åŸå› ï¼š"><a href="#åŸå› ï¼š" class="headerlink" title="åŸå› ï¼š"></a>åŸå› ï¼š</h3><ol><li>å¯èƒ½æ˜¯ajaxçš„datatypeæ²¡å¸¦ã€‚</li><li>å¦‚æœä½ è¡¨å•æäº¤çš„buttonçš„typeä¸ºâ€œsubmitâ€ï¼Œæ”¹ä¸ºbuttonæˆ–è€…å…¶ä»–ç±»å‹å³å¯ï¼Œå› ä¸ºbutton çš„ç±»å‹ä¸ºsubmitæ—¶ï¼Œæ­¤æŒ‰é’®ä¼šæäº¤è¡¨å•æ•°æ®ç»™æœåŠ¡å™¨ã€‚æœªæŒ‡å®šæ—¶ï¼Œæ­¤å€¼ä¸ºé»˜è®¤å€¼ï¼Œæˆ–è€…æ­¤å±æ€§åŠ¨æ€å˜æˆç©ºå€¼æˆ–è€…æ— æ•ˆå€¼ã€‚</li></ol><h3 id="è§£å†³åŠæ³•ï¼š"><a href="#è§£å†³åŠæ³•ï¼š" class="headerlink" title="è§£å†³åŠæ³•ï¼š"></a>è§£å†³åŠæ³•ï¼š</h3><ol><li>ajaxè¯·æ±‚åŠ ä¸Š â€œdatatypeâ€:â€jsonâ€</li><li>å°†buttonçš„typeæ”¹ä¸ºâ€buttonâ€</li></ol><h3 id="æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹å›¾ï¼š"><a href="#æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹å›¾ï¼š" class="headerlink" title="æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹å›¾ï¼š"></a>æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹å›¾ï¼š</h3><p><img src="https://user-gold-cdn.xitu.io/2019/8/12/16c851d1bc9e71e3?w=1096&amp;h=660&amp;f=png&amp;s=110293" alt=""></p><p><img src="https://user-gold-cdn.xitu.io/2019/8/12/16c851d4902ce8d8?w=578&amp;h=814&amp;f=png&amp;s=30588" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨GNU nanoæ—¶æ€ä¹ˆä¿å­˜é€€å‡ºçš„é—®é¢˜</title>
      <link href="2020/03/13/linux/%E4%BD%BF%E7%94%A8GNUnano%E6%97%B6%E6%80%8E%E4%B9%88%E4%BF%9D%E5%AD%98%E9%80%80%E5%87%BA%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>2020/03/13/linux/%E4%BD%BF%E7%94%A8GNUnano%E6%97%B6%E6%80%8E%E4%B9%88%E4%BF%9D%E5%AD%98%E9%80%80%E5%87%BA%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Nanoæ˜¯ä¸€ä¸ªç®€å•çš„æ²¡æœ‰èŠ±æ¢¢åŠåä¸½æ•ˆæœçš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚Nanoåœ¨åšç®€å•æ–‡æœ¬æ–‡ä»¶ç¼–è¾‘æ—¶ç›¸å½“ä¸é”™,å¯ä»¥æ»¡è¶³ä¸€äº›åŸºæœ¬æ“ä½œ.<br><a id="more"></a></p></blockquote><p>æœ¬åœ°è¿æ¥æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯<a href="https://www.termius.com/">Termius</a>ã€‚<br>Termiusæ˜¯ä¸€æ¬¾æ”¯æŒWINDOWS,MAC,å’ŒIOSå¹³å°çš„è¿œç¨‹SSHå·¥å…·ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä¸”å’Œteamviewerä¸€æ ·æ³¨å†Œä¸€ä¸ªè´¦å·å°±å¯ä»¥åœ¨å¤šä¸ªå¹³å°å…±äº«ä¸»æœºåˆ—è¡¨ï¼Œä¸€æ¬¡é…ç½®åå°±å¯ä»¥è·¨å¹³å°ä½¿ç”¨ï¼Œéå¸¸é€‚åˆæˆ‘ä»¬ç»å¸¸å’Œäº‘ä¸»æœºæœåŠ¡å™¨æ‰“äº¤é“çš„æœ‹å‹ï¼Œä¸‹é¢æ˜¯å®ƒçš„ä¸€äº›ä¸»è¦ç‰¹ç‚¹ï¼š<br>1ã€å…è´¹</p><p>2ã€XTerm, VT100å’ŒVanillaç»ˆç«¯æ”¯æŒã€‚</p><p>3ã€å¯ç”¨æ€§:åˆ†å±è§†å›¾æ”¯æŒã€‚</p><p>4ã€èº«ä»½:ç»“åˆç”¨æˆ·åã€å¯†ç æˆ–å¯†é’¥è¿›è¡Œå¿«é€Ÿè®¤è¯ã€‚</p><p>5ã€å†…ç½®RSA/DSAå¯†é’¥ç”Ÿæˆå™¨ã€‚</p><p>6ã€é€šè¿‡iTunesæ–‡ä»¶å…±äº«å¯¼å…¥å¯†é’¥ã€‚æ”¯æŒæ–‡æœ¬ã€txtã€ppkå’Œé”®æ‰©å±•ã€‚</p><p>7ã€è‡ªåŠ¨æ“ä½œç³»ç»Ÿè¯†åˆ«ï¼Œå¦‚Ubuntuã€Fedoraã€CentOSã€Raspbianã€MacOSXç­‰ã€‚</p><h3 id="ä»¥ä¿®æ”¹crontabæ–‡ä»¶ä¸ºä¾‹ï¼š"><a href="#ä»¥ä¿®æ”¹crontabæ–‡ä»¶ä¸ºä¾‹ï¼š" class="headerlink" title="ä»¥ä¿®æ”¹crontabæ–‡ä»¶ä¸ºä¾‹ï¼š"></a>ä»¥ä¿®æ”¹crontabæ–‡ä»¶ä¸ºä¾‹ï¼š</h3><p>æ‰“å¼€å¹¶ä¿®æ”¹æ–‡ä»¶ï¼šcrontab -e</p><p>ä¿®æ”¹åä½¿ç”¨ Ctrl+Xï¼Œ</p><p>æç¤ºï¼šsave modified buffer â€¦?  ï¼Œé€‰æ‹© ï¼šyes</p><p>åˆæç¤ºï¼šfile name to write ï¼š ï¼Œé€‰æ‹©ï¼šCtrl+T</p><p>åœ¨ä¸‹ä¸€ä¸ªç•Œé¢ç”¨ â€œä¸Šä¸‹å·¦å³â€ æŒ‰é”® é€‰æ‹©è¦ä¿å­˜çš„æ–‡ä»¶åï¼Œ</p><p>ç„¶åç›´æ¥ç‚¹å‡» â€œEnterâ€ æŒ‰é”®å³å¯ä¿å­˜ã€‚</p><blockquote><p>å‡ºè‡ªï¼š<a href="https://juejin.im/post/5d47cf17f265da03c926dee3">æ˜é‡‘</a></p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravelä¸­bladeæ¨¡æ¿å¸¦æ¡ä»¶åˆ†é¡µ</title>
      <link href="2020/03/05/laravel/laravel%E4%B8%ADblade%E6%A8%A1%E6%9D%BF%E5%B8%A6%E6%9D%A1%E4%BB%B6%E5%88%86%E9%A1%B5/"/>
      <url>2020/03/05/laravel/laravel%E4%B8%ADblade%E6%A8%A1%E6%9D%BF%E5%B8%A6%E6%9D%A1%E4%BB%B6%E5%88%86%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><blockquote><p>åœ¨å…¶ä»–æ¡†æ¶ä¸­ï¼Œåˆ†é¡µå¯èƒ½æ˜¯ä»¶éå¸¸ç—›è‹¦çš„äº‹ï¼ŒLaravel è®©è¿™ä»¶äº‹å˜å¾—ç®€å•ã€æ˜“äºä¸Šæ‰‹ã€‚Laravel çš„åˆ†é¡µå™¨ä¸æŸ¥è¯¢æ„å»ºå™¨å’Œ Eloquent ORM é›†æˆåœ¨ä¸€èµ·ï¼Œå¹¶å¼€ç®±æä¾›æ–¹ä¾¿çš„ã€æ˜“äºä½¿ç”¨çš„ã€åŸºäºæ•°æ®åº“ç»“æœé›†çš„åˆ†é¡µã€‚åˆ†é¡µå™¨ç”Ÿæˆçš„ HTML å…¼å®¹ Bootstrap CSS æ¡†æ¶ã€‚</p></blockquote><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><blockquote><p>åŸºäºæŸ¥è¯¢æ„å»ºå™¨è¿›è¡Œåˆ†é¡µ<br>æœ‰å¤šç§æ–¹å¼å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨æŸ¥è¯¢æ„å»ºå™¨æˆ– Eloquent æŸ¥è¯¢æä¾›çš„ paginate æ–¹æ³•ã€‚è¯¥æ–¹æ³•åŸºäºå½“å‰ç”¨æˆ·æŸ¥çœ‹é¡µè‡ªåŠ¨è®¾ç½®åˆé€‚çš„åç§»ï¼ˆoffsetï¼‰å’Œé™åˆ¶ï¼ˆlimitï¼‰ï¼Œç›´ç™½ç‚¹è¯´å°±æ˜¯é¡µç å’Œæ¯é¡µæ˜¾ç¤ºæ•°é‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å‰é¡µé€šè¿‡ HTTP è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•° page çš„å€¼åˆ¤æ–­ã€‚å½“ç„¶ï¼Œè¯¥å€¼ç”± Laravel è‡ªåŠ¨æ£€æµ‹ï¼Œç„¶åè‡ªåŠ¨æ’å…¥åˆ†é¡µå™¨ç”Ÿæˆçš„é“¾æ¥ä¸­ã€‚<br><a id="more"></a><br>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•åœ¨æŸ¥è¯¢ä¸­è°ƒç”¨ paginate æ–¹æ³•ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä¼ é€’ç»™ paginate çš„å”¯ä¸€å‚æ•°å°±æ˜¯ä½ æ¯é¡µæƒ³è¦æ˜¾ç¤ºçš„æ•°ç›®ï¼Œè¿™é‡Œæˆ‘ä»¬æŒ‡å®šæ¯é¡µæ˜¾ç¤º 15 ä¸ªï¼š</p></blockquote><pre class=" language-lang-php"><code class="language-lang-php">namespace App\Http\Controllers;use Illuminate\Support\Facades\DB;use App\Http\Controllers\Controller;class UserController extends Controller{    /**     * æ˜¾ç¤ºåº”ç”¨ä¸­çš„æ‰€æœ‰ç”¨æˆ·     *     * @return Response     */    public function index()    {        $users = DB::table('users')->paginate(15);        return view('user.index', ['users' => $users]);    }}</code></pre><blockquote><p>æ³¨ï¼šç›®å‰ï¼Œä½¿ç”¨ groupBy çš„åˆ†é¡µæ“ä½œä¸èƒ½è¢« Laravel æœ‰æ•ˆæ‰§è¡Œï¼Œå¦‚æœä½ éœ€è¦åœ¨åˆ†é¡µç»“æœä¸­ä½¿ç”¨ groupByï¼Œæ¨èä½ æ‰‹åŠ¨æŸ¥è¯¢æ•°æ®åº“ç„¶ååˆ›å»ºåˆ†é¡µå™¨ã€‚</p></blockquote><h3 id="ç®€å•åˆ†é¡µ"><a href="#ç®€å•åˆ†é¡µ" class="headerlink" title="ç®€å•åˆ†é¡µ"></a>ç®€å•åˆ†é¡µ</h3><p>å¦‚æœä½ åªéœ€è¦åœ¨åˆ†é¡µè§†å›¾ä¸­ç®€å•çš„æ˜¾ç¤ºâ€œä¸‹ä¸€é¡µâ€å’Œâ€œä¸Šä¸€é¡µâ€é“¾æ¥ï¼Œå¯ä»¥ä½¿ç”¨ simplePaginate æ–¹æ³•æ¥æ‰§è¡Œä¸€ä¸ªæ›´åŠ é«˜æ•ˆçš„æŸ¥è¯¢ã€‚åœ¨æ¸²æŸ“åŒ…å«å¤§æ•°æ®é›†çš„è§†å›¾ä¸”ä¸éœ€è¦æ˜¾ç¤ºæ¯ä¸ªé¡µç æ—¶è¿™ä¸€åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼š</p><pre><code>$users = DB::table('users')-&gt;simplePaginate(15);</code></pre><h3 id="æ˜¾ç¤ºåˆ†é¡µç»“æœ"><a href="#æ˜¾ç¤ºåˆ†é¡µç»“æœ" class="headerlink" title="æ˜¾ç¤ºåˆ†é¡µç»“æœ"></a>æ˜¾ç¤ºåˆ†é¡µç»“æœ</h3><blockquote><p>å½“è°ƒç”¨ paginate æ–¹æ³•æ—¶ï¼Œä½ å°†è·å–Illuminate\Pagination\LengthAwarePaginator å®ä¾‹ï¼Œè€Œè°ƒç”¨æ–¹æ³•simplePaginate æ—¶ï¼Œå°†ä¼šè·å– Illuminate\Pagination\Paginator å®ä¾‹ã€‚è¿™äº›å¯¹è±¡æä¾›ç›¸å…³æ–¹æ³•æè¿°è¿™äº›ç»“æœé›†ï¼Œé™¤äº†è¿™äº›è¾…åŠ©å‡½æ•°å¤–ï¼Œåˆ†é¡µå™¨å®ä¾‹æœ¬èº«å°±æ˜¯è¿­ä»£å™¨ï¼Œå¯ä»¥åƒæ•°ç»„ä¸€æ ·å¯¹å…¶è¿›è¡Œå¾ªç¯è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œè·å–åˆ°ç»“æœåï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ Blade æ˜¾ç¤ºè¿™äº›ç»“æœå¹¶æ¸²æŸ“é¡µé¢é“¾æ¥ï¼š</p></blockquote><pre class=" language-lang-php"><code class="language-lang-php"><div class="container">    @foreach ($users as $user)        {{ $user->name }}    @endforeach</div>{{ $users->links() }}</code></pre><blockquote><p>links æ–¹æ³•å°†ä¼šå°†ç»“æœé›†ä¸­çš„å…¶å®ƒé¡µé¢é“¾æ¥æ¸²æŸ“å‡ºæ¥ã€‚æ¯ä¸ªé“¾æ¥å·²ç»åŒ…å«äº† page æŸ¥è¯¢å­—ç¬¦ä¸²å˜é‡ã€‚è®°ä½ï¼Œrender æ–¹æ³•ç”Ÿæˆçš„ HTML å…¼å®¹ Bootstrap CSS æ¡†æ¶ã€‚</p></blockquote><h3 id="å¸¦æ¡ä»¶çš„åˆ†é¡µ"><a href="#å¸¦æ¡ä»¶çš„åˆ†é¡µ" class="headerlink" title="å¸¦æ¡ä»¶çš„åˆ†é¡µ"></a>å¸¦æ¡ä»¶çš„åˆ†é¡µ</h3><pre class=" language-lang-php"><code class="language-lang-php"> public function index(){    $type = $this->request->get('type',1);    $users = DB::table('users')->where(function ($query) use ($type) {        if($type) {             $query->where('type', $type);        }    })->paginate(15);    return view('user.index', ['users' => $users]);}</code></pre><pre class=" language-lang-php"><code class="language-lang-php"><div class="container">    @foreach ($users as $user)        {{ $user->name }}    @endforeach</div>{!! $list->appends(['type'=>$type])->links() !!}</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macé‡å¯php-fpm</title>
      <link href="2020/02/17/php/mac%E9%87%8D%E5%90%AFphp-fpm/"/>
      <url>2020/02/17/php/mac%E9%87%8D%E5%90%AFphp-fpm/</url>
      
        <content type="html"><![CDATA[<h3 id="æŸ¥çœ‹php-fpmç«¯å£æ˜¯å¦åœ¨è¢«php-fpmä½¿ç”¨"><a href="#æŸ¥çœ‹php-fpmç«¯å£æ˜¯å¦åœ¨è¢«php-fpmä½¿ç”¨" class="headerlink" title="æŸ¥çœ‹php-fpmç«¯å£æ˜¯å¦åœ¨è¢«php-fpmä½¿ç”¨"></a>æŸ¥çœ‹php-fpmç«¯å£æ˜¯å¦åœ¨è¢«php-fpmä½¿ç”¨</h3><pre><code>sudo lsof -i:9000</code></pre><p><img src="https://img-blog.csdnimg.cn/2020021710023249.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="ä¸€èˆ¬ä¿®æ”¹-php-ini-æ–‡ä»¶åç»å¸¸éœ€è¦é‡å¯php-fpm"><a href="#ä¸€èˆ¬ä¿®æ”¹-php-ini-æ–‡ä»¶åç»å¸¸éœ€è¦é‡å¯php-fpm" class="headerlink" title="ä¸€èˆ¬ä¿®æ”¹ php.ini æ–‡ä»¶åç»å¸¸éœ€è¦é‡å¯php-fpm"></a>ä¸€èˆ¬ä¿®æ”¹ php.ini æ–‡ä»¶åç»å¸¸éœ€è¦é‡å¯php-fpm</h3><pre><code>sudo  killall  php-fpm   // å…³é—­</code></pre><h3 id="å†è¾“å…¥-sudo-lsof-i-9000-å°±ä¼šå‘ç°php-fpmæ²¡æœ‰æ‰“å°å¯¹åº”ç«¯å£"><a href="#å†è¾“å…¥-sudo-lsof-i-9000-å°±ä¼šå‘ç°php-fpmæ²¡æœ‰æ‰“å°å¯¹åº”ç«¯å£" class="headerlink" title="å†è¾“å…¥ sudo lsof -i:9000 å°±ä¼šå‘ç°php-fpmæ²¡æœ‰æ‰“å°å¯¹åº”ç«¯å£"></a>å†è¾“å…¥ sudo lsof -i:9000 å°±ä¼šå‘ç°php-fpmæ²¡æœ‰æ‰“å°å¯¹åº”ç«¯å£</h3><pre><code>sudo  php-fpm    // å¯åŠ¨</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHPæ¥å…¥é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜</title>
      <link href="2020/01/02/php/PHP%E6%8E%A5%E5%85%A5%E9%93%B6%E8%81%94%E5%9C%A8%E7%BA%BF%E7%BD%91%E5%85%B3%E6%94%AF%E4%BB%98/"/>
      <url>2020/01/02/php/PHP%E6%8E%A5%E5%85%A5%E9%93%B6%E8%81%94%E5%9C%A8%E7%BA%BF%E7%BD%91%E5%85%B3%E6%94%AF%E4%BB%98/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç½‘ç«™æ”¯ä»˜ï¼šä¸€èˆ¬æ¥å…¥å¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®æ”¯ä»˜ã€é“¶è”æ”¯ä»˜ï¼Œæœ¬æ–‡ä»‹ç»çš„æ˜¯å¦‚ä½•æ¥å…¥ä¸­å›½é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜</p></blockquote><h2 id="é“¶è”ä»‹ç»"><a href="#é“¶è”ä»‹ç»" class="headerlink" title="é“¶è”ä»‹ç»"></a>é“¶è”ä»‹ç»</h2><blockquote><p><a href="https://open.unionpay.com/tjweb/acproduct/list?apiservId=448">é“¶è”åœ¨çº¿æ”¯ä»˜ç½‘å…³</a>æ˜¯ä¸­å›½é“¶è”è”åˆå„å•†ä¸šé“¶è¡Œä¸ºæŒå¡äººæä¾›çš„é›†æˆåŒ–ã€ç»¼åˆæ€§äº’è”ç½‘æ”¯ä»˜å·¥å…·ï¼Œä¸»è¦æ”¯æŒè¾“å…¥å¡å·ä»˜æ¬¾ã€ç”¨æˆ·ç™»å½•æ”¯ä»˜ã€ç½‘é“¶æ”¯ä»˜ã€è¿·ä½ ä»˜ï¼ˆICå¡æ”¯ä»˜ï¼‰ç­‰å¤šç§æ”¯ä»˜æ–¹å¼ï¼Œä¸ºæŒå¡äººæä¾›å¢ƒå†…å¤–ç½‘ä¸Šè´­ç‰©ã€æ°´ç”µç…¤ç¼´è´¹ã€å•†æ—…é¢„è®¢ç­‰æ”¯ä»˜æœåŠ¡ã€‚<br><a id="more"></a></p><p>ç½‘ç«™æ”¯ä»˜ï¼šä¸€èˆ¬æ¥å…¥å¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®æ”¯ä»˜ã€é“¶è”æ”¯ä»˜ï¼Œæœ¬æ–‡ä»‹ç»çš„æ˜¯å¦‚ä½•æ¥å…¥ä¸­å›½é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜</p></blockquote><h2 id="é“¶è”ä»‹ç»-1"><a href="#é“¶è”ä»‹ç»-1" class="headerlink" title="é“¶è”ä»‹ç»"></a>é“¶è”ä»‹ç»</h2><blockquote><p><a href="https://open.unionpay.com/tjweb/acproduct/list?apiservId=448">é“¶è”åœ¨çº¿æ”¯ä»˜ç½‘å…³</a>æ˜¯ä¸­å›½é“¶è”è”åˆå„å•†ä¸šé“¶è¡Œä¸ºæŒå¡äººæä¾›çš„é›†æˆåŒ–ã€ç»¼åˆæ€§äº’è”ç½‘æ”¯ä»˜å·¥å…·ï¼Œä¸»è¦æ”¯æŒè¾“å…¥å¡å·ä»˜æ¬¾ã€ç”¨æˆ·ç™»å½•æ”¯ä»˜ã€ç½‘é“¶æ”¯ä»˜ã€è¿·ä½ ä»˜ï¼ˆICå¡æ”¯ä»˜ï¼‰ç­‰å¤šç§æ”¯ä»˜æ–¹å¼ï¼Œä¸ºæŒå¡äººæä¾›å¢ƒå†…å¤–ç½‘ä¸Šè´­ç‰©ã€æ°´ç”µç…¤ç¼´è´¹ã€å•†æ—…é¢„è®¢ç­‰æ”¯ä»˜æœåŠ¡ã€‚<br><!-- more --><br>å…·ä½“æµç¨‹å¦‚ä¸‹å›¾ï¼š</p></blockquote><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMi85LzE2ZWU5ZjJjYjY2MmZkYjQ?x-oss-process=image/format,png" alt=""></p><h3 id="SDK-amp-Demoä¸‹è½½"><a href="#SDK-amp-Demoä¸‹è½½" class="headerlink" title="SDK&amp;Demoä¸‹è½½"></a>SDK&amp;Demoä¸‹è½½</h3><p><a href="https://open.unionpay.com/tjweb/acproduct/list?apiSvcId=448&amp;index=5">å¼€æ”¾å¹³å°æœåŠ¡ç«¯SDK</a><br>ä¸‹å›¾ä¸ºä¸‹è½½å¥½çš„sdk</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMi85LzE2ZWU5ZjQ3ZDU3MTUxODc?x-oss-process=image/format,png" alt=""></p><blockquote><p>ps:å®˜æ–¹ç»™çš„demoéƒ½æ˜¯phpæ–‡ä»¶ä¸­å†™htmlï¼Œæ²¡æœ‰åˆ†ç¦»ï¼Œç½‘ä¸Šæ‰¾äº†å„ç§èµ„æ–™ï¼Œæ²¡æœ‰æ‰¾åˆ°åˆ†ç¦»è¿‡åçš„demoï¼Œæ‰€ä»¥è‡ªå·±æ€»ç»“äº†demoï¼Œå¸Œæœ›æˆ‘çš„æ–‡ç« å¯ä»¥å¸®åŠ©åˆ°å¤§å®¶å¿«é€Ÿæ¥å…¥é“¶è”</p></blockquote><h3 id="å¼‚å¸¸åº”ç­”è¯´æ˜"><a href="#å¼‚å¸¸åº”ç­”è¯´æ˜" class="headerlink" title="å¼‚å¸¸åº”ç­”è¯´æ˜"></a>å¼‚å¸¸åº”ç­”è¯´æ˜</h3><ol><li>ä¸è¿”å›æŠ¥æ–‡ä½“çš„æƒ…å†µï¼š<br>ç‰ˆæœ¬å·ï¼Œäº¤æ˜“ç±»å‹ã€å­ç±»ï¼Œç­¾åæ–¹æ³•ï¼Œç­¾åå€¼ç­‰å…³é”®åŸŸæœªä¸Šé€ï¼Œè¿”å›â€œInvalid request.â€ï¼› äº¤æ˜“ç±»å‹å’Œè¯·æ±‚åœ°å€æ ¡éªŒæœ‰è¯¯ï¼Œè¿”å›â€œInvalid request URI.â€</li><li>è¿”å›å…¨éƒ¨çš„è¯·æ±‚æŠ¥æ–‡ï¼Œé™„åŠ åº”ç­”ç å’Œåº”ç­”æè¿°ï¼ˆåŒ…æ‹¬çš„åº”ç­”ç æœ‰ï¼š01ã€02ã€03ã€10ã€11ã€32ï¼‰ï¼š</li></ol><p>éªŒè¯ç­¾åå¤±è´¥ï¼›<br>æŠ¥æ–‡æ ¼å¼é”™ï¼ˆåŒ…å«ï¼Œå¿…å¡«åŸŸç¼ºå¤±ï¼Œä¸Šé€é“¶è”æŠ¥æ–‡æœªå®šä¹‰çš„åŸŸï¼ŒæŠ¥æ–‡åŸŸçš„æ ¼å¼éæ³•ï¼Œäº¤æ˜“æ—¶é—´è¶…å‡ºèŒƒå›´ï¼‰ï¼›<br>ç­¾åå¤±è´¥ï¼›<br>è¶…æ—¶ç­‰å…¶ä»–ç³»ç»Ÿå¼‚å¸¸</p><h2 id="å‹æƒ…æç¤º"><a href="#å‹æƒ…æç¤º" class="headerlink" title="å‹æƒ…æç¤º"></a>å‹æƒ…æç¤º</h2><blockquote><p>ä¸­é—´å¦‚é‡åˆ°é—®é¢˜ï¼šè¯·ç™»å½•å•†å®¶åå°è¿›è¡Œäººå·¥å’¨è¯¢ï¼Œä»€ä¹ˆqqå®¢æœå·²åœç”¨ã€‚<br>åŸºæœ¬é”™è¯¯çš„è¯æ–‡æ¡£éƒ½ä¼šæœ‰ä»‹ç»ï¼Œå¦‚æœä¸çŸ¥é“debugåˆ°äº†å“ªä¸€æ­¥ï¼Œå®¢æœä¼šå‘Šè¯‰ä½ è°ƒç”¨æ¥å£æ—¶è¿”å›çš„é”™è¯¯</p></blockquote><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMi85LzE2ZWVhMGZmNmVkNzIwODU?x-oss-process=image/format,png" alt=""><br>ç™»å½•æ­¥éª¤ï¼šå¼€æ”¾å¹³å°åœ¨çº¿å’¨è¯¢ï¼š<a href="https://open.unionpay.com/tjweb/index">https://open.unionpay.com/tjweb/index</a> ç”¨å·²æœ‰è´¦å·ç™»å½•æˆ–è€…æ³¨å†Œæ–°ç”¨æˆ·ç™»å½•ï¼Œé€‰æ‹©â€œæ™®é€šç”¨æˆ·â€èº«ä»½ç™»å½•ï¼Œç™»å½•åé¡µé¢ç‚¹å‡»â€œå‰å¾€å•†æˆ·æµ‹è¯•ä¸­å¿ƒâ€ï¼Œç•Œé¢ä¸Šç‚¹å‡»å®¢æœå›¾æ ‡åï¼Œç‚¹å‡»â€œç¡®å®šç™»å½•â€ï¼Œå†ç‚¹å‡»â€œå•†æˆ·å’¨è¯¢â€è¿›å…¥å’¨è¯¢ã€‚<br>ä¸šåŠ¡é—®é¢˜ä¸ç”Ÿäº§é—®é¢˜è¯·æ‹¨æ‰“4007795516ç”µè¯å’¨è¯¢ã€‚</p><h2 id="é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜æ¥å£åœ°å€"><a href="#é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜æ¥å£åœ°å€" class="headerlink" title="é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜æ¥å£åœ°å€"></a>é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜æ¥å£åœ°å€</h2><p><a href="https://open.unionpay.com/tjweb/api/dictionary?apiSvcId=448">https://open.unionpay.com/tjweb/api/dictionary?apiSvcId=448</a></p><h2 id="ä¿®æ”¹å…¬å…±å‚æ•°é…ç½®"><a href="#ä¿®æ”¹å…¬å…±å‚æ•°é…ç½®" class="headerlink" title="ä¿®æ”¹å…¬å…±å‚æ•°é…ç½®"></a>ä¿®æ”¹å…¬å…±å‚æ•°é…ç½®</h2><blockquote><p>åˆ¶ä½œç­¾åéœ€è¦é…ç½®å‚æ•°ï¼Œç”±äºsdkä¸­ç”¨åˆ°çš„å¤§éƒ¨åˆ†æ˜¯inié…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘å°†éƒ¨åˆ†é…ç½®ä¿¡æ¯æ”¾åˆ°äº†phpçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹äº†åŸæœ‰çš„é…ç½®æ–‡ä»¶</p></blockquote><p>ä¸‹å›¾è¦<strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼šæ¶ˆè´¹å’ŒæŸ¥è¯¢äº¤æ˜“ï¼Œä¸‰ä¸ªå€¼å¿…é¡»ç»Ÿä¸€ï¼Œåˆ™é€€æ¬¾ä¸éœ€è¦<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMi8yNi8xNmY0MTZhNTRiZDQ3MzE1?x-oss-process=image/format,png" alt=""></p><h3 id="sdk-SDKConfig-phpæ–‡ä»¶"><a href="#sdk-SDKConfig-phpæ–‡ä»¶" class="headerlink" title="/sdk/SDKConfig.phpæ–‡ä»¶"></a>/sdk/SDKConfig.phpæ–‡ä»¶</h3><pre class=" language-lang-php"><code class="language-lang-php">// __constructæ–¹æ³•ä¸­çš„é…ç½®æ–‡ä»¶æ·»åŠ $this->env = 'test';$this->signCertPwd = '000000';//å¦‚æœæƒ³æŠŠacp_sdk.iniæŒªåˆ°å…¶ä»–è·¯å¾„çš„è¯ï¼Œè¯·ä¿®æ”¹ä¸‹é¢è¿™è¡ŒæŒ‡å®šç»å¯¹è·¯å¾„ã€‚$configFilePath = dirname(__FILE__) . "/acp_sdk_test.ini";if(env('APP_ENV') == 'production'){    $this->env = 'prod';    $this->signCertPwd = env('UNION_SIGN_CERT_PWD','000000');    $configFilePath = dirname(__FILE__) . "/acp_sdk.ini";}// __constructæ–¹æ³•ä¸­çš„é…ç½®æ–‡ä»¶ä¿®æ”¹/* * é‡æ–°å®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„   ---- è‡ªå®šä¹‰    $this->frontUrl =  array_key_exists("acpsdk.frontUrl", $sdk_array)?$sdk_array["acpsdk.frontUrl"]: null;    $this->backUrl =  array_key_exists("acpsdk.backUrl", $sdk_array)?$sdk_array["acpsdk.backUrl"]: null;    $this->signCertPath = array_key_exists("acpsdk.signCert.path", $sdk_array)?$sdk_array["acpsdk.signCert.path"]: null;    $this->encryptCertPath = array_key_exists("acpsdk.encryptCert.path", $sdk_array)? $sdk_array["acpsdk.encryptCert.path"]: null;    $this->rootCertPath = array_key_exists("acpsdk.rootCert.path", $sdk_array)? $sdk_array["acpsdk.rootCert.path"]: null;    $this->middleCertPath =  array_key_exists("acpsdk.middleCert.path", $sdk_array)?$sdk_array["acpsdk.middleCert.path"]: null;    $this->logFilePath =  array_key_exists("acpsdk.log.file.path", $sdk_array)?$sdk_array["acpsdk.log.file.path"]: null;    $this->logLevel =  array_key_exists("acpsdk.log.level", $sdk_array)?$sdk_array["acpsdk.log.level"]: null;    $this->signCertPwd = array_key_exists("acpsdk.signCert.pwd", $sdk_array)?$sdk_array["acpsdk.signCert.pwd"]: null;*/// ç”±äºæ˜¯laravelæ¡†æ¶ï¼Œæ‰€ä»¥æ”¾åˆ°äº†envä¸­ï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°configä¸­ï¼Œå…¶å®ƒæ¡†æ¶æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­å³å¯$this->backUrl =  env('HOST_FAST').env('UNION_PAY_BACKURL','');$this->frontUrl =  env('HOST_EDU').env('UNION_PAY_FRONTURL','/');$this->signCertPath = dirname(dirname(dirname(__FILE__))).'/union_pay/assets/'.$this->env.'/acp_sign.pfx';$this->encryptCertPath = dirname(dirname(dirname(__FILE__))).'/union_pay/assets/'.$this->env.'/acp_enc.cer';$this->middleCertPath = dirname(dirname(dirname(__FILE__))).'/union_pay/assets/'.$this->env.'/acp_middle.cer';$this->rootCertPath = dirname(dirname(dirname(__FILE__))).'/union_pay/assets/'.$this->env.'/acp_root.cer';$this->logFilePath = storage_path(env("UNION_PAY_LOGFILE_PATH"));$this->logLevel = env("UNION_PAY_LOG_LEVEL",null);</code></pre><h3 id="sdk-acp-service-phpæ–‡ä»¶"><a href="#sdk-acp-service-phpæ–‡ä»¶" class="headerlink" title="/sdk/acp_service.phpæ–‡ä»¶"></a>/sdk/acp_service.phpæ–‡ä»¶</h3><p>createAutoFormHtmlæ–¹æ³• ç›´æ¥è¿”å›å‚æ•°</p><pre class=" language-lang-php"><code class="language-lang-php">static function createAutoFormHtml($params, $reqUrl) {    return $params;}</code></pre><h3 id="é…ç½®ä¿¡æ¯"><a href="#é…ç½®ä¿¡æ¯" class="headerlink" title="é…ç½®ä¿¡æ¯"></a>é…ç½®ä¿¡æ¯</h3><p>.envæ–‡ä»¶</p><pre class=" language-lang-php"><code class="language-lang-php">UNION_PAY_TEST_MERID=æµ‹è¯•å•†æˆ·å·UNION_PAY_MERID=çº¿ä¸Šå•†æˆ·å·UNION_SIGN_CERT_PWD=çº¿ä¸Šå•†æˆ·å·å¯†ç UNION_PAY_BACKURL=UNION_PAY_FRONTURL=UNION_PAY_LOGFILE_PATH=logs/union_payUNION_PAY_LOG_LEVEL=DEBUG</code></pre><h3 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h3><ol><li>consumeæ–¹æ³•ä¸ºç»™å‰ç«¯è¿”å›çš„æ‰€æœ‰é…ç½®ä¿¡æ¯</li><li>union_validateæ˜¯å»éªŒè¯æ”¯ä»˜å‚æ•°æ˜¯å¦æ­£ç¡®ï¼ˆåå°é€šçŸ¥åœ°å€ï¼‰</li><li>queryTransäº¤æ˜“çŠ¶æ€æŸ¥è¯¢</li><li>handle_resultå¤„ç†é“¶è”çš„å›è°ƒ</li><li>union_refundé€€æ¬¾</li></ol><h3 id="å®æˆ˜demoåœ°å€"><a href="#å®æˆ˜demoåœ°å€" class="headerlink" title="å®æˆ˜demoåœ°å€"></a>å®æˆ˜demoåœ°å€</h3><p><a href="https://github.com/WXiangQian/laravel-api">https://github.com/WXiangQian/laravel-api</a></p><h2 id="æ¥å…¥æ¶ˆè´¹æ¥å£"><a href="#æ¥å…¥æ¶ˆè´¹æ¥å£" class="headerlink" title="æ¥å…¥æ¶ˆè´¹æ¥å£"></a>æ¥å…¥æ¶ˆè´¹æ¥å£</h2><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App\Http\Controllers\Sys;use App\Http\Tools\Tools;use com\unionpay\acp\sdk\AcpService;use com\unionpay\acp\sdk\SDKConfig;use Illuminate\Http\Request;class UnionPayController extends BasicController{    protected $merId;    public function __construct(Request $request)    {        header ( 'Content-type:text/html;charset=utf-8' );        ini_set('date.timezone','Asia/Shanghai');        include_once dirname(dirname(dirname(__FILE__))) . '/Tools/union_pay/sdk/acp_service.php';        parent::__construct($request);        $this->merId = env('UNION_PAY_TEST_MERID'); // æµ‹è¯•å·        if(env('APP_ENV') == 'production'){            $this->merId = env('UNION_PAY_MERID');;        }    }    /**     * é“¶è”æ¶ˆè´¹çš„ä½¿ç”¨å‚æ•°     * @return \Illuminate\Http\JsonResponse     * User: https://github.com/WXiangQian     */    public function consume()    {        /**         * é‡è¦ï¼šè”è°ƒæµ‹è¯•æ—¶è¯·ä»”ç»†é˜…è¯»æ³¨é‡Šï¼         *         * äº§å“ï¼šè·³è½¬ç½‘å…³æ”¯ä»˜äº§å“<br>         * äº¤æ˜“ï¼šæ¶ˆè´¹ï¼šå‰å°è·³è½¬ï¼Œæœ‰å‰å°é€šçŸ¥åº”ç­”å’Œåå°é€šçŸ¥åº”ç­”<br>         * æ—¥æœŸï¼š 2015-09<br>         * ç‰ˆæƒï¼š ä¸­å›½é“¶è”<br>         * è¯´æ˜ï¼šä»¥ä¸‹ä»£ç åªæ˜¯ä¸ºäº†æ–¹ä¾¿å•†æˆ·æµ‹è¯•è€Œæä¾›çš„æ ·ä¾‹ä»£ç ï¼Œå•†æˆ·å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦ï¼ŒæŒ‰ç…§æŠ€æœ¯æ–‡æ¡£ç¼–å†™ã€‚è¯¥ä»£ç ä»…ä¾›å‚è€ƒï¼Œä¸æä¾›ç¼–ç æ€§èƒ½è§„èŒƒæ€§ç­‰æ–¹é¢çš„ä¿éšœ<br>         * æç¤ºï¼šè¯¥æ¥å£å‚è€ƒæ–‡æ¡£ä½ç½®ï¼šopen.unionpay.comå¸®åŠ©ä¸­å¿ƒ ä¸‹è½½  äº§å“æ¥å£è§„èŒƒ  ã€Šç½‘å…³æ”¯ä»˜äº§å“æ¥å£è§„èŒƒã€‹ï¼Œ<br>         *              ã€Šå¹³å°æ¥å…¥æ¥å£è§„èŒƒ-ç¬¬5éƒ¨åˆ†-é™„å½•ã€‹ï¼ˆå†…åŒ…å«åº”ç­”ç æ¥å£è§„èŒƒï¼Œå…¨æ¸ é“å¹³å°é“¶è¡Œåç§°-ç®€ç å¯¹ç…§è¡¨)<br>         *              ã€Šå…¨æ¸ é“å¹³å°æ¥å…¥æ¥å£è§„èŒƒ ç¬¬3éƒ¨åˆ† æ–‡ä»¶æ¥å£ã€‹ï¼ˆå¯¹è´¦æ–‡ä»¶æ ¼å¼è¯´æ˜ï¼‰<br>         * æµ‹è¯•è¿‡ç¨‹ä¸­çš„å¦‚æœé‡åˆ°ç–‘é—®æˆ–é—®é¢˜æ‚¨å¯ä»¥ï¼š1ï¼‰ä¼˜å…ˆåœ¨openå¹³å°ä¸­æŸ¥æ‰¾ç­”æ¡ˆï¼š         *                                     è°ƒè¯•è¿‡ç¨‹ä¸­çš„é—®é¢˜æˆ–å…¶ä»–é—®é¢˜è¯·åœ¨ https://open.unionpay.com/ajweb/help/faq/list å¸®åŠ©ä¸­å¿ƒ FAQ æœç´¢è§£å†³æ–¹æ¡ˆ         *                             æµ‹è¯•è¿‡ç¨‹ä¸­äº§ç”Ÿçš„7ä½åº”ç­”ç é—®é¢˜ç–‘é—®è¯·åœ¨https://open.unionpay.com/ajweb/help/respCode/respCodeList è¾“å…¥åº”ç­”ç æœç´¢è§£å†³æ–¹æ¡ˆ         *                          2ï¼‰ å’¨è¯¢åœ¨çº¿äººå·¥æ”¯æŒï¼š open.unionpay.comæ³¨å†Œä¸€ä¸ªç”¨æˆ·å¹¶ç™»é™†åœ¨å³ä¸Šè§’ç‚¹å‡»â€œåœ¨çº¿å®¢æœâ€ï¼Œå’¨è¯¢äººå·¥QQæµ‹è¯•æ”¯æŒã€‚         * äº¤æ˜“è¯´æ˜:1ï¼‰ä»¥åå°é€šçŸ¥æˆ–äº¤æ˜“çŠ¶æ€æŸ¥è¯¢äº¤æ˜“ç¡®å®šäº¤æ˜“æˆåŠŸ,å‰å°é€šçŸ¥ä¸èƒ½ä½œä¸ºåˆ¤æ–­æˆåŠŸçš„æ ‡å‡†.         *       2ï¼‰äº¤æ˜“çŠ¶æ€æŸ¥è¯¢äº¤æ˜“ï¼ˆForm_6_5_Queryï¼‰å»ºè®®è°ƒç”¨æœºåˆ¶ï¼šå‰å°ç±»äº¤æ˜“å»ºè®®é—´éš”ï¼ˆ5åˆ†ã€10åˆ†ã€30åˆ†ã€60åˆ†ã€120åˆ†ï¼‰å‘èµ·äº¤æ˜“æŸ¥è¯¢ï¼Œå¦‚æœæŸ¥è¯¢åˆ°ç»“æœæˆåŠŸï¼Œåˆ™ä¸ç”¨å†æŸ¥è¯¢ã€‚ï¼ˆå¤±è´¥ï¼Œå¤„ç†ä¸­ï¼ŒæŸ¥è¯¢ä¸åˆ°è®¢å•å‡å¯èƒ½ä¸ºä¸­é—´çŠ¶æ€ï¼‰ã€‚ä¹Ÿå¯ä»¥å»ºè®®å•†æˆ·ä½¿ç”¨payTimeoutï¼ˆæ”¯ä»˜è¶…æ—¶æ—¶é—´ï¼‰ï¼Œè¿‡äº†è¿™ä¸ªæ—¶é—´ç‚¹æŸ¥è¯¢ï¼Œå¾—åˆ°çš„ç»“æœä¸ºæœ€ç»ˆç»“æœã€‚         */         $channelType = $this->request->input('channelType','07');        $merId = $this->merId;        $riskRateInfo = $this->request->input('riskRateInfo','');        $orderId = $this->request->input('orderId',0);        $txnAmt = $this->request->input('txnAmt',1);        $txnAmt = $txnAmt * 100;        $txnTime = $this->request->input('txnTime',0);        if ($txnTime == 0) {            $txnTime = date('YmdHis');        }        // åœ¨ç”Ÿäº§ç¯å¢ƒæµ‹è¯•çš„æ—¶å€™ï¼Œäº¤æ˜“é‡‘é¢è¯·å‹¿å°äº1è§’ã€‚        if(env('APP_ENV') == 'production' && $txnAmt <= 10){            return $this->response->tag('PARAM_ERROR')->response();        }        // todo æŸ¥è¯¢æ•°æ®åº“ä¸­çš„å®é™…ä»˜æ¬¾é‡‘é¢        $order_txnAmt = 0;        // æ²¡æœ‰æŸ¥åˆ°åˆ™å®šé‡‘å¼‚å¸¸        if (!isset($order_txnAmt)) {            return $this->response->tag('ORDER_NOT_EXIST')->response();        }        $order_txnAmt = $order_txnAmt * 100;        // ä¸ä¸€æ ·åˆ™è®¤ä¸ºæ¶æ„ä¿®æ”¹é‡‘é¢ è¿”å›é”™è¯¯        if ($txnAmt != $order_txnAmt) {            return $this->response->tag('ORDER_EXCEPTION')->response();        }        $params = array(            //ä»¥ä¸‹ä¿¡æ¯éç‰¹æ®Šæƒ…å†µä¸éœ€è¦æ”¹åŠ¨            'version' => SDKConfig::getSDKConfig()->version,                 //ç‰ˆæœ¬å·            'encoding' => 'utf-8',                  //ç¼–ç æ–¹å¼            'txnType' => '01',                      //äº¤æ˜“ç±»å‹            'txnSubType' => '01',                  //äº¤æ˜“å­ç±»            'bizType' => '000201',                  //ä¸šåŠ¡ç±»å‹            'frontUrl' =>  SDKConfig::getSDKConfig()->frontUrl.'?order_id='.$orderId,  //å‰å°é€šçŸ¥åœ°å€            'backUrl' => SDKConfig::getSDKConfig()->backUrl.$txnTime,      //åå°é€šçŸ¥åœ°å€            'signMethod' => SDKConfig::getSDKConfig()->signMethod,                  //ç­¾åæ–¹æ³•            'channelType' => $channelType,                  //æ¸ é“ç±»å‹ï¼Œ07-PCï¼Œ08-æ‰‹æœº            'accessType' => '0',                  //æ¥å…¥ç±»å‹            'currencyCode' => '156',              //äº¤æ˜“å¸ç§ï¼Œå¢ƒå†…å•†æˆ·å›ºå®š156            //TODO ä»¥ä¸‹ä¿¡æ¯éœ€è¦å¡«å†™            'merId' => $merId,        //å•†æˆ·ä»£ç ï¼Œè¯·æ”¹è‡ªå·±çš„æµ‹è¯•å•†æˆ·å·ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°            'orderId' => $orderId,    //å•†æˆ·è®¢å•å·ï¼Œ8-32ä½æ•°å­—å­—æ¯ï¼Œä¸èƒ½å«â€œ-â€æˆ–â€œ_â€ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°ï¼Œå¯ä»¥è‡ªè¡Œå®šåˆ¶è§„åˆ™            'txnTime' => $txnTime,    //è®¢å•å‘é€æ—¶é—´ï¼Œæ ¼å¼ä¸ºYYYYMMDDhhmmssï¼Œå–åŒ—äº¬æ—¶é—´ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°            'txnAmt' => $txnAmt,    //äº¤æ˜“é‡‘é¢ï¼Œå•ä½åˆ†ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°            // è®¢å•è¶…æ—¶æ—¶é—´ã€‚            // è¶…è¿‡æ­¤æ—¶é—´åï¼Œé™¤ç½‘é“¶äº¤æ˜“å¤–ï¼Œå…¶ä»–äº¤æ˜“é“¶è”ç³»ç»Ÿä¼šæ‹’ç»å—ç†ï¼Œæç¤ºè¶…æ—¶ã€‚ è·³è½¬é“¶è¡Œç½‘é“¶äº¤æ˜“å¦‚æœè¶…æ—¶åäº¤æ˜“æˆåŠŸï¼Œä¼šè‡ªåŠ¨é€€æ¬¾ï¼Œå¤§çº¦5ä¸ªå·¥ä½œæ—¥é‡‘é¢è¿”è¿˜åˆ°æŒå¡äººè´¦æˆ·ã€‚            // æ­¤æ—¶é—´å»ºè®®å–æ”¯ä»˜æ—¶çš„åŒ—äº¬æ—¶é—´åŠ 15åˆ†é’Ÿã€‚            // è¶…è¿‡è¶…æ—¶æ—¶é—´è°ƒæŸ¥è¯¢æ¥å£åº”ç­”origRespCodeä¸æ˜¯A6æˆ–è€…00çš„å°±å¯ä»¥åˆ¤æ–­ä¸ºå¤±è´¥ã€‚            'payTimeout' => date('YmdHis', strtotime('+15 minutes')),            'riskRateInfo' =>'{commodityName='.$riskRateInfo.'}',            // è¯·æ±‚æ–¹ä¿ç•™åŸŸï¼Œ            // é€ä¼ å­—æ®µï¼ŒæŸ¥è¯¢ã€é€šçŸ¥ã€å¯¹è´¦æ–‡ä»¶ä¸­å‡ä¼šåŸæ ·å‡ºç°ï¼Œå¦‚æœ‰éœ€è¦è¯·å¯ç”¨å¹¶ä¿®æ”¹è‡ªå·±å¸Œæœ›é€ä¼ çš„æ•°æ®ã€‚            // å‡ºç°éƒ¨åˆ†ç‰¹æ®Šå­—ç¬¦æ—¶å¯èƒ½å½±å“è§£æï¼Œè¯·æŒ‰ä¸‹é¢å»ºè®®çš„æ–¹å¼å¡«å†™ï¼š            // 1. å¦‚æœèƒ½ç¡®å®šå†…å®¹ä¸ä¼šå‡ºç°&={}[]"'ç­‰ç¬¦å·æ—¶ï¼Œå¯ä»¥ç›´æ¥å¡«å†™æ•°æ®ï¼Œå»ºè®®çš„æ–¹æ³•å¦‚ä¸‹ã€‚            //    'reqReserved' =>'é€ä¼ ä¿¡æ¯1|é€ä¼ ä¿¡æ¯2|é€ä¼ ä¿¡æ¯3',            // 2. å†…å®¹å¯èƒ½å‡ºç°&={}[]"'ç¬¦å·æ—¶ï¼š            // 1) å¦‚æœéœ€è¦å¯¹è´¦æ–‡ä»¶é‡Œèƒ½æ˜¾ç¤ºï¼Œå¯å°†å­—ç¬¦æ›¿æ¢æˆå…¨è§’ï¼†ï¼ï½›ï½ã€ã€‘â€œâ€˜å­—ç¬¦ï¼ˆè‡ªå·±å†™ä»£ç ï¼Œæ­¤å¤„ä¸æ¼”ç¤ºï¼‰ï¼›            // 2) å¦‚æœå¯¹è´¦æ–‡ä»¶æ²¡æœ‰æ˜¾ç¤ºè¦æ±‚ï¼Œå¯åšä¸€ä¸‹base64ï¼ˆå¦‚ä¸‹ï¼‰ã€‚            //    æ³¨æ„æ§åˆ¶æ•°æ®é•¿åº¦ï¼Œå®é™…ä¼ è¾“çš„æ•°æ®é•¿åº¦ä¸èƒ½è¶…è¿‡1024ä½ã€‚            //    æŸ¥è¯¢ã€é€šçŸ¥ç­‰æ¥å£è§£ææ—¶ä½¿ç”¨base64_decodeè§£base64åå†å¯¹æ•°æ®åšåç»­è§£æã€‚            //    'reqReserved' => base64_encode('ä»»æ„æ ¼å¼çš„ä¿¡æ¯éƒ½å¯ä»¥'),            //TODO å…¶ä»–ç‰¹æ®Šç”¨æ³•è¯·æŸ¥çœ‹ special_use_purchase.php        );        AcpService::sign ( $params );        $uri = SDKConfig::getSDKConfig()->frontTransUrl;        $html_form = AcpService::createAutoFormHtml( $params, $uri );        $data['url'] = $uri;        foreach ($html_form as $key=>$value) {            $data['data'][] = ['name'=>$key,'value'=>$value];        }        return $this->response->data($data)->response();    }    /**     * éªŒè¯æ”¯ä»˜å‚æ•°æ˜¯å¦æ­£ç¡®     * @param $txnTime  è®¢å•å‘é€æ—¶é—´     * @return \Illuminate\Http\JsonResponse     * User: https://github.com/WXiangQian     */    public function union_validate($txnTime)    {        if (isset ( $_POST ['signature'] )) {            // éªŒç­¾å¤±è´¥            if (!AcpService::validate ($_POST)) {                return $this->response->tag('PARAM_ERROR')->response();            }            $orderId = $_POST ['orderId']; //å…¶ä»–å­—æ®µä¹Ÿå¯ç”¨ç±»ä¼¼æ–¹å¼è·å–            $respCode = $_POST ['respCode'];            //åˆ¤æ–­respCode=00ã€A6åï¼Œå¯¹æ¶‰åŠèµ„é‡‘ç±»çš„äº¤æ˜“ï¼Œè¯·å†å‘èµ·æŸ¥è¯¢æ¥å£æŸ¥è¯¢ï¼Œç¡®å®šäº¤æ˜“æˆåŠŸåæ›´æ–°æ•°æ®åº“ã€‚            if ($respCode == 00 || $respCode == 'A6') {                // todo å°†ä¸‹å•æ—¶é—´å­˜åˆ°redis  keyï¼šorder_id valueï¼štxnTime æŸ¥è¯¢äº¤æ˜“çš„æ—¶å€™éœ€è¦ä½¿ç”¨                // todo è°ƒç”¨apié¡¹ç›®çš„å›è°ƒåœ°å€                return $this->response->response();            } else {                return $this->response->tag('OPERATION_FAILED')->response();            }        }        return $this->response->tag('PARAM_LACK')->response();    }}</code></pre><h2 id="æ¥å…¥äº¤æ˜“çŠ¶æ€æŸ¥è¯¢æ¥å£"><a href="#æ¥å…¥äº¤æ˜“çŠ¶æ€æŸ¥è¯¢æ¥å£" class="headerlink" title="æ¥å…¥äº¤æ˜“çŠ¶æ€æŸ¥è¯¢æ¥å£"></a>æ¥å…¥äº¤æ˜“çŠ¶æ€æŸ¥è¯¢æ¥å£</h2><pre class=" language-lang-php"><code class="language-lang-php">/** * äº¤æ˜“çŠ¶æ€æŸ¥è¯¢ * @param $channelType * @param $merId * @param $orderId * @param $txnTime * @return mixed * @throws LogicException * User: https://github.com/WXiangQian */public function queryTrans($channelType,$merId,$orderId,$txnTime){    $params = array(        //ä»¥ä¸‹ä¿¡æ¯éç‰¹æ®Šæƒ…å†µä¸éœ€è¦æ”¹åŠ¨        'version' => SDKConfig::getSDKConfig()->version,          //ç‰ˆæœ¬å·        'encoding' => 'utf-8',          //ç¼–ç æ–¹å¼        'signMethod' => SDKConfig::getSDKConfig()->signMethod,          //ç­¾åæ–¹æ³•        'txnType' => '00',              //äº¤æ˜“ç±»å‹        'txnSubType' => '00',          //äº¤æ˜“å­ç±»        'bizType' => '000000',          //ä¸šåŠ¡ç±»å‹        'accessType' => '0',          //æ¥å…¥ç±»å‹        'channelType' => $channelType,          //æ¸ é“ç±»å‹        //TODO ä»¥ä¸‹ä¿¡æ¯éœ€è¦å¡«å†™        'orderId' => $orderId,    //è¯·ä¿®æ”¹è¢«æŸ¥è¯¢çš„äº¤æ˜“çš„è®¢å•å·ï¼Œ8-32ä½æ•°å­—å­—æ¯ï¼Œä¸èƒ½å«â€œ-â€æˆ–â€œ_â€ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°        'merId' => $merId,        //å•†æˆ·ä»£ç ï¼Œè¯·æ”¹è‡ªå·±çš„æµ‹è¯•å•†æˆ·å·ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°        'txnTime' => $txnTime,    //è¯·ä¿®æ”¹è¢«æŸ¥è¯¢çš„äº¤æ˜“çš„è®¢å•å‘é€æ—¶é—´ï¼Œæ ¼å¼ä¸ºYYYYMMDDhhmmssï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°    );    AcpService::sign ( $params ); // ç­¾å    $url = SDKConfig::getSDKConfig()->singleQueryUrl;    $result_arr = $this->handle_result($params,$url);    return $result_arr;}/** * å¤„ç†é“¶è”çš„å›è°ƒ * @param $params * @param $url * @throws LogicException * @return mixed * User: https://github.com/WXiangQian */public function handle_result($params,$url){    $result_arr = AcpService::post ( $params, $url);    if(count($result_arr)<=0) { //æ²¡æ”¶åˆ°200åº”ç­”çš„æƒ…å†µ        throw new LogicException('REFUND_FAIL');    }    if (!AcpService::validate ($result_arr) ){        throw new LogicException('CHECK_SIGN_FAIL');    }    if ($result_arr["respCode"] == "00"){        //äº¤æ˜“å·²å—ç†ï¼Œç­‰å¾…æ¥æ”¶åå°é€šçŸ¥æ›´æ–°è®¢å•çŠ¶æ€ï¼Œå¦‚æœé€šçŸ¥é•¿æ—¶é—´æœªæ”¶åˆ°ä¹Ÿå¯å‘èµ·äº¤æ˜“çŠ¶æ€æŸ¥è¯¢        //TODO        return $result_arr;    } else if ($result_arr["respCode"] == "03"        || $result_arr["respCode"] == "04"        || $result_arr["respCode"] == "05" ){        //åç»­éœ€å‘èµ·äº¤æ˜“çŠ¶æ€æŸ¥è¯¢äº¤æ˜“ç¡®å®šäº¤æ˜“çŠ¶æ€        //TODO        throw new LogicException('HADNLE_OVERTIME');    } else {        //å…¶ä»–åº”ç­”ç åšä»¥å¤±è´¥å¤„ç†        //TODO        throw new LogicException('å¤±è´¥ï¼š'.$result_arr["respMsg"],14004);    }}</code></pre><h2 id="æ¥å…¥é€€è´§æ¥å£"><a href="#æ¥å…¥é€€è´§æ¥å£" class="headerlink" title="æ¥å…¥é€€è´§æ¥å£"></a>æ¥å…¥é€€è´§æ¥å£</h2><pre class=" language-lang-php"><code class="language-lang-php">/** * é“¶è”é€€æ¬¾ * @throws LogicException * @return \Illuminate\Http\JsonResponse * User: https://github.com/WXiangQian */public function union_refund(){    $channelType = $this->request->input('channelType','07');    $merId = $this->merId;    $oid = $this->request->input('orderId',0);    $txnAmt = $this->request->input('txnAmt',1);    $txnAmt2 = $txnAmt * 100;    $txnTime = date('YmdHis');    // todo æŸ¥è¯¢è®¢å•ä¿¡æ¯ åˆ¤æ–­è®¢å•æ˜¯å¦å­˜åœ¨    $order_info =  ['plat_oid'=>11111111];    $origQryId = $order_info['plat_oid'];    $orderId = time().rand(1111, 9999); // ç”Ÿæˆé€€æ¬¾è®¢å•å·    /**     * é‡è¦ï¼šè”è°ƒæµ‹è¯•æ—¶è¯·ä»”ç»†é˜…è¯»æ³¨é‡Šï¼     *     * äº§å“ï¼šè·³è½¬ç½‘å…³æ”¯ä»˜äº§å“<br>     * äº¤æ˜“ï¼šé€€è´§äº¤æ˜“ï¼šåå°èµ„é‡‘ç±»äº¤æ˜“ï¼Œæœ‰åŒæ­¥åº”ç­”å’Œåå°é€šçŸ¥åº”ç­”<br>     * æ—¥æœŸï¼š 2015-09<br>     * ç‰ˆæƒï¼š ä¸­å›½é“¶è”<br>     * è¯´æ˜ï¼šä»¥ä¸‹ä»£ç åªæ˜¯ä¸ºäº†æ–¹ä¾¿å•†æˆ·æµ‹è¯•è€Œæä¾›çš„æ ·ä¾‹ä»£ç ï¼Œå•†æˆ·å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦ï¼ŒæŒ‰ç…§æŠ€æœ¯æ–‡æ¡£ç¼–å†™ã€‚è¯¥ä»£ç ä»…ä¾›å‚è€ƒï¼Œä¸æä¾›ç¼–ç æ€§èƒ½è§„èŒƒæ€§ç­‰æ–¹é¢çš„ä¿éšœ<br>     * è¯¥æ¥å£å‚è€ƒæ–‡æ¡£ä½ç½®ï¼šopen.unionpay.comå¸®åŠ©ä¸­å¿ƒ ä¸‹è½½  äº§å“æ¥å£è§„èŒƒ  ã€Šç½‘å…³æ”¯ä»˜äº§å“æ¥å£è§„èŒƒã€‹<br>     *              ã€Šå¹³å°æ¥å…¥æ¥å£è§„èŒƒ-ç¬¬5éƒ¨åˆ†-é™„å½•ã€‹ï¼ˆå†…åŒ…å«åº”ç­”ç æ¥å£è§„èŒƒï¼Œå…¨æ¸ é“å¹³å°é“¶è¡Œåç§°-ç®€ç å¯¹ç…§è¡¨ï¼‰<br>     * æµ‹è¯•è¿‡ç¨‹ä¸­çš„å¦‚æœé‡åˆ°ç–‘é—®æˆ–é—®é¢˜æ‚¨å¯ä»¥ï¼š1ï¼‰ä¼˜å…ˆåœ¨openå¹³å°ä¸­æŸ¥æ‰¾ç­”æ¡ˆï¼š     *                                     è°ƒè¯•è¿‡ç¨‹ä¸­çš„é—®é¢˜æˆ–å…¶ä»–é—®é¢˜è¯·åœ¨ https://open.unionpay.com/ajweb/help/faq/list å¸®åŠ©ä¸­å¿ƒ FAQ æœç´¢è§£å†³æ–¹æ¡ˆ     *                             æµ‹è¯•è¿‡ç¨‹ä¸­äº§ç”Ÿçš„7ä½åº”ç­”ç é—®é¢˜ç–‘é—®è¯·åœ¨https://open.unionpay.com/ajweb/help/respCode/respCodeList è¾“å…¥åº”ç­”ç æœç´¢è§£å†³æ–¹æ¡ˆ     *                          2ï¼‰ å’¨è¯¢åœ¨çº¿äººå·¥æ”¯æŒï¼š open.unionpay.comæ³¨å†Œä¸€ä¸ªç”¨æˆ·å¹¶ç™»é™†åœ¨å³ä¸Šè§’ç‚¹å‡»â€œåœ¨çº¿å®¢æœâ€ï¼Œå’¨è¯¢äººå·¥QQæµ‹è¯•æ”¯æŒã€‚     * äº¤æ˜“è¯´æ˜ï¼š 1ï¼‰ä»¥åå°é€šçŸ¥æˆ–äº¤æ˜“çŠ¶æ€æŸ¥è¯¢äº¤æ˜“ï¼ˆForm_6_5_Queryï¼‰ç¡®å®šäº¤æ˜“æˆåŠŸï¼Œå»ºè®®å‘èµ·æŸ¥è¯¢äº¤æ˜“çš„æœºåˆ¶ï¼šå¯æŸ¥è¯¢Næ¬¡ï¼ˆä¸è¶…è¿‡6æ¬¡ï¼‰ï¼Œæ¯æ¬¡æ—¶é—´é—´éš”2Nç§’å‘èµ·,å³é—´éš”1ï¼Œ2ï¼Œ4ï¼Œ8ï¼Œ16ï¼Œ32SæŸ¥è¯¢ï¼ˆæŸ¥è¯¢åˆ°03ï¼Œ04ï¼Œ05ç»§ç»­æŸ¥è¯¢ï¼Œå¦åˆ™ç»ˆæ­¢æŸ¥è¯¢ï¼‰     *        2ï¼‰é€€è´§é‡‘é¢ä¸è¶…è¿‡æ€»é‡‘é¢ï¼Œå¯ä»¥è¿›è¡Œå¤šæ¬¡é€€è´§     *        3ï¼‰é€€è´§èƒ½å¯¹11ä¸ªæœˆå†…çš„æ¶ˆè´¹åšï¼ˆåŒ…æ‹¬å½“æ¸…ç®—æ—¥ï¼‰ï¼Œæ”¯æŒéƒ¨åˆ†é€€è´§æˆ–å…¨é¢é€€è´§ï¼Œåˆ°è´¦æ—¶é—´è¾ƒé•¿ï¼Œä¸€èˆ¬1-10ä¸ªæ¸…ç®—æ—¥ï¼ˆå¤šæ•°å‘å¡è¡Œ5å¤©å†…ï¼Œä½†å·¥è¡Œå¯èƒ½ä¼š10å¤©ï¼‰ï¼Œæ‰€æœ‰é“¶è¡Œéƒ½æ”¯æŒ     */    $params = array(        //ä»¥ä¸‹ä¿¡æ¯éç‰¹æ®Šæƒ…å†µä¸éœ€è¦æ”¹åŠ¨        'version' => SDKConfig::getSDKConfig()->version,              //ç‰ˆæœ¬å·        'encoding' => 'utf-8',              //ç¼–ç æ–¹å¼        'signMethod' => SDKConfig::getSDKConfig()->signMethod,              //ç­¾åæ–¹æ³•        'txnType' => '04',                  //äº¤æ˜“ç±»å‹        'txnSubType' => '00',              //äº¤æ˜“å­ç±»        'bizType' => '000201',              //ä¸šåŠ¡ç±»å‹        'accessType' => '0',              //æ¥å…¥ç±»å‹        'channelType' => $channelType,              //æ¸ é“ç±»å‹        'backUrl' => 'http://www.specialUrl.com', //åå°é€šçŸ¥åœ°å€        //TODO ä»¥ä¸‹ä¿¡æ¯éœ€è¦å¡«å†™        'orderId' => $orderId,        //å•†æˆ·è®¢å•å·ï¼Œ8-32ä½æ•°å­—å­—æ¯ï¼Œä¸èƒ½å«â€œ-â€æˆ–â€œ_â€ï¼Œå¯ä»¥è‡ªè¡Œå®šåˆ¶è§„åˆ™ï¼Œé‡æ–°äº§ç”Ÿï¼Œä¸åŒäºåŸæ¶ˆè´¹ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°        'merId' => $merId,            //å•†æˆ·ä»£ç ï¼Œè¯·æ”¹æˆè‡ªå·±çš„æµ‹è¯•å•†æˆ·å·ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°        'origQryId' => $origQryId, //åŸæ¶ˆè´¹çš„queryIdï¼Œå¯ä»¥ä»æŸ¥è¯¢æ¥å£æˆ–è€…é€šçŸ¥æ¥å£ä¸­è·å–ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°        'txnTime' => $txnTime,        //è®¢å•å‘é€æ—¶é—´ï¼Œæ ¼å¼ä¸ºYYYYMMDDhhmmssï¼Œé‡æ–°äº§ç”Ÿï¼Œä¸åŒäºåŸæ¶ˆè´¹ï¼Œæ­¤å¤„é»˜è®¤å–demoæ¼”ç¤ºé¡µé¢ä¼ é€’çš„å‚æ•°        'txnAmt' => $txnAmt2,       //äº¤æ˜“é‡‘é¢ï¼Œé€€è´§æ€»é‡‘é¢éœ€è¦å°äºç­‰äºåŸæ¶ˆè´¹        // è¯·æ±‚æ–¹ä¿ç•™åŸŸï¼Œ        // é€ä¼ å­—æ®µï¼ŒæŸ¥è¯¢ã€é€šçŸ¥ã€å¯¹è´¦æ–‡ä»¶ä¸­å‡ä¼šåŸæ ·å‡ºç°ï¼Œå¦‚æœ‰éœ€è¦è¯·å¯ç”¨å¹¶ä¿®æ”¹è‡ªå·±å¸Œæœ›é€ä¼ çš„æ•°æ®ã€‚        // å‡ºç°éƒ¨åˆ†ç‰¹æ®Šå­—ç¬¦æ—¶å¯èƒ½å½±å“è§£æï¼Œè¯·æŒ‰ä¸‹é¢å»ºè®®çš„æ–¹å¼å¡«å†™ï¼š        // 1. å¦‚æœèƒ½ç¡®å®šå†…å®¹ä¸ä¼šå‡ºç°&={}[]"'ç­‰ç¬¦å·æ—¶ï¼Œå¯ä»¥ç›´æ¥å¡«å†™æ•°æ®ï¼Œå»ºè®®çš„æ–¹æ³•å¦‚ä¸‹ã€‚        //    'reqReserved' =>'é€ä¼ ä¿¡æ¯1|é€ä¼ ä¿¡æ¯2|é€ä¼ ä¿¡æ¯3',        // 2. å†…å®¹å¯èƒ½å‡ºç°&={}[]"'ç¬¦å·æ—¶ï¼š        // 1) å¦‚æœéœ€è¦å¯¹è´¦æ–‡ä»¶é‡Œèƒ½æ˜¾ç¤ºï¼Œå¯å°†å­—ç¬¦æ›¿æ¢æˆå…¨è§’ï¼†ï¼ï½›ï½ã€ã€‘â€œâ€˜å­—ç¬¦ï¼ˆè‡ªå·±å†™ä»£ç ï¼Œæ­¤å¤„ä¸æ¼”ç¤ºï¼‰ï¼›        // 2) å¦‚æœå¯¹è´¦æ–‡ä»¶æ²¡æœ‰æ˜¾ç¤ºè¦æ±‚ï¼Œå¯åšä¸€ä¸‹base64ï¼ˆå¦‚ä¸‹ï¼‰ã€‚        //    æ³¨æ„æ§åˆ¶æ•°æ®é•¿åº¦ï¼Œå®é™…ä¼ è¾“çš„æ•°æ®é•¿åº¦ä¸èƒ½è¶…è¿‡1024ä½ã€‚        //    æŸ¥è¯¢ã€é€šçŸ¥ç­‰æ¥å£è§£ææ—¶ä½¿ç”¨base64_decodeè§£base64åå†å¯¹æ•°æ®åšåç»­è§£æã€‚        //    'reqReserved' => base64_encode('ä»»æ„æ ¼å¼çš„ä¿¡æ¯éƒ½å¯ä»¥'),    );    AcpService::sign ( $params ); // ç­¾å    $url = SDKConfig::getSDKConfig()->backTransUrl;    $this->handle_result($params,$url);    // todo é€€æ¬¾æˆåŠŸ-éœ€è¦å°†é€€æ¬¾ä¿¡æ¯å­˜åˆ°è‡ªå·±çš„ä¸šåŠ¡è¡¨ä¸­    return $this->response->response();}</code></pre><h2 id="æµ‹è¯•ç¯å¢ƒæµ‹è¯•é“¶è”æ”¯ä»˜"><a href="#æµ‹è¯•ç¯å¢ƒæµ‹è¯•é“¶è”æ”¯ä»˜" class="headerlink" title="æµ‹è¯•ç¯å¢ƒæµ‹è¯•é“¶è”æ”¯ä»˜"></a>æµ‹è¯•ç¯å¢ƒæµ‹è¯•é“¶è”æ”¯ä»˜</h2><blockquote><p> æµ‹è¯•å•†æˆ·å·ä¸ºï¼š777290058110048ã€‚æµ‹è¯•ç¯å¢ƒåªèƒ½ä½¿ç”¨é“¶è”ç»™çš„é“¶è¡Œå¡ä¿¡æ¯ï¼š<a href="https://open.unionpay.com/tjweb/support/faq/mchlist?id=4">æµ‹è¯•ç¯å¢ƒçš„æµ‹è¯•å¡ä¿¡æ¯</a></p></blockquote><h3 id="æµ‹è¯•æµç¨‹æˆªå›¾"><a href="#æµ‹è¯•æµç¨‹æˆªå›¾" class="headerlink" title="æµ‹è¯•æµç¨‹æˆªå›¾"></a>æµ‹è¯•æµç¨‹æˆªå›¾</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMi85LzE2ZWVhMTkwN2NkMmVjNmQ?x-oss-process=image/format,png" alt=""></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMi85LzE2ZWVhMTk1OTRhMjVjMjg?x-oss-process=image/format,png" alt=""></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMi85LzE2ZWVhMWFjNjljNDFiMWQ?x-oss-process=image/format,png" alt=""></p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><blockquote><p>æ³¨ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒæµ‹è¯•çš„æ—¶å€™ï¼Œäº¤æ˜“é‡‘é¢è¯·å‹¿å°äº1è§’ã€‚</p></blockquote><p>ä»æµ‹è¯•é…ç½®åˆ‡åˆ°çº¿ä¸Šé…ç½®æ—¶ï¼Œçº¿ä¸Šå¿…é¡»ä¿®æ”¹<strong>UNION_SIGN_CERT_PWD</strong>çº¿ä¸Šå•†æˆ·å·å¯†ç </p><p>é‡åˆ°<strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼šThe each() function is deprecated. This message will be suppressed on further calls</p><blockquote><p>php7.2+å·²å°†eachå‡½æ•°åºŸé™¤ï¼Œåˆ™éœ€è¦è‡ªå·±æ¢ä¸ºforeach</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">// åœ¨sdk/common.phpä¸­çš„createLinkStringæ–¹æ³•è¿›è¡Œä¿®æ”¹//    while ( list ( $key, $value ) = each ( $para ) ) {//        if ($encode) {//            $value = urlencode ( $value );//        }//        $linkString .= $key . "=" . $value . "&";//    }    // php7.2ååºŸå¼ƒeach    foreach ($para as $key => $value) {        if ($encode) {            $value = urlencode ( $value );        }        $linkString .= $key . "=" . $value . "&";    }</code></pre><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><blockquote><p>çœŸæªå®æˆ˜phpæ¥å…¥ä¸­å›½é“¶è”åœ¨çº¿ç½‘å…³æ”¯ä»˜æ¶ˆè´¹å’Œäº¤æ˜“çŠ¶æ€æŸ¥è¯¢ä»¥åŠé“¶è”é€€æ¬¾æ¥å£ã€‚</p></blockquote><p><a href="https://juejin.im/post/5dee0f25e51d455821125050">æ˜é‡‘åœ°å€</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EasyWeChatåœ¨laravelæ¡†æ¶ä¸­çš„ä½¿ç”¨æŠ€å·§</title>
      <link href="2019/12/25/laravel/EasyWeChat%E5%9C%A8laravel%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
      <url>2019/12/25/laravel/EasyWeChat%E5%9C%A8laravel%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<p>EasyWeChatåœ¨laravelæ¡†æ¶ä¸­çš„ä½¿ç”¨æŠ€å·§<br><a id="more"></a></p><blockquote><p>laravelæ¡†æ¶å®æˆ˜ï¼š<br><a href="https://www.easywechat.com/docs/master/overview">EasyWeChat</a></p></blockquote><h2 id="EasyWeChatå…¬ä¼—å·é…ç½®"><a href="#EasyWeChatå…¬ä¼—å·é…ç½®" class="headerlink" title="EasyWeChatå…¬ä¼—å·é…ç½®"></a>EasyWeChatå…¬ä¼—å·é…ç½®</h2><pre><code>protected $wechat;public function __construct (){    $this-&gt;wechat = app('wechat.official_account');  //å¾®ä¿¡å…¬ä¼—å·é…ç½®}</code></pre><h3 id="æŠ¥é”™-Failed-to-cache-access-token"><a href="#æŠ¥é”™-Failed-to-cache-access-token" class="headerlink" title="æŠ¥é”™:Failed to cache access token."></a>æŠ¥é”™:Failed to cache access token.</h3><blockquote><p>æŠ¥é”™:Failed to cache access token.çš„åŸå› å¤§éƒ¨åˆ†æ˜¯ï¼štokenç¼“å­˜æ–‡ä»¶æ²¡å†™æˆåŠŸã€‚</p></blockquote><p>åœ¨ä½¿ç”¨wechatæ–¹æ³•çš„ä¸Šé¢åŠ å…¥ä»¥ä¸‹ä»£ç :</p><pre><code> $this-&gt;wechat-&gt;cache = new CacheBridge(app('cache.store'));</code></pre><h3 id="è·å–å…¬ä¼—å·ä¸´æ—¶äºŒç»´ç "><a href="#è·å–å…¬ä¼—å·ä¸´æ—¶äºŒç»´ç " class="headerlink" title="è·å–å…¬ä¼—å·ä¸´æ—¶äºŒç»´ç "></a>è·å–å…¬ä¼—å·ä¸´æ—¶äºŒç»´ç </h3><pre><code>$res = $this-&gt;wechat-&gt;qrcode-&gt;temporary('WXiangQian', 6 * 24 * 3600);</code></pre><h3 id="å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€"><a href="#å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€" class="headerlink" title="å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€"></a>å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€</h3><pre><code>$this-&gt;wechat-&gt;template_message-&gt;send([    'touser' =&gt; $this-&gt;message['FromUserName'],    'template_id' =&gt; 'template_id',// æ¨¡æ¿æ¶ˆæ¯id    'url' =&gt; 'https://wxiangqian.github.io/', // è¦è·³è½¬çš„url    'data' =&gt; [        "first" =&gt; "æ¬¢è¿æ¥åˆ°æœ¬å…¬ä¼—å·",        "keyword1" =&gt; 'ä½ å¥½ï¼ŒWXiangQian', // å¿…é¡»ä¸ºkeyword        "keyword2" =&gt; "æ¬¢è¿æ¥åˆ°æœ¬å…¬ä¼—å·",        "keyword3" =&gt; "æ­å–œä½ æˆåŠŸå…¥å‘",        "remark" =&gt; "å°æç¤ºï¼šæœŸå¾…æ‚¨çš„æŒç»­å…³æ³¨", //å¤‡æ³¨    ]]);</code></pre><h3 id="å…¬ä¼—å·æœåŠ¡ç«¯çš„ä½¿ç”¨"><a href="#å…¬ä¼—å·æœåŠ¡ç«¯çš„ä½¿ç”¨" class="headerlink" title="å…¬ä¼—å·æœåŠ¡ç«¯çš„ä½¿ç”¨"></a>å…¬ä¼—å·æœåŠ¡ç«¯çš„ä½¿ç”¨</h3><h4 id="åœ¨å¾®ä¿¡å¼€å‘ä¸­ä¸»è¦æ˜¯è´Ÿè´£æ¥æ”¶ç”¨æˆ·å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œè¿˜æœ‰ç”¨æˆ·è§¦å‘çš„ä¸€ç³»åˆ—äº‹ä»¶"><a href="#åœ¨å¾®ä¿¡å¼€å‘ä¸­ä¸»è¦æ˜¯è´Ÿè´£æ¥æ”¶ç”¨æˆ·å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œè¿˜æœ‰ç”¨æˆ·è§¦å‘çš„ä¸€ç³»åˆ—äº‹ä»¶" class="headerlink" title="åœ¨å¾®ä¿¡å¼€å‘ä¸­ä¸»è¦æ˜¯è´Ÿè´£æ¥æ”¶ç”¨æˆ·å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œè¿˜æœ‰ç”¨æˆ·è§¦å‘çš„ä¸€ç³»åˆ—äº‹ä»¶"></a>åœ¨å¾®ä¿¡å¼€å‘ä¸­ä¸»è¦æ˜¯è´Ÿè´£æ¥æ”¶ç”¨æˆ·å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œè¿˜æœ‰ç”¨æˆ·è§¦å‘çš„ä¸€ç³»åˆ—äº‹ä»¶</h4><pre><code>$app-&gt;server-&gt;push(function ($message) {    // $message['FromUserName'] // ç”¨æˆ·çš„ openid    // $message['MsgType'] // æ¶ˆæ¯ç±»å‹ï¼ševent, text....    return "æ‚¨å¥½ï¼æ¬¢è¿ä½¿ç”¨ EasyWeChat";});// åœ¨ laravel ä¸­ï¼š$response = $app-&gt;server-&gt;serve();// $response ä¸º `Symfony\Component\HttpFoundation\Response` å®ä¾‹// å¯¹äºéœ€è¦ç›´æ¥è¾“å‡ºå“åº”çš„æ¡†æ¶ï¼Œæˆ–è€…åŸç”Ÿ PHP ç¯å¢ƒä¸‹$response-&gt;send();// è€Œ laravel ä¸­ç›´æ¥è¿”å›å³å¯ï¼šreturn $response;</code></pre><h4 id="message-â€˜MsgTypeâ€™-è¯¦è§£"><a href="#message-â€˜MsgTypeâ€™-è¯¦è§£" class="headerlink" title="$message[â€˜MsgTypeâ€™] è¯¦è§£"></a>$message[â€˜MsgTypeâ€™] è¯¦è§£</h4><pre><code>$app-&gt;server-&gt;push(function ($message) {    switch ($message['MsgType']) {        case 'event':            return 'æ”¶åˆ°äº‹ä»¶æ¶ˆæ¯';            break;        case 'text':            return 'æ”¶åˆ°æ–‡å­—æ¶ˆæ¯';            break;        case 'image':            return 'æ”¶åˆ°å›¾ç‰‡æ¶ˆæ¯';            break;        case 'voice':            return 'æ”¶åˆ°è¯­éŸ³æ¶ˆæ¯';            break;        case 'video':            return 'æ”¶åˆ°è§†é¢‘æ¶ˆæ¯';            break;        case 'location':            return 'æ”¶åˆ°åæ ‡æ¶ˆæ¯';            break;        case 'link':            return 'æ”¶åˆ°é“¾æ¥æ¶ˆæ¯';            break;        case 'file':            return 'æ”¶åˆ°æ–‡ä»¶æ¶ˆæ¯';        // ... å…¶å®ƒæ¶ˆæ¯        default:            return 'æ”¶åˆ°å…¶å®ƒæ¶ˆæ¯';            break;    }    // ...});</code></pre><h4 id="MsgType-Event-äº‹ä»¶ç±»å‹è¯¦è§£"><a href="#MsgType-Event-äº‹ä»¶ç±»å‹è¯¦è§£" class="headerlink" title="MsgType Event äº‹ä»¶ç±»å‹è¯¦è§£"></a>MsgType Event äº‹ä»¶ç±»å‹è¯¦è§£</h4><blockquote><p>æ‰«æå¸¦å‚æ•°çš„äºŒç»´ç äº‹ä»¶</p><pre><code>EventKey äº‹ä»¶KEYå€¼ï¼Œæ¯”å¦‚ï¼šqrscene_123123ï¼Œqrscene_ä¸ºå‰ç¼€ï¼Œåé¢ä¸ºäºŒç»´ç çš„å‚æ•°å€¼Ticket äºŒç»´ç çš„ ticketï¼Œå¯ç”¨æ¥æ¢å–äºŒç»´ç å›¾ç‰‡</code></pre></blockquote><pre><code>// ï¼ˆå¦‚ï¼šsubscribe(è®¢é˜…)ã€unsubscribe(å–æ¶ˆè®¢é˜…) ...ï¼Œ CLICK ç­‰ï¼‰if($message['MsgType'] == 'event') {  //æ”¶åˆ°äº‹ä»¶æ¶ˆæ¯    switch ($message['Event']) {        case 'CLICK':          //ç‚¹å‡»äº‹ä»¶            break;        case 'subscribe':      //è®¢é˜…            $event_info = substr($this-&gt;message['EventKey'], 8);            $event_arr = explode('_', $event_info);            if (!empty($event_arr) &amp;&amp; $event_arr[0] == 'test')                 // testé€»è¾‘            }else{                // å…³æ³¨å…¬ä¼—å·é€»è¾‘                return $this-&gt;subscribe($event_arr);            }            break;        case 'unsubscribe':    //å–æ¶ˆè®¢é˜…            return $this-&gt;unSubscribe();            break;        case 'SCAN':           //å·²å…³æ³¨çš„æƒ…å†µä¸‹æ‰«æäºŒç»´ç             $this-&gt;scan();            break;    }}</code></pre><h2 id="EasyWeChatå°ç¨‹åºé…ç½®"><a href="#EasyWeChatå°ç¨‹åºé…ç½®" class="headerlink" title="EasyWeChatå°ç¨‹åºé…ç½®"></a>EasyWeChatå°ç¨‹åºé…ç½®</h2><pre><code>    $this-&gt;config = [        'app_id' =&gt; 'app_id',        'secret' =&gt; 'secret',        'response_type' =&gt; 'array',        'log' =&gt; [            'level' =&gt; 'debug',         // 'file' =&gt; __DIR__.'/wechat.log',        ],    ];    $this-&gt;app = Factory::miniProgram($this-&gt;config);</code></pre><h3 id="å°ç¨‹åºæŠ¥é”™ï¼šIdentifier-â€œsubscribe-messageâ€-is-not-defined"><a href="#å°ç¨‹åºæŠ¥é”™ï¼šIdentifier-â€œsubscribe-messageâ€-is-not-defined" class="headerlink" title="å°ç¨‹åºæŠ¥é”™ï¼šIdentifier â€œsubscribe_messageâ€ is not defined."></a>å°ç¨‹åºæŠ¥é”™ï¼šIdentifier â€œsubscribe_messageâ€ is not defined.</h3><blockquote><p>æŠ¥é”™çš„åŸå› æ˜¯å½“å‰çš„laravel-wechatç‰ˆæœ¬è¿‡ä½ï¼Œ<strong>éœ€è¦æ›´æ–°</strong>ï¼Œå°ç¨‹åºè®¢é˜…æ¶ˆæ¯æ˜¯åç»­æ–°å¢çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è¯´ä½ç‰ˆæœ¬ç”¨ä¸äº†è®¢é˜…æ¶ˆæ¯ã€‚å°ç¨‹åºçš„æ¨¡æ¿æ¶ˆæ¯å·²åœç”¨ï¼Œåç»­éƒ½ä¼šæ¥å…¥è®¢é˜…æ¶ˆæ¯ã€‚</p></blockquote><h3 id="å°ç¨‹åºè®¢é˜…æ¶ˆæ¯æ¨é€"><a href="#å°ç¨‹åºè®¢é˜…æ¶ˆæ¯æ¨é€" class="headerlink" title="å°ç¨‹åºè®¢é˜…æ¶ˆæ¯æ¨é€"></a>å°ç¨‹åºè®¢é˜…æ¶ˆæ¯æ¨é€</h3><pre><code>$send_data = [    'template_id' =&gt; 'template_id', // æ‰€éœ€ä¸‹å‘çš„è®¢é˜…æ¨¡æ¿id    'touser' =&gt; 'openid',     // æ¥æ”¶è€…ï¼ˆç”¨æˆ·ï¼‰çš„ openid    'page' =&gt; '/pages/index,       // ç‚¹å‡»æ¨¡æ¿å¡ç‰‡åçš„è·³è½¬é¡µé¢ï¼Œä»…é™æœ¬å°ç¨‹åºå†…çš„é¡µé¢ã€‚æ”¯æŒå¸¦å‚æ•°,ï¼ˆç¤ºä¾‹index?foo=barï¼‰ã€‚è¯¥å­—æ®µä¸å¡«åˆ™æ¨¡æ¿æ— è·³è½¬ã€‚    'data' =&gt; [             // æ¨¡æ¿å†…å®¹ï¼Œæ ¼å¼å½¢å¦‚ { "key1": { "value": any }, "key2": { "value": any } }        'thing2' =&gt; [            'value' =&gt; 'è¯¾ç¨‹æ ‡é¢˜',        ],        'character_string6' =&gt; [            'value' =&gt; '1/1',        ],        'thing7' =&gt; [            'value' =&gt; 'æ­å–œä½ å·²æˆåŠŸè§£é”è¿™ä¸ªè¯¾ç¨‹',        ],    ],];// éçº¿ä¸Šç¯å¢ƒif (env('APP_ENV') != 'production') {    $send_data['miniprogramState'] = 'developer';}$this-&gt;app-&gt;subscribe_message-&gt;send($send_data);</code></pre><h3 id="æ ¹æ®-jsCode-è·å–ç”¨æˆ·-session-ä¿¡æ¯"><a href="#æ ¹æ®-jsCode-è·å–ç”¨æˆ·-session-ä¿¡æ¯" class="headerlink" title="æ ¹æ® jsCode è·å–ç”¨æˆ· session ä¿¡æ¯"></a>æ ¹æ® jsCode è·å–ç”¨æˆ· session ä¿¡æ¯</h3><pre><code>    $code = $this-&gt;request-&gt;input('code');    // è¿”å›openid    $data = $this-&gt;app-&gt;auth-&gt;session($code);    $openid = $data['openid'];</code></pre><h3 id="å¾®ä¿¡å°ç¨‹åºæ¶ˆæ¯è§£å¯†"><a href="#å¾®ä¿¡å°ç¨‹åºæ¶ˆæ¯è§£å¯†" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºæ¶ˆæ¯è§£å¯†"></a>å¾®ä¿¡å°ç¨‹åºæ¶ˆæ¯è§£å¯†</h3><pre><code>    $session = $this-&gt;request-&gt;input('session');    $iv = $this-&gt;request-&gt;input('iv');    $encryptedData = $this-&gt;request-&gt;input('encryptedData');    $decrypted = AES::decrypt(     base64_decode($encryptedData, false), base64_decode($session, false), base64_decode($iv, false)    );    $decrypted = json_decode($decrypted, true);</code></pre><h2 id="æŒç»­æ›´æ–°ä¸­"><a href="#æŒç»­æ›´æ–°ä¸­" class="headerlink" title="æŒç»­æ›´æ–°ä¸­~"></a>æŒç»­æ›´æ–°ä¸­<del>~</del></h2><p><a href="https://juejin.im/post/5dc77c21e51d452bfd695daa">æ˜é‡‘åœ°å€</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phpå®ç°é˜²åƒåœ¾æ‰‹æœºå·æ³¨å†ŒåŠŸèƒ½(æ¥å…¥é˜¿é‡Œäº‘é£é™©è¯†åˆ«)</title>
      <link href="2019/12/09/php/php%E5%AE%9E%E7%8E%B0%E9%98%B2%E5%9E%83%E5%9C%BE%E6%89%8B%E6%9C%BA%E5%8F%B7%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD/"/>
      <url>2019/12/09/php/php%E5%AE%9E%E7%8E%B0%E9%98%B2%E5%9E%83%E5%9C%BE%E6%89%8B%E6%9C%BA%E5%8F%B7%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨åœºæ™¯ä»‹ç»"><a href="#ä½¿ç”¨åœºæ™¯ä»‹ç»" class="headerlink" title="ä½¿ç”¨åœºæ™¯ä»‹ç»"></a>ä½¿ç”¨åœºæ™¯ä»‹ç»</h2><blockquote><p>æœ¬å¸çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼šåšè¥é”€æ´»åŠ¨ï¼Œé‚€è¯·æ–°ç”¨æˆ·å¾—æŸæŸå®ç‰©ï¼Œè¿™æ—¶å€™ä¼šæœ‰ç”¨æˆ·ä½¿ç”¨æ¥ç å¹³å°ï¼Œåˆ©ç”¨å›½å†…æˆ–å›½å¤–æ‰‹æœºå·è¿›è¡Œæ³¨å†Œï¼Œé»˜è®¤æ˜¯é»‘å·ï¼Œæ‰€ä»¥è¦è¿›è¡Œæ‹¦æˆªï¼Œç”±æ­¤è°ƒç ”ï¼Œç¡®å®šä½¿ç”¨é˜¿é‡Œäº‘çš„é£é™©è¯†åˆ«<br><a id="more"></a><br><a href="https://help.aliyun.com/product/69981.html?spm=a2c4g.11186623.6.540.48d84afa378QtB">é˜¿é‡Œäº‘é£é™©è¯†åˆ«æ–‡æ¡£</a></p><h3 id="äº§å“å®šä½"><a href="#äº§å“å®šä½" class="headerlink" title="äº§å“å®šä½"></a>äº§å“å®šä½</h3><p>é£é™©è¯†åˆ«ï¼ˆFraud Detectionï¼‰åŸºäºé˜¿é‡Œå·´å·´å®‰å…¨å›¢é˜Ÿå¤šå¹´é£æ§æŠ€æœ¯çš„ç§¯ç´¯ï¼Œç»“åˆé˜¿é‡Œäº‘ã€æ·˜å®ã€æ”¯ä»˜å®ç­‰å¹³å°çš„é£é™©è¿è¥ç»éªŒï¼Œä¸ºä¼ä¸šç”¨æˆ·æä¾›æ™ºèƒ½ã€è½»é‡ã€æˆç†Ÿçš„ä¸šåŠ¡é£æ§è§£å†³æ–¹æ¡ˆï¼Œå¿«é€Ÿè§£å†³ä¸šåŠ¡å®‰å…¨é£é™©ï¼Œé™ä½æŸå¤±ã€‚</p><p>ç›®å‰çš„äº§å“åŒ…æ‹¬ï¼šæ³¨å†Œé£é™©è¯†åˆ«ï¼ˆåŸºç¡€ç‰ˆä¸å¢å¼ºç‰ˆï¼‰ã€è¥é”€é£é™©è¯†åˆ«ï¼ˆåŸºç¡€ç‰ˆä¸å¢å¼ºç‰ˆï¼‰ã€ç™»å½•é£é™©è¯†åˆ«ï¼ˆåŸºç¡€ç‰ˆä¸å¢å¼ºç‰ˆï¼‰ã€è®¾å¤‡é£é™©è¯†åˆ«ã€ä¸šåŠ¡é£é™©æƒ…æŠ¥ã€é‚®ç®±ç”»åƒã€åœ°å€è¯„åˆ†ã€‚</p></blockquote><h2 id="PHP-SDK"><a href="#PHP-SDK" class="headerlink" title="PHP SDK"></a>PHP SDK</h2><p>PHP SDK æºç ä¸‹è½½ï¼š<a href="https://github.com/aliyun/aliyun-openapi-php-sdk">https://github.com/aliyun/aliyun-openapi-php-sdk</a></p><p>PHP SDKçš„ç¯å¢ƒå‡†å¤‡ã€å®‰è£…ä½¿ç”¨å¯å‚è€ƒï¼š<a href="https://help.aliyun.com/document_detail/53111.html?spm=a2c4g.11186623.2.19.46dc17cdlGiAtO">é˜¿é‡Œäº‘SDKå¼€å‘æŒ‡å—</a></p><p>å…‹éš†é˜¿é‡Œäº‘çš„php sdk åº“</p><pre><code>git clone https://github.com/aliyun/aliyun-openapi-php-sdk.git</code></pre><p>å®é™…ä½¿ç”¨åˆ°çš„æ–‡ä»¶å¤¹å¦‚ä¸‹ï¼šaliyun-php-sdk-coreã€aliyun-php-sdk-saf<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMS8yOC8xNmVhZmYxOTRkMWNkMzY2?x-oss-process=image/format,png" alt=""></p><h3 id="å…¬å…±å‚æ•°ä»‹ç»"><a href="#å…¬å…±å‚æ•°ä»‹ç»" class="headerlink" title="å…¬å…±å‚æ•°ä»‹ç»"></a>å…¬å…±å‚æ•°ä»‹ç»</h3><blockquote><p>æœåŠ¡æ¥å£çš„å…¥å‚å‚æ•°åŒ…å«å…¬å…±è¯·æ±‚å‚æ•°å’Œå…·ä½“æœåŠ¡äº‹ä»¶å‚æ•°ï¼Œå…¬å…±è¯·æ±‚å‚æ•°æ˜¯æŒ‡æ¯ä¸€ä¸ªæ¥å£éƒ½éœ€è¦ä½¿ç”¨åˆ°çš„å‚æ•°ï¼Œç‚¹å‡»è·³è½¬åˆ°<a href="https://help.aliyun.com/document_detail/70058.html?spm=a2c4g.11186623.6.554.1654741c2uEDSj">é˜¿é‡Œäº‘å…¬å…±è¯·æ±‚å‚æ•°æ–‡æ¡£</a>ã€‚</p></blockquote><h4 id="Serviceå‚æ•°"><a href="#Serviceå‚æ•°" class="headerlink" title="Serviceå‚æ•°"></a>Serviceå‚æ•°</h4><blockquote><p>é˜¿é‡Œäº‘äº‘ç›¾é¢å‘çš„æœåŠ¡codeï¼Œä¸å¯éšæ„è®¾ç½®ã€‚ä»¥ä¸‹æ˜¯å¢ƒå†…å¸¸ç”¨åˆ°çš„codeã€å¦‚æœæ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<a href="https://help.aliyun.com/document_detail/70058.html?spm=a2c4g.11186623.6.554.1654741c2uEDSj">æ–‡æ¡£</a>ã€‚</p></blockquote><ul><li>æ³¨å†Œé£é™©è¯†åˆ«-å¢å¼ºç‰ˆæœåŠ¡çš„codeæ˜¯account_abuse_pro</li><li>æ³¨å†Œé£é™©è¯†åˆ«æœåŠ¡çš„codeæ˜¯account_abuse</li><li>è¥é”€é£é™©è¯†åˆ«-å¢å¼ºç‰ˆæœåŠ¡çš„codeæ˜¯coupon_abuse_pro</li><li>è¥é”€é£é™©è¯†åˆ«æœåŠ¡çš„codeæ˜¯coupon_abuse</li><li>ç™»å½•é£é™©è¯†åˆ«-å¢å¼ºç‰ˆæœåŠ¡çš„codeæ˜¯account_takeover_pro</li><li>ç™»å½•é£é™©è¯†åˆ«æœåŠ¡çš„codeæ˜¯account_takeover</li><li>è®¾å¤‡é£é™©è¯†åˆ«æœåŠ¡çš„codeæ˜¯device_risk</li></ul><h2 id="å¼€å§‹phpå®æˆ˜"><a href="#å¼€å§‹phpå®æˆ˜" class="headerlink" title="å¼€å§‹phpå®æˆ˜"></a>å¼€å§‹phpå®æˆ˜</h2><h3 id="é¦–å…ˆå°è£…ä¸€ä¸ªtoolsæ–‡ä»¶-AliApi-php"><a href="#é¦–å…ˆå°è£…ä¸€ä¸ªtoolsæ–‡ä»¶-AliApi-php" class="headerlink" title="é¦–å…ˆå°è£…ä¸€ä¸ªtoolsæ–‡ä»¶:AliApi.php"></a>é¦–å…ˆå°è£…ä¸€ä¸ªtoolsæ–‡ä»¶:AliApi.php</h3><pre class=" language-lang-php"><code class="language-lang-php"><?php/** * é˜¿é‡Œapi * User: https://github.com/WXiangQian */namespace App\Http\Tools;use saf\Request\V20180919 as saf;class ALiApi{    public static function run($json_data)    {        include_once __DIR__.'/aliyun-openapi-php-sdk/aliyun-php-sdk-core/Config.php';        // åˆå§‹åŒ–        // å®æˆ˜ä½¿ç”¨çš„æ˜¯laravelæ¡†æ¶ env()é»˜è®¤ä¸ºé…ç½®å‚æ•°ï¼Œå…¶å®ƒæ¡†æ¶å¯è‡ªè¡Œè®¾ç½®        $iClientProfile = \DefaultProfile::getProfile("cn-shanghai", env("ACCESS_KEY_ID",''), env("ACCESS_SECRET_ID",''));        $client = new \DefaultAcsClient($iClientProfile);        // è®¾ç½®å‚æ•°        $request = new saf\ExecuteRequestRequest();        // äº§å“serviceè¯·å‚è€ƒ[å…¬å…±å‚æ•°]æ–‡æ¡£ä¸­çš„Serviceå­—æ®µæè¿°        $request->setService('account_abuse'); // æ³¨å†Œé£é™©è¯†åˆ«æœåŠ¡        $request->setServiceParameters($json_data);        // å‘èµ·è¯·æ±‚        $response = $client->getAcsResponse($request);        // è¯·æ±‚æ­£å¸¸ã€‚        if ($response->Code == 200) {            $score = 0;            // æ³¨å†Œé£é™©è¯†åˆ«æœåŠ¡è¿”å›çš„Dataå‚æ•°ä¸­çš„scoreå€¼ï¼Œå€¼åŒºé—´åœ¨0~100ä¹‹é—´ï¼Œå€¼è¶Šå¤§ä»£è¡¨è¡Œä¸ºçš„é£é™©ç¨‹åº¦è¶Šå¤§ã€‚            if (isset($response->Data->Score)) {                $score = $response->Data->Score;            }             // å°†è°ƒç”¨è¿‡é£é™©è¯†åˆ«çš„æ•°æ®å­˜åˆ°redisï¼ˆåå°å¯ç”¨liståˆ†é¡µï¼‰            $data = json_decode($json_data);            getRedis()->lPush('list:sms',$data->mobile.'_'.$score);            return self::handle_score($score);        }        switch ($response->Code) {            case 400: $msg = 'ServiceParameters(äº‹ä»¶å‚æ•°)ä¸åˆæ³•';break;            case 402: $msg = 'æ—¥QPSè¶…è¿‡å·²è´­è§„æ ¼ï¼Œé™æµã€‚';break;            case 403: $msg = 'æƒé™ä¸è¶³ï¼ŒæœåŠ¡æœªå¼€é€šæˆ–å·²åˆ°æœŸã€‚';break;            case 404: $msg = 'Service(æœåŠ¡å‚æ•°ï¼‰ä¸åˆæ³•ã€‚';break;            case 500: $msg = 'å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ã€‚';break;            default : $msg = $response->Code;break;        }        // è‡ªå®šä¹‰æ—¥å¿—å¤„ç† å¯æœ‰å¯æ—         write_log('ali-æ³¨å†Œé£é™©è¯†åˆ«äº‹ä»¶','info','logs/ali_sdk.log','é”™è¯¯ä¿¡æ¯:'.$msg);        return 'error';    }    public static function handle_score($score)    {        $score = intval($score);        /**         * 0åˆ°35ï¼ˆä¸å«ï¼‰    ä½é£é™©    å¯æ”¾è¿‡         * 35ï¼ˆå«ï¼‰åˆ°65ï¼ˆä¸å«ï¼‰    ä¸­é£é™©    å¯æ‰“æ ‡è§‚å¯Ÿ         * 65ï¼ˆå«ï¼‰åˆ°85ï¼ˆä¸å«ï¼‰    ä¸­é«˜é£é™©    å¯è¿›ä¸€æ­¥å®‰å…¨éªŒè¯æˆ–é™åˆ¶é«˜å±ä¸šåŠ¡ä½¿ç”¨æƒé™         * 85ï¼ˆå«ï¼‰åˆ°100ï¼ˆå«ï¼‰    é«˜é£é™©    å¯é™åˆ¶é«˜å±ä¸šåŠ¡ä½¿ç”¨æƒé™         */        $bool = false;        if ($score >= 0 && $score < 65) {            $bool = true;        }        return $bool;    }}</code></pre><h3 id="æ§åˆ¶å™¨è°ƒç”¨"><a href="#æ§åˆ¶å™¨è°ƒç”¨" class="headerlink" title="æ§åˆ¶å™¨è°ƒç”¨"></a>æ§åˆ¶å™¨è°ƒç”¨</h3><blockquote><p>ä¸‹æ–¹ä¸ºå®æˆ˜demoï¼Œå…·ä½“å‚æ•°å®šä¹‰è¯·æŸ¥çœ‹<a href="https://help.aliyun.com/document_detail/70070.html?spm=a2c4g.11186623.6.556.76ec741c6ZBYGB">æ³¨å†Œé£é™©è¯†åˆ«äº‹ä»¶åŠè¿”å›å‚æ•°</a></p></blockquote><pre class=" language-lang-php"><code class="language-lang-php">/** * é˜²åƒåœ¾æ‰‹æœºå·æ³¨å†Œé—®é¢˜ * @param $phone_num æ‰‹æœºå·ç  * @param $area_code åœ°åŒºä»£ç  * User: https://github.com/WXiangQian */public function ali_api_check(Request $request){    // é»˜è®¤å›½å†…æ‰‹æœºå·ã€‚å¦‚æœ‰æµ·å¤–æ‰‹æœºï¼Œéœ€åŒ…å«å›½å®¶åœ°åŒºä»£ç ï¼Œæ ¼å¼ä¸ºâ€åœ°åŒºä»£ç -æ‰‹æœºå·ç â€œ    $phone_num = strtolower( $request->input('phone_num') );    $phone_num = str_replace(' ','',$phone_num);    $area_code = $request->input('area_code','0086'); // åœ°åŒºä»£ç  é»˜è®¤0086     $new_phone_num = $phone_num;    if ($area_code != '0086') {        $new_phone_num = $area_code.'-'.$new_phone_num;    }    $arr = [        'mobile'=>$new_phone_num,        'operateTime'=>time(),        'ip'=>ip2long(Request::ip());,    ];    if (!empty($_SERVER['HTTP_REFERER'])) $arr['refer'] = $_SERVER["HTTP_REFERER"];    if (!empty($_SERVER['HTTP_USER_AGENT'])) $arr['userAgent'] = $_SERVER["HTTP_USER_AGENT"];    $json_data = json_encode($arr);    $ali_res = ALiApi::run($json_data);    if ($ali_res !== 'error') {        // æœ‰é£é™©        if ($ali_res === false) {            $this->ajaxReturn([                'errno'=>401,                'msg'=>'æ‰‹æœºå·ç å¼‚å¸¸ï¼Œè¯·è”ç³»å®¢æœã€‚'            ]);        }    }}</code></pre><h3 id="demoåœ°å€"><a href="#demoåœ°å€" class="headerlink" title="demoåœ°å€"></a>demoåœ°å€</h3><p><a href="https://github.com/WXiangQian/laravel-api">https://github.com/WXiangQian/laravel-api</a></p><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><blockquote><p>æœ¬å®æˆ˜æ˜¯ç”¨phpè¯­è¨€ç®€å•æ¥å…¥äº†é˜¿é‡Œäº‘æ³¨å†Œé£é™©è¯†åˆ«ï¼Œä½¿ç”¨æ¡†æ¶ä¸ºlaravelæ¡†æ¶ï¼Œä»…ä¾›å‚è€ƒï¼Œçµæ´»è¿ç”¨æ–¹å¯é€‚ç”¨äºæ‰€æœ‰phpæ¡†æ¶ï¼Œå¸Œæœ›å¤§å®¶é€šè¿‡æ­¤æ–‡å¯ä»¥å¾—åˆ°æ”¶è·ã€‚</p></blockquote><p><a href="https://juejin.im/post/5ddf3559e51d4543172e8208">åŸæ–‡é“¾æ¥ï¼š</a><a href="https://juejin.im/post/5ddf3559e51d4543172e8208">https://juejin.im/post/5ddf3559e51d4543172e8208</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis-PHPå®æˆ˜ç¯‡â€”â€”å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯</title>
      <link href="2019/11/25/redis/Redis-PHP%E5%AE%9E%E6%88%98%E7%AF%87%E2%80%94%E2%80%94%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
      <url>2019/11/25/redis/Redis-PHP%E5%AE%9E%E6%88%98%E7%AF%87%E2%80%94%E2%80%94%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<p>Redis-PHPå®æˆ˜ç¯‡â€”â€”å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯<br> <a id="more"></a></p><h2 id="redis-phpå®æˆ˜"><a href="#redis-phpå®æˆ˜" class="headerlink" title="redis-phpå®æˆ˜"></a>redis-phpå®æˆ˜</h2><pre><code>public function getRedis(){    $redis = new \Redis();    $redis-&gt;connect(env("REDIS_MASTER",'127.0.0.1'),6379);    $redis-&gt;auth(env('REDIS_AUTH','123456'));    return $redis;}$redis = $this-&gt;getRedis();</code></pre><h3 id="String-ç®€å•å­—ç¬¦ä¸²ç¼“å­˜å®æˆ˜"><a href="#String-ç®€å•å­—ç¬¦ä¸²ç¼“å­˜å®æˆ˜" class="headerlink" title="String ç®€å•å­—ç¬¦ä¸²ç¼“å­˜å®æˆ˜"></a>String ç®€å•å­—ç¬¦ä¸²ç¼“å­˜å®æˆ˜</h3><pre><code>$key  = 'str:name';// å­—ç¬¦ä¸²ç¼“å­˜å®æˆ˜$redis-&gt;set($key, 'WXiangQian');$name = $redis-&gt;get($key);echo $name; // WXiangQian$redis-&gt;expire($strCacheKey, 30);  # è®¾ç½®30ç§’åè¿‡æœŸ</code></pre><h3 id="HSET-ç®€å•å“ˆå¸Œç¼“å­˜å®æˆ˜"><a href="#HSET-ç®€å•å“ˆå¸Œç¼“å­˜å®æˆ˜" class="headerlink" title="HSET  ç®€å•å“ˆå¸Œç¼“å­˜å®æˆ˜"></a>HSET  ç®€å•å“ˆå¸Œç¼“å­˜å®æˆ˜</h3><pre><code>$key = 'hset:name'$uid = 1;$redis-&gt;hSet($key, $uid, 'WXiangQian');$data = $redis-&gt;hGet($key, 1);print_r($data); //è¾“å‡ºæ•°æ®</code></pre><h3 id="æ’è¡Œæ¦œå®æˆ˜"><a href="#æ’è¡Œæ¦œå®æˆ˜" class="headerlink" title="æ’è¡Œæ¦œå®æˆ˜"></a>æ’è¡Œæ¦œå®æˆ˜</h3><pre><code>$strKey = 'zset:ranking_list';//å­˜å‚¨æ•°æ®$redis-&gt;zadd($strKey, '50', json_encode(['name' =&gt; 'Tom']));$redis-&gt;zadd($strKey, '70', json_encode(['name' =&gt; 'John']));$redis-&gt;zadd($strKey, '90', json_encode(['name' =&gt; 'Jerry']));$redis-&gt;zadd($strKey, '30', json_encode(['name' =&gt; 'Job']));$redis-&gt;zadd($strKey, '100', json_encode(['name' =&gt; 'LiMing']));$dataOne = $redis-&gt;ZREVRANGE($strKey, 0, -1, true);echo "---- {$strKey}ç”±å¤§åˆ°å°çš„æ’åº ---- &lt;br /&gt;&lt;br /&gt;";print_r($dataOne);$dataTwo = $redis-&gt;ZRANGE($strKey, 0, -1, true);echo "&lt;br /&gt;&lt;br /&gt;---- {$strKey}ç”±å°åˆ°å¤§çš„æ’åº ---- &lt;br /&gt;&lt;br /&gt;";print_r($dataTwo);</code></pre><h3 id="liståˆ†é¡µå®æˆ˜"><a href="#liståˆ†é¡µå®æˆ˜" class="headerlink" title="liståˆ†é¡µå®æˆ˜"></a>liståˆ†é¡µå®æˆ˜</h3><pre><code>$strKey = 'list:data';$page = $request-&gt;input('page',1);$pageSize = $request-&gt;input('limit',50);$limit_s = ($page-1) * $pageSize;$limit_e = ($limit_s + $pageSize) - 1;$data = $tools-&gt;redis-&gt;lRange($strKey,$limit_s,$limit_e);print_r($data);</code></pre><h3 id="ç®€å•å­—ç¬¦ä¸²æ‚²è§‚é”å®æˆ˜"><a href="#ç®€å•å­—ç¬¦ä¸²æ‚²è§‚é”å®æˆ˜" class="headerlink" title="ç®€å•å­—ç¬¦ä¸²æ‚²è§‚é”å®æˆ˜"></a>ç®€å•å­—ç¬¦ä¸²æ‚²è§‚é”å®æˆ˜</h3><p>è§£é‡Šï¼šæ‚²è§‚é”(Pessimistic Lock), é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆæ‚²è§‚ã€‚</p><p>æ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ã€‚</p><p>åœºæ™¯ï¼šå¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨äº†ç¼“å­˜ä¸”å¯¹ç¼“å­˜è®¾ç½®äº†è¶…æ—¶æ—¶é—´ã€‚</p><p>å½“å¹¶å‘é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰é”æœºåˆ¶ï¼Œé‚£ä¹ˆç¼“å­˜è¿‡æœŸçš„ç¬é—´ï¼Œ</p><p>å¤§é‡å¹¶å‘è¯·æ±‚ä¼šç©¿é€ç¼“å­˜ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ï¼Œé€ æˆé›ªå´©æ•ˆåº”ã€‚</p><pre><code>/** * è·å–é” * @param  String  $key    é”æ ‡è¯† * @param  Int     $expire é”è¿‡æœŸæ—¶é—´ * @return Boolean */public function lock($key = '', $expire = 5) {    $is_lock = $this-&gt;_redis-&gt;setnx($key, time()+$expire);    //ä¸èƒ½è·å–é”    if(!$is_lock){        //åˆ¤æ–­é”æ˜¯å¦è¿‡æœŸ        $lock_time = $this-&gt;_redis-&gt;get($key);        //é”å·²è¿‡æœŸï¼Œåˆ é™¤é”ï¼Œé‡æ–°è·å–        if (time() &gt; $lock_time) {            unlock($key);            $is_lock = $this-&gt;_redis-&gt;setnx($key, time() + $expire);        }    }    return $is_lock? true : false;}/** * é‡Šæ”¾é” * @param  String  $key é”æ ‡è¯† * @return Boolean */public function unlock($key = ''){    return $this-&gt;_redis-&gt;del($key);}// å®šä¹‰é”æ ‡è¯†$key = 'str:lock';// è·å–é”$is_lock = lock($key, 10);if ($is_lock) {    echo 'get lock success&lt;br&gt;';    echo 'do sth..&lt;br&gt;';    sleep(5);    echo 'success&lt;br&gt;';    unlock($key);} else { //è·å–é”å¤±è´¥    echo 'request too frequently&lt;br&gt;';}</code></pre><h3 id="ç®€å•äº‹åŠ¡çš„ä¹è§‚é”å®æˆ˜"><a href="#ç®€å•äº‹åŠ¡çš„ä¹è§‚é”å®æˆ˜" class="headerlink" title="ç®€å•äº‹åŠ¡çš„ä¹è§‚é”å®æˆ˜"></a>ç®€å•äº‹åŠ¡çš„ä¹è§‚é”å®æˆ˜</h3><p>è§£é‡Šï¼šä¹è§‚é”(Optimistic Lock), é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ã€‚</p><p>æ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚</p><p>watchå‘½ä»¤ä¼šç›‘è§†ç»™å®šçš„keyï¼Œå½“execæ—¶å€™å¦‚æœç›‘è§†çš„keyä»è°ƒç”¨watchåå‘ç”Ÿè¿‡å˜åŒ–ï¼Œåˆ™æ•´ä¸ªäº‹åŠ¡ä¼šå¤±è´¥ã€‚</p><p>ä¹Ÿå¯ä»¥è°ƒç”¨watchå¤šæ¬¡ç›‘è§†å¤šä¸ªkeyã€‚è¿™æ ·å°±å¯ä»¥å¯¹æŒ‡å®šçš„keyåŠ ä¹è§‚é”äº†ã€‚</p><p>æ³¨æ„watchçš„keyæ˜¯å¯¹æ•´ä¸ªè¿æ¥æœ‰æ•ˆçš„ï¼Œäº‹åŠ¡ä¹Ÿä¸€æ ·ã€‚</p><p>å¦‚æœè¿æ¥æ–­å¼€ï¼Œç›‘è§†å’Œäº‹åŠ¡éƒ½ä¼šè¢«è‡ªåŠ¨æ¸…é™¤ã€‚</p><p>å½“ç„¶äº†execï¼Œdiscardï¼Œunwatchå‘½ä»¤éƒ½ä¼šæ¸…é™¤è¿æ¥ä¸­çš„æ‰€æœ‰ç›‘è§†ã€‚</p><pre><code>$strKey = 'str:age';$redis-&gt;set($strKey,10);$age = $redis-&gt;get($strKey);echo "---- Current Age:{$age} ---- &lt;br/&gt;&lt;br/&gt;"; // 10$redis-&gt;watch($strKey);// å¼€å¯äº‹åŠ¡$redis-&gt;multi();//-------------------------------/** * åœ¨è¿™ä¸ªæ—¶å€™æ–°å¼€äº†ä¸€ä¸ªæ–°ä¼šè¯æ‰§è¡Œ * * redis-cli æ‰§è¡Œ $redis-&gt;set($strKey,30);  //æ–°ä¼šè¯ æ¨¡æ‹Ÿå…¶ä»–ç»ˆç«¯ * è¿™æ—¶å€™$age=30; //30 *///-------------------------------$redis-&gt;set($strKey,20);$redis-&gt;exec();$age = $redis-&gt;get($strKey);echo "---- Current Age:{$age} ---- &lt;br/&gt;&lt;br/&gt;"; //30//å½“execæ—¶å€™å¦‚æœç›‘è§†çš„keyä»è°ƒç”¨watchåå‘ç”Ÿè¿‡å˜åŒ–ï¼Œåˆ™æ•´ä¸ªäº‹åŠ¡ä¼šå¤±è´¥</code></pre><h3 id="æ‚²è§‚é”ä¸ä¹è§‚é”çš„é€‚ç”¨åœºæ™¯ï¼š"><a href="#æ‚²è§‚é”ä¸ä¹è§‚é”çš„é€‚ç”¨åœºæ™¯ï¼š" class="headerlink" title="æ‚²è§‚é”ä¸ä¹è§‚é”çš„é€‚ç”¨åœºæ™¯ï¼š"></a>æ‚²è§‚é”ä¸ä¹è§‚é”çš„é€‚ç”¨åœºæ™¯ï¼š</h3><blockquote><p>æ‚²è§‚é”ï¼šæ¯”è¾ƒé€‚åˆå†™å…¥æ“ä½œæ¯”è¾ƒé¢‘ç¹çš„åœºæ™¯ï¼Œå¦‚æœå‡ºç°å¤§é‡çš„è¯»å–æ“ä½œï¼Œæ¯æ¬¡è¯»å–çš„æ—¶å€™éƒ½ä¼šè¿›è¡ŒåŠ é”ï¼Œè¿™æ ·ä¼šå¢åŠ å¤§é‡çš„é”çš„å¼€é”€ï¼Œé™ä½äº†ç³»ç»Ÿçš„ååé‡ã€‚</p><p>ä¹è§‚é”ï¼šæ¯”è¾ƒé€‚åˆè¯»å–æ“ä½œæ¯”è¾ƒé¢‘ç¹çš„åœºæ™¯ï¼Œå¦‚æœå‡ºç°å¤§é‡çš„å†™å…¥æ“ä½œï¼Œæ•°æ®å‘ç”Ÿå†²çªçš„å¯èƒ½æ€§å°±ä¼šå¢å¤§ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œåº”ç”¨å±‚éœ€è¦ä¸æ–­çš„é‡æ–°è·å–æ•°æ®ï¼Œè¿™æ ·ä¼šå¢åŠ å¤§é‡çš„æŸ¥è¯¢æ“ä½œï¼Œé™ä½äº†ç³»ç»Ÿçš„ååé‡ã€‚</p><p>æ€»ç»“ï¼šä¸¤ç§æ‰€å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œè¯»å–é¢‘ç¹ä½¿ç”¨ä¹è§‚é”ï¼Œå†™å…¥é¢‘ç¹ä½¿ç”¨æ‚²è§‚é”ã€‚</p></blockquote><p>åƒä¹è§‚é”é€‚ç”¨äºå†™æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œå³å†²çªçœŸçš„å¾ˆå°‘å‘ç”Ÿçš„æ—¶å€™ï¼Œè¿™æ ·å¯ä»¥çœå»äº†é”çš„å¼€é”€ï¼ŒåŠ å¤§äº†ç³»ç»Ÿçš„æ•´ä¸ªååé‡ã€‚ä½†å¦‚æœç»å¸¸äº§ç”Ÿå†²çªï¼Œä¸Šå±‚åº”ç”¨ä¼šä¸æ–­çš„è¿›è¡Œretryï¼Œè¿™æ ·åå€’æ˜¯é™ä½äº†æ€§èƒ½ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ç”¨æ‚²è§‚é”å°±æ¯”è¾ƒåˆé€‚,ä¹‹æ‰€ä»¥ç”¨æ‚²è§‚é”å°±æ˜¯å› ä¸ºä¸¤ä¸ªç”¨æˆ·æ›´æ–°åŒä¸€æ¡æ•°æ®çš„æ¦‚ç‡é«˜ï¼Œä¹Ÿå°±æ˜¯å†²çªæ¯”è¾ƒä¸¥é‡çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥æ‰ç”¨æ‚²è§‚é”.</p><p>æ‚²è§‚é”æ¯”è¾ƒé€‚åˆå¼ºä¸€è‡´æ€§çš„åœºæ™¯ï¼Œä½†æ•ˆç‡æ¯”è¾ƒä½ï¼Œç‰¹åˆ«æ˜¯è¯»çš„å¹¶å‘ä½ã€‚ä¹è§‚é”åˆ™é€‚ç”¨äºè¯»å¤šå†™å°‘ï¼Œå¹¶å‘å†²çªå°‘çš„åœºæ™¯</p><h2 id="redisç¯‡é›†åˆ"><a href="#redisç¯‡é›†åˆ" class="headerlink" title="redisç¯‡é›†åˆ"></a>redisç¯‡é›†åˆ</h2><p><a href="https://wxiangqian.blog.csdn.net/article/details/102595213">RedisåŸºç¡€ç¯‡â€”â€”Rediså®‰è£…</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102717629">RedisåŸºç¡€ç¯‡â€”â€”ä»‹ç»ä»¥åŠäº†è§£</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102902682">RedisåŸºç¡€ç¯‡â€”â€”åŸºæœ¬ç”¨æ³•</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103015298">Redisè¿›é˜¶ç¯‡â€”â€”PHPè¿æ¥redis</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103243250">Redis-PHPå®æˆ˜ç¯‡â€”â€”å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisè¿›é˜¶ç¯‡â€”â€”PHPè¿æ¥redis</title>
      <link href="2019/11/20/redis/Redis%E8%BF%9B%E9%98%B6%E7%AF%87%E2%80%94%E2%80%94PHP%E8%BF%9E%E6%8E%A5redis/"/>
      <url>2019/11/20/redis/Redis%E8%BF%9B%E9%98%B6%E7%AF%87%E2%80%94%E2%80%94PHP%E8%BF%9E%E6%8E%A5redis/</url>
      
        <content type="html"><![CDATA[<p>Redisè¿›é˜¶ç¯‡â€”â€”PHPè¿æ¥redis<br> <a id="more"></a></p><h2 id="PHPè¿æ¥redis"><a href="#PHPè¿æ¥redis" class="headerlink" title="PHPè¿æ¥redis"></a>PHPè¿æ¥redis</h2><h3 id="æ­£å¸¸PHPè¿æ¥redis"><a href="#æ­£å¸¸PHPè¿æ¥redis" class="headerlink" title="æ­£å¸¸PHPè¿æ¥redis"></a>æ­£å¸¸PHPè¿æ¥redis</h3><pre><code>public function getRedis(){    $redis = new \Redis();    $redis-&gt;connect(env("REDIS_MASTER",'127.0.0.1'),6379);    $redis-&gt;auth(env('REDIS_AUTH','123456'));    return $redis;}</code></pre><h3 id="è®¾ç½®ä¸€ä¸ªåªè¯»ç”¨æˆ·ï¼Œåªç”¨æ¥è¯»ï¼Œä¸å¯å†™å…¥ï¼Œåˆ™æ˜¯ä¸€ä¸‹ä»£ç "><a href="#è®¾ç½®ä¸€ä¸ªåªè¯»ç”¨æˆ·ï¼Œåªç”¨æ¥è¯»ï¼Œä¸å¯å†™å…¥ï¼Œåˆ™æ˜¯ä¸€ä¸‹ä»£ç " class="headerlink" title="è®¾ç½®ä¸€ä¸ªåªè¯»ç”¨æˆ·ï¼Œåªç”¨æ¥è¯»ï¼Œä¸å¯å†™å…¥ï¼Œåˆ™æ˜¯ä¸€ä¸‹ä»£ç "></a>è®¾ç½®ä¸€ä¸ªåªè¯»ç”¨æˆ·ï¼Œåªç”¨æ¥è¯»ï¼Œä¸å¯å†™å…¥ï¼Œåˆ™æ˜¯ä¸€ä¸‹ä»£ç </h3><pre><code>public function getRedis(){    $redis = new \Redis();    $redis-&gt;connect(env("REDIS_MASTER",'127.0.0.1'),6379);    $auth = env('REDIS_ONLY_READ_USER').":".env('REDIS_ONLY_READ_PWD');    $redis-&gt;auth($auth);    return $redis;}</code></pre><h3 id="ç®€å•ä½¿ç”¨redis"><a href="#ç®€å•ä½¿ç”¨redis" class="headerlink" title="ç®€å•ä½¿ç”¨redis"></a>ç®€å•ä½¿ç”¨redis</h3><pre><code>$this-&gt;getRedis()-&gt;set('name','WXiangQian');$name = $this-&gt;getRedis()-&gt;get('name');echo $name; // WXiangQian</code></pre><h2 id="redisç¯‡é›†åˆ"><a href="#redisç¯‡é›†åˆ" class="headerlink" title="redisç¯‡é›†åˆ"></a>redisç¯‡é›†åˆ</h2><p><a href="https://wxiangqian.blog.csdn.net/article/details/102595213">RedisåŸºç¡€ç¯‡â€”â€”Rediså®‰è£…</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102717629">RedisåŸºç¡€ç¯‡â€”â€”ä»‹ç»ä»¥åŠäº†è§£</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102902682">RedisåŸºç¡€ç¯‡â€”â€”åŸºæœ¬ç”¨æ³•</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103015298">Redisè¿›é˜¶ç¯‡â€”â€”PHPè¿æ¥redis</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103243250">Redis-PHPå®æˆ˜ç¯‡â€”â€”å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisåŸºç¡€ç¯‡â€”â€”åŸºæœ¬ç”¨æ³•</title>
      <link href="2019/11/14/redis/Redis%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
      <url>2019/11/14/redis/Redis%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>RedisåŸºç¡€ç¯‡â€”â€”åŸºæœ¬ç”¨æ³•<br><a id="more"></a></p><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><h3 id="Redis-é”®-key"><a href="#Redis-é”®-key" class="headerlink" title="Redis é”®(key)"></a>Redis é”®(key)</h3><p>Redis é”®å‘½ä»¤ç”¨äºç®¡ç† redis çš„é”®ã€‚</p><h4 id="Redis-DEL-å‘½ä»¤"><a href="#Redis-DEL-å‘½ä»¤" class="headerlink" title="Redis DEL å‘½ä»¤"></a>Redis DEL å‘½ä»¤</h4><p>Redis DEL å‘½ä»¤ç”¨äºåˆ é™¤å·²å­˜åœ¨çš„é”®ã€‚ä¸å­˜åœ¨çš„ key ä¼šè¢«å¿½ç•¥ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; DEL KEY_NAME</code></pre><blockquote><p>åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ DEL æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œ KEY_NAME æ˜¯ä¸€ä¸ªé”®ã€‚ å¦‚æœé”®è¢«åˆ é™¤æˆåŠŸï¼Œå‘½ä»¤æ‰§è¡Œåè¾“å‡º (integer) 1ï¼Œå¦åˆ™å°†è¾“å‡º (integer) 0</p></blockquote><h4 id="Redis-EXISTS-å‘½ä»¤"><a href="#Redis-EXISTS-å‘½ä»¤" class="headerlink" title="Redis EXISTS å‘½ä»¤"></a>Redis EXISTS å‘½ä»¤</h4><p>Redis EXISTS å‘½ä»¤ç”¨äºæ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; EXISTS KEY_NAME</code></pre><blockquote><p>è‹¥ key å­˜åœ¨è¿”å› 1 ï¼Œå¦åˆ™è¿”å› 0 ã€‚</p></blockquote><h4 id="Redis-Expire-å‘½ä»¤"><a href="#Redis-Expire-å‘½ä»¤" class="headerlink" title="Redis Expire å‘½ä»¤"></a>Redis Expire å‘½ä»¤</h4><p>Redis Expire å‘½ä»¤ç”¨äºè®¾ç½® key çš„è¿‡æœŸæ—¶é—´ï¼Œkey è¿‡æœŸåå°†ä¸å†å¯ç”¨ã€‚å•ä½ä»¥ç§’è®¡ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; Expire KEY_NAME TIME_IN_SECONDS</code></pre><blockquote><p>è®¾ç½®æˆåŠŸè¿”å› 1 ã€‚ å½“ key ä¸å­˜åœ¨æˆ–è€…ä¸èƒ½ä¸º key è®¾ç½®è¿‡æœŸæ—¶é—´æ—¶(æ¯”å¦‚åœ¨ä½äº 2.1.3 ç‰ˆæœ¬çš„ Redis ä¸­ä½ å°è¯•æ›´æ–° key çš„è¿‡æœŸæ—¶é—´)è¿”å› 0 ã€‚</p></blockquote><h4 id="Redis-Type-å‘½ä»¤"><a href="#Redis-Type-å‘½ä»¤" class="headerlink" title="Redis Type å‘½ä»¤"></a>Redis Type å‘½ä»¤</h4><p>Redis Type å‘½ä»¤ç”¨äºè¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; TYPE KEY_NAME</code></pre><p>è¿”å› key çš„æ•°æ®ç±»å‹ï¼Œæ•°æ®ç±»å‹æœ‰ï¼š</p><ol><li>none (keyä¸å­˜åœ¨)</li><li>string (å­—ç¬¦ä¸²)</li><li>list (åˆ—è¡¨)</li><li>set (é›†åˆ)</li><li>zset (æœ‰åºé›†)</li><li>hash (å“ˆå¸Œè¡¨)</li></ol><h3 id="Redis-å­—ç¬¦ä¸²-String"><a href="#Redis-å­—ç¬¦ä¸²-String" class="headerlink" title="Redis å­—ç¬¦ä¸²(String)"></a>Redis å­—ç¬¦ä¸²(String)</h3><p>Redis å­—ç¬¦ä¸²æ•°æ®ç±»å‹çš„ç›¸å…³å‘½ä»¤ç”¨äºç®¡ç† redis å­—ç¬¦ä¸²å€¼</p><h4 id="Redis-SET-å‘½ä»¤"><a href="#Redis-SET-å‘½ä»¤" class="headerlink" title="Redis SET å‘½ä»¤"></a>Redis SET å‘½ä»¤</h4><p>Redis SET å‘½ä»¤ç”¨äºè®¾ç½®ç»™å®š key çš„å€¼ã€‚å¦‚æœ key å·²ç»å­˜å‚¨å…¶ä»–å€¼ï¼Œ SET å°±è¦†å†™æ—§å€¼ï¼Œä¸”æ— è§†ç±»å‹ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; SET KEY_NAME VALUEOK</code></pre><blockquote><p>åœ¨ Redis 2.6.12 ä»¥å‰ç‰ˆæœ¬ï¼Œ SET å‘½ä»¤æ€»æ˜¯è¿”å› OK ã€‚<br>ä» Redis 2.6.12 ç‰ˆæœ¬å¼€å§‹ï¼Œ SET åœ¨è®¾ç½®æ“ä½œæˆåŠŸå®Œæˆæ—¶ï¼Œæ‰è¿”å› OK </p></blockquote><h4 id="Redis-Get-å‘½ä»¤"><a href="#Redis-Get-å‘½ä»¤" class="headerlink" title="Redis Get å‘½ä»¤"></a>Redis Get å‘½ä»¤</h4><p>Redis Get å‘½ä»¤ç”¨äºè·å–æŒ‡å®š key çš„å€¼ã€‚</p><pre><code>redis&gt; GET db(nil)redis&gt; SET db redisOKredis&gt; GET db"redis"</code></pre><blockquote><p>è¿”å› key çš„å€¼ï¼Œå¦‚æœ key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å› nilã€‚ å¦‚æœ key ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p></blockquote><h4 id="Redis-Incrby-å‘½ä»¤"><a href="#Redis-Incrby-å‘½ä»¤" class="headerlink" title="Redis Incrby å‘½ä»¤"></a>Redis Incrby å‘½ä»¤</h4><p>Redis Incrby å‘½ä»¤å°† key ä¸­å‚¨å­˜çš„æ•°å­—åŠ ä¸ŠæŒ‡å®šçš„å¢é‡å€¼ã€‚</p><p>å¦‚æœ key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œç„¶åå†æ‰§è¡Œ INCRBY å‘½ä»¤ã€‚</p><p>å¦‚æœå€¼åŒ…å«é”™è¯¯çš„ç±»å‹ï¼Œæˆ–å­—ç¬¦ä¸²ç±»å‹çš„å€¼ä¸èƒ½è¡¨ç¤ºä¸ºæ•°å­—ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>æœ¬æ“ä½œçš„å€¼é™åˆ¶åœ¨ 64 ä½(bit)æœ‰ç¬¦å·æ•°å­—è¡¨ç¤ºä¹‹å†…ã€‚</p><pre><code>redis&gt; SET rank 50OKredis&gt; INCRBY rank 20(integer) 70redis&gt; GET rank"70"</code></pre><blockquote><p>åŠ ä¸ŠæŒ‡å®šçš„å¢é‡å€¼ä¹‹åï¼Œ key çš„å€¼ã€‚</p></blockquote><h4 id="Redis-Decrby-å‘½ä»¤"><a href="#Redis-Decrby-å‘½ä»¤" class="headerlink" title="Redis Decrby å‘½ä»¤"></a>Redis Decrby å‘½ä»¤</h4><p>Redis Decrby å‘½ä»¤å°† key æ‰€å‚¨å­˜çš„å€¼å‡å»æŒ‡å®šçš„å‡é‡å€¼ã€‚</p><p>å¦‚æœ key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œç„¶åå†æ‰§è¡Œ DECRBY æ“ä½œã€‚</p><p>å¦‚æœå€¼åŒ…å«é”™è¯¯çš„ç±»å‹ï¼Œæˆ–å­—ç¬¦ä¸²ç±»å‹çš„å€¼ä¸èƒ½è¡¨ç¤ºä¸ºæ•°å­—ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>æœ¬æ“ä½œçš„å€¼é™åˆ¶åœ¨ 64 ä½(bit)æœ‰ç¬¦å·æ•°å­—è¡¨ç¤ºä¹‹å†…ã€‚</p><pre><code>redis&gt; SET count 100OKredis&gt; DECRBY count 20(integer) 80</code></pre><blockquote><p>å‡å»æŒ‡å®šå‡é‡å€¼ä¹‹åï¼Œ key çš„å€¼ã€‚</p></blockquote><h3 id="Redis-å“ˆå¸Œ-Hash"><a href="#Redis-å“ˆå¸Œ-Hash" class="headerlink" title="Redis å“ˆå¸Œ(Hash)"></a>Redis å“ˆå¸Œ(Hash)</h3><p>Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚</p><p>Redis ä¸­æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 232 - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ã€‚</p><h4 id="Redis-Hset-å‘½ä»¤"><a href="#Redis-Hset-å‘½ä»¤" class="headerlink" title="Redis Hset å‘½ä»¤"></a>Redis Hset å‘½ä»¤</h4><p>Redis Hset å‘½ä»¤ç”¨äºä¸ºå“ˆå¸Œè¡¨ä¸­çš„å­—æ®µèµ‹å€¼ ã€‚</p><p>å¦‚æœå“ˆå¸Œè¡¨ä¸å­˜åœ¨ï¼Œä¸€ä¸ªæ–°çš„å“ˆå¸Œè¡¨è¢«åˆ›å»ºå¹¶è¿›è¡Œ HSET æ“ä½œã€‚</p><p>å¦‚æœå­—æ®µå·²ç»å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œæ—§å€¼å°†è¢«è¦†ç›–ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; HSET myhash field1 "foo"OK</code></pre><blockquote><p>å¦‚æœå­—æ®µæ˜¯å“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªæ–°å»ºå­—æ®µï¼Œå¹¶ä¸”å€¼è®¾ç½®æˆåŠŸï¼Œè¿”å› 1 ã€‚ å¦‚æœå“ˆå¸Œè¡¨ä¸­åŸŸå­—æ®µå·²ç»å­˜åœ¨ä¸”æ—§å€¼å·²è¢«æ–°å€¼è¦†ç›–ï¼Œè¿”å› 0 ã€‚</p></blockquote><h4 id="Redis-Hget-å‘½ä»¤"><a href="#Redis-Hget-å‘½ä»¤" class="headerlink" title="Redis Hget å‘½ä»¤"></a>Redis Hget å‘½ä»¤</h4><p>Redis Hget å‘½ä»¤ç”¨äºè¿”å›å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼ã€‚</p><pre><code>redis&gt; HGET myhash field1"foo"</code></pre><blockquote><p>è¿”å›ç»™å®šå­—æ®µçš„å€¼ã€‚å¦‚æœç»™å®šçš„å­—æ®µæˆ– key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å› nil ã€‚</p></blockquote><h4 id="Redis-Hgetall-å‘½ä»¤"><a href="#Redis-Hgetall-å‘½ä»¤" class="headerlink" title="Redis Hgetall å‘½ä»¤"></a>Redis Hgetall å‘½ä»¤</h4><p>Redis Hgetall å‘½ä»¤ç”¨äºè¿”å›å“ˆå¸Œè¡¨ä¸­ï¼Œæ‰€æœ‰çš„å­—æ®µå’Œå€¼ã€‚</p><p>åœ¨è¿”å›å€¼é‡Œï¼Œç´§è·Ÿæ¯ä¸ªå­—æ®µå(field name)ä¹‹åæ˜¯å­—æ®µçš„å€¼(value)ï¼Œæ‰€ä»¥è¿”å›å€¼çš„é•¿åº¦æ˜¯å“ˆå¸Œè¡¨å¤§å°çš„ä¸¤å€ã€‚</p><pre><code>redis&gt; HSET myhash field1 "Hello"(integer) 1redis&gt; HSET myhash field2 "World"(integer) 1redis&gt; HGETALL myhash1) "field1"2) "Hello"3) "field2"4) "World"redis&gt;</code></pre><blockquote><p>ä»¥åˆ—è¡¨å½¢å¼è¿”å›å“ˆå¸Œè¡¨çš„å­—æ®µåŠå­—æ®µå€¼ã€‚ è‹¥ key ä¸å­˜åœ¨ï¼Œè¿”å›ç©ºåˆ—è¡¨ã€‚</p></blockquote><h3 id="Redis-åˆ—è¡¨-List"><a href="#Redis-åˆ—è¡¨-List" class="headerlink" title="Redis åˆ—è¡¨(List)"></a>Redis åˆ—è¡¨(List)</h3><p>Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰</p><p>ä¸€ä¸ªåˆ—è¡¨æœ€å¤šå¯ä»¥åŒ…å« 232 - 1 ä¸ªå…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨è¶…è¿‡40äº¿ä¸ªå…ƒç´ )ã€‚</p><h4 id="Redis-Rpush-å‘½ä»¤"><a href="#Redis-Rpush-å‘½ä»¤" class="headerlink" title="Redis Rpush å‘½ä»¤"></a>Redis Rpush å‘½ä»¤</h4><p>Redis Rpush å‘½ä»¤ç”¨äºå°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å°¾éƒ¨(æœ€å³è¾¹)ã€‚</p><p>å¦‚æœåˆ—è¡¨ä¸å­˜åœ¨ï¼Œä¸€ä¸ªç©ºåˆ—è¡¨ä¼šè¢«åˆ›å»ºå¹¶æ‰§è¡Œ RPUSH æ“ä½œã€‚ å½“åˆ—è¡¨å­˜åœ¨ä½†ä¸æ˜¯åˆ—è¡¨ç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>æ³¨æ„ï¼šåœ¨ Redis 2.4 ç‰ˆæœ¬ä»¥å‰çš„ RPUSH å‘½ä»¤ï¼Œéƒ½åªæ¥å—å•ä¸ª value å€¼ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; RPUSH mylist "hello"(integer) 1redis 127.0.0.1:6379&gt; RPUSH mylist "hello"(integer) 2redis 127.0.0.1:6379&gt; RPUSH mylist "foo"(integer) 3redis 127.0.0.1:6379&gt; RPUSH mylist "bar"(integer) 4</code></pre><blockquote><p>æ‰§è¡Œ RPUSH æ“ä½œåï¼Œåˆ—è¡¨çš„é•¿åº¦ã€‚</p></blockquote><h4 id="Redis-Ltrim-å‘½ä»¤"><a href="#Redis-Ltrim-å‘½ä»¤" class="headerlink" title="Redis Ltrim å‘½ä»¤"></a>Redis Ltrim å‘½ä»¤</h4><p>Redis Ltrim å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚</p><p>ä¸‹æ ‡ 0 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä»¥ 1 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºåˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ -2 è¡¨ç¤ºåˆ—è¡¨çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; LRANGE mylist 0 -11) "hello"2) "foo"3) "bar"</code></pre><blockquote><p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œè¿”å› ok ã€‚</p></blockquote><h3 id="Redis-é›†åˆ-Set"><a href="#Redis-é›†åˆ-Set" class="headerlink" title="Redis é›†åˆ(Set)"></a>Redis é›†åˆ(Set)</h3><p>Redis çš„ Set æ˜¯ String ç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œè¿™å°±æ„å‘³ç€é›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ã€‚</p><p>Redis ä¸­é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><p>é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚</p><h4 id="Redis-Sadd-å‘½ä»¤"><a href="#Redis-Sadd-å‘½ä»¤" class="headerlink" title="Redis Sadd å‘½ä»¤"></a>Redis Sadd å‘½ä»¤</h4><p>Redis Sadd å‘½ä»¤å°†ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜å…ƒç´ åŠ å…¥åˆ°é›†åˆä¸­ï¼Œå·²ç»å­˜åœ¨äºé›†åˆçš„æˆå‘˜å…ƒç´ å°†è¢«å¿½ç•¥ã€‚</p><p>å‡å¦‚é›†åˆ key ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªåªåŒ…å«æ·»åŠ çš„å…ƒç´ ä½œæˆå‘˜çš„é›†åˆã€‚</p><p>å½“é›†åˆ key ä¸æ˜¯é›†åˆç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>æ³¨æ„ï¼šåœ¨ Redis2.4 ç‰ˆæœ¬ä»¥å‰ï¼Œ SADD åªæ¥å—å•ä¸ªæˆå‘˜å€¼ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; SADD myset "hello"(integer) 1redis 127.0.0.1:6379&gt; SADD myset "foo"(integer) 1redis 127.0.0.1:6379&gt; SADD myset "hello"(integer) 0</code></pre><blockquote><p>è¢«æ·»åŠ åˆ°é›†åˆä¸­çš„æ–°å…ƒç´ çš„æ•°é‡ï¼Œä¸åŒ…æ‹¬è¢«å¿½ç•¥çš„å…ƒç´ ã€‚</p></blockquote><h4 id="Redis-Smembers-å‘½ä»¤"><a href="#Redis-Smembers-å‘½ä»¤" class="headerlink" title="Redis Smembers å‘½ä»¤"></a>Redis Smembers å‘½ä»¤</h4><p>Redis Smembers å‘½ä»¤è¿”å›é›†åˆä¸­çš„æ‰€æœ‰çš„æˆå‘˜ã€‚ ä¸å­˜åœ¨çš„é›†åˆ key è¢«è§†ä¸ºç©ºé›†åˆã€‚</p><pre><code>redis 127.0.0.1:6379&gt; SMEMBERS myset11) "World"2) "Hello"</code></pre><blockquote><p>é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚</p></blockquote><h3 id="Redis-æœ‰åºé›†åˆ-sorted-set"><a href="#Redis-æœ‰åºé›†åˆ-sorted-set" class="headerlink" title="Redis æœ‰åºé›†åˆ(sorted set)"></a>Redis æœ‰åºé›†åˆ(sorted set)</h3><p>Redis æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚</p><p>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚</p><p>æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚</p><p>é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚ é›†åˆä¸­æœ€å¤§çš„æˆå‘˜æ•°ä¸º 232 - 1 (4294967295, æ¯ä¸ªé›†åˆå¯å­˜å‚¨40å¤šäº¿ä¸ªæˆå‘˜)ã€‚</p><h4 id="Redis-Zadd-å‘½ä»¤"><a href="#Redis-Zadd-å‘½ä»¤" class="headerlink" title="Redis Zadd å‘½ä»¤"></a>Redis Zadd å‘½ä»¤</h4><p>Redis Zadd å‘½ä»¤ç”¨äºå°†ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜å…ƒç´ åŠå…¶åˆ†æ•°å€¼åŠ å…¥åˆ°æœ‰åºé›†å½“ä¸­ã€‚</p><p>å¦‚æœæŸä¸ªæˆå‘˜å·²ç»æ˜¯æœ‰åºé›†çš„æˆå‘˜ï¼Œé‚£ä¹ˆæ›´æ–°è¿™ä¸ªæˆå‘˜çš„åˆ†æ•°å€¼ï¼Œå¹¶é€šè¿‡é‡æ–°æ’å…¥è¿™ä¸ªæˆå‘˜å…ƒç´ ï¼Œæ¥ä¿è¯è¯¥æˆå‘˜åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šã€‚</p><p>åˆ†æ•°å€¼å¯ä»¥æ˜¯æ•´æ•°å€¼æˆ–åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</p><p>å¦‚æœæœ‰åºé›†åˆ key ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºçš„æœ‰åºé›†å¹¶æ‰§è¡Œ ZADD æ“ä½œã€‚</p><p>å½“ key å­˜åœ¨ä½†ä¸æ˜¯æœ‰åºé›†ç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>æ³¨æ„ï¼š åœ¨ Redis 2.4 ç‰ˆæœ¬ä»¥å‰ï¼Œ ZADD æ¯æ¬¡åªèƒ½æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚</p><pre><code>redis&gt; ZADD myzset 1 "one"(integer) 1redis&gt; ZADD myzset 1 "uno"(integer) 1redis&gt; ZADD myzset 2 "two" 3 "three"(integer) 2</code></pre><blockquote><p>è¢«æˆåŠŸæ·»åŠ çš„æ–°æˆå‘˜çš„æ•°é‡ï¼Œä¸åŒ…æ‹¬é‚£äº›è¢«æ›´æ–°çš„ã€å·²ç»å­˜åœ¨çš„æˆå‘˜ã€‚</p></blockquote><h4 id="Redis-Zcount-å‘½ä»¤"><a href="#Redis-Zcount-å‘½ä»¤" class="headerlink" title="Redis Zcount å‘½ä»¤"></a>Redis Zcount å‘½ä»¤</h4><p>Redis Zcount å‘½ä»¤ç”¨äºè®¡ç®—æœ‰åºé›†åˆä¸­æŒ‡å®šåˆ†æ•°åŒºé—´çš„æˆå‘˜æ•°é‡ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; ZCOUNT myzset 1 3(integer) 4</code></pre><blockquote><p>åˆ†æ•°å€¼åœ¨ min å’Œ max ä¹‹é—´çš„æˆå‘˜çš„æ•°é‡ã€‚</p></blockquote><h4 id="Redis-Zrange-å‘½ä»¤"><a href="#Redis-Zrange-å‘½ä»¤" class="headerlink" title="Redis Zrange å‘½ä»¤"></a>Redis Zrange å‘½ä»¤</h4><p>Redis Zrange è¿”å›æœ‰åºé›†ä¸­ï¼ŒæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ã€‚</p><p>å…¶ä¸­æˆå‘˜çš„ä½ç½®æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)æ¥æ’åºã€‚</p><p>å…·æœ‰ç›¸åŒåˆ†æ•°å€¼çš„æˆå‘˜æŒ‰å­—å…¸åº(lexicographical order )æ¥æ’åˆ—ã€‚</p><p>å¦‚æœä½ éœ€è¦æˆå‘˜æŒ‰</p><p>å€¼é€’å‡(ä»å¤§åˆ°å°)æ¥æ’åˆ—ï¼Œè¯·ä½¿ç”¨ ZREVRANGE å‘½ä»¤ã€‚</p><p>ä¸‹æ ‡å‚æ•° start å’Œ stop éƒ½ä»¥ 0 ä¸ºåº•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ 0 è¡¨ç¤ºæœ‰åºé›†ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œä»¥ 1 è¡¨ç¤ºæœ‰åºé›†ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªæˆå‘˜ï¼Œ -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; ZRANGE salary 0 -1 WITHSCORES             # æ˜¾ç¤ºæ•´ä¸ªæœ‰åºé›†æˆå‘˜1) "jack"2) "3500"3) "tom"4) "5000"5) "boss"6) "10086"</code></pre><blockquote><p>æŒ‡å®šåŒºé—´å†…ï¼Œå¸¦æœ‰åˆ†æ•°å€¼(å¯é€‰)çš„æœ‰åºé›†æˆå‘˜çš„åˆ—è¡¨ã€‚</p></blockquote><h4 id="Redis-Zrevrange-å‘½ä»¤"><a href="#Redis-Zrevrange-å‘½ä»¤" class="headerlink" title="Redis Zrevrange å‘½ä»¤"></a>Redis Zrevrange å‘½ä»¤</h4><p>Redis Zrevrange å‘½ä»¤è¿”å›æœ‰åºé›†ä¸­ï¼ŒæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ã€‚</p><p>å…¶ä¸­æˆå‘˜çš„ä½ç½®æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ¥æ’åˆ—ã€‚</p><p>å…·æœ‰ç›¸åŒåˆ†æ•°å€¼çš„æˆå‘˜æŒ‰å­—å…¸åºçš„é€†åº(reverse lexicographical order)æ’åˆ—ã€‚</p><p>é™¤äº†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡çš„æ¬¡åºæ’åˆ—è¿™ä¸€ç‚¹å¤–ï¼Œ ZREVRANGE å‘½ä»¤çš„å…¶ä»–æ–¹é¢å’Œ ZRANGE å‘½ä»¤ä¸€æ ·ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; ZRANGE salary 0 -1 WITHSCORES        # é€’å¢æ’åˆ—1) "peter"2) "3500"3) "tom"4) "4000"5) "jack"6) "5000"redis 127.0.0.1:6379&gt; ZREVRANGE salary 0 -1 WITHSCORES     # é€’å‡æ’åˆ—1) "jack"2) "5000"3) "tom"4) "4000"5) "peter"6) "3500"</code></pre><blockquote><p>æŒ‡å®šåŒºé—´å†…ï¼Œå¸¦æœ‰åˆ†æ•°å€¼(å¯é€‰)çš„æœ‰åºé›†æˆå‘˜çš„åˆ—è¡¨ã€‚</p></blockquote><h4 id="Redis-Zscore-å‘½ä»¤"><a href="#Redis-Zscore-å‘½ä»¤" class="headerlink" title="Redis Zscore å‘½ä»¤"></a>Redis Zscore å‘½ä»¤</h4><p>Redis Zscore å‘½ä»¤è¿”å›æœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼ã€‚ å¦‚æœæˆå‘˜å…ƒç´ ä¸æ˜¯æœ‰åºé›† key çš„æˆå‘˜ï¼Œæˆ– key ä¸å­˜åœ¨ï¼Œè¿”å› nil ã€‚</p><pre><code>redis 127.0.0.1:6379&gt; ZSCORE salary peter              # æ³¨æ„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²"3500"</code></pre><blockquote><p>æˆå‘˜çš„åˆ†æ•°å€¼ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºã€‚</p></blockquote><h2 id="redisç¯‡é›†åˆ"><a href="#redisç¯‡é›†åˆ" class="headerlink" title="redisç¯‡é›†åˆ"></a>redisç¯‡é›†åˆ</h2><p><a href="https://wxiangqian.blog.csdn.net/article/details/102595213">RedisåŸºç¡€ç¯‡â€”â€”Rediså®‰è£…</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102717629">RedisåŸºç¡€ç¯‡â€”â€”ä»‹ç»ä»¥åŠäº†è§£</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102902682">RedisåŸºç¡€ç¯‡â€”â€”åŸºæœ¬ç”¨æ³•</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103015298">Redisè¿›é˜¶ç¯‡â€”â€”PHPè¿æ¥redis</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103243250">Redis-PHPå®æˆ˜ç¯‡â€”â€”å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisåŸºç¡€ç¯‡â€”â€”ä»‹ç»ä»¥åŠäº†è§£</title>
      <link href="2019/10/23/redis/Redis%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E4%BA%86%E8%A7%A3/"/>
      <url>2019/10/23/redis/Redis%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E4%BA%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>RedisåŸºç¡€ç¯‡â€”â€”ä»‹ç»ä»¥åŠäº†è§£<br><a id="more"></a></p><h2 id="RedisåŸºç¡€ç¯‡"><a href="#RedisåŸºç¡€ç¯‡" class="headerlink" title="RedisåŸºç¡€ç¯‡"></a>RedisåŸºç¡€ç¯‡</h2><h3 id="Redis-ä»‹ç»"><a href="#Redis-ä»‹ç»" class="headerlink" title="Redis ä»‹ç»"></a>Redis ä»‹ç»</h3><p>Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆBSDåè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚</p><p>Redis ä¸å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li><li>Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚</li><li>Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li></ol><h3 id="Redis-ä¼˜åŠ¿"><a href="#Redis-ä¼˜åŠ¿" class="headerlink" title="Redis ä¼˜åŠ¿"></a>Redis ä¼˜åŠ¿</h3><ol><li>æ€§èƒ½æé«˜ â€“ Redisèƒ½è¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡/s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/s ã€‚</li><li>ä¸°å¯Œçš„æ•°æ®ç±»å‹ â€“ Redisæ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ Strings, Lists, Hashes, Sets åŠ Ordered Sets æ•°æ®ç±»å‹æ“ä½œã€‚</li><li>åŸå­ â€“ Redisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ„æ€å°±æ˜¯è¦ä¹ˆæˆåŠŸæ‰§è¡Œè¦ä¹ˆå¤±è´¥å®Œå…¨ä¸æ‰§è¡Œã€‚å•ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ã€‚å¤šä¸ªæ“ä½œä¹Ÿæ”¯æŒäº‹åŠ¡ï¼Œå³åŸå­æ€§ï¼Œé€šè¿‡MULTIå’ŒEXECæŒ‡ä»¤åŒ…èµ·æ¥ã€‚</li><li>ä¸°å¯Œçš„ç‰¹æ€§ â€“ Redisè¿˜æ”¯æŒ publish/subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚</li></ol><h3 id="Redisä¸å…¶ä»–key-valueå­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#Redisä¸å…¶ä»–key-valueå­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="Redisä¸å…¶ä»–key-valueå­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>Redisä¸å…¶ä»–key-valueå­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><ol><li><p>Redisæœ‰ç€æ›´ä¸ºå¤æ‚çš„æ•°æ®ç»“æ„å¹¶ä¸”æä¾›å¯¹ä»–ä»¬çš„åŸå­æ€§æ“ä½œï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åŒäºå…¶ä»–æ•°æ®åº“çš„è¿›åŒ–è·¯å¾„ã€‚Redisçš„æ•°æ®ç±»å‹éƒ½æ˜¯åŸºäºåŸºæœ¬æ•°æ®ç»“æ„çš„åŒæ—¶å¯¹ç¨‹åºå‘˜é€æ˜ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„æŠ½è±¡ã€‚</p></li><li><p>Redisè¿è¡Œåœ¨å†…å­˜ä¸­ä½†æ˜¯å¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ‰€ä»¥åœ¨å¯¹ä¸åŒæ•°æ®é›†è¿›è¡Œé«˜é€Ÿè¯»å†™æ—¶éœ€è¦æƒè¡¡å†…å­˜ï¼Œå› ä¸ºæ•°æ®é‡ä¸èƒ½å¤§äºç¡¬ä»¶å†…å­˜ã€‚åœ¨å†…å­˜æ•°æ®åº“æ–¹é¢çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œç›¸æ¯”åœ¨ç£ç›˜ä¸Šç›¸åŒçš„å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­æ“ä½œèµ·æ¥éå¸¸ç®€å•ï¼Œè¿™æ ·Rediså¯ä»¥åšå¾ˆå¤šå†…éƒ¨å¤æ‚æ€§å¾ˆå¼ºçš„äº‹æƒ…ã€‚åŒæ—¶ï¼Œåœ¨ç£ç›˜æ ¼å¼æ–¹é¢ä»–ä»¬æ˜¯ç´§å‡‘çš„ä»¥è¿½åŠ çš„æ–¹å¼äº§ç”Ÿçš„ï¼Œå› ä¸ºä»–ä»¬å¹¶ä¸éœ€è¦è¿›è¡Œéšæœºè®¿é—®ã€‚</p></li></ol><h3 id="Redis-ç‰¹ç‚¹"><a href="#Redis-ç‰¹ç‚¹" class="headerlink" title="Redis ç‰¹ç‚¹"></a>Redis ç‰¹ç‚¹</h3><ul><li>æ”¯æŒæ•°æ®æŒä¹…åŒ–ï¼Œå¯å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ï¼Œé‡å¯æ—¶å†æ¬¡åŠ è½½</li><li>æ”¯æŒ KV ç±»å‹æ•°æ®ï¼Œä¹Ÿæ”¯æŒå…¶ä»–ä¸°å¯Œçš„æ•°æ®ç»“æ„å­˜å‚¨</li><li>æ”¯æŒæ•°æ®å¤‡ä»½ï¼Œå³ master-slave æ¨¡å¼çš„æ•°æ®å¤‡ä»½</li></ul><h3 id="Redis-æ”¯æŒå“ªäº›æ•°æ®ç»“æ„"><a href="#Redis-æ”¯æŒå“ªäº›æ•°æ®ç»“æ„" class="headerlink" title="Redis æ”¯æŒå“ªäº›æ•°æ®ç»“æ„"></a>Redis æ”¯æŒå“ªäº›æ•°æ®ç»“æ„</h3><ul><li><p>STRINGï¼šå­—ç¬¦ä¸²ã€æ•´æ•°æˆ–æµ®ç‚¹æ•°</p></li><li><p>LISTï¼šåˆ—è¡¨ï¼Œå¯å­˜å‚¨å¤šä¸ªç›¸åŒçš„å­—ç¬¦ä¸²</p></li><li><p>SETï¼šé›†åˆï¼Œå­˜å‚¨ä¸åŒå…ƒç´ ï¼Œæ— åºæ’åˆ—</p></li><li><p>HASHï¼šæ•£åˆ—è¡¨ï¼Œå­˜å‚¨é”®å€¼å¯¹ä¹‹é—´çš„æ˜ å°„ï¼Œæ— åºæ’åˆ—</p></li><li><p>ZSETï¼šæœ‰åºé›†åˆï¼Œå­˜å‚¨é”®å€¼å¯¹ï¼Œæœ‰åºæ’åˆ—</p></li></ul><h3 id="Redis-ä¸-Memcache-åŒºåˆ«"><a href="#Redis-ä¸-Memcache-åŒºåˆ«" class="headerlink" title="Redis ä¸ Memcache åŒºåˆ«"></a>Redis ä¸ Memcache åŒºåˆ«</h3><div class="table-container"><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Redis</th><th>Memcache</th></tr></thead><tbody><tr><td>æ•°æ®ç»“æ„</td><td>ä¸°å¯Œæ•°æ®ç±»å‹</td><td>åªæ”¯æŒç®€å• KV æ•°æ®ç±»å‹</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>äº‹åŠ¡</td><td>cas</td></tr><tr><td>æŒä¹…æ€§</td><td>å¿«ç…§/AOF</td><td>ä¸æ”¯æŒ</td></tr><tr><td>ç½‘ç»œIO</td><td>å•çº¿ç¨‹ IO å¤ç”¨</td><td>å¤šçº¿ç¨‹ã€éé˜»å¡ IO å¤ç”¨</td></tr><tr><td>å†…å­˜ç®¡ç†æœºåˆ¶</td><td>ç°åœºç”³è¯·å†…å­˜</td><td>é¢„åˆ†é…å†…å­˜</td></tr></tbody></table></div><h3 id="ä¸ºä»€ä¹ˆ-Redis-æ˜¯å•çº¿ç¨‹çš„"><a href="#ä¸ºä»€ä¹ˆ-Redis-æ˜¯å•çº¿ç¨‹çš„" class="headerlink" title="ä¸ºä»€ä¹ˆ Redis æ˜¯å•çº¿ç¨‹çš„"></a>ä¸ºä»€ä¹ˆ Redis æ˜¯å•çº¿ç¨‹çš„</h3><p>Redis æ˜¯åŸºäºå†…å­˜çš„æ“ä½œï¼ŒCPU ä¸æ˜¯ Redis çš„ç“¶é¢ˆï¼ŒRedis ç“¶é¢ˆæœ€æœ‰å¯èƒ½æ˜¯å†…å­˜æˆ–ç½‘ç»œã€‚è€Œä¸”å•çº¿ç¨‹å®¹æ˜“å®ç°ï¼Œé¿å…äº†ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰æ¡ä»¶ï¼Œä¸å­˜åœ¨å¤šçº¿ç¨‹åˆ‡æ¢æ¶ˆè€— CPU</p><h3 id="å„ä¸ªæ•°æ®ç±»å‹åº”ç”¨åœºæ™¯ï¼š"><a href="#å„ä¸ªæ•°æ®ç±»å‹åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="å„ä¸ªæ•°æ®ç±»å‹åº”ç”¨åœºæ™¯ï¼š"></a>å„ä¸ªæ•°æ®ç±»å‹åº”ç”¨åœºæ™¯ï¼š</h3><div class="table-container"><table><thead><tr><th>ç±»å‹</th><th>ç®€ä»‹</th><th>ç‰¹æ€§</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td>String(å­—ç¬¦ä¸²)</td><td>äºŒè¿›åˆ¶å®‰å…¨</td><td>å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®,æ¯”å¦‚jpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡,ä¸€ä¸ªé”®æœ€å¤§èƒ½å­˜å‚¨512M</td><td>â€”-</td></tr><tr><td>Hash(å­—å…¸)</td><td>é”®å€¼å¯¹é›†åˆ,å³ç¼–ç¨‹è¯­è¨€ä¸­çš„Mapç±»å‹</td><td>é€‚åˆå­˜å‚¨å¯¹è±¡,å¹¶ä¸”å¯ä»¥åƒæ•°æ®åº“ä¸­updateä¸€ä¸ªå±æ€§ä¸€æ ·åªä¿®æ”¹æŸä¸€é¡¹å±æ€§å€¼(Memcachedä¸­éœ€è¦å–å‡ºæ•´ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–æˆå¯¹è±¡ä¿®æ”¹å®Œå†åºåˆ—åŒ–å­˜å›å»)</td><td>å­˜å‚¨ã€è¯»å–ã€ä¿®æ”¹ç”¨æˆ·å±æ€§</td></tr><tr><td>List(åˆ—è¡¨)</td><td>é“¾è¡¨(åŒå‘é“¾è¡¨)</td><td>å¢åˆ å¿«,æä¾›äº†æ“ä½œæŸä¸€æ®µå…ƒç´ çš„API</td><td>1,æœ€æ–°æ¶ˆæ¯æ’è¡Œç­‰åŠŸèƒ½(æ¯”å¦‚æœ‹å‹åœˆçš„æ—¶é—´çº¿) 2,æ¶ˆæ¯é˜Ÿåˆ—</td></tr><tr><td>Set(é›†åˆ)</td><td>å“ˆå¸Œè¡¨å®ç°,å…ƒç´ ä¸é‡å¤</td><td>1ã€æ·»åŠ ã€åˆ é™¤,æŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1) 2ã€ä¸ºé›†åˆæä¾›äº†æ±‚äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œ</td><td>1ã€å…±åŒå¥½å‹ 2ã€åˆ©ç”¨å”¯ä¸€æ€§,ç»Ÿè®¡è®¿é—®ç½‘ç«™çš„æ‰€æœ‰ç‹¬ç«‹ip 3ã€å¥½å‹æ¨èæ—¶,æ ¹æ®tagæ±‚äº¤é›†,å¤§äºæŸä¸ªé˜ˆå€¼å°±å¯ä»¥æ¨è</td></tr><tr><td>Sorted Set(æœ‰åºé›†åˆ)</td><td>å°†Setä¸­çš„å…ƒç´ å¢åŠ ä¸€ä¸ªæƒé‡å‚æ•°score,å…ƒç´ æŒ‰scoreæœ‰åºæ’åˆ—</td><td>æ•°æ®æ’å…¥é›†åˆæ—¶,å·²ç»è¿›è¡Œå¤©ç„¶æ’åº</td><td>1ã€æ’è¡Œæ¦œ 2ã€å¸¦æƒé‡çš„æ¶ˆæ¯é˜Ÿåˆ—</td></tr></tbody></table></div><h2 id="redisç¯‡é›†åˆ"><a href="#redisç¯‡é›†åˆ" class="headerlink" title="redisç¯‡é›†åˆ"></a>redisç¯‡é›†åˆ</h2><p><a href="https://wxiangqian.blog.csdn.net/article/details/102595213">RedisåŸºç¡€ç¯‡â€”â€”Rediså®‰è£…</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102717629">RedisåŸºç¡€ç¯‡â€”â€”ä»‹ç»ä»¥åŠäº†è§£</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102902682">RedisåŸºç¡€ç¯‡â€”â€”åŸºæœ¬ç”¨æ³•</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103015298">Redisè¿›é˜¶ç¯‡â€”â€”PHPè¿æ¥redis</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103243250">Redis-PHPå®æˆ˜ç¯‡â€”â€”å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisåŸºç¡€ç¯‡â€”â€”Rediså®‰è£…</title>
      <link href="2019/10/22/redis/Redis%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94Redis%E5%AE%89%E8%A3%85/"/>
      <url>2019/10/22/redis/Redis%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94Redis%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>RedisåŸºç¡€ç¯‡â€”â€”Rediså®‰è£…ï¼ˆlinux &amp;&amp; Windowsï¼‰<br><a id="more"></a></p><h2 id="Linux-ä¸‹å®‰è£…"><a href="#Linux-ä¸‹å®‰è£…" class="headerlink" title="Linux ä¸‹å®‰è£…"></a>Linux ä¸‹å®‰è£…</h2><h3 id="å®‰è£…redis"><a href="#å®‰è£…redis" class="headerlink" title="å®‰è£…redis"></a>å®‰è£…redis</h3><p>ä¸‹è½½åœ°å€ï¼š<a href="http://redis.io/download">http://redis.io/download</a>ï¼Œä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚</p><h4 id="å®‰è£…ç¼–è¯‘"><a href="#å®‰è£…ç¼–è¯‘" class="headerlink" title="å®‰è£…ç¼–è¯‘"></a>å®‰è£…ç¼–è¯‘</h4><pre><code>tar -xvf redis-5.0.0.tar.gzcd redis-5.0.0#ç¼–è¯‘å¹¶å®‰è£…make &amp;&amp; make install</code></pre><h4 id="å¯åŠ¨-Redis"><a href="#å¯åŠ¨-Redis" class="headerlink" title="å¯åŠ¨ Redis"></a>å¯åŠ¨ Redis</h4><pre><code>redis-server</code></pre><h4 id="æŸ¥çœ‹-redis-æ˜¯å¦å¯åŠ¨ï¼Ÿ"><a href="#æŸ¥çœ‹-redis-æ˜¯å¦å¯åŠ¨ï¼Ÿ" class="headerlink" title="æŸ¥çœ‹ redis æ˜¯å¦å¯åŠ¨ï¼Ÿ"></a>æŸ¥çœ‹ redis æ˜¯å¦å¯åŠ¨ï¼Ÿ</h4><pre><code>redis-cli</code></pre><p>ä»¥ä¸Šå‘½ä»¤å°†æ‰“å¼€ä»¥ä¸‹ç»ˆç«¯ï¼š</p><pre><code>redis 127.0.0.1:6379&gt;127.0.0.1 æ˜¯æœ¬æœº IP ï¼Œ6379 æ˜¯ redis æœåŠ¡ç«¯å£ã€‚ç°åœ¨æˆ‘ä»¬è¾“å…¥ PING å‘½ä»¤ã€‚</code></pre><h3 id="å®‰è£…php-redisæ‰©å±•"><a href="#å®‰è£…php-redisæ‰©å±•" class="headerlink" title="å®‰è£…php-redisæ‰©å±•"></a>å®‰è£…php-redisæ‰©å±•</h3><p>åœ¨githubé€‰æ‹©ç›¸åº”çš„å®‰è£…åŒ…è¿›è¡Œä¸‹è½½<a href="https://github.com/phpredis/phpredis/releases">https://github.com/phpredis/phpredis/releases</a></p><pre><code>#è¿˜æ˜¯è¿›å…¥åˆ°downloadæ–‡ä»¶å¤¹ä¸‹é¢ cd /download/#è·å–å®‰è£…åŒ…wget http://pecl.php.net/get/redis-5.0.2.tgz#è§£å‹ï¼Œå¹¶è¿›å…¥å®‰è£…ç›®å½• tar -zxvf redis-5.0.2.tgzcd redis-5.0.2/usr/bin/phpize#è½½å…¥é…ç½® æ ¹æ®ä½ å®‰è£…å®é™…ç›®å½•è½½å…¥./configure --with-php-config=/usr/local/php/bin/php-config#ç¼–è¯‘å¹¶å®‰è£…make &amp;&amp; make install#ä¿®æ”¹php.ini åŠ å…¥ extension="redis.so":wq#ä¿å­˜é€€å‡ºï¼Œé‡å¯php-fpm</code></pre><h2 id="Windows-ä¸‹å®‰è£…"><a href="#Windows-ä¸‹å®‰è£…" class="headerlink" title="Windows ä¸‹å®‰è£…"></a>Windows ä¸‹å®‰è£…</h2><h3 id="å®‰è£…redis-1"><a href="#å®‰è£…redis-1" class="headerlink" title="å®‰è£…redis"></a>å®‰è£…redis</h3><p>å®˜æ–¹æ˜¯æ²¡æœ‰æ”¯æŒWindowsç³»ç»Ÿçš„ï¼Œä½†æ˜¯å¾®è½¯è‡ªå·±å°±åšäº†ä¸€ä¸ªæ”¯æŒwin64ä½ç³»ç»Ÿçš„ï¼Œ<a href="https://github.com/microsoftarchive/redis/releases">githubåœ°å€</a></p><h4 id="ä¸‹è½½-Redis-x64-xxx-zipå‹ç¼©åŒ…"><a href="#ä¸‹è½½-Redis-x64-xxx-zipå‹ç¼©åŒ…" class="headerlink" title="ä¸‹è½½ Redis-x64-xxx.zipå‹ç¼©åŒ…"></a>ä¸‹è½½ Redis-x64-xxx.zipå‹ç¼©åŒ…</h4><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd491ced88c447?w=1626&amp;h=426&amp;f=png&amp;s=141159" alt=""></p><p>æ–°å»ºæ–‡ä»¶å¤¹redisï¼Œè§£å‹åˆ°redisæ–‡ä»¶å¤¹å†…<br><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd491adfa7a9ed?w=697&amp;h=415&amp;f=png&amp;s=56599" alt=""></p><h4 id="æ‰“å¼€ä¸€ä¸ª-cmd-çª—å£-ä½¿ç”¨-cd-å‘½ä»¤åˆ‡æ¢ç›®å½•åˆ°-C-redis-è¿è¡Œï¼š"><a href="#æ‰“å¼€ä¸€ä¸ª-cmd-çª—å£-ä½¿ç”¨-cd-å‘½ä»¤åˆ‡æ¢ç›®å½•åˆ°-C-redis-è¿è¡Œï¼š" class="headerlink" title="æ‰“å¼€ä¸€ä¸ª cmd çª—å£ ä½¿ç”¨ cd å‘½ä»¤åˆ‡æ¢ç›®å½•åˆ° C:\redis è¿è¡Œï¼š"></a>æ‰“å¼€ä¸€ä¸ª cmd çª—å£ ä½¿ç”¨ cd å‘½ä»¤åˆ‡æ¢ç›®å½•åˆ° C:\redis è¿è¡Œï¼š</h4><pre><code>redis-server.exe redis.windows.conf</code></pre><p>å¦‚æœæƒ³æ–¹ä¾¿çš„è¯ï¼Œå¯ä»¥æŠŠ redis çš„è·¯å¾„åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡é‡Œï¼Œè¿™æ ·å°±çœå¾—å†è¾“è·¯å¾„äº†ï¼Œåé¢çš„é‚£ä¸ª redis.windows.conf å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥ï¼Œä¼šå¯ç”¨é»˜è®¤çš„ã€‚</p><h4 id="é…ç½®redisç¯å¢ƒå˜é‡-æŠŠredisè·¯å¾„é…ç½®åˆ°ç³»ç»Ÿå˜é‡çš„pathå€¼ä¸­"><a href="#é…ç½®redisç¯å¢ƒå˜é‡-æŠŠredisè·¯å¾„é…ç½®åˆ°ç³»ç»Ÿå˜é‡çš„pathå€¼ä¸­" class="headerlink" title="é…ç½®redisç¯å¢ƒå˜é‡,æŠŠredisè·¯å¾„é…ç½®åˆ°ç³»ç»Ÿå˜é‡çš„pathå€¼ä¸­"></a>é…ç½®redisç¯å¢ƒå˜é‡,æŠŠredisè·¯å¾„é…ç½®åˆ°ç³»ç»Ÿå˜é‡çš„pathå€¼ä¸­</h4><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd49659a699a5d?w=612&amp;h=116&amp;f=png&amp;s=6816" alt=""></p><p>è¾“å…¥ä¹‹åï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹ç•Œé¢ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd493c292f325f?w=811&amp;h=441&amp;f=png&amp;s=23895" alt=""></p><p>è¿™æ—¶å€™å¦å¯ä¸€ä¸ª cmd çª—å£ï¼ŒåŸæ¥çš„ä¸è¦å…³é—­ï¼Œä¸ç„¶å°±æ— æ³•è®¿é—®æœåŠ¡ç«¯äº†ã€‚</p><p>åˆ‡æ¢åˆ° redis ç›®å½•ä¸‹è¿è¡Œ:</p><pre><code>redis-cli.exe -h 127.0.0.1 -p 6379</code></pre><h4 id="è®¾ç½®é”®å€¼å¯¹"><a href="#è®¾ç½®é”®å€¼å¯¹" class="headerlink" title="è®¾ç½®é”®å€¼å¯¹:"></a>è®¾ç½®é”®å€¼å¯¹:</h4><pre><code>set name WXiangQian</code></pre><h4 id="å–å‡ºé”®å€¼å¯¹"><a href="#å–å‡ºé”®å€¼å¯¹" class="headerlink" title="å–å‡ºé”®å€¼å¯¹:"></a>å–å‡ºé”®å€¼å¯¹:</h4><pre><code> get name</code></pre><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd49a704f1e270?w=360&amp;h=157&amp;f=png&amp;s=4940" alt=""></p><h4 id="å°†redisåŠ å…¥åˆ°windowsçš„æœåŠ¡ä¸­ï¼ˆserviceå’Œloglevelå‰éƒ½æ˜¯ä¸¤ä¸ª-ï¼‰å¼€æœºè‡ªå¯åŠ¨"><a href="#å°†redisåŠ å…¥åˆ°windowsçš„æœåŠ¡ä¸­ï¼ˆserviceå’Œloglevelå‰éƒ½æ˜¯ä¸¤ä¸ª-ï¼‰å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="å°†redisåŠ å…¥åˆ°windowsçš„æœåŠ¡ä¸­ï¼ˆserviceå’Œloglevelå‰éƒ½æ˜¯ä¸¤ä¸ª-ï¼‰å¼€æœºè‡ªå¯åŠ¨"></a>å°†redisåŠ å…¥åˆ°windowsçš„æœåŠ¡ä¸­ï¼ˆserviceå’Œloglevelå‰éƒ½æ˜¯ä¸¤ä¸ª-ï¼‰å¼€æœºè‡ªå¯åŠ¨</h4><pre><code>redis-server --service-install redis.windows-service.conf --loglevel verbose</code></pre><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd49f02afea009?w=712&amp;h=74&amp;f=png&amp;s=3492" alt=""></p><h3 id="å®‰è£…PHPæ‰©å±•"><a href="#å®‰è£…PHPæ‰©å±•" class="headerlink" title="å®‰è£…PHPæ‰©å±•"></a>å®‰è£…PHPæ‰©å±•</h3><h4 id="ä½¿ç”¨phpinfo-å‡½æ•°æŸ¥çœ‹PHPçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™ä¼šå†³å®šæ‰©å±•æ–‡ä»¶ç‰ˆæœ¬"><a href="#ä½¿ç”¨phpinfo-å‡½æ•°æŸ¥çœ‹PHPçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™ä¼šå†³å®šæ‰©å±•æ–‡ä»¶ç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨phpinfo()å‡½æ•°æŸ¥çœ‹PHPçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™ä¼šå†³å®šæ‰©å±•æ–‡ä»¶ç‰ˆæœ¬"></a>ä½¿ç”¨phpinfo()å‡½æ•°æŸ¥çœ‹PHPçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™ä¼šå†³å®šæ‰©å±•æ–‡ä»¶ç‰ˆæœ¬</h4><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd4a62f145e972?w=631&amp;h=550&amp;f=png&amp;s=49958" alt=""></p><h4 id="æ ¹æ®PHPç‰ˆæœ¬å·ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å·å’ŒCPUæ¶æ„ï¼Œé€‰æ‹©å¯¹ç›¸åº”ç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©"><a href="#æ ¹æ®PHPç‰ˆæœ¬å·ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å·å’ŒCPUæ¶æ„ï¼Œé€‰æ‹©å¯¹ç›¸åº”ç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©" class="headerlink" title="æ ¹æ®PHPç‰ˆæœ¬å·ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å·å’ŒCPUæ¶æ„ï¼Œé€‰æ‹©å¯¹ç›¸åº”ç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©:"></a>æ ¹æ®PHPç‰ˆæœ¬å·ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å·å’ŒCPUæ¶æ„ï¼Œé€‰æ‹©å¯¹ç›¸åº”ç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©:</h4><p><a href="https://windows.php.net/downloads/pecl/releases/redis/5.0.2/">https://windows.php.net/downloads/pecl/releases/redis/5.0.2/</a><br><a href="https://windows.php.net/downloads/pecl/releases/redis/5.0.2/">https://windows.php.net/downloads/pecl/releases/igbinary/3.0.1/</a></p><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd4b50d4562d36?w=530&amp;h=245&amp;f=png&amp;s=18471" alt=""><br><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd4b563ab33fc2?w=520&amp;h=237&amp;f=png&amp;s=18498" alt=""></p><h4 id="è§£å‹ç¼©åï¼Œå°†php-redis-dllå’Œphp-igbinary-dllæ‹·è´è‡³phpçš„extç›®å½•ä¸‹"><a href="#è§£å‹ç¼©åï¼Œå°†php-redis-dllå’Œphp-igbinary-dllæ‹·è´è‡³phpçš„extç›®å½•ä¸‹" class="headerlink" title="è§£å‹ç¼©åï¼Œå°†php_redis.dllå’Œphp_igbinary.dllæ‹·è´è‡³phpçš„extç›®å½•ä¸‹"></a>è§£å‹ç¼©åï¼Œå°†php_redis.dllå’Œphp_igbinary.dllæ‹·è´è‡³phpçš„extç›®å½•ä¸‹</h4><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd4abe2a4ff994?w=641&amp;h=508&amp;f=png&amp;s=84960" alt=""></p><h4 id="ä¿®æ”¹php-iniï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­åŠ å…¥ï¼š"><a href="#ä¿®æ”¹php-iniï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­åŠ å…¥ï¼š" class="headerlink" title="ä¿®æ”¹php.iniï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­åŠ å…¥ï¼š"></a>ä¿®æ”¹php.iniï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­åŠ å…¥ï¼š</h4><pre><code>; php_redisextension=php_igbinary.dllextension=php_redis.dll</code></pre><p><strong>æ³¨æ„</strong>ï¼šextension=php_igbinary.dllä¸€å®šè¦æ”¾åœ¨extension=php_redis.dllçš„å‰é¢ï¼Œå¦åˆ™æ­¤æ‰©å±•ä¸ä¼šç”Ÿæ•ˆ </p><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd4acb710cf4d8?w=239&amp;h=94&amp;f=png&amp;s=3548" alt=""></p><p><img src="https://user-gold-cdn.xitu.io/2019/10/16/16dd4b4435a49bd1?w=948&amp;h=130&amp;f=png&amp;s=9048" alt=""></p><h4 id="æ–°å»ºä¸€ä¸ªtest-phpé¡µé¢"><a href="#æ–°å»ºä¸€ä¸ªtest-phpé¡µé¢" class="headerlink" title="æ–°å»ºä¸€ä¸ªtest.phpé¡µé¢"></a>æ–°å»ºä¸€ä¸ªtest.phpé¡µé¢</h4><pre><code>&lt;?php    $redis = new Redis();    $redis-&gt;connect('127.0.0.1',6379);    $redis-&gt;set('name','WXiangQian');    echo $redis-&gt;get('name');?&gt;</code></pre><p>æœ€åè¾“å‡ºï¼šWXiangQian</p><h2 id="redisç¯‡é›†åˆ"><a href="#redisç¯‡é›†åˆ" class="headerlink" title="redisç¯‡é›†åˆ"></a>redisç¯‡é›†åˆ</h2><p><a href="https://wxiangqian.blog.csdn.net/article/details/102595213">RedisåŸºç¡€ç¯‡â€”â€”Rediså®‰è£…</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102717629">RedisåŸºç¡€ç¯‡â€”â€”ä»‹ç»ä»¥åŠäº†è§£</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/102902682">RedisåŸºç¡€ç¯‡â€”â€”åŸºæœ¬ç”¨æ³•</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103015298">Redisè¿›é˜¶ç¯‡â€”â€”PHPè¿æ¥redis</a></p><p><a href="https://wxiangqian.blog.csdn.net/article/details/103243250">Redis-PHPå®æˆ˜ç¯‡â€”â€”å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravelçš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="2019/10/08/laravel/laravel%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>2019/10/08/laravel/laravel%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸–é—´ä¸‡ç‰©çš†æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä»»ä½•å·¥å…·æ—¶éƒ½éœ€è¦ç†è§£å®ƒçš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆç”¨èµ·æ¥å°±ä¼šå¾—å¿ƒåº”æ‰‹ï¼Œåº”ç”¨å¼€å‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ç†è§£äº†å®ƒçš„åŸç†ï¼Œé‚£ä¹ˆä½¿ç”¨èµ·æ¥å°±ä¼šæ¸¸åˆƒæœ‰ä½™ã€‚</p><p>åœ¨äº†è§£ Laravel çš„ç”Ÿå‘½å‘¨æœŸå‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹PHP çš„ç”Ÿå‘½å‘¨æœŸã€‚<br><a id="more"></a></p></blockquote><h2 id="PHP-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#PHP-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="PHP çš„ç”Ÿå‘½å‘¨æœŸ"></a>PHP çš„ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="PHP-çš„è¿è¡Œæ¨¡å¼"><a href="#PHP-çš„è¿è¡Œæ¨¡å¼" class="headerlink" title="PHP çš„è¿è¡Œæ¨¡å¼"></a>PHP çš„è¿è¡Œæ¨¡å¼</h3><p><a href="http://lib.csdn.net/base/php">PHP</a>ä¸¤ç§è¿è¡Œæ¨¡å¼æ˜¯WEBæ¨¡å¼ã€CLIæ¨¡å¼ã€‚</p><ol><li>å½“æˆ‘ä»¬åœ¨ç»ˆç«¯æ•²å…¥phpè¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯CLIæ¨¡å¼ã€‚</li><li>å½“ä½¿ç”¨Nginxæˆ–è€…åˆ«webæœåŠ¡å™¨ä½œä¸ºå®¿ä¸»å¤„ç†ä¸€ä¸ªåˆ°æ¥çš„è¯·æ±‚æ—¶,ä½¿ç”¨çš„æ˜¯WEBæ¨¡å¼ã€‚</li></ol><h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><p>å½“æˆ‘ä»¬è¯·æ±‚ä¸€ä¸ª<code>php</code>æ–‡ä»¶æ—¶,PHP ä¸ºäº†å®Œæˆè¿™æ¬¡è¯·æ±‚ï¼Œä¼šå‘ç”Ÿ5ä¸ªé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸåˆ‡æ¢:</p><ol><li><p>æ¨¡å—åˆå§‹åŒ–ï¼ˆMINITï¼‰ï¼Œå³è°ƒç”¨ <code>php.ini</code> ä¸­æŒ‡æ˜çš„æ‰©å±•çš„åˆå§‹åŒ–å‡½æ•°è¿›è¡Œåˆå§‹åŒ–å·¥ä½œï¼Œå¦‚ <code>mysql</code> æ‰©å±•ã€‚</p></li><li><p>è¯·æ±‚åˆå§‹åŒ–ï¼ˆRINITï¼‰ï¼Œå³åˆå§‹åŒ–ä¸ºæ‰§è¡Œæœ¬æ¬¡è„šæœ¬æ‰€éœ€è¦çš„å˜é‡åç§°å’Œå˜é‡å€¼å†…å®¹çš„ç¬¦å·è¡¨ï¼Œå¦‚ <code>$_SESSION</code>å˜é‡ã€‚</p></li><li><p>æ‰§è¡Œè¯¥PHPè„šæœ¬ã€‚</p></li><li><p>è¯·æ±‚å¤„ç†å®Œæˆ(Request Shutdown)ï¼ŒæŒ‰é¡ºåºè°ƒç”¨å„ä¸ªæ¨¡å—çš„ <code>RSHUTDOWN</code> æ–¹æ³•ï¼Œå¯¹æ¯ä¸ªå˜é‡è°ƒç”¨ <code>unset</code>å‡½æ•°ï¼Œå¦‚ <code>unset $_SESSION</code> å˜é‡ã€‚</p></li><li><p>å…³é—­æ¨¡å—(Module Shutdown) ï¼Œ PHPè°ƒç”¨æ¯ä¸ªæ‰©å±•çš„ <code>MSHUTDOWN</code> æ–¹æ³•ï¼Œè¿™æ˜¯å„ä¸ªæ¨¡å—æœ€åä¸€æ¬¡é‡Šæ”¾å†…å­˜çš„æœºä¼šã€‚è¿™æ„å‘³ç€æ²¡æœ‰ä¸‹ä¸€ä¸ªè¯·æ±‚äº†ã€‚</p></li></ol><p>WEBæ¨¡å¼å’ŒCLIï¼ˆå‘½ä»¤è¡Œï¼‰æ¨¡å¼å¾ˆç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼š</p><ol><li>CLI æ¨¡å¼ä¼šåœ¨æ¯æ¬¡è„šæœ¬æ‰§è¡Œç»å†å®Œæ•´çš„5ä¸ªå‘¨æœŸï¼Œå› ä¸ºä½ è„šæœ¬æ‰§è¡Œå®Œä¸ä¼šæœ‰ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼›</li><li>WEBæ¨¡å¼ä¸ºäº†åº”å¯¹å¹¶å‘ï¼Œå¯èƒ½é‡‡ç”¨å¤šçº¿ç¨‹ï¼Œå› æ­¤ç”Ÿå‘½å‘¨æœŸ<code>1</code>å’Œ<code>5</code>æœ‰å¯èƒ½åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¸‹æ¬¡è¯·æ±‚åˆ°æ¥æ—¶é‡å¤<code>2-4</code>çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™æ ·å°±èŠ‚çœäº†ç³»ç»Ÿæ¨¡å—åˆå§‹åŒ–æ‰€å¸¦æ¥çš„å¼€é”€ã€‚</li></ol><p>å¯ä»¥çœ‹å‡ºPHPç”Ÿå‘½å‘¨æœŸæ˜¯å¾ˆå¯¹ç§°çš„ã€‚è¯´äº†è¿™ä¹ˆå¤šï¼Œå°±æ˜¯ä¸ºäº†å®šä½Laravelè¿è¡Œåœ¨å“ªé‡Œï¼Œæ²¡é”™ï¼ŒLaravelä»…ä»…è¿è¡Œå† ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2019/9/27/16d717d150d98dce?w=797&amp;h=707&amp;f=png&amp;s=35997" alt="PHPç”Ÿå‘½å‘¨æœŸ"><br><strong>PHPç”Ÿå‘½å‘¨æœŸ</strong></p><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>ç†è§£è¿™äº›ï¼Œä½ å°±å¯ä»¥ä¼˜åŒ–ä½ çš„ <code>Laravel</code> ä»£ç ï¼Œå¯ä»¥æ›´åŠ æ·±å…¥çš„äº†è§£ Laravel çš„<code>singleton</code>ï¼ˆå•ä¾‹ï¼‰ã€‚è‡³å°‘ä½ çŸ¥é“äº†ï¼Œæ¯ä¸€æ¬¡è¯·æ±‚ç»“æŸï¼ŒPHP çš„å˜é‡éƒ½ä¼š <code>unset</code>ï¼ŒLaravel çš„ <code>singleton</code> åªæ˜¯åœ¨æŸä¸€æ¬¡è¯·æ±‚è¿‡ç¨‹ä¸­çš„<code>singleton</code>ï¼›ä½ åœ¨ Laravel ä¸­çš„é™æ€å˜é‡ä¹Ÿä¸èƒ½åœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´å…±äº«ï¼Œå› ä¸ºæ¯ä¸€æ¬¡è¯·æ±‚ç»“æŸéƒ½ä¼š <code>unset</code>ã€‚ç†è§£è¿™äº›æ¦‚å¿µï¼Œæ˜¯å†™é«˜è´¨é‡ä»£ç çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚å› æ­¤è®°ä½ï¼ŒPHPæ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œæ‰€æœ‰çš„å˜é‡åªä¼šåœ¨è¿™ä¸€æ¬¡è¯·æ±‚ä¸­ç”Ÿæ•ˆï¼Œä¸‹æ¬¡è¯·æ±‚ä¹‹æ—¶å·²è¢«é‡ç½®ï¼Œè€Œä¸åƒJavaé™æ€å˜é‡æ‹¥æœ‰å…¨å±€ä½œç”¨ã€‚</p><h2 id="Laravel-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Laravel-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Laravel çš„ç”Ÿå‘½å‘¨æœŸ"></a>Laravel çš„ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Laravel çš„ç”Ÿå‘½å‘¨æœŸä»<code>public\index.php</code>å¼€å§‹ï¼Œä»<code>public\index.php</code>ç»“æŸã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/9/27/16d717db875cdb5c?w=913&amp;h=299&amp;f=png&amp;s=20324" alt="è¯·æ±‚è¿‡ç¨‹"><br><strong>è¯·æ±‚è¿‡ç¨‹</strong></p><p>ä¸‹é¢æ˜¯ <code>public\index.php</code>çš„å…¨éƒ¨æºç ,æ›´å…·ä½“æ¥è¯´å¯ä»¥åˆ†ä¸ºå››æ­¥ï¼š</p><pre><code>1. require __DIR__.'/../bootstrap/autoload.php';2. $app = require_once __DIR__.'/../bootstrap/app.php';   $kernel = $app-&gt;make(Illuminate\Contracts\Http\Kernel::class);3. $response = $kernel-&gt;handle(      $request = Illuminate\Http\Request::capture()   );   $response-&gt;send();4. $kernel-&gt;terminate($request, $response);</code></pre><h4 id="ä»¥ä¸‹æ˜¯å››æ­¥è¯¦ç»†çš„è§£é‡Šæ˜¯ï¼š"><a href="#ä»¥ä¸‹æ˜¯å››æ­¥è¯¦ç»†çš„è§£é‡Šæ˜¯ï¼š" class="headerlink" title="ä»¥ä¸‹æ˜¯å››æ­¥è¯¦ç»†çš„è§£é‡Šæ˜¯ï¼š"></a>ä»¥ä¸‹æ˜¯å››æ­¥è¯¦ç»†çš„è§£é‡Šæ˜¯ï¼š</h4><p>composerè‡ªåŠ¨åŠ è½½éœ€è¦çš„ç±»</p><ol><li>æ–‡ä»¶è½½å…¥composerç”Ÿæˆçš„è‡ªåŠ¨åŠ è½½è®¾ç½®ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä½  <code>composer require</code>çš„ä¾èµ–ã€‚</li><li>ç”Ÿæˆå®¹å™¨Containerï¼ŒApplicationå®ä¾‹ï¼Œå¹¶å‘å®¹å™¨æ³¨å†Œæ ¸å¿ƒç»„ä»¶ï¼ˆHttpKernelï¼ŒConsoleKernel ï¼ŒExceptionHandlerï¼‰ï¼ˆå¯¹åº”ä»£ç 2ï¼Œå®¹å™¨å¾ˆé‡è¦ï¼Œåé¢è¯¦ç»†è®²è§£ï¼‰ã€‚</li><li>å¤„ç†è¯·æ±‚ï¼Œç”Ÿæˆå¹¶å‘é€å“åº”ï¼ˆå¯¹åº”ä»£ç 3ï¼Œæ¯«ä¸å¤¸å¼ çš„è¯´ï¼Œä½ 99%çš„ä»£ç éƒ½è¿è¡Œåœ¨è¿™ä¸ªå°å°çš„handle æ–¹æ³•é‡Œé¢ï¼‰ã€‚</li><li>è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒï¼ˆå¯¹åº”ä»£ç 4ï¼Œè¿˜è®°å¾—<a href="https://laravel.com/docs/5.3/middleware#terminable-middleware">å¯ç»ˆæ­¢ä¸­é—´ä»¶</a>å—ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯åœ¨è¿™é‡Œå›è°ƒçš„ï¼‰ã€‚</li></ol><p><img src="https://user-gold-cdn.xitu.io/2019/9/27/16d717f6b368fa3a?w=1056&amp;h=659&amp;f=png&amp;s=56559" alt="Laravel çš„è¯·æ±‚æ­¥éª¤"><br><strong>Laravel çš„è¯·æ±‚æ­¥éª¤</strong></p><p>æˆ‘ä»¬ä¸å¦¨åœ¨è¯¦ç»†ä¸€ç‚¹ï¼š</p><h4 id="ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒåŠ è½½composerè‡ªåŠ¨ç”Ÿæˆçš„class-loader"><a href="#ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒåŠ è½½composerè‡ªåŠ¨ç”Ÿæˆçš„class-loader" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒåŠ è½½composerè‡ªåŠ¨ç”Ÿæˆçš„class loader"></a>ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒåŠ è½½composerè‡ªåŠ¨ç”Ÿæˆçš„<code>class loader</code></h4><p>å°±æ˜¯åŠ è½½åˆå§‹åŒ–ç¬¬ä¸‰æ–¹ä¾èµ–ã€‚</p><h4 id="ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå®¹å™¨-Container"><a href="#ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå®¹å™¨-Container" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå®¹å™¨ Container"></a>ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå®¹å™¨ <code>Container</code></h4><p>å¹¶å‘å®¹å™¨æ³¨å†Œæ ¸å¿ƒç»„ä»¶ï¼Œæ˜¯ä» <code>bootstrap/app.php</code> è„šæœ¬è·å– Laravel åº”ç”¨å®ä¾‹ï¼Œ</p><h4 id="ç¬¬ä¸‰æ­¥ï¼šè¿™ä¸€æ­¥æ˜¯é‡ç‚¹ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶ç”Ÿæˆå‘é€å“åº”ã€‚"><a href="#ç¬¬ä¸‰æ­¥ï¼šè¿™ä¸€æ­¥æ˜¯é‡ç‚¹ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶ç”Ÿæˆå‘é€å“åº”ã€‚" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šè¿™ä¸€æ­¥æ˜¯é‡ç‚¹ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶ç”Ÿæˆå‘é€å“åº”ã€‚"></a>ç¬¬ä¸‰æ­¥ï¼šè¿™ä¸€æ­¥æ˜¯é‡ç‚¹ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶ç”Ÿæˆå‘é€å“åº”ã€‚</h4><p>è¯·æ±‚è¢«å‘é€åˆ° <code>HTTP</code> å†…æ ¸æˆ– <code>Console</code> å†…æ ¸ï¼Œè¿™å–å†³äºè¿›å…¥åº”ç”¨çš„è¯·æ±‚ç±»å‹ã€‚</p><blockquote><p>å–å†³äºæ˜¯é€šè¿‡æµè§ˆå™¨è¯·æ±‚è¿˜æ˜¯é€šè¿‡æ§åˆ¶å°è¯·æ±‚ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ˜¯é€šè¿‡æµè§ˆå™¨è¯·æ±‚ã€‚</p></blockquote><p>HTTP å†…æ ¸ç»§æ‰¿è‡ª Illuminate\Foundation\Http\Kernel ç±»ï¼Œè¯¥ç±»å®šä¹‰äº†ä¸€ä¸ª bootstrappers æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­çš„ç±»åœ¨è¯·æ±‚è¢«æ‰§è¡Œå‰è¿è¡Œï¼Œè¿™äº› bootstrappers é…ç½®äº†é”™è¯¯å¤„ç†ã€æ—¥å¿—ã€æ£€æµ‹åº”ç”¨ç¯å¢ƒä»¥åŠå…¶å®ƒåœ¨è¯·æ±‚è¢«å¤„ç†å‰éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p><pre class=" language-lang-php"><code class="language-lang-php">protected $bootstrappers = [    //æ³¨å†Œç³»ç»Ÿç¯å¢ƒé…ç½® ï¼ˆ.envï¼‰    'Illuminate\Foundation\Bootstrap\DetectEnvironment',    //æ³¨å†Œç³»ç»Ÿé…ç½®ï¼ˆconfigï¼‰    'Illuminate\Foundation\Bootstrap\LoadConfiguration',    //æ³¨å†Œæ—¥å¿—é…ç½®    'Illuminate\Foundation\Bootstrap\ConfigureLogging',    //æ³¨å†Œå¼‚å¸¸å¤„ç†    'Illuminate\Foundation\Bootstrap\HandleExceptions',    //æ³¨å†ŒæœåŠ¡å®¹å™¨çš„é—¨é¢ï¼ŒFacade æ˜¯ä¸ªæä¾›ä»å®¹å™¨è®¿é—®å¯¹è±¡çš„ç±»ã€‚    'Illuminate\Foundation\Bootstrap\RegisterFacades',    //æ³¨å†ŒæœåŠ¡æä¾›è€…    'Illuminate\Foundation\Bootstrap\RegisterProviders',    //æ³¨å†ŒæœåŠ¡æä¾›è€… `boot`    'Illuminate\Foundation\Bootstrap\BootProviders',];</code></pre><blockquote><p>æ³¨æ„é¡ºåºï¼š</p><p><code>Facades</code> å…ˆäº<code>ServiceProviders</code>ï¼Œ<code>Facades</code>ä¹Ÿæ˜¯é‡ç‚¹ï¼Œåé¢è¯´ï¼Œè¿™é‡Œç®€å•æä¸€ä¸‹ï¼Œæ³¨å†Œ <code>Facades</code> å°±æ˜¯æ³¨å†Œ <code>config\app.php</code>ä¸­çš„<code>aliases</code> æ•°ç»„ï¼Œä½ ä½¿ç”¨çš„å¾ˆå¤šç±»ï¼Œå¦‚<code>Auth</code>ï¼Œ<code>Cache</code>,<code>DB</code>ç­‰ç­‰éƒ½æ˜¯<code>Facades</code>ï¼›è€Œ<code>ServiceProviders</code>çš„<code>register</code>æ–¹æ³•æ°¸è¿œå…ˆäº<code>boot</code>æ–¹æ³•æ‰§è¡Œï¼Œä»¥å…äº§ç”Ÿ<code>boot</code>æ–¹æ³•ä¾èµ–æŸä¸ªå®ä¾‹è€Œè¯¥å®ä¾‹è¿˜æœªæ³¨å†Œçš„ç°è±¡ã€‚</p></blockquote><p>HTTP å†…æ ¸è¿˜å®šä¹‰äº†ä¸€ç³»åˆ—æ‰€æœ‰è¯·æ±‚åœ¨å¤„ç†å‰éœ€è¦ç»è¿‡çš„ HTTP <a href="https://laravel.com/docs/5.4/middleware">ä¸­é—´ä»¶</a>ï¼Œè¿™äº›ä¸­é—´ä»¶å¤„ç† <a href="https://laravel.com/docs/5.4/session">HTTP ä¼šè¯</a>çš„è¯»å†™ã€åˆ¤æ–­åº”ç”¨æ˜¯å¦å¤„äºç»´æŠ¤æ¨¡å¼ã€éªŒè¯ <a href="https://laravel.com/docs/5.4/csrf">CSRF ä»¤ç‰Œ</a>ç­‰ç­‰ã€‚</p><blockquote><p>HTTP å†…æ ¸çš„æ ‡å¿—æ€§æ–¹æ³• handleå¤„ç†çš„é€»è¾‘ç›¸å½“ç®€å•ï¼šè·å–ä¸€ä¸ª <code>Request</code>ï¼Œè¿”å›ä¸€ä¸ª <code>Response</code>ï¼ŒæŠŠè¯¥å†…æ ¸æƒ³è±¡ä½œä¸€ä¸ªä»£è¡¨æ•´ä¸ªåº”ç”¨çš„å¤§é»‘ç›’å­ï¼Œè¾“å…¥ HTTP è¯·æ±‚ï¼Œè¿”å› HTTP å“åº”ã€‚</p></blockquote><h4 id="ç¬¬å››æ­¥ï¼šå°†è¯·æ±‚ä¼ é€’ç»™è·¯ç”±ã€‚"><a href="#ç¬¬å››æ­¥ï¼šå°†è¯·æ±‚ä¼ é€’ç»™è·¯ç”±ã€‚" class="headerlink" title="ç¬¬å››æ­¥ï¼šå°†è¯·æ±‚ä¼ é€’ç»™è·¯ç”±ã€‚"></a>ç¬¬å››æ­¥ï¼šå°†è¯·æ±‚ä¼ é€’ç»™è·¯ç”±ã€‚</h4><p>åœ¨LaravelåŸºç¡€çš„æœåŠ¡å¯åŠ¨ä¹‹åï¼Œå°±è¦æŠŠè¯·æ±‚ä¼ é€’ç»™è·¯ç”±äº†ã€‚è·¯ç”±å™¨å°†ä¼šåˆ†å‘è¯·æ±‚åˆ°è·¯ç”±æˆ–æ§åˆ¶å™¨ï¼ŒåŒæ—¶è¿è¡Œæ‰€æœ‰è·¯ç”±æŒ‡å®šçš„ä¸­é—´ä»¶ã€‚</p><p>ä¼ é€’ç»™è·¯ç”±æ˜¯é€šè¿‡ <code>Pipeline</code>ï¼ˆç®¡é“ï¼‰æ¥ä¼ é€’çš„ï¼Œä½†æ˜¯Pipelineæœ‰ä¸€å µå¢™ï¼Œåœ¨ä¼ é€’ç»™è·¯ç”±ä¹‹å‰æ‰€æœ‰è¯·æ±‚éƒ½è¦ç»è¿‡ï¼Œè¿™å µå¢™å®šä¹‰åœ¨<code>app\Http\Kernel.php</code>ä¸­çš„<code>$middleware</code>æ•°ç»„ä¸­ï¼Œæ²¡é”™å°±æ˜¯ä¸­é—´ä»¶ï¼Œé»˜è®¤åªæœ‰ä¸€ä¸ª<code>CheckForMaintenanceMode</code>ä¸­é—´ä»¶ï¼Œç”¨æ¥æ£€æµ‹ä½ çš„ç½‘ç«™æ˜¯å¦æš‚æ—¶å…³é—­ã€‚è¿™æ˜¯ä¸€ä¸ªå…¨å±€ä¸­é—´ä»¶ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½è¦ç»è¿‡ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå·±çš„å…¨å±€ä¸­é—´ä»¶ã€‚</p><p>ç„¶åéå†æ‰€æœ‰æ³¨å†Œçš„è·¯ç”±ï¼Œæ‰¾åˆ°æœ€å…ˆç¬¦åˆçš„ç¬¬ä¸€ä¸ªè·¯ç”±ï¼Œç»è¿‡å®ƒçš„è·¯ç”±ä¸­é—´ä»¶ï¼Œè¿›å…¥åˆ°æ§åˆ¶å™¨æˆ–è€…é—­åŒ…å‡½æ•°ï¼Œæ‰§è¡Œä½ çš„å…·ä½“é€»è¾‘ä»£ç ã€‚</p><p>æ‰€ä»¥ï¼Œå½“è¯·æ±‚åˆ°è¾¾ä½ å†™çš„ä»£ç ä¹‹å‰ï¼ŒLaravelå·²ç»åšäº†å¤§é‡å·¥ä½œï¼Œè¯·æ±‚ä¹Ÿç»è¿‡äº†åƒéš¾ä¸‡é™©ï¼Œé‚£äº›ä¸ç¬¦åˆæˆ–è€…æ¶æ„çš„çš„è¯·æ±‚å·²è¢«Laraveléš”ç¦»åœ¨å¤–ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2019/9/27/16d717a0aa0a75ca?w=1748&amp;h=696&amp;f=png&amp;s=121137" alt="å¤„ç†è¯·æ±‚åˆ°å“åº”è¿‡ç¨‹"><br><strong>å¤„ç†è¯·æ±‚åˆ°å“åº”è¿‡ç¨‹</strong></p><p><a href="https://juejin.im/post/5d8db0426fb9a04dde1458a2">åŸæ–‡åœ°å€</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravelå®ç°Modelçš„setAttributeã€getAttributeã€scopeQueryæ–¹æ³•</title>
      <link href="2019/09/20/laravel/laravel%E5%AE%9E%E7%8E%B0Model%E7%9A%84setAttribute%E3%80%81getAttribute%E3%80%81scopeQuery%E6%96%B9%E6%B3%95/"/>
      <url>2019/09/20/laravel/laravel%E5%AE%9E%E7%8E%B0Model%E7%9A%84setAttribute%E3%80%81getAttribute%E3%80%81scopeQuery%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="é¦–å…ˆè¦å®šä¹‰ä¸€ä¸ªModel"><a href="#é¦–å…ˆè¦å®šä¹‰ä¸€ä¸ªModel" class="headerlink" title="é¦–å…ˆè¦å®šä¹‰ä¸€ä¸ªModel"></a>é¦–å…ˆè¦å®šä¹‰ä¸€ä¸ªModel</h3><h4 id="1-getAttributeçš„å®ç°"><a href="#1-getAttributeçš„å®ç°" class="headerlink" title="1.getAttributeçš„å®ç°"></a>1.getAttributeçš„å®ç°</h4><p>è¯·getFooAttributeåœ¨æ¨¡å‹ä¸Šåˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­FooåŒ…å«æ‚¨è¦è®¿é—®çš„åˆ—çš„â€œstudlyâ€å¤–å£³åç§°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºfirst_nameå±æ€§å®šä¹‰ä¸€ä¸ªè®¿é—®å™¨ã€‚å°è¯•æ£€ç´¢sexå±æ€§å€¼æ—¶ï¼ŒEloquentä¼šè‡ªåŠ¨è°ƒç”¨è®¿é—®è€…ï¼š<br><a id="more"></a></p><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App;use Illuminate\Database\Eloquent\Model;class User extends Model{    public function getSexAttribute($sex)    {        if ($sex == 1) return 'ç”·';        if ($sex == 2) return 'å¥³';        return 'æœªçŸ¥';    }}</code></pre><p>æŸ¥è¯¢å‡ºæ¥æ¨¡å‹ä»¥åè·å–sexï¼Œå°†æ˜¯ç”·æˆ–è€…å¥³æˆ–è€…æœªçŸ¥</p><pre class=" language-lang-php"><code class="language-lang-php">$user = App\User::find(1);$sex = $user->sex;dd($sex); // ç”·</code></pre><h4 id="2-setAttributeçš„å®ç°"><a href="#2-setAttributeçš„å®ç°" class="headerlink" title="2.setAttributeçš„å®ç°"></a>2.setAttributeçš„å®ç°</h4><p>è¯·getFooAttributeåœ¨æ¨¡å‹ä¸Šåˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­FooåŒ…å«æ‚¨è¦è®¿é—®çš„åˆ—çš„â€œstudlyâ€å¤–å£³åç§°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºfirst_nameå±æ€§å®šä¹‰ä¸€ä¸ªè®¿é—®å™¨ã€‚å°è¯•æ£€ç´¢sexå±æ€§å€¼æ—¶ï¼ŒEloquentä¼šè‡ªåŠ¨è°ƒç”¨è®¿é—®è€…ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App;use Illuminate\Database\Eloquent\Model;class User extends Model{    public function setSexAttribute($sex)    {       $this->attributes['sex'] = $sex;    }}</code></pre><p>æŸ¥è¯¢å‡ºæ¥æ¨¡å‹ä»¥åè·å–sexï¼Œå°†æ˜¯ç”·æˆ–è€…å¥³æˆ–è€…æœªçŸ¥</p><pre class=" language-lang-php"><code class="language-lang-php">$user = App\User::find(1);$user->sex = 'æˆ‘æ˜¯sex';dd($user->sex);   // æˆ‘æ˜¯sex</code></pre><h4 id="3-scopeQueryçš„å®ç°"><a href="#3-scopeQueryçš„å®ç°" class="headerlink" title="3.scopeQueryçš„å®ç°"></a>3.scopeQueryçš„å®ç°</h4><p>æœ¬åœ°èŒƒå›´å…è®¸æ‚¨å®šä¹‰å¯åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­è½»æ¾é‡ç”¨çš„å¸¸è§çº¦æŸé›†ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½éœ€è¦ç»å¸¸æ£€ç´¢æ‰€æœ‰è¢«è§†ä¸ºâ€œå—æ¬¢è¿â€çš„ç”¨æˆ·ã€‚è¦å®šä¹‰èŒƒå›´ï¼Œè¯·ä½¿ç”¨Eloquentæ¨¡å‹æ–¹æ³•ä½œä¸ºå‰ç¼€scopeã€‚èŒƒå›´åº”å§‹ç»ˆè¿”å›æŸ¥è¯¢æ„å»ºå™¨å®ä¾‹ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App;use Illuminate\Database\Eloquent\Model;class User extends Model{    public function scopeSex($query)    {        return $query->where('sex', 1);    }}</code></pre><p>å®šä¹‰åï¼Œå¯ä»¥åœ¨æŸ¥è¯¢æ¨¡å‹æ—¶è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œscopeè°ƒç”¨æ–¹æ³•æ—¶ä¸åº”åŒ…å«å‰ç¼€ã€‚æ‚¨ç”šè‡³å¯ä»¥å°†è°ƒç”¨é“¾æ¥åˆ°å„ç§èŒƒå›´ï¼Œå¦‚ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">$users = App\User::sex()->orderBy('created_at')->get();</code></pre><h3 id="çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿è¯„è®º"><a href="#çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿è¯„è®º" class="headerlink" title="çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿è¯„è®º"></a>çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿è¯„è®º</h3><p><a href="https://juejin.im/post/5d8431646fb9a06b155df733">åŸæ–‡åœ°å€</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravelä¸­scopeçš„ç”¨æ³•ä»¥åŠæŠ€å·§</title>
      <link href="2019/09/19/laravel/laravel%E4%B8%ADscope%E7%9A%84%E7%94%A8%E6%B3%95%E4%BB%A5%E5%8F%8A%E6%8A%80%E5%B7%A7/"/>
      <url>2019/09/19/laravel/laravel%E4%B8%ADscope%E7%9A%84%E7%94%A8%E6%B3%95%E4%BB%A5%E5%8F%8A%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<p>laravelä¸­scopeçš„ç”¨æ³•ä»¥åŠæŠ€å·§ï¼Ÿ</p><p>laravelä¸­çš„scopeä½œç”¨åŸŸ</p><p>laravelä¸­åœ¨æ¨¡æ¿ä¸­å¤„ç†(å±äºä¸å±äº)çš„æ•°æ®(å¢åˆ æ”¹æŸ¥),å¼•å…¥äº†scopeæ¥å¤„ç†</p><p>ä¹Ÿå°±æ˜¯åœ¨æ¨¡æ¿å®šä¹‰æ–¹æ³•ä¸­,åŠ ä¸Šå‰ç¼€scopeã€‚</p><p>ç®€è¨€ä¹‹ï¼ŒLaravelä¸­æ¨¡å‹ä¸­å¯ä»¥å®šä¹‰scopeå¼€å¤´æ–¹æ³•ï¼Œè¿™ç±»æ–¹æ³•å¯ä»¥é€šè¿‡æ¨¡å‹ç›´æ¥è°ƒç”¨ã€‚è¿™ç±»æ–¹æ³•ä¹Ÿç§°ä½œæŸ¥è¯¢ä½œç”¨åŸŸã€‚</p><a id="more"></a><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App;use Illuminate\Database\Eloquent\Model;class User extends Model{    /**     * Scope a query to only include popular users.     *     * @param  \Illuminate\Database\Eloquent\Builder  $query     * @return \Illuminate\Database\Eloquent\Builder     */    public function scopePopular($query)    {        return $query->where('votes', '>', 100);    }    /**     * Scope a query to only include active users.     *     * @param  \Illuminate\Database\Eloquent\Builder  $query     * @return \Illuminate\Database\Eloquent\Builder     */    public function scopeActive($query)    {        return $query->where('active', 1);    }}</code></pre><p>laravelä¸­è¦æ±‚åœ¨å®šä¹‰çš„æ–¹æ³•scopeåé¢è·Ÿçš„å­—æ¯è¦å¤§å†™(å°é©¼å³°å‘½åæ³•)</p><p>åé¢é‚£æˆ‘ä»¬å»æ§åˆ¶å™¨è¿›è¡Œå¤„ç†æ•°æ®<br>åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨:å»é™¤scopeå‰ç¼€,é¦–å­—æ¯å˜å°å†™è°ƒç”¨å°±å¥½å•¦.</p><p>å®šä¹‰èŒƒå›´åï¼Œå¯ä»¥åœ¨æŸ¥è¯¢æ¨¡å‹æ—¶è°ƒç”¨èŒƒå›´æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œ<strong>scope</strong>è°ƒç”¨æ–¹æ³•æ—¶ä¸åº”åŒ…å«å‰ç¼€ã€‚æ‚¨ç”šè‡³å¯ä»¥å°†è°ƒç”¨é“¾æ¥åˆ°å„ç§èŒƒå›´ï¼Œä¾‹å¦‚ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">$users = App\User::popular()->active()->orderBy('created_at')->get();</code></pre><p>é€šè¿‡oræŸ¥è¯¢è¿ç®—ç¬¦ç»„åˆå¤šä¸ªEloquentæ¨¡å‹èŒƒå›´å¯èƒ½éœ€è¦ä½¿ç”¨Closureå›è°ƒï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">$users = App\User::popular()->orWhere(function (Builder $query) {    $query->active();})->get();</code></pre><p>ä½†æ˜¯ï¼Œç”±äºè¿™å¯èƒ½å¾ˆéº»çƒ¦ï¼ŒLaravelæä¾›äº†ä¸€ç§â€œæ›´é«˜é˜¶â€ orWhereæ–¹æ³•ï¼Œå…è®¸æ‚¨åœ¨ä¸ä½¿ç”¨é—­åŒ…çš„æƒ…å†µä¸‹æµç•…åœ°å°†è¿™äº›èŒƒå›´é“¾æ¥åœ¨ä¸€èµ·ï¼š</p><pre class=" language-lang-php"><code class="language-lang-php">$users = App\User::popular()->orWhere->active()->get();</code></pre><p>å…³äºæ–¹æ³•ä¸­çš„å‚æ•° $query ï¼ŒæŸ¥çœ‹Apiæ–‡æ¡£äº†è§£æ˜¯ scope å®šä¹‰çš„æ–¹æ³•æœ‰ä¿©ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ Builderã€ä¸€ä¸ªæ˜¯ Modelã€‚</p><p>åœ¨ Post æ¨¡å‹æ–¹æ³•å‰åŠ ä¸Šä¸€ä¸ª scope å‰ç¼€ï¼Œä½œç”¨åŸŸæ€»æ˜¯è¿”å› æŸ¥è¯¢æ„å»ºå™¨ã€‚åœ¨è°ƒç”¨ scope ä½œç”¨åŸŸçš„æ–¹æ³•æ—¶ï¼Œé€šè¿‡è¿”å›çš„æ„å»ºå™¨æ¥æ‹¼æ¥æˆå®Œæ•´çš„æŸ¥è¯¢æ¡ä»¶ã€‚</p><p><a href="https://juejin.im/post/5d83585b5188257e5c1115d1">åŸæ–‡åœ°å€</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨PHPå®ç°é’‰é’‰webhooké€šçŸ¥</title>
      <link href="2019/09/16/php/%E5%88%A9%E7%94%A8PHP%E5%AE%9E%E7%8E%B0%E9%92%89%E9%92%89webhook%E9%80%9A%E7%9F%A5/"/>
      <url>2019/09/16/php/%E5%88%A9%E7%94%A8PHP%E5%AE%9E%E7%8E%B0%E9%92%89%E9%92%89webhook%E9%80%9A%E7%9F%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="åˆ©ç”¨PHPå®ç°é’‰é’‰webhooké€šçŸ¥ï¼Œæ–¹ä¾¿éšæ—¶è·å–é¡¹ç›®çš„åŠ¨æ€"><a href="#åˆ©ç”¨PHPå®ç°é’‰é’‰webhooké€šçŸ¥ï¼Œæ–¹ä¾¿éšæ—¶è·å–é¡¹ç›®çš„åŠ¨æ€" class="headerlink" title="åˆ©ç”¨PHPå®ç°é’‰é’‰webhooké€šçŸ¥ï¼Œæ–¹ä¾¿éšæ—¶è·å–é¡¹ç›®çš„åŠ¨æ€"></a>åˆ©ç”¨PHPå®ç°é’‰é’‰webhooké€šçŸ¥ï¼Œæ–¹ä¾¿éšæ—¶è·å–é¡¹ç›®çš„åŠ¨æ€</h3><a id="more"></a><p>å¦‚æœä½ å«Œéº»çƒ¦ä¸æƒ³å†™è¿™ä¹ˆå¤šä»£ç çš„è¯ä½ å¯ä»¥ç›´æ¥å¼•å…¥åŒ…ï¼š<a href="https://github.com/WXiangQian/laravel-DingTalk">https://github.com/WXiangQian/laravel-DingTalk</a></p><p>ä»¥ä¸ŠåŒ…æ»¡è¶³æ‰€æœ‰éœ€æ±‚ï¼Œæ— éœ€å†çœ‹ä¸‹æ–‡ã€‚</p><p>å¦‚ä¸æƒ³å¼•å…¥dingtalkåŒ…çš„è¯é‚£å°±å¦‚ä¸‹æ“ä½œå§</p><p>é¦–å…ˆï¼Œè¦å…ˆæ·»åŠ composeråŒ…</p><p>å…·ä½“æ·»åŠ composeråŒ…çš„æ•™ç¨‹æŸ¥çœ‹ï¼š<a href="https://github.com/guzzle/guzzle">https://github.com/guzzle/guzzle</a></p><p>åœ¨æœºå™¨äººç®¡ç†é¡µé¢é€‰æ‹©â€œè‡ªå®šä¹‰â€æœºå™¨äººï¼Œè¾“å…¥æœºå™¨äººåå­—å¹¶é€‰æ‹©è¦å‘é€æ¶ˆæ¯çš„ç¾¤ã€‚å¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥ä¸ºæœºå™¨äººè®¾ç½®ä¸€ä¸ªå¤´åƒã€‚ç‚¹å‡»â€œå®Œæˆæ·»åŠ â€ã€‚</p><p>ç‚¹å‡»â€œå¤åˆ¶â€æŒ‰é’®ï¼Œå³å¯è·å¾—è¿™ä¸ªæœºå™¨äººå¯¹åº”çš„Webhookåœ°å€ï¼Œå…¶æ ¼å¼å¦‚ä¸‹</p><pre><code>https://oapi.dingtalk.com/robot/send?access_token=xxxxxxxx</code></pre><p>ä¸‹æ–¹ä¸ºå·²æ·»åŠ çš„æœºå™¨äºº </p><p><img src="https://user-gold-cdn.xitu.io/2019/6/21/16b77cc20cea45c9?w=650&amp;h=344&amp;f=png&amp;s=33449" alt="image"></p><p>ä¸‹æ–¹ä¸ºæœºå™¨äººwebhookçš„åœ°å€:</p><p><img src="https://user-gold-cdn.xitu.io/2019/6/21/16b77cc20cf2d2e1" alt="image"></p><p>Linkç±»å‹<br><img src="https://user-gold-cdn.xitu.io/2019/6/21/16b77cc20d21821f?w=984&amp;h=456&amp;f=png&amp;s=26277" alt="image.png"></p><p>PHPå®ç°æ–¹å¼å¦‚ä¸‹ï¼š </p><pre><code>// å¼•å…¥client$client = new \GuzzleHttp\Client();$data = [             'msgtype' =&gt; 'link',             'link' =&gt; [                 'text' =&gt; 'å†…å®¹',                 'title' =&gt; 'æ ‡é¢˜',                 'picUrl' =&gt; 'å›¾ç‰‡URL,å¯ä¸å¡«å†™',                 'messageUrl' =&gt; "éœ€è¦è·³è½¬çš„urlåœ°å€"             ]         ];$res = $client-&gt;post("æœºå™¨äººçš„webhookåœ°å€",[            'headers' =&gt; [                'content-type' =&gt; 'application/json'            ],            'body' =&gt; json_encode($data),        ]);</code></pre><h3 id="å¦‚æœ‰ç–‘é—®ï¼Œè¯·ç•™è¨€ã€‚è°¢è°¢å¤§å®¶æ”¯æŒ"><a href="#å¦‚æœ‰ç–‘é—®ï¼Œè¯·ç•™è¨€ã€‚è°¢è°¢å¤§å®¶æ”¯æŒ" class="headerlink" title="å¦‚æœ‰ç–‘é—®ï¼Œè¯·ç•™è¨€ã€‚è°¢è°¢å¤§å®¶æ”¯æŒ"></a>å¦‚æœ‰ç–‘é—®ï¼Œè¯·ç•™è¨€ã€‚è°¢è°¢å¤§å®¶æ”¯æŒ</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel-adminé‡å†™å†…ç½®è§†å›¾ä»¥åŠè®¾ç½®ä¸­æ–‡è¯­è¨€</title>
      <link href="2019/09/06/laravel/laravel-admin%E9%87%8D%E5%86%99%E5%86%85%E7%BD%AE%E8%A7%86%E5%9B%BE%E4%BB%A5%E5%8F%8A%E8%AE%BE%E7%BD%AE%E4%B8%AD%E6%96%87%E8%AF%AD%E8%A8%80/"/>
      <url>2019/09/06/laravel/laravel-admin%E9%87%8D%E5%86%99%E5%86%85%E7%BD%AE%E8%A7%86%E5%9B%BE%E4%BB%A5%E5%8F%8A%E8%AE%BE%E7%BD%AE%E4%B8%AD%E6%96%87%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<p>laravel-adminé‡å†™å†…ç½®è§†å›¾ä»¥åŠè®¾ç½®ä¸­æ–‡è¯­è¨€<br><a id="more"></a></p><p>å¦‚éœ€äº†è§£ä½¿ç”¨æŠ€å·§ä»¥åŠç”¨æ³•ï¼š<a href="https://juejin.im/post/5d0c39fc6fb9a07eb051c925">https://juejin.im/post/5d0c39fc6fb9a07eb051c925</a></p><p>è‡ªå·±å†™çš„å·¥èµ„ç®¡ç†ç³»ç»Ÿå¯æŸ¥çœ‹æºç   <a href="https://github.com/WXiangQian/wage-cms">https://github.com/WXiangQian/wage-cms</a> </p><p>è‡ªå·±å†™çš„åŠå…¬ç”¨å“ç®¡ç†ç³»ç»Ÿå¯æŸ¥çœ‹æºç   <a href="https://github.com/WXiangQian/stationery-cms">https://github.com/WXiangQian/stationery-cms</a> </p><h4 id="æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’-star-è°¢è°¢æ”¯æŒ"><a href="#æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’-star-è°¢è°¢æ”¯æŒ" class="headerlink" title="æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’  star  è°¢è°¢æ”¯æŒ"></a>æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’  star  è°¢è°¢æ”¯æŒ</h4><hr><p>å¦‚æœæœ‰éœ€è¦è‡ªå·±ä¿®æ”¹viewï¼Œä½†æ˜¯ä¸æ–¹ä¾¿ç›´æ¥ä¿®æ”¹<code>laravel-admin</code>çš„æƒ…å†µï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„åŠæ³•è§£å†³</p><p>å¤åˆ¶<code>vendor/encore/laravel-admin/views</code>åˆ°é¡¹ç›®çš„<code>resources/views/admin</code>ï¼Œç„¶ååœ¨<code>app/Admin/bootstrap.php</code>æ–‡ä»¶ä¸­åŠ å…¥ä»£ç ï¼š</p><pre><code>app('view')-&gt;prependNamespace('admin', resource_path('views/admin'));</code></pre><p>è¿™æ ·å°±ç”¨<code>resources/views/admin</code>ä¸‹çš„è§†å›¾è¦†ç›–äº†<code>laravel-admin</code>çš„è§†å›¾ï¼Œè¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œæ›´æ–°<code>laravel-admin</code>çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°è§†å›¾æ–¹é¢çš„é—®é¢˜ï¼Œéœ€è¦é‡æ–°å¤åˆ¶<code>vendor/encore/laravel-admin/views</code>åˆ°é¡¹ç›®çš„<code>resources/views/admin</code>ä¸­ï¼Œæ³¨æ„å¤‡ä»½åŸæ¥å·²ç»ä¿®æ”¹è¿‡çš„è§†å›¾ã€‚</p><h3 id="ç»™ç™»å½•é¡µæ·»åŠ èƒŒæ™¯å›¾ä»¥åŠä¿®æ”¹æ ·å¼-å¯è‡ªå®šä¹‰æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå˜æ›´"><a href="#ç»™ç™»å½•é¡µæ·»åŠ èƒŒæ™¯å›¾ä»¥åŠä¿®æ”¹æ ·å¼-å¯è‡ªå®šä¹‰æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå˜æ›´" class="headerlink" title="ç»™ç™»å½•é¡µæ·»åŠ èƒŒæ™¯å›¾ä»¥åŠä¿®æ”¹æ ·å¼(å¯è‡ªå®šä¹‰æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå˜æ›´)"></a>ç»™ç™»å½•é¡µæ·»åŠ èƒŒæ™¯å›¾ä»¥åŠä¿®æ”¹æ ·å¼(å¯è‡ªå®šä¹‰æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå˜æ›´)</h3><blockquote><p>æ‰¾åˆ° public/vendor/laravel-admin/AdminLTE/dist/css/AdminLTE.min.css æ–‡ä»¶</p><pre><code>.login-page,.register-page{background:#d2d6de}</code></pre><p>æ”¹ä¸º</p><pre><code>.login-page,.register-page{background:url(/img/3.png) no-repeat center}.login-logo a åæ·»åŠ .login-logo a b{color: #3c8dbc}</code></pre></blockquote><h2 id="è®¾ç½®è¯­è¨€"><a href="#è®¾ç½®è¯­è¨€" class="headerlink" title="è®¾ç½®è¯­è¨€"></a>è®¾ç½®è¯­è¨€</h2><p>å®Œæˆå®‰è£…ä¹‹åï¼Œé»˜è®¤è¯­è¨€ä¸ºè‹±æ–‡(en)ï¼Œå¦‚æœè¦ä½¿ç”¨ä¸­æ–‡ï¼Œæ‰“å¼€<code>config/app.php</code>ï¼Œå°†<code>locale</code>è®¾ç½®ä¸º<code>zh-CN</code>å³å¯ã€‚</p><p>å…·ä½“æ–‡ä»¶å¯ä»¥å»<a href="https://github.com/WXiangQian/wage-cms/tree/master/resources/lang/zh-CN">https://github.com/WXiangQian/wage-cms/tree/master/resources/lang/zh-CN</a>æ‹·è´</p><h2 id="å…³äºå‰ç«¯èµ„æºé—®é¢˜"><a href="#å…³äºå‰ç«¯èµ„æºé—®é¢˜" class="headerlink" title="å…³äºå‰ç«¯èµ„æºé—®é¢˜"></a>å…³äºå‰ç«¯èµ„æºé—®é¢˜</h2><p>å¦‚æœéœ€è¦ä½¿ç”¨è‡ªå·±çš„å‰ç«¯æ–‡ä»¶ï¼Œå¯ä»¥åœ¨<code>app/Admin/bootstrap.php</code>ä¸­å¼•å…¥ï¼š</p><pre><code>Admin::css('path/to/your/css');Admin::js('path/to/your/js');</code></pre><h2 id="æ›´æ–°é™æ€èµ„æº"><a href="#æ›´æ–°é™æ€èµ„æº" class="headerlink" title="æ›´æ–°é™æ€èµ„æº"></a>æ›´æ–°é™æ€èµ„æº</h2><p>å¦‚æœé‡åˆ°æ›´æ–°ä¹‹å,éƒ¨åˆ†ç»„ä»¶ä¸èƒ½æ­£å¸¸ä½¿ç”¨,é‚£æœ‰å¯èƒ½æ˜¯<code>laravel-admin</code>è‡ªå¸¦çš„é™æ€èµ„æºæœ‰æ›´æ–°äº†,éœ€è¦è¿è¡Œå‘½ä»¤</p><pre><code>php artisan vendor:publish --tag=laravel-admin-assets --force</code></pre><p>æ¥é‡æ–°å‘å¸ƒå‰ç«¯èµ„æºï¼Œå‘å¸ƒä¹‹åä¸è¦å¿˜è®°æ¸…ç†æµè§ˆå™¨ç¼“å­˜.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>composerå¦‚ä½•æ›´æ–°æŒ‡å®šçš„ä¾èµ–åŒ…</title>
      <link href="2019/09/02/laravel/composer%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85/"/>
      <url>2019/09/02/laravel/composer%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<p>composerå¦‚ä½•æ›´æ–°æŒ‡å®šçš„ä¾èµ–åŒ…<br><a id="more"></a><br><img src="/img/article/composer.jpg" alt=""><br><a href="https://www.phpcomposer.com">Composer</a></p><p>æ˜¯ PHP ç”¨æ¥ç®¡ç†ä¾èµ–ï¼ˆdependencyï¼‰å…³ç³»çš„å·¥å…·ã€‚ä½ å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å£°æ˜æ‰€ä¾èµ–çš„å¤–éƒ¨å·¥å…·åº“ï¼ˆlibrariesï¼‰ï¼ŒComposer ä¼šå¸®ä½ å®‰è£…è¿™äº›ä¾èµ–çš„åº“æ–‡ä»¶ã€‚</p><p>composeræ›´æ–°æŒ‡å®šçš„ä¾èµ–åŒ…</p><p>compoesr çš„require/updateéƒ½å¯ä»¥æ›´æ–°æŒ‡å®šçš„ä¾èµ–åŒ…ï¼ˆå‡çº§/é™çº§ï¼‰ã€‚</p><p>requireæ›´ä¸ºçµæ´»äº›ï¼Œæœªå®‰è£…åˆ™è¿›è¡Œå®‰è£…ï¼Œå·²å®‰è£…åˆ™æ ¹æ®ä¼ å…¥çš„ç‰ˆæœ¬å·è¿›è¡Œå‡çº§æˆ–é™çº§ã€‚</p><p>updateåˆ™æ— æ³•åœ¨å‘½ä»¤è¡Œä¼ å…¥æ–°çš„ç‰ˆæœ¬å·ï¼Œéœ€è¦å…ˆæ‰‹åŠ¨åœ¨composer.jsonä¸­æŒ‡å®šæ–°çš„ç‰ˆæœ¬å·ï¼Œç„¶åæ‰§è¡Œæ›´æ–°å‘½ä»¤ã€‚</p><h3 id="require-å‘½ä»¤"><a href="#require-å‘½ä»¤" class="headerlink" title="require å‘½ä»¤"></a>require å‘½ä»¤</h3><pre class=" language-lang-php"><code class="language-lang-php">// å®‰è£…åŒ…composer require hashids/hashids:2.0.0// å·²å®‰è£… å‡çº§composer require hashids/hashids:3.0.0// å·²å®‰è£… é™çº§composer require hashids/hashids:2.0.4</code></pre><h3 id="update-å‘½ä»¤"><a href="#update-å‘½ä»¤" class="headerlink" title="update å‘½ä»¤"></a>update å‘½ä»¤</h3><p>updateå‘½ä»¤æ— æ³•åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šåŒ…ç‰ˆæœ¬å·ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹composer.jsonæ–‡ä»¶</p><pre class=" language-lang-php"><code class="language-lang-php">// å®‰è£…åŒ…composer require hashids/hashids:2.0.0</code></pre><p>é”™è¯¯çš„å†™æ³•âŒ</p><pre class=" language-lang-php"><code class="language-lang-php">composer update hashids/hashids:3.0.0</code></pre><pre class=" language-lang-php"><code class="language-lang-php">vim composer.json"require": {    "hashids/hashids": "3.0.0"},:wq#å‡çº§åˆ°3.0.0composer update hashids/hashidsvim composer.json"require": {    "hashids/hashids": "2.0.4"},:wq#é™çº§åˆ°2.0.4composer update hashids/hashids</code></pre><p>åŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç¼–è¾‘æ›´æ–°äº†å¤šä¸ªåŒ…çš„ç‰ˆæœ¬å·ï¼Œåˆ™æ— æ³•ä½¿ç”¨<br>composer update package1<br>composer update package2<br>composer update package3<br>çš„æ–¹å¼å»ä¾æ¬¡çš„æ›´æ–°ï¼Œå› ä¸ºcomposerä¼šæ ¡éªŒé…ç½®æ–‡ä»¶çš„å®Œæ•´æ€§composer.json vs composer.lockï¼Œä½ æŒ‡å®šè¦æˆ‘æ›´æ–°Aï¼Œä½†ä½ Bçš„versionåœ¨jsonå’Œlockä¸­ä¸ä¸€è‡´ï¼Œä½ å´ä¸è¦æˆ‘æ›´æ–°å®ƒï¼Œè¿™æ˜¯æœ‰é—®é¢˜çš„ã€‚</p><p>è¿™æ—¶åªèƒ½ä½¿ç”¨composer updateå…¨å±€æ›´æ–°ä¾èµ–ï¼Œæ³¨æ„æ˜¯å…¨å±€åŒ…çš„æ›´æ–°æ“ä½œï¼Œä¸€äº›ä½ æœªæ›´æ”¹ä½†ä½¿ç”¨äº†ç‰ˆæœ¬å·èŒƒå›´çš„åŒ…ä¹Ÿæœ‰å¯èƒ½è¢«æ›´æ–°å‡çº§ï¼Œè¯·æ…ç”¨ï¼</p><h3 id="install-å‘½ä»¤"><a href="#install-å‘½ä»¤" class="headerlink" title="install å‘½ä»¤"></a>install å‘½ä»¤</h3><p>installå¯ä»¥ç”¨äºé¡¹ç›®åˆå§‹åŒ–åï¼Œåˆæ¬¡å®‰è£…ä¾èµ–ï¼Œä¸”ä¼šä¼˜å…ˆè¯»å–composer.lockä¸­çš„ç‰ˆæœ¬å·ï¼Œä»¥å°½å¯èƒ½çš„ä¿è¯åä½œå¼€å‘ä¸­åŒ…ç‰ˆæœ¬çš„ä¸€è‡´æ€§ã€‚</p><p>install å‘½ä»¤ä»å½“å‰ç›®å½•è¯»å– composer.json æ–‡ä»¶ï¼Œå¤„ç†äº†ä¾èµ–å…³ç³»ï¼Œå¹¶æŠŠå…¶å®‰è£…åˆ° vendor ç›®å½•ä¸‹ã€‚</p><pre><code>composer install</code></pre><p>å¦‚æœå½“å‰ç›®å½•ä¸‹å­˜åœ¨ composer.lock æ–‡ä»¶ï¼Œå®ƒä¼šä»æ­¤æ–‡ä»¶è¯»å–ä¾èµ–ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯æ ¹æ® composer.json æ–‡ä»¶å»è·å–ä¾èµ–ã€‚è¿™ç¡®ä¿äº†è¯¥åº“çš„æ¯ä¸ªä½¿ç”¨è€…éƒ½èƒ½å¾—åˆ°ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬ã€‚</p><p>å¦‚æœæ²¡æœ‰ composer.lock æ–‡ä»¶ï¼Œcomposer å°†åœ¨å¤„ç†å®Œä¾èµ–å…³ç³»ååˆ›å»ºå®ƒã€‚<br>composer.lockä¸­å­˜æœ‰çš„åŒ…ç‰ˆæœ¬è®°å½•ç›¸å½“äºæ‰§è¡Œ composer require packageName:versionNoï¼Œä¸å­˜æœ‰çš„ç›¸å½“äºæ‰§è¡Œcomposer update packageName with versionRule in composer.jsonã€‚</p><p>å½“æˆ‘ä»¬ååŒå¼€å‘æ—¶ï¼ŒA åœ¨æœ¬åœ°å®‰è£…äº†æ–°çš„ä¾èµ–åŒ…ï¼Œæˆ–è€…æ›´æ–°äº†ä¾èµ–åŒ…ï¼Œä¼šå†™å…¥ composer.lock/composer.json,A ä¸Šä¼ è‡³ä»“åº“ï¼ŒB æ‹‰å–è‡³æœ¬åœ°åï¼Œåº”æ‰§è¡Œä¸€æ¬¡ composer installæ¥åŒæ­¥å›¢é˜Ÿçš„ç‰ˆæœ¬å˜æ›´ã€‚</p><p>æ‰€ä»¥åä½œå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å»ºè®®è¦åŒæ—¶å°†composer.lock/composer.jsonä¸Šä¼ è‡³è¿œç«¯ä»“åº“ã€‚</p><p><a href="https://docs.phpcomposer.com/">Composerä¸­æ–‡æ–‡æ¡£</a></p><p><a href="https://pkg.phpcomposer.com/">Composerä¸­å›½é•œåƒ</a></p><p><a href="https://juejin.im/post/5d0c80946fb9a07ee30e20a7">å¦‚ä½•åˆ›å»ºè‡ªå·±çš„ Laravel ComposeråŒ…</a></p><p><a href="https://juejin.im/post/5d0c807ae51d4510664d16f2">githubå‘å¸ƒpackagistçš„ç¨³å®šç‰ˆæœ¬åŒ…</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> composer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> composer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravelä¸­ä½¿ç”¨Queueé˜Ÿåˆ—æŠ€å·§</title>
      <link href="2019/08/27/laravel/Laravel%E4%B8%AD%E4%BD%BF%E7%94%A8Queue%E9%98%9F%E5%88%97%E6%8A%80%E5%B7%A7/"/>
      <url>2019/08/27/laravel/Laravel%E4%B8%AD%E4%BD%BF%E7%94%A8Queue%E9%98%9F%E5%88%97%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Laravel é˜Ÿåˆ—ä¸ºä¸åŒçš„åå°é˜Ÿåˆ—æœåŠ¡æä¾›ç»Ÿä¸€çš„ APIï¼Œä¾‹å¦‚ Beanstalkï¼ŒAmazon SQSï¼ŒRedisï¼Œç”šè‡³å…¶ä»–åŸºäºå…³ç³»å‹æ•°æ®åº“çš„é˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„ç›®çš„æ˜¯å°†è€—æ—¶çš„ä»»åŠ¡å»¶æ—¶å¤„ç†ï¼Œæ¯”å¦‚å‘é€é‚®ä»¶ï¼Œä»è€Œå¤§å¹…åº¦ç¼©çŸ­ Web è¯·æ±‚å’Œç›¸åº”çš„æ—¶é—´ã€‚</p><p>é˜Ÿåˆ—é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨ config/queue.php ã€‚æ¯ä¸€ç§é˜Ÿåˆ—é©±åŠ¨çš„é…ç½®éƒ½å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­æ‰¾åˆ°ï¼ŒåŒ…æ‹¬æ•°æ®åº“ï¼ŒBeanstalkd ï¼ŒAmazon SQSï¼ŒRedisï¼Œä»¥åŠåŒæ­¥ï¼ˆæœ¬åœ°ä½¿ç”¨ï¼‰é©±åŠ¨ã€‚å…¶ä¸­è¿˜åŒ…å«äº†ä¸€ä¸ª null é˜Ÿåˆ—é©±åŠ¨ç”¨äºé‚£äº›æ”¾å¼ƒé˜Ÿåˆ—çš„ä»»åŠ¡</p></blockquote><a id="more"></a><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ</h3><p>ä¸€èˆ¬æ¥è¯´ä½¿ç”¨é˜Ÿåˆ—æ˜¯ä¸ºäº†ï¼š</p><pre><code>å¼‚æ­¥é‡è¯•</code></pre><p>ä¹Ÿè®¸ä½ è¿˜æœ‰å…¶ä»–çš„ç†ç”±ä½¿ç”¨é˜Ÿåˆ—ï¼Œä½†æ˜¯è¿™åº”è¯¥æ˜¯æœ€åŸºæœ¬çš„ä¸¤ä¸ªåŸå› ã€‚</p><h3 id="ä»€ä¹ˆæƒ…å†µä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µä½¿ç”¨é˜Ÿåˆ—ï¼Ÿ</h3><p>äº†è§£äº†ä¸ºä»€ä¹ˆä½¿ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆä¸€èˆ¬æœ‰è¿™ä¹ˆå‡ ç±»ä»»åŠ¡ä½¿ç”¨é˜Ÿåˆ—ï¼š</p><p>è€—æ—¶æ¯”è¾ƒä¹…çš„ï¼Œæ¯”å¦‚ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶åè¿›è¡Œä¸€äº›æ ¼å¼çš„è½¬åŒ–ç­‰ã€‚<br>éœ€è¦ä¿è¯é€è¾¾ç‡çš„ï¼Œæ¯”å¦‚å‘é€çŸ­ä¿¡ï¼Œå› ä¸ºè¦è°ƒç”¨åˆ«äººçš„ apiï¼Œæ€»ä¼šæœ‰å‡ ç‡å¤±è´¥ï¼Œé‚£ä¹ˆä¸ºäº†ä¿è¯é€è¾¾ï¼Œé‡è¯•å°±å¿…ä¸å¯å°‘äº†ã€‚<br>ä½¿ç”¨é˜Ÿåˆ—çš„æ—¶å€™ä¸€å®šè¦æƒ³æ˜ç™½ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªä»»åŠ¡åˆ°åº•æ˜¯ä¸æ˜¯å¯ä»¥å¼‚æ­¥ï¼Œå¦‚æœå› ä¸ºå¼‚æ­¥ä¼šå¯¼è‡´é—®é¢˜ï¼Œé‚£ä¹ˆå°±è¦æ”¾å¼ƒä½¿ç”¨é˜Ÿåˆ—ã€‚</p><h3 id="é©±åŠ¨çš„å¿…è¦è®¾ç½®"><a href="#é©±åŠ¨çš„å¿…è¦è®¾ç½®" class="headerlink" title="é©±åŠ¨çš„å¿…è¦è®¾ç½®"></a>é©±åŠ¨çš„å¿…è¦è®¾ç½®</h3><h4 id="database-php"><a href="#database-php" class="headerlink" title="database.php"></a>database.php</h4><p>åœ¨ database.php é…ç½®æ–‡ä»¶ä¸­å¯¹ redis æ•°æ®åº“éƒ¨åˆ†è¿›è¡Œé…ç½®ï¼Œé»˜è®¤æœ‰ä¸€ä¸ª default è¿æ¥ï¼Œå°±ç”¨è¿™ä¸ªå¥½äº†:)</p><p>æ ¹æ®è¿™ä¸ªé»˜è®¤è¿æ¥ä¸­éœ€è¦çš„é…ç½®é¡¹ï¼Œç¼–è¾‘ .env é…ç½®æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ REDIS_HOSTã€REDIS_PASSWORDã€REDIS_PORT å¡«å†™æˆè‡ªå·±æœåŠ¡å™¨ä¸­ Redis çš„ç›¸åº”å€¼ã€‚</p><h4 id="queue-php"><a href="#queue-php" class="headerlink" title="queue.php"></a>queue.php</h4><p>é¦–å…ˆéœ€è¦å» .env ä¸­é…ç½® QUEUE_DRIVERï¼Œå› ä¸ºç°åœ¨æ‰“ç®—ç”¨ Redisï¼Œæ‰€ä»¥é…ç½®æˆ redisã€‚</p><p>æ¥ç€é…ç½® queue.php é‡Œ connections éƒ¨åˆ†çš„ redis è¿æ¥ï¼Œå…¶ä¸­ connection å¯¹åº”çš„å€¼å°±æ˜¯ database.php ä¸­ redis çš„é‚£ä¸ª default è¿æ¥ã€‚</p><h4 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h4><p>è¦ä½¿ç”¨ database è¿™ä¸ªé˜Ÿåˆ—é©±åŠ¨çš„è¯ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ•°æ®è¡¨æ¥å­˜å‚¨ä»»åŠ¡ã€‚ä½ å¯ä»¥ç”¨ queue:table è¿™ä¸ª Artisan </p><pre><code>php artisan queue:table</code></pre><h4 id="å¤„ç†å¤±è´¥çš„ä»»åŠ¡"><a href="#å¤„ç†å¤±è´¥çš„ä»»åŠ¡" class="headerlink" title="å¤„ç†å¤±è´¥çš„ä»»åŠ¡"></a>å¤„ç†å¤±è´¥çš„ä»»åŠ¡</h4><p>æœ‰æ—¶å€™ä½ é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼šå¤±è´¥ã€‚ä¸è¦æ‹…å¿ƒï¼Œæœ¬æ¥äº‹æƒ…å°±ä¸ä¼šä¸€å¸†é£é¡ºã€‚</p><p>Laravel å†…ç½®äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥æŒ‡å®šä»»åŠ¡é‡è¯•çš„æœ€å¤§æ¬¡æ•°ã€‚å½“ä»»åŠ¡è¶…å‡ºè¿™ä¸ªé‡è¯•æ¬¡æ•°åï¼Œå®ƒå°±ä¼šè¢«æ’å…¥åˆ° failed_jobs æ•°æ®è¡¨é‡Œé¢ã€‚è¦åˆ›å»º failed_jobs è¡¨çš„è¿ç§»æ–‡ä»¶ï¼Œä½ å¯ä»¥ç”¨ queue:failed-table å‘½ä»¤ï¼Œæ¥ç€ä½¿ç”¨ migrate Artisan å‘½ä»¤ç”Ÿæˆ failed_jobs è¡¨ï¼š</p><pre><code>php artisan queue:failed-table</code></pre><p>å‘½ä»¤æ¥åˆ›å»ºè¿™ä¸ªæ•°æ®è¡¨çš„è¿ç§»ã€‚å½“è¿ç§»åˆ›å»ºå¥½ä»¥åï¼Œå°±å¯ä»¥ç”¨ migrate è¿™æ¡å‘½ä»¤æ¥åˆ›å»ºæ•°æ®è¡¨ï¼š</p><pre><code>php artisan migrate</code></pre><h3 id="æ‰§è¡Œå‘½ä»¤è®²è§£"><a href="#æ‰§è¡Œå‘½ä»¤è®²è§£" class="headerlink" title="æ‰§è¡Œå‘½ä»¤è®²è§£"></a>æ‰§è¡Œå‘½ä»¤è®²è§£</h3><pre><code>php artisan queue:work --daemon --quiet --queue=default --delay=3 --sleep=3 --tries=3</code></pre><pre><code>--daemon</code></pre><p>The queue:work Artisan command includes a â€”daemon option for forcing the queue worker to continue processing jobs without ever re-booting the framework. This results in a significant reduction of CPU usage when compared to the queue:listen command</p><p>æ€»ä½“æ¥è¯´ï¼Œåœ¨ supervisor ä¸­ä¸€èˆ¬è¦åŠ è¿™ä¸ª optionï¼Œå¯ä»¥èŠ‚çœ CPU ä½¿ç”¨ã€‚</p><pre><code>--quiet</code></pre><p>ä¸è¾“å‡ºä»»ä½•å†…å®¹</p><pre><code>--delay=3</code></pre><p>ä¸€ä¸ªä»»åŠ¡å¤±è´¥åï¼Œå»¶è¿Ÿå¤šé•¿æ—¶é—´åå†é‡è¯•ï¼Œå•ä½æ˜¯ç§’ã€‚è¿™ä¸ªå€¼çš„è®¾å®šæˆ‘ä¸ªäººå»ºè®®ä¸è¦å¤ªçŸ­ï¼Œå› ä¸ºä¸€ä¸ªä»»åŠ¡å¤±è´¥ï¼ˆæ¯”å¦‚ç½‘ç»œåŸå› ï¼‰ï¼Œé‡è¯•æ—¶é—´å¤ªçŸ­å¯èƒ½ä¼šå‡ºç°è¿ç»­å¤±è´¥çš„æƒ…å†µã€‚</p><pre><code>--sleep=3</code></pre><p>å» Redis ä¸­æ‹¿ä»»åŠ¡çš„æ—¶å€™ï¼Œå‘ç°æ²¡æœ‰ä»»åŠ¡ï¼Œä¼‘æ¯å¤šé•¿æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚è¿™ä¸ªå€¼çš„è®¾å®šè¦çœ‹ä½ çš„ä»»åŠ¡æ˜¯å¦ç´§æ€¥ï¼Œå¦‚æœæ˜¯é‚£ç§éå¸¸ç´§æ€¥çš„ä»»åŠ¡ï¼Œä¸èƒ½ç­‰å¾…å¤ªé•¿æ—¶é—´ã€‚</p><pre><code>--tries=3</code></pre><p>å®šä¹‰å¤±è´¥ä»»åŠ¡æœ€å¤šé‡è¯•æ¬¡æ•°ã€‚è¿™ä¸ªå€¼çš„è®¾å®šæ ¹æ®ä»»åŠ¡çš„é‡è¦ç¨‹åº¦æ¥ç¡®å®šï¼Œä¸€èˆ¬ 3 æ¬¡æ¯”è¾ƒé€‚åˆã€‚</p><h3 id="åˆ›å»ºä»»åŠ¡"><a href="#åˆ›å»ºä»»åŠ¡" class="headerlink" title="åˆ›å»ºä»»åŠ¡"></a>åˆ›å»ºä»»åŠ¡</h3><h4 id="ç”Ÿæˆä»»åŠ¡ç±»"><a href="#ç”Ÿæˆä»»åŠ¡ç±»" class="headerlink" title="ç”Ÿæˆä»»åŠ¡ç±»"></a>ç”Ÿæˆä»»åŠ¡ç±»</h4><p>åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ï¼Œé˜Ÿåˆ—çš„ä»»åŠ¡ç±»éƒ½é»˜è®¤æ”¾åœ¨ app/Jobs ç›®å½•ä¸‹ã€‚å¦‚æœè¿™ä¸ªç›®å½•ä¸å­˜åœ¨ï¼Œé‚£å½“ä½ è¿è¡Œ make:job Artisan å‘½ä»¤æ—¶ç›®å½•å°±ä¼šè¢«è‡ªåŠ¨åˆ›å»ºã€‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹çš„ Artisan å‘½ä»¤æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„é˜Ÿåˆ—ä»»åŠ¡ï¼š</p><pre><code>php artisan make:job Demo</code></pre><p>ç”Ÿæˆçš„ç±»å®ç°äº† Illuminate\Contracts\Queue\ShouldQueue æ¥å£ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªä»»åŠ¡å°†ä¼šè¢«æ¨é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œä¸æ˜¯åŒæ­¥æ‰§è¡Œã€‚</p><pre><code>&lt;?phpnamespace App\Jobs;use Illuminate\Bus\Queueable;use Illuminate\Queue\SerializesModels;use Illuminate\Queue\InteractsWithQueue;use Illuminate\Contracts\Queue\ShouldQueue;use Illuminate\Foundation\Bus\Dispatchable;use Illuminate\Support\Facades\Log;class Demo implements ShouldQueue{    use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;    public $param;    /**     * Create a new job instance.     *     * @return void     */    public function __construct($param = '')    {        $this-&gt;param = $param;    }    /**     * Execute the job.     *     * @return void     */    public function handle()    {        Log::info('Hello, '.$this-&gt;param);    }}</code></pre><p>æ§åˆ¶å™¨ä»£ç </p><pre><code>public function queue_demo(){    $num = rand(1,999999999);    // è¿™ä¸ªä»»åŠ¡å°†è¢«åˆ†å‘åˆ°é»˜è®¤é˜Ÿåˆ—...    DemoJob::dispatch($num);}</code></pre><h3 id="å¼€å¯é˜Ÿåˆ—"><a href="#å¼€å¯é˜Ÿåˆ—" class="headerlink" title="å¼€å¯é˜Ÿåˆ—"></a>å¼€å¯é˜Ÿåˆ—</h3><pre><code>php artisan queue:work --queue=default</code></pre><p>ç”±äºæ˜¯æœ¬åœ°ï¼Œéœ€è¦æ‰“å¼€ç›‘å¬ï¼Œå½“è®¿é—®åˆ°æ¥å£æ—¶ï¼Œå°±ä¼šè§¦å‘é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</p><p>çº¿ä¸Šçš„è¯éœ€è¦ç”¨åˆ°<strong>supervisor</strong>çš„é…ç½®</p><h3 id="Supervisor-é…ç½®"><a href="#Supervisor-é…ç½®" class="headerlink" title="Supervisor é…ç½®"></a>Supervisor é…ç½®</h3><h4 id="å®‰è£…-Supervisor"><a href="#å®‰è£…-Supervisor" class="headerlink" title="å®‰è£… Supervisor"></a>å®‰è£… Supervisor</h4><p>Supervisor æ˜¯ä¸€ä¸ª Linux æ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹ç›‘æ§è½¯ä»¶ï¼Œå®ƒä¼šåœ¨ queue:listen æˆ– queue:work å‘½ä»¤å‘ç”Ÿå¤±è´¥åè‡ªåŠ¨é‡å¯å®ƒä»¬ã€‚åœ¨ Ubuntu å®‰è£… Supervisorï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre><code>sudo apt-get install supervisor</code></pre><p>{tip} å¦‚æœè‡ªå·±æ‰‹åŠ¨é…ç½® Supervisor å¬èµ·æ¥æœ‰ç‚¹éš¾ä»¥åº”ä»˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Laravel Forgeï¼Œå®ƒèƒ½ç»™ä½ çš„ Laravel é¡¹ç›®è‡ªåŠ¨å®‰è£…ä¸é…ç½® Supervisorã€‚</p><h4 id="é…ç½®-Supervisor"><a href="#é…ç½®-Supervisor" class="headerlink" title="é…ç½® Supervisor"></a>é…ç½® Supervisor</h4><p>Supervisor çš„é…ç½®æ–‡ä»¶ä¸€èˆ¬æ˜¯æ”¾åœ¨ /etc/supervisor/conf.d ç›®å½•ä¸‹ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸­ä½ å¯ä»¥åˆ›å»ºä»»æ„æ•°é‡çš„é…ç½®æ–‡ä»¶æ¥è¦æ±‚ Supervisor æ€æ ·ç›‘æ§ä½ çš„è¿›ç¨‹ã€‚ä¾‹å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª laravel-worker.conf æ¥å¯åŠ¨ä¸ç›‘æ§ä¸€ä¸ª queue:work è¿›ç¨‹ï¼š</p><pre><code>[program:laravel-worker]process_name=%(program_name)s_%(process_num)02dcommand=php /home/forge/app.com/artisan queue:work sqs --sleep=3 --tries=3autostart=trueautorestart=trueuser=forgenumprocs=8redirect_stderr=truestdout_logfile=/home/forge/app.com/worker.log</code></pre><p>è¿™ä¸ªä¾‹å­é‡Œçš„ numprocs å‘½ä»¤ä¼šè¦æ±‚ Supervisor è¿è¡Œå¹¶ç›‘æ§ 8 ä¸ª queue:work è¿›ç¨‹ï¼Œå¹¶ä¸”åœ¨å®ƒä»¬è¿è¡Œå¤±è´¥åé‡æ–°å¯åŠ¨ã€‚å½“ç„¶ï¼Œä½ å¿…é¡»æ›´æ”¹ command å‘½ä»¤çš„ queue:work sqs ï¼Œä»¥æ˜¾ç¤ºä½ æ‰€é€‰æ‹©çš„é˜Ÿåˆ—é©±åŠ¨ã€‚</p><p>å¯åŠ¨ Supervisor<br>å½“è¿™ä¸ªé…ç½®æ–‡ä»¶è¢«åˆ›å»ºåï¼Œä½ éœ€è¦æ›´æ–° Supervisor çš„é…ç½®ï¼Œå¹¶ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨è¯¥è¿›ç¨‹ï¼š</p><pre><code>sudo supervisorctl rereadsudo supervisorctl updatesudo supervisorctl start laravel-worker:*</code></pre><p>ä½¿ç”¨supervisorè¿›ç¨‹ç®¡ç†å‘½ä»¤ä¹‹å‰å…ˆå¯åŠ¨supervisordï¼Œå¦åˆ™ç¨‹åºæŠ¥é”™ã€‚<br>ä½¿ç”¨å‘½ä»¤<code>supervisord -c /etc/supervisord.conf</code>å¯åŠ¨ã€‚</p><p>æœ‰å…³ Supervisor çš„è®¾ç½®ä¸ä½¿ç”¨ï¼Œè¯·å‚è€ƒ Supervisor <a href="http://supervisord.org/index.html">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h4><ol><li><p>unix:///var/run/supervisor.sock no such file</p><p> é—®é¢˜æè¿°ï¼šå®‰è£…å¥½supervisoræ²¡æœ‰å¼€å¯æœåŠ¡ç›´æ¥ä½¿ç”¨supervisorctlæŠ¥çš„é”™</p><p> è§£å†³åŠæ³•ï¼š<code>supervisord -c /etc/supervisord.conf</code></p></li><li><p>commandä¸­æŒ‡å®šçš„è¿›ç¨‹å·²ç»èµ·æ¥ï¼Œä½†supervisorè¿˜ä¸æ–­é‡å¯</p><p> é—®é¢˜æè¿°ï¼šcommandä¸­å¯åŠ¨æ–¹å¼ä¸ºåå°å¯åŠ¨ï¼Œå¯¼è‡´è¯†åˆ«ä¸åˆ°pidï¼Œç„¶åä¸æ–­é‡å¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯elasticsearchï¼ŒcommandæŒ‡å®šçš„æ˜¯<code>$path/bin/elasticsearch -d</code></p><p> è§£å†³åŠæ³•ï¼šsupervisoræ— æ³•æ£€æµ‹åå°å¯åŠ¨è¿›ç¨‹çš„pidï¼Œè€Œsupervisoræœ¬èº«å°±æ˜¯åå°å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œå› æ­¤ä¸ç”¨æ‹…å¿ƒè¿™ä¸ª</p></li><li><p>å¯åŠ¨äº†å¤šä¸ªsupervisordæœåŠ¡ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸å…³é—­æœåŠ¡</p><p> é—®é¢˜æè¿°ï¼šåœ¨è¿è¡Œ<code>supervisord -c /etc/supervisord.conf</code>ä¹‹å‰ï¼Œç›´æ¥è¿è¡Œè¿‡<code>supervisord -c /etc/supervisord.d/xx.conf</code>å¯¼è‡´æœ‰äº›è¿›ç¨‹è¢«å¤šä¸ªsuperviordç®¡ç†ï¼Œæ— æ³•æ­£å¸¸å…³é—­è¿›ç¨‹ã€‚</p><p> è§£å†³åŠæ³•ï¼šä½¿ç”¨<code>ps -fe | grep supervisord</code>æŸ¥çœ‹æ‰€æœ‰å¯åŠ¨è¿‡çš„supervisordæœåŠ¡ï¼Œkillç›¸å…³çš„è¿›ç¨‹ã€‚</p></li></ol><h3 id="å…·ä½“ç¤ºä¾‹ä»£ç å‚è€ƒgithubä»“åº“"><a href="#å…·ä½“ç¤ºä¾‹ä»£ç å‚è€ƒgithubä»“åº“" class="headerlink" title="å…·ä½“ç¤ºä¾‹ä»£ç å‚è€ƒgithubä»“åº“"></a>å…·ä½“ç¤ºä¾‹ä»£ç å‚è€ƒ<a href="https://github.com/WXiangQian/laravel-api">githubä»“åº“</a></h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel-adminæ–°æ‰‹å¿«é€Ÿå…¥é—¨ä»¥åŠé‡åˆ°çš„é‚£äº›å‘</title>
      <link href="2019/08/22/laravel/laravel-admin%E6%96%B0%E6%89%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E4%BB%A5%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%82%A3%E4%BA%9B%E5%9D%91/"/>
      <url>2019/08/22/laravel/laravel-admin%E6%96%B0%E6%89%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E4%BB%A5%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%82%A3%E4%BA%9B%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p><code>laravel-admin</code> æ˜¯ä¸€ä¸ªç”¨äºä¸ºLaravelæä¾›åå°ç•Œé¢çš„æ„å»ºå™¨</p><a id="more"></a><p>ä»…ä»…é€šè¿‡æ•°è¡Œä»£ç ï¼Œå°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºCRUDåå°ã€‚</p><p><code>laravel-admin</code>ä¸éœ€è¦å†™å‰ç«¯é¡µé¢ï¼Œåœ¨æ§åˆ¶å™¨controllerä¸­æ¸²æŸ“å³å¯ä¸ºäº†æ–¹ä¾¿å¤§å®¶ä½¿ç”¨ï¼Œä¸‹é¢éƒ¨åˆ†ä»£ç éƒ½æ˜¯å±äºå¯å¤åˆ¶çš„demo</p><p><a href="https://juejin.im/post/5d0c8c3e51882532891f760c">Laravel-admin è‡ªå®šä¹‰excelå¯¼å‡ºæ•°æ®</a></p><p><a href="https://juejin.im/post/5d0c80d3e51d45773d468629">laravel-adminæŠ¥é”™:Disk [admin] not configured, please add a disk config in `configè¯·ç‚¹å‡»é“¾æ¥æ‰¾è§£å†³æ–¹æ¡ˆ</a></p><p><a href="https://juejin.im/post/5d0c8b776fb9a07ecc448d69">é‡åˆ°æŠ¥é”™ï¼šSyntax error or access violation: 1071 Specified key was too long; max key length is 1000 bytes</a></p><p><a href="https://juejin.im/post/5d0c3c07e51d4510727c80ae">å¦‚éœ€é‡å†™å†…ç½®è§†å›¾ä»¥åŠè®¾ç½®è¯­è¨€</a></p><p>è‡ªå·±å†™çš„å·¥èµ„ç®¡ç†ç³»ç»Ÿå¯æŸ¥çœ‹æºç   <a href="https://github.com/WXiangQian/wage-cms">https://github.com/WXiangQian/wage-cms</a> </p><p>è‡ªå·±å†™çš„åŠå…¬ç”¨å“ç®¡ç†ç³»ç»Ÿå¯æŸ¥çœ‹æºç   <a href="https://github.com/WXiangQian/stationery-cms">https://github.com/WXiangQian/wage-cms</a> </p><h4 id="æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’-star-è°¢è°¢æ”¯æŒ"><a href="#æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’-star-è°¢è°¢æ”¯æŒ" class="headerlink" title="æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’  star  è°¢è°¢æ”¯æŒ"></a>æ„Ÿè§‰ä¸é”™çš„è¯è¯·ç‚¹å‡»å³ä¸Šè§’  star  è°¢è°¢æ”¯æŒ</h4><p><a href="https://laravel-admin.org/docs/zh">laravel-admin  æ‰‹å†Œåœ°å€</a></p><p>laravel-admin demoåœ°å€  æ‰“å¼€<a href="http://demo.laravel-admin.org/auth/login">http://demo.laravel-admin.org/auth/login</a>ï¼Œç”¨è´¦å·å¯†ç <code>admin/admin</code>ç™»é™†</p><p>laravel-admin å®‰è£…åœ°å€ï¼š<a href="https://laravel-admin.org/docs/zh/installation">https://laravel-admin.org/docs/zh/installation</a></p><p><code>model-grid</code>æ”¯æŒå¿«é€Ÿæ„å»ºæ•°æ®è¡¨æ ¼</p><p><code>model-form</code>æ”¯æŒå¿«é€Ÿæ„å»ºæ•°æ®è¡¨å•</p><p><code>model-tree</code>æ”¯æŒå¿«é€Ÿæ„å»ºæ ‘çŠ¶æ•°æ®</p><p>ä»¥ä¸‹æ–¹æ³•éƒ½æ˜¯1.5.*çš„æ“ä½œï¼Œç”±äºæ¡†æ¶åœ¨ä¸æ–­æ›´æ–°ï¼Œæ–°å‘ä¼šæ›´å¤šï¼Œæ‰€ä»¥æˆ‘å…ˆæŠŠ1.5çš„å‘è¸©å®Œï¼ŒåæœŸè€ƒè™‘åœ¨æ›´æ–°</p><p><a href="https://juejin.im/post/5d5e08cbf265da03e83b72a7">å¦‚æœä½ ä½¿ç”¨çš„æ˜¯1.6.*ç‰ˆæœ¬ç‚¹å‡»è·³è½¬</a> </p><p><strong>å®ç°äºŒçº§è”åŠ¨select</strong></p><pre><code>// formä»£ç // å…¶ä¸­load('d_id', '/admin/users/d_id');çš„æ„æ€æ˜¯ï¼Œåœ¨å½“å‰selectçš„é€‰é¡¹åˆ‡æ¢ä¹‹åï¼Œ//ä¼šæŠŠå½“å‰é€‰é¡¹çš„å€¼é€šè¿‡å‚æ•°q,è°ƒç”¨æ¥å£/admin/users/d_idï¼Œå¹¶æŠŠapiè¿”å›çš„æ•°æ®å¡«å……ä¸ºd_idé€‰æ‹©æ¡†çš„é€‰é¡¹$form-&gt;select('pid', 'éƒ¨é—¨')-&gt;options(Department::where('pid', 0)-&gt;pluck('name', 'id'))      -&gt;load('d_id', '/admin/users/d_id')-&gt;rules('required');$form-&gt;select('d_id', 'å²—ä½')-&gt;options(function ($id) {        return Department::where('id', $id)-&gt;pluck('name', 'id');     })-&gt;rules('required');// routes$router-&gt;get('/users/d_id', 'UsersController@d_id');//åˆ‡è®°ï¼Œæ”¾èµ„æºè·¯ç”±ä¸Šæ–¹//controllerpublic function d_id(Request $request){  $q = $request-&gt;get('q');  return Department::where('pid', $q)-&gt;get(['id', DB::raw('name as text')]);}</code></pre><p><a href="https://juejin.im/post/5d0c44176fb9a07ed657dabd">å¦‚æœä½ æƒ³åœ¨å·¦ä¾§é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªæœç´¢æ¡†ï¼Œæ›´åˆ©äºå¿«é€Ÿæœç´¢,è¯·ç‚¹æˆ‘</a></p><p><strong>ç¦ç”¨åˆ›å»ºæŒ‰é’®</strong></p><pre><code>$grid-&gt;disableCreateButton();</code></pre><p><strong>ç¦ç”¨åˆ†é¡µæ¡</strong></p><pre><code>$grid-&gt;disablePagination();</code></pre><p><strong>ç¦ç”¨æŸ¥è¯¢è¿‡æ»¤å™¨</strong></p><pre><code>$grid-&gt;disableFilter();</code></pre><p><strong>ç¦ç”¨å¯¼å‡ºæ•°æ®æŒ‰é’®</strong></p><pre><code>$grid-&gt;disableExport();</code></pre><p><strong>ç¦ç”¨è¡Œæ“ä½œåˆ—</strong></p><pre><code>$grid-&gt;disableActions();</code></pre><p><strong>è®¾ç½®åˆ†é¡µé€‰æ‹©å™¨é€‰é¡¹</strong></p><pre><code>$grid-&gt;perPages([10, 20, 30, 40, 50]);</code></pre><p><strong><code>model-grid</code>é»˜è®¤æœ‰ä¸¤ä¸ªè¡Œæ“ä½œ<code>ç¼–è¾‘</code>å’Œ<code>åˆ é™¤</code>ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å…³é—­å®ƒä»¬ï¼š</strong></p><pre><code> $grid-&gt;actions(function ($actions) {    // éšè—åˆ é™¤æŒ‰é’®    $actions-&gt;disableDelete();    // éšè—ä¿®æ”¹æŒ‰é’®    $actions-&gt;disableEdit();});</code></pre><p><strong>å¦‚æœæœ‰è‡ªå®šä¹‰çš„æ“ä½œæŒ‰é’®ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ·»åŠ ï¼š</strong></p><pre><code>$grid-&gt;actions(function ($actions) {    // appendä¸€ä¸ªæ“ä½œ    $actions-&gt;append('&lt;a href=""&gt;&lt;i class="fa fa-eye"&gt;&lt;/i&gt;&lt;/a&gt;');    // prependä¸€ä¸ªæ“ä½œ    $actions-&gt;prepend('&lt;a href=""&gt;&lt;i class="fa fa-paper-plane"&gt;&lt;/i&gt;&lt;/a&gt;');});</code></pre><p><strong>è·å–ä¸»é”®ä¿¡æ¯æˆ–è€…è·å–å½“å‰è¡Œçš„æ•°ç»„</strong></p><pre><code>$grid-&gt;actions(function ($actions) {    // å½“å‰è¡Œçš„æ•°æ®æ•°ç»„    $row = $actions-&gt;row;    // è·å–å½“å‰è¡Œä¸»é”®å€¼    $id = $actions-&gt;getKey(); });</code></pre><p><strong>ç›®å‰é»˜è®¤å®ç°äº†æ‰¹é‡åˆ é™¤æ“ä½œçš„åŠŸèƒ½ï¼Œå¦‚æœè¦å…³æ‰æ‰¹é‡åˆ é™¤æ“ä½œï¼š</strong></p><pre><code>$grid-&gt;tools(function ($tools) {    $tools-&gt;batch(function ($batch) {        $batch-&gt;disableDelete();    });});</code></pre><p><strong>æŸ¥è¯¢è¿‡æ»¤Filter**</strong>ï¼šå¦‚ä¸‹**</p><pre><code>$grid-&gt;filter(function ($query) {    // å»æ‰é»˜è®¤çš„idè¿‡æ»¤å™¨    $query-&gt;disableIdFilter();    $query-&gt;like('title', 'æ–‡ç« æ ‡é¢˜');    $query-&gt;equal('cate_id', 'æ‰€å±åˆ†ç±»')-&gt;select(        ArticleCategories::pluck('name', 'id')    );});</code></pre><p><strong>formçš„ä¸€äº›å°æŠ€å·§ ï¼š</strong></p><pre><code>$form-&gt;text('from', 'æ–‡ç« æ¥æº')-&gt;rules('required')     //å¯ä»¥åŠ ruleséªŒè¯è§„åˆ™$form-&gt;image('thumb', 'æ–‡ç« ç¼©ç•¥å›¾')-&gt;uniqueName()    -&gt;move('upload/article/' . date("Ymd"))    -&gt;options(['overwriteInitial' =&gt; true]);//ä»£è¡¨æ–°å›¾ç‰‡æ›¿æ¢ä¿®å›¾ç‰‡    -&gt;uniqueName() //ä¸ºéšæœºåç§°//ä¿å­˜å‰å›è°ƒ$form-&gt;saving(function (Form $form) {});//ä¿å­˜åå›è°ƒ$form-&gt;saved(function (Form $form) {});// è®¾ç½®è¡¨å•æäº¤çš„action$form-&gt;setAction('admin/users');</code></pre><p><strong>è·å–URLä¸­çš„id</strong></p><pre><code>$shopId = request()-&gt;route()-&gt;parameter('shop');</code></pre><p>å½“ä¸º<strong>æ·»åŠ </strong>æ“ä½œæ—¶ï¼Œåº—é“ºåç§°ä¸å¯å’Œæ•°æ®åº“å†…å…¶ä»–æ•°æ®é‡å¤</p><p>å½“ä¸º<strong>ä¿®æ”¹</strong>æ“ä½œæ—¶ï¼Œåº—é“ºåç§°é™¤è‡ªå·±å¤–ä¸å¯å’Œæ•°æ®åº“å†…å…¶ä»–æ•°æ®é‡å¤</p><pre><code>if ($shopId) {    $form-&gt;text('shop_name', 'åº—é“ºåç§°')        -&gt;rules("required|unique:shops,shop_name,{$shopId},id");} else {    $form-&gt;text('shop_name', 'åº—é“ºåç§°')        -&gt;rules("required|unique:shops");}</code></pre><p>è¿›å…¥gridè¡¨æ ¼æ—¶ï¼Œ<strong>é»˜è®¤idå€’åº</strong></p><pre><code>$grid-&gt;model()-&gt;orderBy('id', 'desc');</code></pre><p><strong>æ¨¡å‹æ ‘Tree</strong></p><pre><code>public function index(){  return Admin::content(function (Content $content) {      $content-&gt;header('**ç®¡ç†');      $content-&gt;description('');       $content-&gt;body($this-&gt;tree());  });}protected function tree(){  return Department::tree(function (Tree $tree) {      $tree-&gt;branch(function ($data) {          return "{$data['name']}";      });  });}</code></pre><p>åœ¨é¡µé¢è°ƒç”¨ä¸‹é¢çš„æ–¹æ³•ï¼Œå®ƒå°†ä¼š<strong>è°ƒç”¨<a href="https://github.com/CodeSeven/toastr">toastr</a>ç»„ä»¶</strong>ï¼Œåœ¨é¡µé¢çš„å³ä¸Šè§’æ·»åŠ ä¸€æ¡<strong>æµ®åŠ¨çš„æç¤º</strong></p><pre><code>admin_toastr('Message...', 'success');admin_toastr('Message...', 'info');admin_toastr('Message...', 'warning');admin_toastr('Message...', 'error');</code></pre><p>ä¹Ÿå¯ä»¥æ¥æ”¶ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç»™toastræ·»åŠ è®¾ç½®å‚æ•°,æ›´å¤šå‚æ•°å‚è€ƒ<a href="https://github.com/CodeSeven/toastr">toastr</a></p><pre><code>admin_toastr('Message...', 'success', ['timeOut' =&gt; 5000]);</code></pre><h3 id="çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæ–‡ç« ä¼šä¸æ–­æ›´æ–°ï¼Œå¦‚æœ‰ç–‘é—®æˆ–æ–°å‘ï¼Œæ¬¢è¿è¯„è®º"><a href="#çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæ–‡ç« ä¼šä¸æ–­æ›´æ–°ï¼Œå¦‚æœ‰ç–‘é—®æˆ–æ–°å‘ï¼Œæ¬¢è¿è¯„è®º" class="headerlink" title="çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæ–‡ç« ä¼šä¸æ–­æ›´æ–°ï¼Œå¦‚æœ‰ç–‘é—®æˆ–æ–°å‘ï¼Œæ¬¢è¿è¯„è®º"></a>çº¯åŸåˆ›ï¼Œå¸Œæœ›å¯ä»¥å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæ–‡ç« ä¼šä¸æ–­æ›´æ–°ï¼Œå¦‚æœ‰ç–‘é—®æˆ–æ–°å‘ï¼Œæ¬¢è¿è¯„è®º</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>thinkphp3.2åŒæ—¶è¿æ¥ä¸¤ä¸ªæ•°æ®åº“</title>
      <link href="2019/08/20/php/thinkphp3-2%E5%90%8C%E6%97%B6%E8%BF%9E%E6%8E%A5%E4%B8%A4%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>2019/08/20/php/thinkphp3-2%E5%90%8C%E6%97%B6%E8%BF%9E%E6%8E%A5%E4%B8%A4%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å› é¡¹ç›®éœ€æ±‚,éœ€è¦ç”¨åˆ°è¿æ¥ä¸¤ä¸ªåº“,æ‰€ä»¥å°è£…äº†ä¸ªæ–¹æ³•,å®ä¾‹å¦‚ä¸‹ï¼š</p></blockquote><a id="more"></a><p><a href="https://juejin.im/post/5d3fa541f265da03c926d36f">thinkphp3.2åŒæ—¶è¿æ¥ä¸¤ä¸ªæ•°æ®åº“æ˜é‡‘åœ°å€</a></p><p><a href="https://juejin.im/post/5d424833518825221b4cbdd2">laravelåŒæ—¶è¿æ¥ä¸¤ä¸ªæ•°æ®åº“æ˜é‡‘åœ°å€</a></p><p><a href="http://document.thinkphp.cn/manual_3_2.html#connect_db">thinkphp3.2æ‰‹å†Œè¿æ¥æ•°æ®åº“</a></p><h3 id="åœ¨å…¬å…±çš„function-phpåŠ å…¥å°è£…æ–¹æ³•"><a href="#åœ¨å…¬å…±çš„function-phpåŠ å…¥å°è£…æ–¹æ³•" class="headerlink" title="åœ¨å…¬å…±çš„function.phpåŠ å…¥å°è£…æ–¹æ³•"></a>åœ¨å…¬å…±çš„function.phpåŠ å…¥å°è£…æ–¹æ³•</h3><pre class=" language-lang-php"><code class="language-lang-php">function getCrmModel($name) {    // newçš„modelå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å»æ›´æ”¹    return new \Home\Model\CrmModel($name);}</code></pre><h3 id="modelä»£ç "><a href="#modelä»£ç " class="headerlink" title="modelä»£ç "></a>modelä»£ç </h3><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace Home\Model;class CrmModel extends BaseModel{    public function _initialize(){        parent::_initialize();        $this->connection = array(            'db_type' => C('CRM_DB.DB_TYPE'),            'db_user' => C('CRM_DB.DB_USER'),            'db_pwd' => C('CRM_DB.DB_PWD'),            'db_host' => C('CRM_DB.DB_HOST'),            'db_port' => C('CRM_DB.DB_PORT'),        );        $this->dbName = C('CRM_DB.DB_NAME');        $this->tablePrefix = C('CRM_DB.DB_PREFIX');    }}</code></pre><h3 id="åœ¨å…¬å…±çš„configä¸­æ·»åŠ é…ç½®ä¿¡æ¯"><a href="#åœ¨å…¬å…±çš„configä¸­æ·»åŠ é…ç½®ä¿¡æ¯" class="headerlink" title="åœ¨å…¬å…±çš„configä¸­æ·»åŠ é…ç½®ä¿¡æ¯"></a>åœ¨å…¬å…±çš„configä¸­æ·»åŠ é…ç½®ä¿¡æ¯</h3><pre class=" language-lang-php"><code class="language-lang-php">//ç¬¬äºŒä¸ªæ•°æ®åº“é…ç½®ä¿¡æ¯'CRM_DB'=>array(    'DB_TYPE' => 'mysql', // æ•°æ®åº“ç±»å‹    'DB_HOST' => 'localhost', // æœåŠ¡å™¨åœ°å€    'DB_NAME' => 'test', // æ•°æ®åº“å    'DB_USER' => 'root', // ç”¨æˆ·å    'DB_PWD' => 'root', // å¯†ç     'DB_PORT' => '3306', // ç«¯å£    'DB_PREFIX' => 'test_', // å‰ç¼€),</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel5ä½¿ç”¨hashidså¯¹idè¿›è¡ŒåŠ å¯†</title>
      <link href="2019/08/19/laravel/laravel5%E4%BD%BF%E7%94%A8hashids%E5%AF%B9id%E8%BF%9B%E8%A1%8C%E5%8A%A0%E5%AF%86/"/>
      <url>2019/08/19/laravel/laravel5%E4%BD%BF%E7%94%A8hashids%E5%AF%B9id%E8%BF%9B%E8%A1%8C%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¾ˆå¤šæ–‡ç« idéƒ½æ˜¯æœ‰è§„å¾‹çš„ï¼Œèƒ½çˆ¬æ¥å£çš„æ•°æ®æˆ–è€…è·å–åˆ°æœ¬é¡µé¢çš„å†…å®¹<br>  ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µçš„äº‹æƒ…å‘ç”Ÿï¼Œæˆ‘ä»¬å°†ä½¿ç”¨hashidsåŠ å¯†ï¼Œæ¥ç”Ÿæˆä¸è§„å¾‹çš„ç¼–å·<br>  è¿™æ ·å°±ä¸ä¼šé€ æˆè¢«äººçˆ¬æ•°æ®çš„æƒ…å†µäº†ï¼Œä¸‹é¢æˆ‘å°†æ¼”ç¤ºè¯¦ç»†çš„æµç¨‹</p></blockquote><a id="more"></a><p><a href="https://github.com/vinkla/laravel-hashids">laravel-hashidsçš„githubç½‘å€</a></p><h3 id="åœ¨laravelä¸­å®‰è£…hashids"><a href="#åœ¨laravelä¸­å®‰è£…hashids" class="headerlink" title="åœ¨laravelä¸­å®‰è£…hashids"></a>åœ¨laravelä¸­å®‰è£…hashids</h3><pre><code>composer require vinkla/hashids v3.3.0</code></pre><p>PSï¼šå› ä¸ºç°åœ¨ vinkla/hashidsæœ€æ–°ç‰ˆæœ¬æ”¯æŒ5.7ï¼Œæˆ‘çš„laravelç‰ˆæœ¬ä¸º5.5ï¼Œæ‰€ä»¥è¦å¯¹åº”ç›¸åº”çš„ç‰ˆæœ¬å·</p><h3 id="åœ¨config-app-phpä¸­çš„providersæ•°ç»„ä¸­æ·»åŠ "><a href="#åœ¨config-app-phpä¸­çš„providersæ•°ç»„ä¸­æ·»åŠ " class="headerlink" title="åœ¨config/app.phpä¸­çš„providersæ•°ç»„ä¸­æ·»åŠ "></a>åœ¨config/app.phpä¸­çš„providersæ•°ç»„ä¸­æ·»åŠ </h3><pre><code>Vinkla\Hashids\HashidsServiceProvider::class,</code></pre><h3 id="åœ¨config-app-phpä¸­çš„aliasesæ•°ç»„ä¸­æ·»åŠ "><a href="#åœ¨config-app-phpä¸­çš„aliasesæ•°ç»„ä¸­æ·»åŠ " class="headerlink" title="åœ¨config/app.phpä¸­çš„aliasesæ•°ç»„ä¸­æ·»åŠ "></a>åœ¨config/app.phpä¸­çš„aliasesæ•°ç»„ä¸­æ·»åŠ </h3><pre><code>'Hashids' =&gt; Vinkla\Hashids\Facades\Hashids::class,</code></pre><h3 id="configä¸‹ç”Ÿæˆhashids-phpé…ç½®æ–‡ä»¶"><a href="#configä¸‹ç”Ÿæˆhashids-phpé…ç½®æ–‡ä»¶" class="headerlink" title="configä¸‹ç”Ÿæˆhashids.phpé…ç½®æ–‡ä»¶"></a>configä¸‹ç”Ÿæˆhashids.phpé…ç½®æ–‡ä»¶</h3><pre><code>php artisan vendor:publish</code></pre><h3 id="ä¿®æ”¹hashids-phpä¸­çš„connectionsçš„ç›å€¼å’ŒåŠ å¯†è¾“å‡ºé•¿åº¦"><a href="#ä¿®æ”¹hashids-phpä¸­çš„connectionsçš„ç›å€¼å’ŒåŠ å¯†è¾“å‡ºé•¿åº¦" class="headerlink" title="ä¿®æ”¹hashids.phpä¸­çš„connectionsçš„ç›å€¼å’ŒåŠ å¯†è¾“å‡ºé•¿åº¦"></a>ä¿®æ”¹hashids.phpä¸­çš„connectionsçš„ç›å€¼å’ŒåŠ å¯†è¾“å‡ºé•¿åº¦</h3><p>å…¶ä¸­ç›å€¼å¯ä»¥æ˜¯ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼ŒåŠ å¯†å’Œç›å€¼æœ‰ç›´æ¥çš„å…³ç³»ï¼Œç›å€¼æ˜¯è§£å¯†çš„é’¥åŒ™ã€‚æˆ‘ç›´æ¥å–é¡¹ç›®çš„å¯†é’¥ä½œä¸ºå…¶ç›å€¼ï¼Œä»¥è®©é¡¹ç›®ç»Ÿä¸€ï¼Œä¸”ä¸åŒé¡¹ç›®çš„åŠ å¯†ç»“æœä¸ä¸€æ ·ã€‚</p><pre><code>'connections' =&gt; [    'main' =&gt; [        'salt' =&gt; env('APP_KEY'),        'length' =&gt; '6',    ],    'alternative' =&gt; [        'salt' =&gt; 'your-salt-string',        'length' =&gt; 'your-length-integer',    ],],</code></pre><h2 id="Hashidsçš„åŠ å¯†è§£å¯†ä½¿ç”¨æ–¹å¼"><a href="#Hashidsçš„åŠ å¯†è§£å¯†ä½¿ç”¨æ–¹å¼" class="headerlink" title="Hashidsçš„åŠ å¯†è§£å¯†ä½¿ç”¨æ–¹å¼"></a>Hashidsçš„åŠ å¯†è§£å¯†ä½¿ç”¨æ–¹å¼</h2><p>åŠ å¯†çš„ä½¿ç”¨æ–¹å¼</p><pre><code>Hashids::encode(123);//è¿”å›ç»è¿‡åŠ å¯†åçš„å­—ç¬¦ä¸²o7gxkR</code></pre><p>è§£å¯†çš„ä½¿ç”¨æ–¹å¼ æ³¨æ„è¿”å›å€¼æ˜¯æ•°ç»„</p><pre><code>Hashids::decode('o7gxkR');//è¿”å›ç»è¿‡è§£å¯†åçš„æ•°ç»„array(1) { [0]=&gt; int(123456) }</code></pre><p>åŒæ—¶åŠ å¯†å¤šä¸ªå‚æ•°</p><pre><code>Hashids::encode(1,2,3);//KPCAig</code></pre><p>è§£å¯†å¤šä¸ªå‚æ•°çš„åŠ å¯†å­—ç¬¦ä¸²</p><pre><code>Hashids::decode('M0BKxg8cYSNrVAjp')//è¿”å›ç»è¿‡è§£å¯†åçš„æ•°ç»„array(3){[0]=&gt; int(1) [1]=&gt; int(2) [2]=&gt; int(3)}</code></pre><p>åˆ‡æ¢ä¸åŒçš„ç›å€¼å’ŒåŠ å¯†é•¿åº¦</p><p>æˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å¤šä¸ªä¸åŒç±»å‹çš„idè¿›è¡ŒåŠ å¯†ï¼Œç›å€¼å’Œè¿”å›é•¿åº¦ä¹Ÿå„æœ‰ä¸åŒã€‚æ‰€ä»¥configçš„hashidsä¸­çš„å¤šä¸ªæ•°ç»„å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚å…¶ä¸­mainæ•°ç»„æ˜¯ä½œä¸ºé»˜è®¤è¿æ¥,å¯ä»¥è‡ªè¡Œæ·»åŠ å…¶ä»–çš„åŠ å¯†æ•°ç»„ã€‚</p><pre><code>Hashids::connection('alternative')-&gt;encode(*);Hashids::connection('alternative')-&gt;decode("**");</code></pre><h3 id="çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯å®æˆ˜ç»éªŒï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚"><a href="#çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯å®æˆ˜ç»éªŒï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚" class="headerlink" title="çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯å®æˆ˜ç»éªŒï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚"></a>çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯å®æˆ˜ç»éªŒï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel åŒæ—¶è¿æ¥å¤šä¸ªæ•°æ®åº“</title>
      <link href="2019/08/15/laravel/Laravel%E5%90%8C%E6%97%B6%E8%BF%9E%E6%8E%A5%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>2019/08/15/laravel/Laravel%E5%90%8C%E6%97%B6%E8%BF%9E%E6%8E%A5%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸Šæ–‡è¯´åˆ°<a href="https://juejin.im/post/5d3fa541f265da03c926d36f">thinkphp3.2åŒæ—¶è¿æ¥ä¸¤ä¸ªæ•°æ®åº“</a>çš„æ–‡ç« ï¼Œç„¶ååœ¨æ€»ç»“ä¸‹laravelåŒæ—¶è¿æ¥<br>å¤šä¸ªæ•°æ®åº“çš„å®ä¾‹ï¼Œæ–¹ä¾¿æ–°æ‰‹å­¦ä¹ ï¼Œdbè¿æ¥ä»¥åŠmodelè¿æ¥ã€‚</p></blockquote><a id="more"></a><h3 id="é…ç½®-env-æ–‡ä»¶"><a href="#é…ç½®-env-æ–‡ä»¶" class="headerlink" title="é…ç½®.env æ–‡ä»¶"></a>é…ç½®.env æ–‡ä»¶</h3><pre class=" language-lang-php"><code class="language-lang-php">DB_CONNECTION=mysqlDB_HOST=127.0.0.1DB_PORT=3306DB_DATABASE=database_nameDB_USERNAME=rootDB_PASSWORD=rootDB_HOST_TEST=127.0.0.1DB_PORT_TEST=3306DB_DATABASE_TEST=database_testDB_USERNAME_TEST=rootDB_PASSWORD_TEST=root</code></pre><h3 id="é…ç½®-config-database-php"><a href="#é…ç½®-config-database-php" class="headerlink" title="é…ç½® config/database.php"></a>é…ç½® config/database.php</h3><pre class=" language-lang-php"><code class="language-lang-php">// é»˜è®¤è¿æ¥mysql'default' => env('DB_CONNECTION', 'mysql'),'connections' => [        'sqlite' => [            'driver'   => 'sqlite',            'database' => database_path('database.sqlite'),            'prefix'   => '',        ],        'mysql' => [            'driver'    => 'mysql',            'host'      => env('DB_HOST', '127.0.0.1'),            'port'      => env('DB_PORT', '3306'),            'database'  => env('DB_DATABASE', 'database_name'),            'username'  => env('DB_USERNAME', 'root'),            'password'  => env('DB_PASSWORD', 'root'),            'charset'   => 'utf8',            'collation' => 'utf8_unicode_ci',            'prefix'    => '',            'strict'    => false,        ],        'mysql_test' => [            'driver'    => 'mysql',            'host'      => env('DB_HOST_TEST', '127.0.0.1'),            'port'      => env('DB_PORT_TEST', '3306'),            'database'  => env('DB_DATABASE_TEST', 'database_test'),            'username'  => env('DB_USERNAME_TEST', 'root'),            'password'  => env('DB_PASSWORD_TEST', 'root'),            'charset'   => 'utf8',            'collation' => 'utf8_unicode_ci',            'prefix'    => '',            'strict'    => false,        ],    ],</code></pre><h3 id="modelå®ä¾‹-è¿™ä¸ªmodelå°†ä½¿ç”¨mysql-testè¿æ¥"><a href="#modelå®ä¾‹-è¿™ä¸ªmodelå°†ä½¿ç”¨mysql-testè¿æ¥" class="headerlink" title="modelå®ä¾‹(è¿™ä¸ªmodelå°†ä½¿ç”¨mysql_testè¿æ¥)"></a>modelå®ä¾‹(è¿™ä¸ªmodelå°†ä½¿ç”¨mysql_testè¿æ¥)</h3><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App\Model;use Illuminate\Database\Eloquent\Model;class Test extends Model{    // æ•°æ®åº“'database_test'ä¸­çš„testè¡¨    public    $table      = 'test';    public    $timestamps = false;    protected $connection = 'mysql_test';}</code></pre><h3 id="modelå®ä¾‹-è¿™ä¸ªmodelå°†é‡‡ç”¨é»˜è®¤çš„â€™mysqlâ€™è¿æ¥"><a href="#modelå®ä¾‹-è¿™ä¸ªmodelå°†é‡‡ç”¨é»˜è®¤çš„â€™mysqlâ€™è¿æ¥" class="headerlink" title="modelå®ä¾‹(è¿™ä¸ªmodelå°†é‡‡ç”¨é»˜è®¤çš„â€™mysqlâ€™è¿æ¥)"></a>modelå®ä¾‹(è¿™ä¸ªmodelå°†é‡‡ç”¨é»˜è®¤çš„â€™mysqlâ€™è¿æ¥)</h3><pre class=" language-lang-php"><code class="language-lang-php"><?phpnamespace App\Model;use Illuminate\Database\Eloquent\Model;class Test extends Model{    // æ•°æ®åº“'database'ä¸­çš„testè¡¨    public    $table      = 'test';    public    $timestamps = false;    // ä»¥ä¸‹ä»£ç å¯æœ‰å¯ä¸ã€é»˜è®¤è¿æ¥mysql    protected $connection = 'mysql';}// aã€è¿™ä¸ªmodelå°†é‡‡ç”¨é»˜è®¤çš„'mysql'è¿æ¥class UserModel extends Model{        // æ•°æ®åº“'database'ä¸­çš„usersè¡¨        protected $table = "users";}</code></pre><h3 id="è°ƒç”¨modelå®ä¾‹"><a href="#è°ƒç”¨modelå®ä¾‹" class="headerlink" title="è°ƒç”¨modelå®ä¾‹"></a>è°ƒç”¨modelå®ä¾‹</h3><pre class=" language-lang-php"><code class="language-lang-php">// ä»¥ä¸‹æ˜¯è°ƒç”¨æ–¹æ³•Test::get();Test::where('id',1)->first();</code></pre><h3 id="DBç›´æ¥è¿æ¥æ•°æ®åº“"><a href="#DBç›´æ¥è¿æ¥æ•°æ®åº“" class="headerlink" title="DBç›´æ¥è¿æ¥æ•°æ®åº“"></a>DBç›´æ¥è¿æ¥æ•°æ®åº“</h3><pre class=" language-lang-php"><code class="language-lang-php">// è¿æ¥mysql_teståº“DB::connection('mysql_test')->table('test')->where('id',1)->first();// è¿æ¥mysqlåº“DB::connection('mysq')->table('test')->where('id',1)->first();// è¿æ¥mysqlåº“DB::table('test')->where('id',1)->first();</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†äº«å‡ ç§PHPå¸¸ç”¨çš„åŠ å¯†æ–¹å¼</title>
      <link href="2019/08/13/php/%E5%88%86%E4%BA%AB%E5%87%A0%E7%A7%8DPHP%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F/"/>
      <url>2019/08/13/php/%E5%88%86%E4%BA%AB%E5%87%A0%E7%A7%8DPHP%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åº”ç”¨åœºæ™¯åˆ†åˆ«ä¸ºï¼šç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ï¼ˆæ–‡ç« åŠ å¯†idé˜²æ­¢çˆ¬è™«ï¼‰ã€ç”Ÿæˆæœ‰è§„å¾‹çš„codeã€ç™»å½•å¯†ç çš„åŠ å¯†</p></blockquote><a id="more"></a><p><a href="https://juejin.im/post/5d0c8231e51d45775d516f9e">ä½¿ç”¨hashidsåŠ å¯†demoï¼ˆç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ã€æ–‡ç« åŠ å¯†idé˜²æ­¢çˆ¬è™«ï¼‰</a></p><h3 id="å­—ç¬¦ä¸²ä¸åå…­è¿›åˆ¶ä¹‹é—´çš„è½¬æ¢åŠ å¯†ï¼ˆç”Ÿæˆæœ‰è§„å¾‹çš„codeï¼‰"><a href="#å­—ç¬¦ä¸²ä¸åå…­è¿›åˆ¶ä¹‹é—´çš„è½¬æ¢åŠ å¯†ï¼ˆç”Ÿæˆæœ‰è§„å¾‹çš„codeï¼‰" class="headerlink" title="å­—ç¬¦ä¸²ä¸åå…­è¿›åˆ¶ä¹‹é—´çš„è½¬æ¢åŠ å¯†ï¼ˆç”Ÿæˆæœ‰è§„å¾‹çš„codeï¼‰"></a>å­—ç¬¦ä¸²ä¸åå…­è¿›åˆ¶ä¹‹é—´çš„è½¬æ¢åŠ å¯†ï¼ˆç”Ÿæˆæœ‰è§„å¾‹çš„codeï¼‰</h3><pre class=" language-lang-php"><code class="language-lang-php">   /**     * å­—ç¬¦ä¸²è½¬åå…­è¿›åˆ¶     * @param $string     * @return string     */    public function str_encode($string)    {        $hex="";        for($i=0;$i<strlen($string);$i++){           $hex.=dechex(ord($string[$i]));        }        $hex=strtolower($hex);        return $hex;    }   /**     * åå…­è¿›åˆ¶è½¬å­—ç¬¦ä¸²     * @param $hex     * @return string     */    public function str_decode($hex){        $string="";        for($i=0;$i<strlen($hex)-1;$i+=2){            $string.=chr(hexdec($hex[$i].$hex[$i+1]));        }        return  $string;    }</code></pre><blockquote><p>å½“ç”¨æˆ·ç™»å½•è´¦å·å¯†ç çš„æ—¶å€™æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œå¦‚å›¾ï¼š</p></blockquote><p><img src="https://user-gold-cdn.xitu.io/2019/7/29/16c3b6a81d7c2947?w=640&amp;h=146&amp;f=png&amp;s=18352" alt=""><br>æ‰€ä»¥è¦ä¿®æ”¹ä¸ºåŠ å¯†åçš„å¯†ç ï¼Œè¿™æ ·æ¯”è¾ƒå®‰å…¨</p><h3 id="ç™»å½•å¯†ç çš„åŠ å¯†"><a href="#ç™»å½•å¯†ç çš„åŠ å¯†" class="headerlink" title="ç™»å½•å¯†ç çš„åŠ å¯†"></a>ç™»å½•å¯†ç çš„åŠ å¯†</h3><pre class=" language-lang-php"><code class="language-lang-php">    /**     * ç”Ÿæˆkeyå’Œivçš„åœ°å€ï¼šhttps://asecuritysite.com/encryption/keygen     *              https://asecuritysite.com/encryption/PBKDF2z     */    /**     * @param string $string éœ€è¦åŠ å¯†çš„å­—ç¬¦ä¸²     * @return string     */    public function encrypt($string)    {        // openssl_encrypt åŠ å¯†ä¸åŒMcryptï¼Œå¯¹ç§˜é’¥é•¿åº¦è¦æ±‚ï¼Œè¶…å‡º16åŠ å¯†ç»“æœä¸å˜        $data = openssl_encrypt($string, 'AES-192-CBC',pack('H*', env('ENCRYPT_KEY')), OPENSSL_RAW_DATA,pack('H*', env('ENCRYPT_IV')));        $data = base64_encode($data);        return $data;    }    /**     * @param string $string éœ€è¦è§£å¯†çš„å­—ç¬¦ä¸²     * @return string     */    public function decrypt($string)    {        $decrypted = openssl_decrypt(base64_decode($string), 'AES-192-CBC',  pack('H*', env('ENCRYPT_KEY')), OPENSSL_RAW_DATA,pack('H*', env('ENCRYPT_IV')));        return $decrypted;    }</code></pre><pre><code>ENCRYPT_KEY=ENCRYPT_KEYENCRYPT_IV=ENCRYPT_IV</code></pre><blockquote><p>ä»¥ä¸Šé‡‡ç”¨AES-192-CBCåŠ å¯†æ–¹å¼</p></blockquote><h3 id="AESï¼š"><a href="#AESï¼š" class="headerlink" title="AESï¼š"></a>AESï¼š</h3><p>aesæ˜¯åŸºäºæ•°æ®å—çš„åŠ å¯†æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡å¤„ç†çš„æ•°æ®æ—¶ä¸€å—ï¼ˆ16å­—èŠ‚ï¼‰ï¼Œå½“æ•°æ®ä¸æ˜¯16å­—èŠ‚çš„å€æ•°æ—¶å¡«å……ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åˆ†ç»„å¯†ç ï¼ˆåŒºåˆ«äºåŸºäºæ¯”ç‰¹ä½çš„æµå¯†ç ï¼‰ï¼Œ16å­—èŠ‚æ˜¯åˆ†ç»„é•¿åº¦</p><h3 id="åˆ†ç»„åŠ å¯†çš„å‡ ç§æ¨¡å¼ï¼š"><a href="#åˆ†ç»„åŠ å¯†çš„å‡ ç§æ¨¡å¼ï¼š" class="headerlink" title="åˆ†ç»„åŠ å¯†çš„å‡ ç§æ¨¡å¼ï¼š"></a>åˆ†ç»„åŠ å¯†çš„å‡ ç§æ¨¡å¼ï¼š</h3><p>ECBï¼šæ˜¯ä¸€ç§åŸºç¡€çš„åŠ å¯†æ–¹å¼ï¼Œå¯†æ–‡è¢«åˆ†å‰²æˆåˆ†ç»„é•¿åº¦ç›¸ç­‰çš„å—ï¼ˆä¸è¶³è¡¥é½ï¼‰ï¼Œç„¶åå•ç‹¬ä¸€ä¸ªä¸ªåŠ å¯†ï¼Œä¸€ä¸ªä¸ªè¾“å‡ºç»„æˆå¯†æ–‡ã€‚</p><p>CBCï¼šæ˜¯ä¸€ç§å¾ªç¯æ¨¡å¼ï¼Œå‰ä¸€ä¸ªåˆ†ç»„çš„å¯†æ–‡å’Œå½“å‰åˆ†ç»„çš„æ˜æ–‡å¼‚æˆ–æˆ–æ“ä½œåå†åŠ å¯†ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å¢å¼ºç ´è§£éš¾åº¦ã€‚</p><p>CFB/OFBï¼šå®é™…ä¸Šæ˜¯ä¸€ç§åé¦ˆæ¨¡å¼ï¼Œç›®çš„ä¹Ÿæ˜¯å¢å¼ºç ´è§£çš„éš¾åº¦ã€‚</p><p>FCBå’ŒCBCçš„åŠ å¯†ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸¤è€…çš„æ¨¡å¼ä¸åŒï¼Œè€Œä¸”CBCä¼šåœ¨ç¬¬ä¸€ä¸ªå¯†ç å—è¿ç®—æ—¶åŠ å…¥ä¸€ä¸ªåˆå§‹åŒ–å‘é‡ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå¦‚ä½•ä¿®æ”¹å·²ç»commitçš„nameå’Œemail</title>
      <link href="2019/08/01/git/git%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%B7%B2%E7%BB%8Fcommit%E7%9A%84name%E5%92%8Cemail/"/>
      <url>2019/08/01/git/git%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E5%B7%B2%E7%BB%8Fcommit%E7%9A%84name%E5%92%8Cemail/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è‡ªå·±çš„githubä»“åº“å‘ç°æ¯æ¬¡æäº¤çš„nameå’Œemailä¸ç»Ÿä¸€ï¼Œå°è¯•å»ä¿®æ”¹å·²ç»commitnameå’Œemail<br> å› ä¸ºæ›´æ¢è¿‡ç”µè„‘ï¼Œè®¾ç½®çš„â€”global name å’Œemail é‚®ç®±å’Œä»¥å‰çš„ä¸ä¸€æ ·äº†ï¼Œæƒ³æ›´æ¢ä¸ºä»¥å‰çš„æ ·å­ äºæ˜¯å°è¯•äº†å¥½å¤šæ–¹æ³•ï¼Œç»ˆäºè§£å†³æ­¤é—®é¢˜å¸Œæœ›ä»¥ä¸‹æ–¹æ³•å¯ä»¥å¸®åŠ©åˆ°å¤§å®¶</p></blockquote><a id="more"></a><h3 id="é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºmodify-email-by-name-shè„šæœ¬"><a href="#é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºmodify-email-by-name-shè„šæœ¬" class="headerlink" title="é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºmodify_email_by_name.shè„šæœ¬"></a>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºmodify_email_by_name.shè„šæœ¬</h3><p>æˆ–è€…å»githubå¤åˆ¶ï¼š<a href="https://github.com/WXiangQian/laravel-api/blob/master/modify_email_by_name.sh">modify_email_by_name.sh</a></p><pre><code>#!/bin/sh#git filter-branch --force --env-filter '    if [ "$GIT_COMMITTER_NAME" = "wangxiangqian" ];    then        GIT_COMMITTER_NAME="xiangqian";        GIT_COMMITTER_EMAIL="175023117@qq.com";        GIT_AUTHOR_NAME="xiangqian";        GIT_AUTHOR_EMAIL="175023117@qq.com";    fi' -- --all</code></pre><h3 id="å°†è„šæœ¬ç§»å…¥è¦ä¿®æ”¹çš„gitä»“åº“ï¼Œå¹¶æäº¤è¯¥æ–‡ä»¶-ä¸ç„¶æ— æ³•æ‰§è¡Œæ­¤shellè„šæœ¬-ã€‚"><a href="#å°†è„šæœ¬ç§»å…¥è¦ä¿®æ”¹çš„gitä»“åº“ï¼Œå¹¶æäº¤è¯¥æ–‡ä»¶-ä¸ç„¶æ— æ³•æ‰§è¡Œæ­¤shellè„šæœ¬-ã€‚" class="headerlink" title="å°†è„šæœ¬ç§»å…¥è¦ä¿®æ”¹çš„gitä»“åº“ï¼Œå¹¶æäº¤è¯¥æ–‡ä»¶(*ä¸ç„¶æ— æ³•æ‰§è¡Œæ­¤shellè„šæœ¬)ã€‚"></a>å°†è„šæœ¬ç§»å…¥è¦ä¿®æ”¹çš„gitä»“åº“ï¼Œå¹¶æäº¤è¯¥æ–‡ä»¶(<em>*</em>ä¸ç„¶æ— æ³•æ‰§è¡Œæ­¤shellè„šæœ¬)ã€‚</h3><p>ç„¶åæ‰§è¡Œå‘½ä»¤ï¼Œä½¿<strong>modify_email_by_name.sh</strong>è„šæœ¬æ–‡ä»¶å¯æ‰§è¡Œ</p><pre><code>chmod +x modify_email_by_name.sh</code></pre><p>æ¥ç€æ‰§è¡Œ<strong>modify_email_by_name.sh</strong>è„šæœ¬æ–‡ä»¶</p><pre><code>./modify_email_by_name.sh</code></pre><p>é€šè¿‡git push â€”få¼ºè¡Œæ¨é€ä¿®æ”¹åçš„ log ä¿¡æ¯ã€‚</p><h3 id="æ­¥éª¤æ“ä½œå®Œæˆ"><a href="#æ­¥éª¤æ“ä½œå®Œæˆ" class="headerlink" title="æ­¥éª¤æ“ä½œå®Œæˆ"></a>æ­¥éª¤æ“ä½œå®Œæˆ</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravelä¸lumen æ¥å£æ‰§è¡Œæ—¶é—´è®°å½•ä»¥åŠå‰åç½®ä¸­é—´ä»¶terminateçš„ä½¿ç”¨</title>
      <link href="2019/07/06/laravel/laravel%E4%B8%8Elumen%E5%89%8D%E5%90%8E%E7%BD%AE%E4%B8%AD%E9%97%B4%E4%BB%B6terminate/"/>
      <url>2019/07/06/laravel/laravel%E4%B8%8Elumen%E5%89%8D%E5%90%8E%E7%BD%AE%E4%B8%AD%E9%97%B4%E4%BB%B6terminate/</url>
      
        <content type="html"><![CDATA[<p>routemidlleware ä¸æ”¯æŒ terminate è¿™æ˜¯åŸºäºä»€ä¹ˆè€ƒè™‘çš„ã€‚<br>ä¸ç®¡ laravel è¿˜æ˜¯ lumen åªæœ‰ global middleware æ‰ä¼šå» call terminate è€Œ routemiddleware å´ä¸ä¼šã€‚<br>ä¸­é—´ä»¶æ–‡ä»¶éƒ½æ”¾åœ¨app/http/Middlewareæ–‡ä»¶å¤¹ä¸­ï¼Œå¯ä»¥æ ¹æ®ExampleMiddleware.phpè¿›è¡Œåˆ›å»º</p><a id="more"></a><h3 id="å‰ç½®ä¸­é—´ä»¶"><a href="#å‰ç½®ä¸­é—´ä»¶" class="headerlink" title="å‰ç½®ä¸­é—´ä»¶"></a>å‰ç½®ä¸­é—´ä»¶</h3><pre class=" language-lang-php"><code class="language-lang-php">    namespace App\Http\Middleware;    use Closure;    define('START', microtime(true));    class BeforeMiddleware    {        //ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé¢å¤–ä¼ å‚        public function handle($request, Closure $next)        {            //å‰ç½®ä¸­é—´ä»¶,åœ¨æ‰§è¡Œè·¯ç”±å®šä¹‰æŒ‡å®šçš„æ“ä½œå‰åšä½ æƒ³åšçš„äº‹æƒ…            return $next($request);        }    }</code></pre><h3 id="åç½®ä¸­é—´ä»¶"><a href="#åç½®ä¸­é—´ä»¶" class="headerlink" title="åç½®ä¸­é—´ä»¶"></a>åç½®ä¸­é—´ä»¶</h3><hr><pre><code>&lt;?phpnamespace App\Http\Middleware;use Closure;class AfterMiddleware{    //ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé¢å¤–ä¼ å‚    public function handle($request, Closure $next)    {        $response = $next($request);        //åç½®ä¸­é—´ä»¶ï¼Œåœ¨æ‰§è¡Œå®Œè·¯ç”±å®šä¹‰æŒ‡å®šçš„æ“ä½œåï¼ˆä¹Ÿå°±æ˜¯å“åº”å‰ï¼‰åšä½ æƒ³åšçš„äº‹æƒ…        echo 1;        return $response;    }}</code></pre><h3 id="å…¨å±€ä¸­é—´ä»¶"><a href="#å…¨å±€ä¸­é—´ä»¶" class="headerlink" title="å…¨å±€ä¸­é—´ä»¶"></a>å…¨å±€ä¸­é—´ä»¶</h3><hr><p>æ¯ä¸ª HTTP è¯·æ±‚éƒ½ç»è¿‡ä¸€ä¸ªä¸­é—´ä»¶ï¼Œåªè¦å°†ä¸­é—´ä»¶çš„ç±»åŠ å…¥åˆ° bootstrap/app.php çš„ $app-&gt;middleware() è°ƒç”¨å‚æ•°æ•°ç»„ä¸­ã€‚</p><pre><code>$app-&gt;middleware([   App\Http\Middleware\Authenticate::class,]);</code></pre><h3 id="Terminableä¸­é—´ä»¶"><a href="#Terminableä¸­é—´ä»¶" class="headerlink" title="Terminableä¸­é—´ä»¶"></a>Terminableä¸­é—´ä»¶</h3><hr><p>æœ‰äº›æ—¶å€™ä¸­é—´ä»¶éœ€è¦åœ¨ HTTP å“åº”è¢«å‘é€åˆ°æµè§ˆå™¨ä¹‹åæ‰è¿è¡Œï¼Œä¾‹å¦‚ï¼Œã€Œsessionã€ä¸­é—´ä»¶å­˜å‚¨çš„ session æ•°æ®æ˜¯åœ¨å“åº”è¢«å‘é€åˆ°æµè§ˆå™¨ä¹‹åæ‰è¿›è¡Œå†™å…¥çš„ã€‚æƒ³è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦å®šä¹‰ä¸­é—´ä»¶ä¸ºã€Œterminableã€ã€‚</p><pre><code>&lt;?phpnamespace Illuminate\Session\Middleware;use Closure;use Illuminate\Support\Facades\Log;class StartSession{    public function handle($request, Closure $next)    {        // å¼€å§‹        Log::info($_SERVER['REQUEST_URI'].'å¼€å§‹'.START.'å¾®ç§’');        return $next($request);    }    public function terminate($request, $response)    {        //ç»“æŸ        $end = microtime(true);        Log::info($_SERVER['REQUEST_URI'].'ç»“æŸ'.$end.'å¾®ç§’');        $diff = ($end-START) * 1000;        if ($diff &gt;= 1500) {            Log::info("æ¥å£{".$_SERVER['REQUEST_URI']."}ä»è¯·æ±‚å¼€å§‹åˆ°ç»“æŸç›¸å·®{$diff}æ¯«ç§’");        }    }}</code></pre><p><code>terminate</code> æ–¹æ³•å¿…é¡»æ¥æ”¶è¯·æ±‚åŠå“åº”ã€‚ä¸€æ—¦å®šä¹‰äº† terminable ä¸­é—´ä»¶ï¼Œä½ ä¾¿éœ€è¦å°†å®ƒå¢åŠ åˆ° <code>bootstrap/app.php</code> æ–‡ä»¶çš„å…¨å±€ä¸­é—´ä»¶æ¸…å•åˆ—è¡¨ä¸­ã€‚</p><p>å½“åœ¨ä½ çš„ä¸­é—´ä»¶è°ƒç”¨ <code>terminate</code> æ–¹æ³•æ—¶ï¼ŒLumen ä¼šä» <a href="https://link.juejin.im?target=https%3A%2F%2Flearnku.com%2Fdocs%2Flaravel%2F5.3%2Fcontainer">æœåŠ¡å®¹å™¨</a> è§£æä¸€ä¸ªå…¨æ–°çš„ä¸­é—´ä»¶å®ä¾‹ã€‚</p><p>å¦‚æœä½ å¸Œæœ›åœ¨ <code>handle</code> åŠ <code>terminate</code> æ–¹æ³•è¢«è°ƒç”¨æ—¶ä½¿ç”¨ä¸€è‡´çš„ä¸­é—´ä»¶å®ä¾‹ï¼Œåªéœ€åœ¨å®¹å™¨ä¸­ä½¿ç”¨å®¹å™¨çš„ <code>singleton</code> æ–¹æ³•æ³¨å†Œä¸­é—´ä»¶ã€‚</p><pre><code>$app-&gt;singleton(    App\Http\Middleware\terminable::class );</code></pre><p><strong>å¦‚æœä¸Šé¢çš„ä»£ç ä¸ªåˆ«æ¥å£æ‰§è¡Œä¸åˆ°terminateçš„è¯(è¿™é‡Œæ˜¯å‘ï¼Œè‡³ä»Šæœªæ‰¾åˆ°åŸå› )ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•</strong></p><p>åœ¨åº•å±‚æ§åˆ¶å™¨ä¸­çš„çš„æ„é€ æ–¹æ³•__constructä¸­æ³¨å†Œå‡½æ•°register_shutdown_function</p><p>æ³¨å†Œä¸€ä¸ª <code>callback</code> ï¼Œå®ƒä¼šåœ¨è„šæœ¬æ‰§è¡Œå®Œæˆæˆ–è€… <a href="https://link.juejin.im?target=https%3A%2F%2Fwww.php.net%2Fmanual%2Fzh%2Ffunction.exit.php">exit()</a> åè¢«è°ƒç”¨ã€‚</p><p>å¯ä»¥å¤šæ¬¡è°ƒç”¨ <strong>register_shutdown_function()</strong> ï¼Œè¿™äº›è¢«æ³¨å†Œçš„å›è°ƒä¼šæŒ‰ç…§ä»–ä»¬æ³¨å†Œæ—¶çš„é¡ºåºè¢«ä¾æ¬¡è°ƒç”¨ã€‚ å¦‚æœä½ åœ¨æ³¨å†Œçš„æ–¹æ³•å†…éƒ¨è°ƒç”¨ <a href="https://link.juejin.im?target=https%3A%2F%2Fwww.php.net%2Fmanual%2Fzh%2Ffunction.exit.php">exit()</a>ï¼Œ é‚£ä¹ˆæ‰€æœ‰å¤„ç†ä¼šè¢«ä¸­æ­¢ï¼Œå¹¶ä¸”å…¶ä»–æ³¨å†Œçš„ä¸­æ­¢å›è°ƒä¹Ÿä¸ä¼šå†è¢«è°ƒç”¨</p><pre><code>public function __construct(){    register_shutdown_function(array($this, 'test'));}public function test(){    //æˆåŠŸå®Œæˆåç½®ä¸­é—´ä»¶é‡Œçš„å†…å®¹    // TODO åˆ‡è®° è¯·å‹¿die/exit}</code></pre><h3 id="ä»¥ä¸Šæ˜¯æœ¬äººæ€»ç»“çš„æ–¹æ³•å’Œé‡åˆ°çš„å‘ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œæ¬¢è¿æå‡º"><a href="#ä»¥ä¸Šæ˜¯æœ¬äººæ€»ç»“çš„æ–¹æ³•å’Œé‡åˆ°çš„å‘ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œæ¬¢è¿æå‡º" class="headerlink" title="ä»¥ä¸Šæ˜¯æœ¬äººæ€»ç»“çš„æ–¹æ³•å’Œé‡åˆ°çš„å‘ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œæ¬¢è¿æå‡º"></a>ä»¥ä¸Šæ˜¯æœ¬äººæ€»ç»“çš„æ–¹æ³•å’Œé‡åˆ°çš„å‘ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œæ¬¢è¿æå‡º</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phpstorm2018.3æ³¨å†Œç æ±‡æ€»ï¼ˆæŒç»­æ›´æ–°ï¼‰</title>
      <link href="2019/05/10/php/phpstorm2018-3%E6%B3%A8%E5%86%8C%E7%A0%81%E6%B1%87%E6%80%BB%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89/"/>
      <url>2019/05/10/php/phpstorm2018-3%E6%B3%A8%E5%86%8C%E7%A0%81%E6%B1%87%E6%80%BB%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>phpstorm2018.3æ³¨å†Œç æ±‡æ€»ï¼ˆæŒç»­æ›´æ–°ï¼‰<br><a id="more"></a></p><p>ä»¥å‰ç»å¸¸ç”¨lanyuçš„<a href="http://idea.lanyus.com/">http://idea.lanyus.com/</a></p><h3 id="æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2020-01-04ï¼‰"><a href="#æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2020-01-04ï¼‰" class="headerlink" title="æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2020-01-04ï¼‰"></a>æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2020-01-04ï¼‰</h3><pre class=" language-lang-code"><code class="language-lang-code">QYYBAC9D3J-eyJsaWNlbnNlSWQiOiJRWVlCQUM5RDNKIiwibGljZW5zZWVOYW1lIjoi6LaF57qnIOeoi+W6j+WRmCIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiIiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwiZmFsbGJhY2tEYXRlIjoiMjAyMC0wMS0wNCIsInBhaWRVcFRvIjoiMjAyMS0wMS0wMyJ9LHsiY29kZSI6IkFDIiwiZmFsbGJhY2tEYXRlIjoiMjAyMC0wMS0wNCIsInBhaWRVcFRvIjoiMjAyMS0wMS0wMyJ9LHsiY29kZSI6IkRQTiIsImZhbGxiYWNrRGF0ZSI6IjIwMjAtMDEtMDQiLCJwYWlkVXBUbyI6IjIwMjEtMDEtMDMifSx7ImNvZGUiOiJQUyIsImZhbGxiYWNrRGF0ZSI6IjIwMjAtMDEtMDQiLCJwYWlkVXBUbyI6IjIwMjEtMDEtMDMifSx7ImNvZGUiOiJHTyIsImZhbGxiYWNrRGF0ZSI6IjIwMjAtMDEtMDQiLCJwYWlkVXBUbyI6IjIwMjEtMDEtMDMifSx7ImNvZGUiOiJETSIsImZhbGxiYWNrRGF0ZSI6IjIwMjAtMDEtMDQiLCJwYWlkVXBUbyI6IjIwMjEtMDEtMDMifSx7ImNvZGUiOiJDTCIsImZhbGxiYWNrRGF0ZSI6IjIwMjAtMDEtMDQiLCJwYWlkVXBUbyI6IjIwMjEtMDEtMDMifSx7ImNvZGUiOiJSUzAiLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiUkMiLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiUkQiLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiUEMiLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiUk0iLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiV1MiLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiREIiLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiREMiLCJmYWxsYmFja0RhdGUiOiIyMDIwLTAxLTA0IiwicGFpZFVwVG8iOiIyMDIxLTAxLTAzIn0seyJjb2RlIjoiUlNVIiwiZmFsbGJhY2tEYXRlIjoiMjAyMC0wMS0wNCIsInBhaWRVcFRvIjoiMjAyMS0wMS0wMyJ9XSwiaGFzaCI6IjE2MDgwOTA5LzAiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-I7c5mu4hUCMxcldrwZEJMaT+qkrzrF1bjJi0i5QHcrRxk2LO0jqzUe2fBOUR4L+x+7n6kCwAoBBODm9wXst8dWLXdq179EtjU3rfJENr1wXGgtef//FNow+Id5iRufJ4W+p+3s5959GSFibl35YtbELELuCUH2IbCRly0PUBjitgA0r2y+9jV5YD/dmrd/p4C87MccC74NxtQfRdeUEGx87vnhsqTFH/sP4C2VljSo/F/Ft9JqsSlGfwSKjzU8BreYt1QleosdMnMK7a+fkfxh7n5zg4DskdVlNbfe6jvYgMVE16DMXd6F1Zhwq+lrmewJA2jPToc+H5304rcJfa9w==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><pre><code>CATF44LT7C-eyJsaWNlbnNlSWQiOiJDQVRGNDRMVDdDIiwibGljZW5zZWVOYW1lIjoiVmxhZGlzbGF2IEtvdmFsZW5rbyIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiJGb3IgZWR1Y2F0aW9uYWwgdXNlIG9ubHkiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA4In0seyJjb2RlIjoiQUMiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDgifSx7ImNvZGUiOiJEUE4iLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDgifSx7ImNvZGUiOiJQUyIsInBhaWRVcFRvIjoiMjAyMC0wMS0wOCJ9LHsiY29kZSI6IkdPIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA4In0seyJjb2RlIjoiRE0iLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDgifSx7ImNvZGUiOiJDTCIsInBhaWRVcFRvIjoiMjAyMC0wMS0wOCJ9LHsiY29kZSI6IlJTMCIsInBhaWRVcFRvIjoiMjAyMC0wMS0wOCJ9LHsiY29kZSI6IlJDIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA4In0seyJjb2RlIjoiUkQiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDgifSx7ImNvZGUiOiJQQyIsInBhaWRVcFRvIjoiMjAyMC0wMS0wOCJ9LHsiY29kZSI6IlJNIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA4In0seyJjb2RlIjoiV1MiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDgifSx7ImNvZGUiOiJEQiIsInBhaWRVcFRvIjoiMjAyMC0wMS0wOCJ9LHsiY29kZSI6IkRDIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA4In0seyJjb2RlIjoiUlNVIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA4In1dLCJoYXNoIjoiMTE1MzA4ODUvMCIsImdyYWNlUGVyaW9kRGF5cyI6MCwiYXV0b1Byb2xvbmdhdGVkIjpmYWxzZSwiaXNBdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlfQ==-BZLL+H88k449OQC56NsqU0fwb6wMAX1Di+CK5HS46DuOD1E68HPiTqREdn8DzrLVAoMkJReaH30RaIDLwUI8GEFifDcCYE5RbpE5ApNJ8mcUJr8oA1nrjY9IzZCgrSBFr4GAOLqSfXH+1UJ3K8UPqGh8nThomnKW9Jvv9pA7HIH/KrNm2RLV/aNMHWO8Q44A8ToXm7g5FS2lW903URPQ0KFgxT11w/KL81UkHm6yUXC7/LTAygIBArI8j+XUk3rlz4rpi2wrJclYXukrKQqH/V6CTbnVV3d6XAdtCqjryQ2Ga7bP/XTLjwAGwPEB3Q1W7LHNQ7CsyvZG/oTSOgD2YQ==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><h3 id="æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2019å¹´12æœˆ24æ—¥ï¼‰"><a href="#æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2019å¹´12æœˆ24æ—¥ï¼‰" class="headerlink" title="æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2019å¹´12æœˆ24æ—¥ï¼‰"></a>æœ€æ–°phpstormç ï¼ˆæ›´æ–°äº2019å¹´12æœˆ24æ—¥ï¼‰</h3><pre><code>Y9MXSIF79G-eyJsaWNlbnNlSWQiOiJZOU1YU0lGNzlHIiwibGljZW5zZWVOYW1lIjoiSkJGYW1pbHkgQ2hpbmEiLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJJSSIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDctMjYiLCJwYWlkVXBUbyI6IjIwMjAtMDctMjUifSx7ImNvZGUiOiJBQyIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDctMjYiLCJwYWlkVXBUbyI6IjIwMjAtMDctMjUifSx7ImNvZGUiOiJEUE4iLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA3LTI2IiwicGFpZFVwVG8iOiIyMDIwLTA3LTI1In0seyJjb2RlIjoiUFMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA3LTI2IiwicGFpZFVwVG8iOiIyMDIwLTA3LTI1In0seyJjb2RlIjoiR08iLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA3LTI2IiwicGFpZFVwVG8iOiIyMDIwLTA3LTI1In0seyJjb2RlIjoiRE0iLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA3LTI2IiwicGFpZFVwVG8iOiIyMDIwLTA3LTI1In0seyJjb2RlIjoiQ0wiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA3LTI2IiwicGFpZFVwVG8iOiIyMDIwLTA3LTI1In0seyJjb2RlIjoiUlMwIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IlJDIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IlJEIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IlBDIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IlJNIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IldTIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IkRCIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IkRDIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNy0yNiIsInBhaWRVcFRvIjoiMjAyMC0wNy0yNSJ9LHsiY29kZSI6IlJTVSIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDctMjYiLCJwYWlkVXBUbyI6IjIwMjAtMDctMjUifV0sImhhc2giOiIxMzgzODYyOS8wIiwiZ3JhY2VQZXJpb2REYXlzIjo3LCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-rI4et6OSKLA4gvOzxtyp48SCWtjwsOSQBJittaw6BOVJOwVBz0p31wBWDFSdIogdRPKquk2BAou7N694entEn4/Db3Ol5uotDtUd2MHuo+BBu9QcwIoX3RTrnYLwJfTlEJfRH/3TF3WtkPGQZQQcw/23hsZzdC/WJY6tmvyTijIBScUsvIOxZ+8REbWbkTQx1KliliFyrMua7hit8LThzfffZloHciaHwUP9BjxEjU0qQi+yFacSXjxEZERJT25hZrMN+bqBxcn59/4UJBrITt8YpLIlydt0+6vMSWAMawMzKpeDEDInKy0XomauTIUfxS4sbw/dSyVdSrh+IuOc7g==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><pre><code>AHD9079DKZ-eyJsaWNlbnNlSWQiOiJBSEQ5MDc5REtaIiwibGljZW5zZWVOYW1lIjoiSmV0IEdyb3VwcyIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiIiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0xMi0xNCIsInBhaWRVcFRvIjoiMjAyMC0xMi0xMyJ9LHsiY29kZSI6IkFDIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0xMi0xNCIsInBhaWRVcFRvIjoiMjAyMC0xMi0xMyJ9LHsiY29kZSI6IkRQTiIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMTItMTQiLCJwYWlkVXBUbyI6IjIwMjAtMTItMTMifSx7ImNvZGUiOiJQUyIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMTItMTQiLCJwYWlkVXBUbyI6IjIwMjAtMTItMTMifSx7ImNvZGUiOiJHTyIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMTItMTQiLCJwYWlkVXBUbyI6IjIwMjAtMTItMTMifSx7ImNvZGUiOiJETSIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMTItMTQiLCJwYWlkVXBUbyI6IjIwMjAtMTItMTMifSx7ImNvZGUiOiJDTCIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMTItMTQiLCJwYWlkVXBUbyI6IjIwMjAtMTItMTMifSx7ImNvZGUiOiJSUzAiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiUkMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiUkQiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiUEMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiUk0iLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiV1MiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiREIiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiREMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTEyLTE0IiwicGFpZFVwVG8iOiIyMDIwLTEyLTEzIn0seyJjb2RlIjoiUlNVIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0xMi0xNCIsInBhaWRVcFRvIjoiMjAyMC0xMi0xMyJ9XSwiaGFzaCI6IjE1ODE1MDAyLzAiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-LSd4oz1ZeZGTkNgA7KqUD6dmIqKNRaJEiAdpNBN3rw86DnEZm6oUoTMdM40mxRG0jz5RpLR8E6/A2uA2b9s6fX3U1dAhzuJ7HUpha2OCk9EnYGlIoxnMmYA+ZrCjlfLU2EsLMPcmKHAY5o2excxpbIqLYsNhXN3r2MxEtvGap9Y+hBxNJJYoYjV5glFIiJ/9NNAE6s1EqRRlQk2UpFg2ODDlK1JZrQTtIJvH9squs1IFz0fY9i/okXIyR4fCUbU2LUp5XbtMn3n2lKb2mEKDWjjSly3cZizAGz7obIixE1HZuEICEPWeAZiU8qc/adRt7eUYW81KFdYjLNDXcVckbw==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><h3 id="lanyu-æ­£ç‰ˆæˆæƒ"><a href="#lanyu-æ­£ç‰ˆæˆæƒ" class="headerlink" title="lanyu(æ­£ç‰ˆæˆæƒ)"></a>lanyu(æ­£ç‰ˆæˆæƒ)</h3><pre><code>56ZS5PQ1RF-eyJsaWNlbnNlSWQiOiI1NlpTNVBRMVJGIiwibGljZW5zZWVOYW1lIjoi5q2j54mI5o6I5p2DIC4iLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiRm9yIGVkdWNhdGlvbmFsIHVzZSBvbmx5IiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJJSSIsInBhaWRVcFRvIjoiMjAyMC0wMy0xMCJ9LHsiY29kZSI6IkFDIiwicGFpZFVwVG8iOiIyMDIwLTAzLTEwIn0seyJjb2RlIjoiRFBOIiwicGFpZFVwVG8iOiIyMDIwLTAzLTEwIn0seyJjb2RlIjoiUFMiLCJwYWlkVXBUbyI6IjIwMjAtMDMtMTAifSx7ImNvZGUiOiJHTyIsInBhaWRVcFRvIjoiMjAyMC0wMy0xMCJ9LHsiY29kZSI6IkRNIiwicGFpZFVwVG8iOiIyMDIwLTAzLTEwIn0seyJjb2RlIjoiQ0wiLCJwYWlkVXBUbyI6IjIwMjAtMDMtMTAifSx7ImNvZGUiOiJSUzAiLCJwYWlkVXBUbyI6IjIwMjAtMDMtMTAifSx7ImNvZGUiOiJSQyIsInBhaWRVcFRvIjoiMjAyMC0wMy0xMCJ9LHsiY29kZSI6IlJEIiwicGFpZFVwVG8iOiIyMDIwLTAzLTEwIn0seyJjb2RlIjoiUEMiLCJwYWlkVXBUbyI6IjIwMjAtMDMtMTAifSx7ImNvZGUiOiJSTSIsInBhaWRVcFRvIjoiMjAyMC0wMy0xMCJ9LHsiY29kZSI6IldTIiwicGFpZFVwVG8iOiIyMDIwLTAzLTEwIn0seyJjb2RlIjoiREIiLCJwYWlkVXBUbyI6IjIwMjAtMDMtMTAifSx7ImNvZGUiOiJEQyIsInBhaWRVcFRvIjoiMjAyMC0wMy0xMCJ9LHsiY29kZSI6IlJTVSIsInBhaWRVcFRvIjoiMjAyMC0wMy0xMCJ9XSwiaGFzaCI6IjEyMjkxNDk4LzAiLCJncmFjZVBlcmlvZERheXMiOjAsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-SYSsDcgL1WJmHnsiGaHUWbaZLPIe2oI3QiIneDtaIbh/SZOqu63G7RGudSjf3ssPb1zxroMti/bK9II1ugHz/nTjw31Uah7D0HqeaCO7Zc0q9BeHysiWmBZ+8bABs5vr25GgIa5pO7CJhL7RitXQbWpAajrMBAeZ2En3wCgNwT6D6hNmiMlhXsWgwkw2OKnyHZ2dl8yEL+oV5SW14t7bdjYGKQrYjSd4+2zc4FnaX88yLnGNO9B3U6G+BuM37pxS5MjHrkHqMTK8W3I66mIj6IB6dYXD5nvKKO1OZREBAr6LV0BqRYSbuJKFhZ8nd6YDG20GvW6leimv0rHVBFmA0w==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><pre><code>YZVR7WDLV8-eyJsaWNlbnNlSWQiOiJZWlZSN1dETFY4IiwibGljZW5zZWVOYW1lIjoiamV0YnJhaW5zIGpzIiwiYXNzaWduZWVOYW1lIjoiIiwiYXNzaWduZWVFbWFpbCI6IiIsImxpY2Vuc2VSZXN0cmljdGlvbiI6IkZvciBlZHVjYXRpb25hbCB1c2Ugb25seSIsImNoZWNrQ29uY3VycmVudFVzZSI6ZmFsc2UsInByb2R1Y3RzIjpbeyJjb2RlIjoiSUkiLCJwYWlkVXBUbyI6IjIwMTktMTEtMjYifSx7ImNvZGUiOiJBQyIsInBhaWRVcFRvIjoiMjAxOS0xMS0yNiJ9LHsiY29kZSI6IkRQTiIsInBhaWRVcFRvIjoiMjAxOS0xMS0yNiJ9LHsiY29kZSI6IlBTIiwicGFpZFVwVG8iOiIyMDE5LTExLTI2In0seyJjb2RlIjoiR08iLCJwYWlkVXBUbyI6IjIwMTktMTEtMjYifSx7ImNvZGUiOiJETSIsInBhaWRVcFRvIjoiMjAxOS0xMS0yNiJ9LHsiY29kZSI6IkNMIiwicGFpZFVwVG8iOiIyMDE5LTExLTI2In0seyJjb2RlIjoiUlMwIiwicGFpZFVwVG8iOiIyMDE5LTExLTI2In0seyJjb2RlIjoiUkMiLCJwYWlkVXBUbyI6IjIwMTktMTEtMjYifSx7ImNvZGUiOiJSRCIsInBhaWRVcFRvIjoiMjAxOS0xMS0yNiJ9LHsiY29kZSI6IlBDIiwicGFpZFVwVG8iOiIyMDE5LTExLTI2In0seyJjb2RlIjoiUk0iLCJwYWlkVXBUbyI6IjIwMTktMTEtMjYifSx7ImNvZGUiOiJXUyIsInBhaWRVcFRvIjoiMjAxOS0xMS0yNiJ9LHsiY29kZSI6IkRCIiwicGFpZFVwVG8iOiIyMDE5LTExLTI2In0seyJjb2RlIjoiREMiLCJwYWlkVXBUbyI6IjIwMTktMTEtMjYifSx7ImNvZGUiOiJSU1UiLCJwYWlkVXBUbyI6IjIwMTktMTEtMjYifV0sImhhc2giOiIxMTA1NzI3NC8wIiwiZ3JhY2VQZXJpb2REYXlzIjowLCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-rsJR5mlJcjibqRu1gQAMUCngMe8i+AOWIi+JZkNFYPET2G1ONcLPcIzoATTRi6ofkDm5l+3Y4HXjBPjVU6bHDdMBAzCnUqpXKsCknwSYyPSU0Y5pzuLvw6O9aPlQ46UBoTEC2BL5W6f11S7NlAq7tTbDuvFUynqSGAmTEfuZtKmzRmp20ejTPuMlSO7UqSkZvkg6YvSTrax1d2K+P9SAmVGZ9iC7AzBs4AwTf84QB9qHvE/Nh0oELSHWGG9hsZZ7sVghI/39/jPQFTp8GLFsl36ZPybPhGDam721zxS9H++/eJk23Jz3nxaRluE4dWmpHrDg1qBHp8qVpSFejg2QYw==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><pre><code>N757JE0KCT-eyJsaWNlbnNlSWQiOiJONzU3SkUwS0NUIiwibGljZW5zZWVOYW1lIjoid3UgYW5qdW4iLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiRm9yIGVkdWNhdGlvbmFsIHVzZSBvbmx5IiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJJSSIsInBhaWRVcFRvIjoiMjAyMC0wMS0wNyJ9LHsiY29kZSI6IkFDIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA3In0seyJjb2RlIjoiRFBOIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA3In0seyJjb2RlIjoiUFMiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDcifSx7ImNvZGUiOiJHTyIsInBhaWRVcFRvIjoiMjAyMC0wMS0wNyJ9LHsiY29kZSI6IkRNIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA3In0seyJjb2RlIjoiQ0wiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDcifSx7ImNvZGUiOiJSUzAiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDcifSx7ImNvZGUiOiJSQyIsInBhaWRVcFRvIjoiMjAyMC0wMS0wNyJ9LHsiY29kZSI6IlJEIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA3In0seyJjb2RlIjoiUEMiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDcifSx7ImNvZGUiOiJSTSIsInBhaWRVcFRvIjoiMjAyMC0wMS0wNyJ9LHsiY29kZSI6IldTIiwicGFpZFVwVG8iOiIyMDIwLTAxLTA3In0seyJjb2RlIjoiREIiLCJwYWlkVXBUbyI6IjIwMjAtMDEtMDcifSx7ImNvZGUiOiJEQyIsInBhaWRVcFRvIjoiMjAyMC0wMS0wNyJ9LHsiY29kZSI6IlJTVSIsInBhaWRVcFRvIjoiMjAyMC0wMS0wNyJ9XSwiaGFzaCI6IjExNTE5OTc4LzAiLCJncmFjZVBlcmlvZERheXMiOjAsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-AE3x5sRpDellY4SmQVy2Pfc2IT7y1JjZFmDA5JtOv4K5gwVdJOLw5YGiOskZTuGu6JhOi50nnd0WaaNZIuVVVx3T5MlXrAuO3kb2qPtLtQ6/n3lp4fIv+6384D4ciEyRWijG7NA9exQx39Tjk7/xqaGk7ooKgq5yquIfIA+r4jlbW8j9gas1qy3uTGUuZQiPB4lv3P5OIpZzIoWXnFwWhy7s//mjOWRZdf/Du3RP518tMk74wizbTeDn84qxbM+giNAn+ovKQRMYHtLyxntBiP5ByzfAA9Baa5TUGW5wDiZrxFuvBAWTbLrRI0Kd7Nb/tB9n1V9uluB2WWIm7iMxDg==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><pre><code>6ZUMD7WWWU-eyJsaWNlbnNlSWQiOiI2WlVNRDdXV1dVIiwibGljZW5zZWVOYW1lIjoiSmV0cyBHcm91cCIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiIiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wOS0wMyIsInBhaWRVcFRvIjoiMjAyMC0wOS0wMiJ9LHsiY29kZSI6IkFDIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wOS0wMyIsInBhaWRVcFRvIjoiMjAyMC0wOS0wMiJ9LHsiY29kZSI6IkRQTiIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDktMDMiLCJwYWlkVXBUbyI6IjIwMjAtMDktMDIifSx7ImNvZGUiOiJQUyIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDktMDMiLCJwYWlkVXBUbyI6IjIwMjAtMDktMDIifSx7ImNvZGUiOiJHTyIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDktMDMiLCJwYWlkVXBUbyI6IjIwMjAtMDktMDIifSx7ImNvZGUiOiJETSIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDktMDMiLCJwYWlkVXBUbyI6IjIwMjAtMDktMDIifSx7ImNvZGUiOiJDTCIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDktMDMiLCJwYWlkVXBUbyI6IjIwMjAtMDktMDIifSx7ImNvZGUiOiJSUzAiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiUkMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiUkQiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiUEMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiUk0iLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiV1MiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiREIiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiREMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA5LTAzIiwicGFpZFVwVG8iOiIyMDIwLTA5LTAyIn0seyJjb2RlIjoiUlNVIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wOS0wMyIsInBhaWRVcFRvIjoiMjAyMC0wOS0wMiJ9XSwiaGFzaCI6IjE0Mjg5NzUwLzAiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-Gd8RATyTEnHcAydKuC7N1ZdeLaMP9IR+nlPyVxvLsczAUTGKxcuAYbfz/uVtepg8ey4NfJlPNS+AGcGz8x7ImkX9jEV9KElMxPu3tKSdF/WKo6JCONX7UtudYa/9EQum3banxci/qH7jejSrFZSN+YjWQiYTR0Q8gq4/a2RyQTgseZfpImY/nXkOWLwWArr/p+4ddp/bWQN4nLTW+Z4ZaQeLE96Z9viCdn62EKOcR02Hfr9Oju9VYQh1L8pGrTqNey5nUSv/LQUbVwo5qoYbBRos8l6ewkFNGsuC3vtOgGWSgkgChbDjWhW4Nkm4vDM2NFAphMsS1dgyPw3eJ3C+6A==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==</code></pre><p>å¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°å¤§å®¶</p><p><img src="https://img-blog.csdnimg.cn/20190505114101542.png" alt=""></p><p>lanyuæ³¨å†Œç æœ‰æ•ˆæœŸä¸º2019å¹´3æœˆ10æ—¥è‡³2020å¹´3æœˆ11æ—¥</p><p>å¦‚ä¸èƒ½ä½¿ç”¨æˆ–åˆ°æœŸå¯ä»¥éšæ—¶è¯„è®ºï¼Œä¿è¯æ³¨å†Œç éšæ—¶æ˜¯æœ€æ–°çš„</p><p>ä½¿ç”¨å‰è¯·å°† 0.0.0.0 account.jetbrains.com<br>åŠ 0.0.0.0 www.jetbrains.com æ·»åŠ åˆ°hostsæ–‡ä»¶ä¸­</p><p>å¦‚æœè¿˜æ˜¯å‡ºç°è¾“å…¥æ¿€æ´»ç åï¼Œè¿˜æ˜¯å¼¹å‡ºæ¿€æ´»çš„ï¼ŒæŠŠæœ¬åœ°hostæ–‡ä»¶é‡Œçš„0.0.0.0 account.jetbrains.comåˆ é™¤å°±å¥½</p><blockquote><p>å› ä¸ºå¾ˆå¤šäººå°è¯•è¿‡ç ´è§£ï¼Œæ‰€ä»¥å¯¼è‡´æ¿€æ´»ä¸æˆåŠŸï¼Œä¸æˆåŠŸçš„æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸‹é¢æ˜¯è§£å†³åŠæ³•ã€‚</p></blockquote><h3 id="ç¬¬ä¸€ç§æƒ…å†µï¼šæœ‰äº›æœ‹å‹åæ˜ è¿™ç§æç¤ºï¼Œerror1653219æˆ–è€…ä¸€ç›´å¼¹å‡ºæ¿€æ´»æ¡†ï¼š"><a href="#ç¬¬ä¸€ç§æƒ…å†µï¼šæœ‰äº›æœ‹å‹åæ˜ è¿™ç§æç¤ºï¼Œerror1653219æˆ–è€…ä¸€ç›´å¼¹å‡ºæ¿€æ´»æ¡†ï¼š" class="headerlink" title="ç¬¬ä¸€ç§æƒ…å†µï¼šæœ‰äº›æœ‹å‹åæ˜ è¿™ç§æç¤ºï¼Œerror1653219æˆ–è€…ä¸€ç›´å¼¹å‡ºæ¿€æ´»æ¡†ï¼š"></a>ç¬¬ä¸€ç§æƒ…å†µï¼šæœ‰äº›æœ‹å‹åæ˜ è¿™ç§æç¤ºï¼Œerror1653219æˆ–è€…ä¸€ç›´å¼¹å‡ºæ¿€æ´»æ¡†ï¼š</h3><blockquote><p>åŸå› ï¼šæ‚¨ä¿®æ”¹è¿‡hostsæ–‡ä»¶ï¼Œè¯·è¿˜åŸä¸€ä¸‹ï¼ˆåˆ é™¤æ·»åŠ çš„å†…å®¹ï¼‰ï¼Œå¦åˆ™æ— æ³•æ¿€æ´»æ­£ç‰ˆè½¯ä»¶ã€‚</p></blockquote><p>è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼šåˆ é™¤0.0.0.0 account.jetbrains.com ç„¶åä¿å­˜å…³é—­å³</p><h3 id="ç¬¬äºŒç§é”™è¯¯æç¤ºï¼š"><a href="#ç¬¬äºŒç§é”™è¯¯æç¤ºï¼š" class="headerlink" title="ç¬¬äºŒç§é”™è¯¯æç¤ºï¼š"></a>ç¬¬äºŒç§é”™è¯¯æç¤ºï¼š</h3><blockquote><p>(æç¤ºKey is invaild) å¦‚æœæ‚¨å®‰è£…è¿‡ç ´è§£è¡¥ä¸ï¼Œè¯·åˆ é™¤è¡¥ä¸åé‡æ–°æ¿€æ´»ã€‚<br>ï¼ˆåˆ é™¤binç›®å½•ä¸‹çš„JetbrainsCrackæ–‡ä»¶ï¼‰</p></blockquote><p><a href="https://juejin.im/post/5d0c8ca851882532760c68bf">æ˜é‡‘åœ°å€</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel5.5å®ç°å›¾ç‰‡éªŒè¯ç çš„è·å–ä»¥åŠéªŒè¯apiæ¥å£</title>
      <link href="2019/05/08/laravel/Laravel5.5%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E8%8E%B7%E5%8F%96%E4%BB%A5%E5%8F%8A%E9%AA%8C%E8%AF%81api%E6%8E%A5%E5%8F%A3/"/>
      <url>2019/05/08/laravel/Laravel5.5%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E8%8E%B7%E5%8F%96%E4%BB%A5%E5%8F%8A%E9%AA%8C%E8%AF%81api%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬äººæ„Ÿè§‰ç”¨çš„æ¯”è¾ƒå¥½çš„éªŒè¯ç åŒ…ï¼Œæ‹¿å‡ºæ¥åˆ†äº«ä¸€ä¸‹ï¼Œå‚»ç“œå¼æ•™ç¨‹ï¼Œå¤§ä½¬åˆ«å–·ã€‚</strong></p><a id="more"></a><h2 id="åŸæ–‡é“¾æ¥ï¼šhttps-juejin-im-post-5d0c3ae9f265da1b6b1cdd2b"><a href="#åŸæ–‡é“¾æ¥ï¼šhttps-juejin-im-post-5d0c3ae9f265da1b6b1cdd2b" class="headerlink" title="åŸæ–‡é“¾æ¥ï¼šhttps://juejin.im/post/5d0c3ae9f265da1b6b1cdd2b"></a><a href="https://juejin.im/post/5d0c3ae9f265da1b6b1cdd2b">åŸæ–‡é“¾æ¥ï¼š</a><a href="https://juejin.im/post/5d0c3ae9f265da1b6b1cdd2b">https://juejin.im/post/5d0c3ae9f265da1b6b1cdd2b</a></h2><p>ç”¨æˆ·ç™»é™†æ³¨å†Œï¼Œä¸ç®¡å‰å°åå°ï¼Œä¸ºäº†å®‰å…¨æ€§è¿˜æ˜¯éœ€è¦åŠ å…¥æ‰‹æœºçŸ­ä¿¡æˆ–å›¾å½¢éªŒè¯ç çš„ï¼Œè¿™æ ·å®‰å…¨æ€§ä¼šå¥½å¾ˆå¤š</p><p>å› ä¸ºä¸åŒçš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿”å›å›¾ç‰‡ã€ç½‘å€ã€HTMLï¼Œæ ¹æ®å‰ç«¯éœ€æ±‚æ¥è¿”å›ç›¸åº”çš„æ•°æ®</p><h2 id="é¦–å…ˆè¦å¼•å…¥å›¾ç‰‡éªŒè¯ç çš„composeråŒ…"><a href="#é¦–å…ˆè¦å¼•å…¥å›¾ç‰‡éªŒè¯ç çš„composeråŒ…" class="headerlink" title="é¦–å…ˆè¦å¼•å…¥å›¾ç‰‡éªŒè¯ç çš„composeråŒ…"></a>é¦–å…ˆè¦å¼•å…¥å›¾ç‰‡éªŒè¯ç çš„composeråŒ…</h2><p>githubåœ°å€ï¼š<a href="https://github.com/mewebstudio/captcha">https://github.com/mewebstudio/captcha</a></p><h2 id="å®‰è£…captchaï¼š"><a href="#å®‰è£…captchaï¼š" class="headerlink" title="å®‰è£…captchaï¼š"></a>å®‰è£…captchaï¼š</h2><pre><code>composer require mews/captcha </code></pre><p>æ‰¾åˆ°<code>config/app.phpä¸‹çš„providersï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç </code></p><pre><code>\Mews\Captcha\CaptchaServiceProvider::class,</code></pre><p>æ‰¾åˆ°<code>config/app.phpä¸‹çš„aliases``ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç </code></p><pre><code>'Captcha' =&gt; Mews\Captcha\Facades\Captcha::class,</code></pre><p>å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œé€‰æ‹©ç›¸åº”çš„åŒ…</p><pre><code>php artisan vendor:publish</code></pre><p>åˆ™ç”Ÿæˆconfig/captcha.php</p><p>é…ç½®æ–‡ä»¶ä¸­çš„ä»£ç ï¼šä¾‹å¦‚é•¿å®½ï¼Œflaté…ç½®ç­‰ï¼Œä¸ªäººè§‰å¾—ä½¿ç”¨é»˜è®¤é…ç½®å§ï¼Œä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚</p><h1 id="Return-URL"><a href="#Return-URL" class="headerlink" title="Return URL"></a>Return URL</h1><pre><code>captcha_src();Captcha::src();</code></pre><h3 id="Return-HTML"><a href="#Return-HTML" class="headerlink" title="Return HTML"></a>Return HTML</h3><pre><code>captcha_img();Captcha::img();</code></pre><h3 id="To-use-different-configurations"><a href="#To-use-different-configurations" class="headerlink" title="To use different configurations"></a>To use different configurations</h3><pre><code>captcha_img('flat');Captcha::img('inverse');</code></pre><h3 id="å¤§å®¶å¯ä»¥å‚è€ƒdemoï¼ˆdemoä¸ºcomposeråŒ…è‡ªå¸¦çš„ï¼‰"><a href="#å¤§å®¶å¯ä»¥å‚è€ƒdemoï¼ˆdemoä¸ºcomposeråŒ…è‡ªå¸¦çš„ï¼‰" class="headerlink" title="å¤§å®¶å¯ä»¥å‚è€ƒdemoï¼ˆdemoä¸ºcomposeråŒ…è‡ªå¸¦çš„ï¼‰"></a>å¤§å®¶å¯ä»¥å‚è€ƒdemoï¼ˆdemoä¸ºcomposeråŒ…è‡ªå¸¦çš„ï¼‰</h3><pre><code>Route::any('captcha-test', function()    {        if (Request::getMethod() == 'POST')        {            $rules = ['captcha' =&gt; 'required|captcha'];            $validator = Validator::make(Input::all(), $rules);            if ($validator-&gt;fails())            {                echo '&lt;p style="color: #ff0000;"&gt;Incorrect!&lt;/p&gt;';            }            else            {                echo '&lt;p style="color: #00ff30;"&gt;Matched :)&lt;/p&gt;';            }        }        $form = '&lt;form method="post" action="captcha-test"&gt;';        $form .= '&lt;input type="hidden" name="_token" value="' . csrf_token() . '"&gt;';        $form .= '&lt;p&gt;' . captcha_img() . '&lt;/p&gt;';        $form .= '&lt;p&gt;&lt;input type="text" name="captcha"&gt;&lt;/p&gt;';        $form .= '&lt;p&gt;&lt;button type="submit" name="check"&gt;Check&lt;/button&gt;&lt;/p&gt;';        $form .= '&lt;/form&gt;';        return $form;    });</code></pre><h3 id="æœ¬æ¬¡é¡¹ç›®ç”¨åˆ°çš„æ–¹æ³•å¦‚ä¸‹ï¼š"><a href="#æœ¬æ¬¡é¡¹ç›®ç”¨åˆ°çš„æ–¹æ³•å¦‚ä¸‹ï¼š" class="headerlink" title="æœ¬æ¬¡é¡¹ç›®ç”¨åˆ°çš„æ–¹æ³•å¦‚ä¸‹ï¼š"></a>æœ¬æ¬¡é¡¹ç›®ç”¨åˆ°çš„æ–¹æ³•å¦‚ä¸‹ï¼š</h3><p>è·¯ç”±ï¼šgetä¸ºè·å–å›¾ç‰‡éªŒè¯ç ï¼Œpostä¸ºéªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®</p><pre><code>Route::get('/captcha', 'AllController@captcha');Route::post('/captcha/validate', 'AllController@captchaValidate');</code></pre><p>æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•ï¼šè·å–å›¾ç‰‡éªŒè¯ç è¿”å›çš„æ˜¯urlï¼Œå¦‚æœæƒ³è¿”å›imgæ ‡ç­¾æˆ–è€…htmlï¼Œè¯·çœ‹ä¸Šé¢çš„æ–¹æ³•</p><pre><code>public function captcha(){    $captcha['url'] = captcha_src();    return $this-&gt;responseData($captcha);}</code></pre><p>å‰ç«¯æŠŠéªŒè¯ç ä¼ è¿‡æ¥è¿›è¡ŒéªŒè¯</p><pre><code>public function captchaValidate(Request $request){   $rules = ['captcha' =&gt; 'required|captcha'];   $validator = \Validator::make($request-&gt;all(), $rules);   if ($validator-&gt;fails()){       return $this-&gt;responseFailed('éªŒè¯å¤±è´¥');   } else {       return $this-&gt;responseSuccess('éªŒè¯æˆåŠŸ');   }}</code></pre><p>å¦‚æœä¸€ç›´è¿”å›éªŒè¯å¤±è´¥ï¼Œåˆ™éœ€è¦åœ¨app/Http/Kernel.phpä¸­çš„$middlewareåŠ å…¥ä»¥ä¸‹ä¿¡æ¯</p><pre><code>\Illuminate\Session\Middleware\StartSession::class</code></pre><h3 id="é…ä¸Šæ¥å£æ–‡æ¡£å›¾ç‰‡ï¼š"><a href="#é…ä¸Šæ¥å£æ–‡æ¡£å›¾ç‰‡ï¼š" class="headerlink" title="é…ä¸Šæ¥å£æ–‡æ¡£å›¾ç‰‡ï¼š"></a>é…ä¸Šæ¥å£æ–‡æ¡£å›¾ç‰‡ï¼š</h3><p><img src="https://img-blog.csdn.net/2018083118290433?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="image"></p><p>è·å–å¦‚ä¸‹éªŒè¯ç <br>d6qfe</p><p>éªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®</p><p><img src="https://img-blog.csdn.net/20180831182951127?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMTc1MDIzMTE3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="image"></p><h1 id="çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯ç»éªŒæ‰€å¾—ï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚"><a href="#çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯ç»éªŒæ‰€å¾—ï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚" class="headerlink" title="çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯ç»éªŒæ‰€å¾—ï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚"></a>çº¯åŸåˆ›ï¼Œæ‰€æœ‰ä½œå“éƒ½æ˜¯ç»éªŒæ‰€å¾—ï¼Œå¸Œæœ›å¯ä»¥è·å¾—å¤§å®¶çš„æ”¯æŒã€‚</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-adminè‡ªå®šä¹‰excelå¯¼å‡ºæ•°æ®</title>
      <link href="2019/04/19/laravel/Laravel-admin%E8%87%AA%E5%AE%9A%E4%B9%89excel%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE/"/>
      <url>2019/04/19/laravel/Laravel-admin%E8%87%AA%E5%AE%9A%E4%B9%89excel%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p><code>model-grid</code>å†…ç½®çš„å¯¼å‡ºåŠŸèƒ½åªæ˜¯å®ç°äº†ç®€å•çš„csvæ ¼å¼æ–‡ä»¶çš„å¯¼å‡ºï¼Œå¦‚æœé‡åˆ°æ–‡ä»¶ç¼–ç é—®é¢˜æˆ–è€…æ»¡è¶³ä¸äº†è‡ªå·±éœ€æ±‚çš„æƒ…å†µï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ¥è‡ªå®šä¹‰å¯¼å‡ºåŠŸèƒ½</p></blockquote><a id="more"></a><p>Laravel-admin1.5.*æ•™ç¨‹ç‚¹å‡»è·³è½¬ï¼š<a href="https://blog.csdn.net/qq175023117/article/details/80681533">https://blog.csdn.net/qq175023117/article/details/80681533</a></p><p>Laravel-admin1.6.*æ•™ç¨‹ç‚¹å‡»è·³è½¬ï¼š<a href="https://blog.csdn.net/qq175023117/article/details/86133101">https://blog.csdn.net/qq175023117/article/details/86133101</a></p><p>å‚è€ƒlaravel-adminæ–‡æ¡£æ¥è¿›è¡Œæ‰©å±•çš„æ–¹æ³•ï¼š<a href="http://laravel-admin.org/docs/zh/model-grid-export">http://laravel-admin.org/docs/zh/model-grid-export</a></p><h3 id="é¦–å…ˆå®‰è£…å¥½å®ƒï¼š"><a href="#é¦–å…ˆå®‰è£…å¥½å®ƒï¼š" class="headerlink" title="é¦–å…ˆå®‰è£…å¥½å®ƒï¼š"></a>é¦–å…ˆå®‰è£…å¥½å®ƒï¼š</h3><pre><code>composer require maatwebsite/excel:~2.1.0åœ¨config/app.phpä¸­çš„providersä¸­æ·»åŠ ï¼š \Maatwebsite\Excel\ExcelServiceProvider::class,php artisan vendor:publish --provider="Maatwebsite\Excel\ExcelServiceProvider"</code></pre><h3 id="åˆ›å»ºæ‰©å±•æ–‡ä»¶ã€æ¯”å¦‚app-Admin-Extensions-ExcelExpoter-php"><a href="#åˆ›å»ºæ‰©å±•æ–‡ä»¶ã€æ¯”å¦‚app-Admin-Extensions-ExcelExpoter-php" class="headerlink" title="åˆ›å»ºæ‰©å±•æ–‡ä»¶ã€æ¯”å¦‚app/Admin/Extensions/ExcelExpoter.php:"></a>åˆ›å»ºæ‰©å±•æ–‡ä»¶ã€æ¯”å¦‚<code>app/Admin/Extensions/ExcelExpoter.php</code>:</h3><pre><code>&lt;?phpnamespace App\Admin\Extensions;use Encore\Admin\Grid\Exporters\AbstractExporter;use Maatwebsite\Excel\Facades\Excel;class ExcelExpoter extends AbstractExporter{    protected $file_name = 'file';    protected $sheet_name = 'sheet';    protected $head = [];    protected $body = [];    public function setAttr($file_name, $sheet_name, $head, $body)    {        $this-&gt;file_name = $file_name;        $this-&gt;sheet_name = $sheet_name;        $this-&gt;head = $head;        $this-&gt;body = $body;    }    public function export()    {        Excel::create($this-&gt;file_name, function($excel) {            $excel-&gt;sheet($this-&gt;sheet_name, function($sheet) {                // è¿™æ®µé€»è¾‘æ˜¯ä»è¡¨æ ¼æ•°æ®ä¸­å–å‡ºéœ€è¦å¯¼å‡ºçš„å­—æ®µ                $body = $this-&gt;body;                $bodyRows = collect($this-&gt;getData())-&gt;map(function ($item) use($body) {                    $arr = [];                    foreach($body as $value) {                        $arr[] = array_get($item, $value);                    }                    return $arr;                });                $rows = collect([$this-&gt;head])-&gt;merge($bodyRows);                $sheet-&gt;rows($rows);            });        })-&gt;export('xls');//.xls .csv ...    }}</code></pre><h3 id="æ“ä½œå®ä¾‹"><a href="#æ“ä½œå®ä¾‹" class="headerlink" title="æ“ä½œå®ä¾‹"></a>æ“ä½œå®ä¾‹</h3><pre><code>use App\Admin\Extensions\ExcelExpoter;protected function grid(){   $grid = new Grid(new User);   // å¯¼å‡º   $excel = new ExcelExpoter();   $date = date('Y-m-d H:i:s', time());   $excel-&gt;setAttr('å‘˜å·¥ç®¡ç†'.$date, 'å‘˜å·¥ç®¡ç†', ['id','å§“å','æ€§åˆ«'],['id','name','sex']);   $grid-&gt;exporter($excel);}</code></pre><p>å¦‚æ¡ˆä¾‹ä¸è¯¦ç»†ï¼Œå¯æŸ¥çœ‹æˆ‘å¼€æºé¡¹ç›®æºç ï¼š<a href="https://github.com/WXiangQian/stationery-cms">https://github.com/WXiangQian/stationery-cms</a></p><p>å–œæ¬¢çš„å¯ä»¥ç»™ä¸ªstar</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>layuiçš„äºŒçº§è”åŠ¨</title>
      <link href="2019/04/02/layui%E7%9A%84%E4%BA%8C%E7%BA%A7%E8%81%94%E5%8A%A8/"/>
      <url>2019/04/02/layui%E7%9A%84%E4%BA%8C%E7%BA%A7%E8%81%94%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="layuiçš„äºŒçº§è”åŠ¨"><a href="#layuiçš„äºŒçº§è”åŠ¨" class="headerlink" title="layuiçš„äºŒçº§è”åŠ¨"></a>layuiçš„äºŒçº§è”åŠ¨</h3><a id="more"></a><p>è‡³å°‘ä½ è¦å¼•å…¥layuiçš„å…¬å…±èµ„æº<br>$type1ä¸ºåç«¯ä¼ ç»™å‰ç«¯çš„æ•°æ®</p><p>ä¸‹é¢åˆ†äº«layuiäºŒçº§è”åŠ¨HTMLä»£ç </p><pre class=" language-lang-html"><code class="language-lang-html"><form class="layui-form" action="" >    é¢˜ç›®åˆ†ç±»ï¼š    <div class="layui-inline">        <select name="type1" class="select" lay-filter="type1">            <option value="0">é€‰æ‹©é¢˜ç›®åˆ†ç±»</option>            @foreach($type1 as $v)                <option value="{{ $v->id }}">{{ $v->name }}</option>            @endforeach        </select>    </div>    <div class="layui-inline">        <select name="type2" class="select">            <option value="0">é€‰æ‹©ä¸€çº§åˆ†ç±»</option>        </select>    </div></form><button class="layui-btn layui-btn-sm" data-type="reload">æœç´¢</button></code></pre><p>ä¸‹é¢åˆ†äº«äºŒçº§è”åŠ¨ä»£ç </p><pre class=" language-lang-javascript"><code class="language-lang-javascript"> layui.use(['form'], function(){    var form = layui.form;        form.on('select(type1)', function(data){            var type_id = data.elem.value;            // console.log(type_id)            $.ajax({                type: 'POST',                url: "/question/select",                data: {type_id:type_id},                dataType:  'json',                success:function(e){                    // console.log(e);                    if (e.errno == 0)  {                        //empty() æ–¹æ³•ä»è¢«é€‰å…ƒç´ ç§»é™¤æ‰€æœ‰å†…å®¹                        $("select[name='type2']").empty();                        var html = "<option value='0'>é€‰æ‹©äºŒçº§åˆ†ç±»</option>";                        $(e.data).each(function (v, k) {                            html += "<option value='" + k.id + "'>" + k.name + "</option>";                        });                        //æŠŠéå†çš„æ•°æ®æ”¾åˆ°selectè¡¨é‡Œé¢                        $("select[name='type2']").append(html);                        //ä»æ–°åˆ·æ–°äº†ä¸€ä¸‹ä¸‹æ‹‰æ¡†                        form.render('select');      //é‡æ–°æ¸²æŸ“                    } else {                        layer.alert(data.msg);                    }                },                error: function () {                    layer.alert('å‡ºé”™äº†ï¼');                }            });        });  });</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> layui </category>
          
      </categories>
      
      
        <tags>
            
            <tag> layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>layuiè§£å†³æ•°æ®è¡¨æ ¼æœç´¢æ—¶å‘é€äº†ä¸¤æ¬¡è¯·æ±‚é—®é¢˜</title>
      <link href="2019/03/28/layui%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%A0%BC%E6%90%9C%E7%B4%A2%E6%97%B6%E5%8F%91%E9%80%81%E4%BA%86%E4%B8%A4%E6%AC%A1%E8%AF%B7%E6%B1%82%E9%97%AE%E9%A2%98/"/>
      <url>2019/03/28/layui%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%A0%BC%E6%90%9C%E7%B4%A2%E6%97%B6%E5%8F%91%E9%80%81%E4%BA%86%E4%B8%A4%E6%AC%A1%E8%AF%B7%E6%B1%82%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>layuiè§£å†³æ•°æ®è¡¨æ ¼æœç´¢æ—¶å‘é€äº†ä¸¤æ¬¡è¯·æ±‚é—®é¢˜</p><a id="more"></a><pre class=" language-lang-shell"><code class="language-lang-shell">åœ¨ä½¿ç”¨layuiåšåå°é¡¹ç›®æ—¶ï¼Œç”¨çš„æ•°æ®è¡¨æ ¼æ¸²æŸ“ç„¶åå®ç°æ¡ä»¶æŸ¥è¯¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼Œä¸€å¼€å§‹æ­£å¸¸æ˜¯è·å–äº†ä¸€æ¬¡åˆ—è¡¨ï¼Œä½†æ˜¯è®¾ç½®äº†æœç´¢æ¡ä»¶ï¼Œç‚¹å‡»æœç´¢åï¼Œå‘é€äº†ä¸€æ¡å¸¦æ¡ä»¶å‚æ•°çš„è¯·æ±‚å»åå°ï¼Œä½†æ˜¯åŒæ—¶åˆå‘é€äº†è·å–å…¨éƒ¨æ•°æ®çš„è¯·æ±‚</code></pre><p>è§£å†³æ–¹æ¡ˆ</p><pre class=" language-lang-shell"><code class="language-lang-shell">æˆ‘çš„æœç´¢æŒ‰é’®è®¾ç½®åœ¨äº†è¡¨å•é‡Œé¢ è¡¨å•çš„æŒ‰é’®ç‚¹å‡»æ˜¯é»˜è®¤æäº¤ æ‰€ä»¥ç›¸å½“äºæäº¤äº†ä¸¤æ¬¡ï¼ï¼å°†buttonåœ¨formä¸­æ‹¿å‡ºæ¥ï¼Œå°±å¯ä»¥è§£å†³é—®é¢˜äº†æœ¬äººç”¨çš„æ˜¯ç›‘å¬æäº¤ï¼Œæ²¡ç”¨ä½¿ç”¨formï¼Œæ‰€ä»¥å¯ä»¥æ­£å¸¸æœç´¢</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> layui </category>
          
      </categories>
      
      
        <tags>
            
            <tag> layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macå‡ºç°Enter passphrase for keyçš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="2019/03/27/git/mac%E5%87%BA%E7%8E%B0Enter%20passphrase%20for%20key%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>2019/03/27/git/mac%E5%87%BA%E7%8E%B0Enter%20passphrase%20for%20key%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h3 id="macå‡ºç°Enter-passphrase-for-keyçš„è§£å†³æ–¹æ¡ˆ"><a href="#macå‡ºç°Enter-passphrase-for-keyçš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="macå‡ºç°Enter passphrase for keyçš„è§£å†³æ–¹æ¡ˆ"></a>macå‡ºç°Enter passphrase for keyçš„è§£å†³æ–¹æ¡ˆ</h3><a id="more"></a><p><strong>åˆšè¿›å…¥æ–°å…¬å¸ï¼Œç¬¬ä¸€æ¬¡ç”¨Macå¼€å‘ï¼Œå› ä¸ºç”µè„‘æ˜¯å‰åŒäº‹çš„ï¼Œæ‰€ä»¥è¦æŠŠå„ç§é…ç½®å’Œgitçš„é…ç½®æ¢æˆè‡ªå·±çš„ï¼Œç”±äºç§˜é’¥æ›´æ”¹æ²¡æœ‰ä¸€æ¬¡æ€§æ”¹å¥½ï¼Œåœ¨ç½‘ä¸Šå¯»æ‰¾äº†ä¸€äº›ç­”æ¡ˆï¼Œè‡ªå·±æ€»ç»“ä¸‹ç»éªŒï¼Œé˜²æ­¢ä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚</strong></p><h3 id="å…¬é’¥-ç§é’¥"><a href="#å…¬é’¥-ç§é’¥" class="headerlink" title="å…¬é’¥ ç§é’¥"></a>å…¬é’¥ ç§é’¥</h3><p>å½“æˆ‘ä»¬å…³è”å¥½è‡ªå·±çš„gitæ—¶ï¼Œå‘ç°æ¯æ¬¡pull æˆ– pushä»£ç æ—¶ä¼šè®©æˆ‘ä»¬é‡å¤æ€§è¾“å…¥è‡ªå·±çš„å¯†ç ï¼Œé—®é¢˜ä¸æ˜¯å‡ºåœ¨æˆ‘ä»¬å…³è”çš„ä¸å¯¹ï¼Œè€Œæ˜¯å¯¹gitçš„å…¬é’¥å’Œç§é’¥äº†è§£å¹¶ä¸æ·±ï¼Œä½¿ç”¨å‘½ä»¤ssh-keygenï¼Œé»˜è®¤ç”Ÿæˆçš„å…¬é’¥åä¸ºid_rsa.pub ï¼Œç§é’¥åä¸ºid_rsaã€‚</p><p>$ cat id_rsa.pub</p><pre><code>WXiangQiandeMacBook-Pro:.ssh $ cat id_rsa.pubssh-rsa ********yc2EAAAADAQABAAACAQDGTX8c2e7jJv+ffKIoaMQgvaz6L4vO/b2acB9oYTZaihE2Bj6yO6osoAxitmzAvL9nOsbBnTciYsD/6dNj8mJr3ccQIbfFxcx6+1rGMonlhz1LLAaiHlwqQR8RECSYM39XNH4SN8+2yUQbLSdQKC0mIKhXMJu4FUJ37yqQFVV8g2FIzijqqtTIhA9IMCZ7UY9SfRNwZ6bcSVW2vHMvbXTmrr899eH+7FIupNByRp+PndfyYKXvjF4QlhvQUBHL7DmgOc2sMrJXyD6CI74+rhWG4R1wZWsM0Y3+Ecq6ImDA3f0Lh52ytDOIdM89tO4y+3LUDWIB8r6G0BzMaiXfRDHLjoKYSo0t6wGwtcKJapLQmbxI/Ww0RBHeRQiDw+rsl7XbswXTI9WSupQ+R0k87h6p8VUZrQSZGE0ne6TWUtTAzAgG14mom8lBy+3F6eeFg2n2CRJwT8EAgYAKkNotXfcYI+AOx/rKsuT006sggMl73If4Ru5hKApJ7RngffhZTXK3+V5ghfOUuG/bDchEleUKUryqOf2bXz8fCZxyEeBXVtgTovFA2k84iAqkSFqWjrKhmogOEOuicGN4SN2jFoGfNYMV0HDTPNZkjJA6TB8mplBKOf8TqvneWB8hY10z7F0zOExXVoiUY0kF49ZjAcbJmC/9v9SqHqicb87tAx/P4w== â€œwangxiangqian@****.cnâ€</code></pre><h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><p>è§£å†³</p><p>ç»ˆç«¯æç¤ºï¼šEnter passphrase for keyï¼Œè¡¨ç¤ºæˆ‘ä»¬å¯¹è‡ªå·±çš„gitä½¿ç”¨äº†ç§é’¥ï¼Œåœ¨å…¬é’¥çš„åŸºç¡€ä¸ŠåˆåŠ äº†ä¸€é“ä¿éšœï¼Œæ‰€ä»¥ä¼šå‡ºç°é‡å¤æ€§è¾“å…¥å¯†ç ï¼Œåˆ‡æ¢åˆ°æ–‡ä»¶cd ~/.sshä¸‹ä¼šæœ‰id_rsaï¼Œid_rsa.pubï¼Œknown_hostsä¸‰ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨å‘½ä»¤rm id_rsa* åˆ é™¤æˆ‘ä»¬çš„ç§é’¥ï¼Œcd â€¦ åˆ‡æ¢ç›®å½•ï¼Œæ‰§è¡Œssh-keygen -t rsa -C â€œä½ çš„é‚®ç®±â€ -b 4096ä¸€è·¯å›è½¦é”®ï¼Œå‡ºç°</p><pre><code>+---[RSA 4096]----+|              .o.||          .  .oo ||         . + .= +||       .. . **+*.|| .    ..S  o.OX. ||o .. ..+    .B*  ||....o..     oo.  ||=...+.       E   ||+oo=o.           |+----[SHA256]-----+</code></pre><p>ç„¶åé‡æ–°è¿›å…¥cd ~/.sshè¯¥æ–‡ä»¶ï¼Œæ‰§è¡Œcat id_rsa.pubå°†å‡ºæ¥çš„é‚£ä¸€ä¸²ç¼–ç å¤åˆ¶ç²˜è´´åˆ°ä½ çš„è¿œç¨‹gitä¸Šå»ºç«‹å…³è”ï¼Œå®Œæˆã€‚</p><p>å…¶ä»–<br>ä»¥ä¸Šæ˜¯æˆ‘å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ï¼ŒæŸ¥é˜…è¿‡ä¸€éƒ¨åˆ†èµ„æ–™æ²¡æœ‰å¾—åˆ°å®é™…æ€§çš„è§£å†³ã€‚å¦‚æœä¸Šè¿°è¿˜æ˜¯æ²¡æœ‰è§£å†³ï¼Œå°è¯•ä¸€ä¸‹å…¶ä»–äººçš„åŠæ³•ï¼Œä¾æ—§æ˜¯åœ¨æœ¬åœ°æ‰§è¡Œssh-a -Kå›è½¦è¾“å…¥è‡ªå·±çš„å¯†ç ï¼Œæˆ–è€…ä¾æ¬¡æ‰§è¡Œeval ssh-agent ssh-addå‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤åªèƒ½è§£å†³åœ¨ä½ å½“å‰å¼€æœºçš„çŠ¶æ€ä¸‹ï¼Œä¸åœ¨è¾“å…¥ä½ çš„gitå¯†ç ï¼Œåœ¨ä½ å†æ¬¡å…³é—­ä½ çš„è®¾å¤‡ã€é‡å¯ä¹‹åï¼Œä¾æ—§ä¼šæç¤ºä½ è¾“å…¥,ä¸å¦¨è¯•è¯•ä¸Šé¢çš„è§£å†³åŠæ³•ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 16.04 ç¯å¢ƒå®‰è£…éƒ¨ç½² é¡¹ç›®éƒ¨ç½²æ–‡æ¡£</title>
      <link href="2019/03/19/laravel/Ubuntu16.04%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/"/>
      <url>2019/03/19/laravel/Ubuntu16.04%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒç‰ˆæœ¬"><a href="#ç¯å¢ƒç‰ˆæœ¬" class="headerlink" title="ç¯å¢ƒç‰ˆæœ¬"></a>ç¯å¢ƒç‰ˆæœ¬</h2><pre class=" language-lang-shell"><code class="language-lang-shell">Ubuntu 16.04Nginx 1.15.5PHP 7.3.0MySQL 5.7Composer 1.7.2Git 2.7.4</code></pre><a id="more"></a><h2 id="å®‰è£…-Nginx"><a href="#å®‰è£…-Nginx" class="headerlink" title="å®‰è£… Nginx"></a>å®‰è£… Nginx</h2><p>é¦–å…ˆï¼Œæ·»åŠ  <code>nginx_signing.key</code></p><pre class=" language-lang-shell"><code class="language-lang-shell">$ wget http://nginx.org/keys/nginx_signing.key$ wget http://nginx.org/keys/nginx_signing.key</code></pre><p>æ·»åŠ  Nginx å®˜æ–¹æº</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ echo &quot;deb http://nginx.org/packages/ubuntu/ trusty nginx&quot; &gt;&gt; /etc/apt/sources.list$ echo &quot;deb http://nginx.org/packages/ubuntu/ trusty nginx&quot; &gt;&gt; /etc/apt/sources.list</code></pre><p>å¦‚æœä½ æƒ³å®‰è£…Nginx1.9ä»¥ä¸Šçš„ç‰ˆæœ¬å¯ä»¥åœ¨<code>packages</code>åæ·»åŠ <code>/mainline</code>ï¼Œè¿™æ˜¯ä¸»çº¿ç‰ˆæœ¬</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ echo &quot;deb http://nginx.org/packages/mainline/ubuntu/ trusty nginx&quot; &gt;&gt; /etc/apt/sources.list$ echo &quot;deb-src http://nginx.org/packages/mainline/ubuntu/ trusty nginx&quot; &gt;&gt; /etc/apt/sources.list</code></pre><p>æ›´æ–°æºå¹¶å®‰è£… Nginx</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get update$ sudo apt-get install nginx// å¼€å¯ nginx$ /usr/sbin/nginx</code></pre><h4 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h4><p>åœ¨ <code>/etc/nginx/nginx.conf</code> æ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡ŒæŸ¥çœ‹ä½ çš„ <a href="http://nginx.org/">Nginx</a> ç”¨æˆ·ã€‚</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ less /etc/nginx/nginx.conf</code></pre><p><strong>ä¿®æ”¹ç”¨æˆ·å’Œç»„</strong></p><p><a href="http://php.net/">PHP7</a> é»˜è®¤çš„ç”¨æˆ·å’Œç»„æ˜¯<code>www-data</code>ã€‚ å¦‚æœä½ çš„ <a href="http://nginx.org/">Nginx</a> ç”¨æˆ·åä¹Ÿæ˜¯<code>www-data</code>ï¼Œé‚£ä¹ˆä¸éœ€è¦åšä¸‹é¢çš„ä¿®æ”¹ã€‚ å¦‚æœä½ çš„ <a href="http://nginx.org/">Nginx</a> ç”¨æˆ·åæ˜¯ nginxï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨/etc/nginx/nginx.confæ–‡ä»¶ä¸­å°†å®ƒä¿®æ”¹æˆ<code>www-data</code>.</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo vi /etc/nginx/nginx.conf</code></pre><p>é‡å¯ <a href="http://nginx.org/">Nginx</a> æœåŠ¡</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ nginx -s reload</code></pre><p><strong>Laravel é¡¹ç›® Nginx é…ç½®</strong></p><p>åœ¨ <code>/etc/nginx/conf.d</code> æ·»åŠ ä¸€ä¸ªæ–°çš„é…ç½®å³å¯ï¼Œé…ç½®å¦‚ä¸‹</p><pre><code>server {    listen 80;    server_name {domain_name};    charset utf-8;    access_log  /var/log/nginx/{name}.access.log  main;    error_log  /var/log/nginx/{name}.error.log warn;    root   /var/www/{project_name}/public;    index  index.php index.html index.htm;    gzip on;    gzip_min_length 1k;    gzip_buffers 4 16k;    gzip_http_version 1.0;    gzip_comp_level 6;    gzip_types text/plain application/javascript application/x-javascript text/xml text/css;    gzip_disable &amp;quot;MSIE [1-6]\.&amp;quot;;    gzip_vary on;    location / {        try_files $uri $uri/ /index.php?$query_string;    }    location ~ \.php$ {        try_files $uri /index.php =404;        fastcgi_split_path_info ^(.+\.php)(/.+)$;        fastcgi_pass unix:/run/php/php7.3-fpm.sock;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        fastcgi_param HTTP_X_FORWARDED_FOR &amp;#039;&amp;#039;;        fastcgi_param HTTP_X_REAL_IP &amp;#039;&amp;#039;;        fastcgi_param HTTP_CLIENT_IP &amp;#039;&amp;#039;;        fastcgi_param HTTP_PROXY &amp;#039;&amp;#039;;        include fastcgi_params;    }}</code></pre><p>&gt; {domain_name} - æ›¿æ¢æˆåŸŸå<br>&gt; {name} - ä¿å­˜çš„æ—¥å¿—å<br>&gt; {project_name} - é¡¹ç›®åå­—<br>&gt; root æ˜¯é¡¹ç›®å­˜æ”¾çš„åœ°å€ï¼Œè¿™ä¸ªæ ¹æ®è‡ªå·±å®é™…æƒ…å†µä¿®æ”¹</p><p>é…ç½®å¥½åé‡å¯ Nginx æœåŠ¡</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ nginx -s reload</code></pre><h3 id="å®‰è£…-PHP"><a href="#å®‰è£…-PHP" class="headerlink" title="å®‰è£… PHP"></a>å®‰è£… PHP</h3><p>æ·»åŠ  PPA</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get install python-software-properties software-properties-common$ sudo add-apt-repository ppa:ondrej/php$ sudo apt-get update</code></pre><p>å®‰è£… <a href="http://php.net/">PHP7</a> ä»¥åŠæ‰€éœ€çš„ä¸€äº›æ‰©å±•</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get install php7.3-fpm php7.3-mysql php7.3-common php7.3-curl php7.3-cli php7.3-mbstring php7.3-xml php7.3-bcmath</code></pre><p>é…ç½® <a href="http://php.net/">PHP7</a></p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo vim /etc/php/7.3/fpm/php.ini</code></pre><p>æ‰¾åˆ°<code>cgi.fix_pathinfo</code>é€‰é¡¹ï¼Œå»æ‰æ³¨é‡Šï¼Œç„¶åå°†å€¼è®¾ç½®ä¸º<code>0</code></p><pre class=" language-lang-ini"><code class="language-lang-ini">cgi.fix_pathinfo=0</code></pre><p>é‡å¯ <a href="http://php.net/">PHP7</a></p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo service php7.3-fpm restart</code></pre><h3 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get install mysql-server-5.7 mysql-client-5.7</code></pre><p>é€”ä¸­ä¼šæç¤ºè®¾ç½®MySQLçš„å¯†ç ï¼Œå®‰è£…åè¿è¡Œï¼š</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ mysql -uroot -p</code></pre><h3 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get git</code></pre><h3 id="å®‰è£…-Composer"><a href="#å®‰è£…-Composer" class="headerlink" title="å®‰è£… Composer"></a>å®‰è£… Composer</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ php -r &quot;copy(&#039;https://getcomposer.org/installer&#039;, &#039;composer-setup.php&#039;);&quot;$ php -r &quot;if (hash_file(&#039;SHA384&#039;, &#039;composer-setup.php&#039;) === &#039;93b54496392c062774670ac18b134c3b3a95e5a5e5c8f1a9f115f203b75bf9a129d5daa8ba6a13e2cc8a1da0806388a8&#039;) { echo &#039;Installer verified&#039;; } else { echo &#039;Installer corrupt&#039;; unlink(&#039;composer-setup.php&#039;); } echo PHP_EOL;&quot;$ php composer-setup.php$ php -r &quot;unlink(&#039;composer-setup.php&#039;);&quot;$ sudo mv composer.phar /usr/bin/composer</code></pre><h3 id="å®‰è£…-Certbot"><a href="#å®‰è£…-Certbot" class="headerlink" title="å®‰è£… Certbot"></a>å®‰è£… Certbot</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get update$ sudo apt-get install software-properties-common$ sudo add-apt-repository ppa:certbot/certbot$ sudo apt-get update$ sudo apt-get install python-certbot-nginx</code></pre><p>ç»™é¡¹ç›®è®¾ç½®è¯ä¹¦ï¼Œæ­¤å‘½ä»¤ä¼šè‡ªåŠ¨è®¾ç½® nginx é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®ã€‚</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo certbot --nginx</code></pre><h3 id="è®¾ç½®éƒ¨ç½²å…¬é’¥"><a href="#è®¾ç½®éƒ¨ç½²å…¬é’¥" class="headerlink" title="è®¾ç½®éƒ¨ç½²å…¬é’¥"></a>è®¾ç½®éƒ¨ç½²å…¬é’¥</h3><p>ä¸ºäº†æ–¹ä¾¿éƒ¨ç½²ç­‰ï¼Œè¿™ä¸€æ­¥å¿…é¡»è¦è®¾ç½®ï¼Œé¦–å…ˆç”Ÿæˆ <code>ssh-key</code></p><pre class=" language-lang-shell"><code class="language-lang-shell">$ ssh-keygen -t rsa -b 4096</code></pre><p>å°†å¯¹åº”çš„å…¬é’¥å¤åˆ¶ï¼Œå¹¶åœ¨å¯¹åº”çš„é¡¹ç›®ä»“åº“éƒ¨ç½²å…¬é’¥å¤„è®¾ç½®è¯»æƒé™</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ cat ~/.ssh/id_rsa.pub</code></pre><h3 id="å®‰è£…-Redis"><a href="#å®‰è£…-Redis" class="headerlink" title="å®‰è£… Redis"></a>å®‰è£… Redis</h3><pre class=" language-lang-shell"><code class="language-lang-shell">$ sudo apt-get install redis-server</code></pre><p>ä½¿ç”¨</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ redis-cli</code></pre><h3 id="å®‰è£…é¡¹ç›®"><a href="#å®‰è£…é¡¹ç›®" class="headerlink" title="å®‰è£…é¡¹ç›®"></a>å®‰è£…é¡¹ç›®</h3><p>ä¸‹è½½é¡¹ç›®</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ cd /var/www$ git clone git@....</code></pre><p>è®¾ç½®é¡¹ç›®è®¿é—®æƒé™</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ chown -R www-data:www-data {project_directory}</code></pre><p>&gt; åˆ‡å¿Œï¼šä¸è¦å°†é¡¹ç›®æƒé™è®¾ç½®ä¸º <strong>777</strong>ï¼Œé¡¹ç›®æƒé™åªèƒ½è®¾ç½®ä¸º <strong>755</strong></p><p>å®‰è£…é¡¹ç›®ä¾èµ–</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ composer install -vvv</code></pre><p>è®¾ç½®é¡¹ç›®é…ç½®</p><pre class=" language-lang-shell"><code class="language-lang-shell">$ cp .env.example .env</code></pre><p> æ¥è‡ªï¼š<a href="https://blog.csdn.net/qq175023117/article/details/84935300">https://blog.csdn.net/qq175023117/article/details/84935300</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>laravel5è·å–å½“å‰é¡µé¢çš„è·¯ç”±ä¸æ–¹æ³•ä»¥åŠRequestçš„ç”¨æ³•</title>
      <link href="2019/03/17/laravel/laravel5%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%B7%AF%E7%94%B1%E4%B8%8E%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8ARequest%E7%9A%84%E7%94%A8%E6%B3%95/"/>
      <url>2019/03/17/laravel/laravel5%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%B7%AF%E7%94%B1%E4%B8%8E%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8ARequest%E7%9A%84%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="laravel5è·å–å½“å‰é¡µé¢çš„è·¯ç”±ä¸æ–¹æ³•ä»¥åŠRequestçš„ç”¨æ³•"><a href="#laravel5è·å–å½“å‰é¡µé¢çš„è·¯ç”±ä¸æ–¹æ³•ä»¥åŠRequestçš„ç”¨æ³•" class="headerlink" title="laravel5è·å–å½“å‰é¡µé¢çš„è·¯ç”±ä¸æ–¹æ³•ä»¥åŠRequestçš„ç”¨æ³•"></a>laravel5è·å–å½“å‰é¡µé¢çš„è·¯ç”±ä¸æ–¹æ³•ä»¥åŠRequestçš„ç”¨æ³•</h3><a id="more"></a><p><strong>ä¸‹é¢ç»™å¤§å®¶ä¸€æ®µ è·å–å½“å‰é¡µé¢çš„è·¯ç”±ä¸æ–¹æ³•çš„ä»£ç ï¼š</strong></p><pre><code>$route = app('request')-&gt;route();if ($route) {    $action = app('request')-&gt;route()-&gt;getAction();    $controller = '@';    if (isset($action['controller'])) {       $controller = class_basename($action['controller']);    }    list($routeControllerName, $routeActionName) = explode('@', $controller);}</code></pre><p>æœ€åè·å–çš„$routeControllerNameä¸ºæ§åˆ¶å™¨çš„åå­—ï¼Œå¦‚ï¼šIndexController</p><p>æœ€åè·å–çš„$routeActionNameä¸ºæ§åˆ¶å™¨ä¸­æ–¹æ³•åï¼Œå¦‚ï¼šindex</p><h2 id="Requestç”¨æ³•ï¼š"><a href="#Requestç”¨æ³•ï¼š" class="headerlink" title="Requestç”¨æ³•ï¼š"></a>Requestç”¨æ³•ï¼š</h2><pre><code>// url: http://xx.com/aa/bb Request::url();// è·¯å¾„: /aa/bb Request::path();// è·å–è¯·æ±‚ Uri: /aa/bb/?c=d Request::getRequestUri();// è¿”å›ç”¨æˆ·çš„ IP Request::ip();// è·å– Uri: http://xx.com/aa/bb/?c=d Request::getUri();// è·å–æŸ¥è¯¢å­—ç¬¦ä¸²: c=d Request::getQueryString();// è·å–è¯·æ±‚ç«¯å£ (ä¾‹å¦‚ 80, 443 ç­‰ç­‰) Request::getPort();// åˆ¤æ–­å½“å‰è¯·æ±‚çš„ URI æ˜¯å¦å¯è¢«åŒ¹é… Request::is('foo/*');// è·å– URI çš„åˆ†æ®µå€¼ (ç´¢å¼•ä» 1 å¼€å§‹) Request::segment(1);// ä»è¯·æ±‚ä¸­å–å›å¤´éƒ¨ä¿¡æ¯ Request::header('Content-Type');// ä»è¯·æ±‚ä¸­å–å›æœåŠ¡å™¨å˜é‡ Request::server('PATH_INFO');// åˆ¤æ–­è¯·æ±‚æ˜¯å¦æ˜¯ AJAX è¯·æ±‚ Request::ajax();// åˆ¤æ–­è¯·æ±‚æ˜¯å¦ä½¿ç”¨ HTTPS Request::secure();// è·å–è¯·æ±‚æ–¹æ³• Request::method();// åˆ¤æ–­è¯·æ±‚æ–¹æ³•æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹çš„ Request::isMethod('post');// è·å–åŸå§‹çš„ POST æ•°æ® Request::instance()-&gt;getContent();// è·å–è¯·æ±‚è¦æ±‚è¿”å›çš„æ ¼å¼ Request::format();// åˆ¤æ–­ HTTP Content-Type å¤´éƒ¨ä¿¡æ¯æ˜¯å¦åŒ…å« */json Request::isJson();// åˆ¤æ–­ HTTP Accept å¤´éƒ¨ä¿¡æ¯æ˜¯å¦ä¸º application/json Request::wantsJson();</code></pre><hr><p> æ¥è‡ªï¼š<a href="https://blog.csdn.net/qq175023117/article/details/81948900">https://blog.csdn.net/qq175023117/article/details/81948900</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªæˆ‘ä»‹ç»</title>
      <link href="2019/03/16/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/"/>
      <url>2019/03/16/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p> WXiangQianï¼Œç‹å‘å‰ï¼Œç”·ï¼Œæ²³åŒ—çœçŸ³å®¶åº„äººã€‚<br> å·¥ä½œåœ°ç‚¹ï¼šåŒ—äº¬ã€‚<br> å²—ä½ï¼šPHPå¼€å‘å·¥ç¨‹å¸ˆã€‚<br> CSDNåšå®¢ä¸“å®¶ã€‚<br> è”ç³»æ–¹å¼ï¼š<br>    qq:175023117<br> <a href="https://wxiangqian.blog.csdn.net">CSDNåšå®¢åœ°å€</a>!<br> <a href="https://juejin.im/user/5d0c3900f265da1b5d57b2eb">æ˜é‡‘åœ°å€</a>!<br> <a href="https://github.com/WXiangQian">GitHubåœ°å€</a>! </p><p> PHPå¼€å‘å·¥ç¨‹å¸ˆåˆ†äº«å„ç§å®æˆ˜ç»éªŒã€é™ä½å­¦ä¹ æˆæœ¬ã€‚</p><ul><li>å…·æœ‰ SaaS å¹³å°ã€B2B2Cã€åœ¨çº¿æ•™è‚²ã€è¥é”€æ´»åŠ¨ç»éªŒ</li><li>å¤šæ¬¡å‚ä¸ä¼˜åŒ–ä»¥åŠé‡æ„ç°æœ‰ç³»ç»Ÿï¼Œæ”¯æ’‘ä¸šåŠ¡è¿›ä¸€æ­¥çš„å‘å±•</li><li>å…·å¤‡è¾ƒå¼ºçš„å­¦ä¹ èƒ½åŠ›ï¼Œäº†è§£æ–°çš„æŠ€æœ¯å‘å±•æ–¹å‘</li><li>é€»è¾‘æ€ç»´ä¸¥å¯†ï¼Œé—®é¢˜åˆ†æé€å½»å…¨é¢</li></ul><ol><li>ç†Ÿç»ƒä½¿ç”¨ Laravelã€Lumen ä»¥åŠ ThinkPHP æ¡†æ¶å¼€å‘</li><li>ç†Ÿç»ƒæŒæ¡ PHP è®¾è®¡æ¨¡å¼ã€OOP ç‰¹æ€§ã€PSR è§„èŒƒã€Trait ç±»</li><li>ç†Ÿç»ƒå¼€å‘ Api æ¥å£ä»¥åŠç¼–å†™ Swagger æ–‡æ¡£ã€ShowDoc æ–‡æ¡£ã€å•å…ƒæµ‹è¯•</li><li>ç†Ÿç»ƒä½¿ç”¨ MySQLï¼ŒSQL æŸ¥è¯¢ä»¥åŠä¼˜åŒ–ã€ORM æŸ¥è¯¢æ“ä½œã€æ•°æ®åº“ç´¢å¼•çš„è®¾è®¡</li><li>ç†Ÿç»ƒä½¿ç”¨ Git åˆ†æ”¯ç®¡ç†ä»¥åŠå¼€å‘,ç†ŸçŸ¥ Git Flow å·¥ä½œæµ</li><li>ç†Ÿç»ƒæŒæ¡ Linux ç³»ç»Ÿçš„åŸºæœ¬å‘½ä»¤ï¼ŒLNMP ç¯å¢ƒçš„æ­å»ºã€é…ç½®ä»¥åŠæ›´æ”¹</li><li>ç†Ÿç»ƒä½¿ç”¨ Redisã€MongoDB ç­‰æŠ€æœ¯ï¼ŒæŒæ¡ Redis äº”ç§æ•°æ®ç±»å‹çš„å®æˆ˜</li><li>ç†Ÿç»ƒå¯¹æ¥ç¬¬ä¸‰æ–¹å¹³å°ï¼Œå¦‚:é«˜å¾·ã€é˜¿é‡Œäº‘ã€å°ç±³æ¨é€ã€é“¶è”æ”¯ä»˜ã€æµ·å°”é‡‘èã€ç½‘æ˜“æ˜“ç›¾ç­‰</li><li>ç†Ÿç»ƒå¼€å‘ Composer åŒ…ï¼ˆlaravel-pushã€laravel-dingtalkï¼‰</li><li>ç†Ÿæ‚‰ HTMLã€CSSã€JavaScriptã€Ajaxã€jQueryã€Bootstrapã€Layui</li><li>ç†Ÿæ‚‰å¾®ä¿¡å°ç¨‹åºã€å¾®ä¿¡å…¬ä¼—å·ã€å¾®ä¿¡æ”¯ä»˜</li><li>æŒæ¡ Python çˆ¬è™«ã€laravel-mix</li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
